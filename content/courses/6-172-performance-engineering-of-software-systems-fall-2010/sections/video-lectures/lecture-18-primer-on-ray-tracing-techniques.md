---
about_this_resource_text: <p><strong>Description:</strong> Primer on ray tracing techniques,
  given to prepare students for the final project. Includes some ray tracing background
  and a code overview covering classes and high-level execution.</p> <p><strong>Speaker:</strong>
  Joshua Slocum</p>
content_type: resource
course_id: 6-172-performance-engineering-of-software-systems-fall-2010
embedded_media:
- id: Video-InternetArchive-MP4
  media_location: http://www.archive.org/download/MIT6.172F10/MIT6_172_F10_lec18_300k.mp4
  parent_uid: c6e4162ac7ff2751163c1ff674e0f03b
  title: Video-Internet Archive-MP4
  type: Video
  uid: eeedd5e058b81811de026b91cd9fc503
- id: Video-iTunesU-MP4
  media_location: http://itunes.apple.com/us/itunes-u/lecture-18-primer-on-ray-tracing/id481759887?i=109649100
  parent_uid: c6e4162ac7ff2751163c1ff674e0f03b
  title: Video-iTunes U-MP4
  type: Video
  uid: e38815c01d31a9ad6252c773d6dc7d47
- id: Video-YouTube-Stream
  media_location: c45ieqaUU4k
  parent_uid: c6e4162ac7ff2751163c1ff674e0f03b
  title: Video-YouTube-Stream
  type: Video
  uid: b494994bf25e4cb5bf740f0917c5188a
- id: Thumbnail-YouTube-JPG
  media_location: https://img.youtube.com/vi/c45ieqaUU4k/default.jpg
  parent_uid: c6e4162ac7ff2751163c1ff674e0f03b
  title: Thumbnail-YouTube-JPG
  type: Thumbnail
  uid: ab8a85a8a77e2883e1dd84f5c04e46c7
- id: MIT6_172F10_lec18.pdf
  parent_uid: c6e4162ac7ff2751163c1ff674e0f03b
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-172-performance-engineering-of-software-systems-fall-2010/video-lectures/lecture-18-primer-on-ray-tracing-techniques/MIT6_172F10_lec18.pdf
  title: MIT6_172F10_lec18.pdf
  type: null
  uid: 5292bc97a1686f24c673c987137133ee
- id: 3Play-3PlayYouTubeid-MP4
  media_location: c45ieqaUU4k
  parent_uid: c6e4162ac7ff2751163c1ff674e0f03b
  title: 3Play-3Play YouTube id
  type: 3Play
  uid: f80faad4cfa7042f048597371aa844d0
- id: c45ieqaUU4k.srt
  parent_uid: c6e4162ac7ff2751163c1ff674e0f03b
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-172-performance-engineering-of-software-systems-fall-2010/video-lectures/lecture-18-primer-on-ray-tracing-techniques/c45ieqaUU4k.srt
  title: 3play caption file
  type: null
  uid: 341c0541ec55207061ed4c8345b34a5a
- id: c45ieqaUU4k.pdf
  parent_uid: c6e4162ac7ff2751163c1ff674e0f03b
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-172-performance-engineering-of-software-systems-fall-2010/video-lectures/lecture-18-primer-on-ray-tracing-techniques/c45ieqaUU4k.pdf
  title: 3play pdf file
  type: null
  uid: 55ee1b6ff7c598302563c5b78557e144
- id: Caption-3Play YouTube id-SRT
  parent_uid: c6e4162ac7ff2751163c1ff674e0f03b
  title: Caption-3Play YouTube id-SRT-English - US
  type: Caption
  uid: 031f4acfe1438dbdf6dfc5a1d265005b
- id: Transcript-3Play YouTube id-PDF
  parent_uid: c6e4162ac7ff2751163c1ff674e0f03b
  title: Transcript-3Play YouTube id-PDF-English - US
  type: Transcript
  uid: 1f442b919f231eb3b96b071a03aade14
file: null
file_size: null
hide_download: true
hide_download_original: null
inline_embed_id: 65588380lecture18:primeronraytracingtechniques39719517
layout: video
license: https://creativecommons.org/licenses/by-nc-sa/4.0/
order_index: 203
parent_uid: 24169d0487e846a39c316276f85b8cb5
related_resources_text: ''
short_url: lecture-18-primer-on-ray-tracing-techniques
technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-172-performance-engineering-of-software-systems-fall-2010/video-lectures/lecture-18-primer-on-ray-tracing-techniques
title: 'Lecture 18: Primer on Ray Tracing Techniques'
transcript: '<p><span m=''120''>The</span> <span m=''190''>following</span> <span
  m=''630''>content</span> <span m=''1230''>is</span> <span m=''1340''>provided</span>
  <span m=''1790''>under</span> <span m=''2070''>a</span> <span m=''2090''>Creative</span>
  <span m=''2500''>Commons</span> <span m=''2910''>license.</span> <span m=''3910''>Your</span>
  <span m=''4200''>support</span> <span m=''4700''>will</span> <span m=''4870''>help</span>
  <span m=''5100''>MIT</span> <span m=''5580''>OpenCourseWare</span> <span m=''6360''>continue</span>
  <span m=''6870''>to</span> <span m=''6950''>offer</span> <span m=''7380''>high</span>
  <span m=''7590''>quality</span> <span m=''8119''>educational</span> <span m=''8740''>resources</span>
  <span m=''9390''>for</span> <span m=''9520''>free.</span> <span m=''10600''>To</span>
  <span m=''10730''>make</span> <span m=''10930''>a</span> <span m=''10980''>donation</span>
  <span m=''11620''>or</span> <span m=''11930''>view</span> <span m=''12340''>additional</span>
  <span m=''12800''>materials</span> <span m=''13340''>from</span> <span m=''13500''>hundreds</span>
  <span m=''13930''>of</span> <span m=''14040''>MIT</span> <span m=''14460''>courses,</span>
  <span m=''15460''>visit</span> <span m=''15790''>MIT</span> <span m=''16219''>OpenCourseWare</span>
  <span m=''17250''>at</span> <span m=''17430''>ocw.mit.edu.</span> </p><p><span m=''22940''>PROFESSOR:
  All</span> <span m=''23420''>right.</span> <span m=''23900''>We''re going to get</span>
  <span m=''24380''>started now.</span> <span m=''25340''>For</span> <span m=''26120''>those</span>
  <span m=''26330''>of</span> <span m=''26380''>you</span> <span m=''26510''>who don''t</span>
  <span m=''26790''>know me,</span> <span m=''27160''>I''m</span> <span m=''27520''>Josh</span>
  <span m=''27860''>Slocum,</span> <span m=''28510''>one</span> <span m=''28700''>of</span>
  <span m=''28770''>your</span> <span m=''29175''>TAs.</span> <span m=''30240''>And</span>
  <span m=''30560''>today''s</span> <span m=''30820''>lecture</span> <span m=''31170''>is</span>
  <span m=''31260''>going</span> <span m=''31410''>to</span> <span m=''31560''>be</span>
  <span m=''31860''>a</span> <span m=''32000''>primer</span> <span m=''32460''>on</span>
  <span m=''32680''>ray</span> <span m=''33055''>tracing</span> <span m=''33430''>to</span>
  <span m=''33510''>help</span> <span m=''33730''>you</span> <span m=''33990''>get</span>
  <span m=''34160''>started</span> <span m=''34770''>on</span> <span m=''35080''>the</span>
  <span m=''35160''>final</span> <span m=''35490''>project.</span> </p><p><span m=''41200''>So</span>
  <span m=''41360''>first,</span> <span m=''41540''>we''re</span> <span m=''41630''>going
  to</span> <span m=''41730''>start</span> <span m=''42060''>with</span> <span m=''42240''>a</span>
  <span m=''42300''>little</span> <span m=''42460''>background.</span> <span m=''43870''>Tell</span>
  <span m=''44030''>you</span> <span m=''44130''>about</span> <span m=''44630''>ray</span>
  <span m=''44973''>tracing.</span> <span m=''46190''>Ray</span> <span m=''46400''>tracing</span>
  <span m=''47750''>is</span> <span m=''47880''>essentially</span> <span m=''48650''>a</span>
  <span m=''48770''>physics</span> <span m=''49250''>simulation.</span> <span m=''50510''>You</span>
  <span m=''50650''>simulate</span> <span m=''51180''>the</span> <span m=''51260''>way</span>
  <span m=''51480''>photons</span> <span m=''52360''>bounce</span> <span m=''52790''>around</span>
  <span m=''53400''>and</span> <span m=''53570''>interact</span> <span m=''54070''>with</span>
  <span m=''54170''>materials.</span> <span m=''55670''>And</span> <span m=''56020''>from</span>
  <span m=''56210''>that,</span> <span m=''56650''>you</span> <span m=''56760''>generate</span>
  <span m=''57960''>an</span> <span m=''58150''>image</span> <span m=''58660''>of</span>
  <span m=''58790''>a</span> <span m=''58880''>scene.</span> </p><p><span m=''61050''>It''s</span>
  <span m=''61830''>extremely</span> <span m=''62360''>parallel</span> <span m=''62950''>because</span>
  <span m=''63880''>you</span> <span m=''64030''>can</span> <span m=''64390''>trace
  a</span> <span m=''64440''>whole</span> <span m=''64599''>bunch</span> <span m=''64860''>of</span>
  <span m=''65080''>photons</span> <span m=''65590''>bouncing</span> <span m=''66000''>around</span>
  <span m=''66370''>at</span> <span m=''66450''>the</span> <span m=''66520''>same</span>
  <span m=''66810''>time.</span> <span m=''70008''>And it</span> <span m=''70490''>has</span>
  <span m=''70650''>a</span> <span m=''71280''>huge</span> <span m=''71760''>capacity</span>
  <span m=''72420''>for</span> <span m=''72740''>photorealism.</span> <span m=''74610''>So</span>
  <span m=''75150''>like</span> <span m=''75400''>this</span> <span m=''75760''>sample</span>
  <span m=''76100''>seen</span> <span m=''76380''>here,</span> <span m=''77100''>you</span>
  <span m=''77210''>have</span> <span m=''77450''>all</span> <span m=''77560''>sorts</span>
  <span m=''77910''>of</span> <span m=''78550''>reflections</span> <span m=''79690''>and</span>
  <span m=''80020''>light</span> <span m=''80350''>working</span> <span m=''80770''>in</span>
  <span m=''80870''>ways</span> <span m=''81170''>that you</span> <span m=''81350''>don''t</span>
  <span m=''81690''>see</span> <span m=''82000''>in</span> <span m=''82140''>a</span>
  <span m=''82220''>normal</span> <span m=''82540''>rendering</span> <span m=''82990''>program.</span>
  </p><p><span m=''87200''>The</span> <span m=''87390''>final</span> <span m=''87700''>project,</span>
  <span m=''90020''>as</span> <span m=''90220''>you know</span> <span m=''90600''>if</span>
  <span m=''90700''>you''ve</span> <span m=''90980''>read</span> <span m=''91140''>the</span>
  <span m=''91210''>handout,</span> <span m=''92190''>is</span> <span m=''92450''>going</span>
  <span m=''92590''>to</span> <span m=''92730''>be</span> <span m=''93360''>groups</span>
  <span m=''93740''>of</span> <span m=''94030''>two</span> <span m=''94250''>or</span>
  <span m=''94320''>three</span> <span m=''94550''>people</span> <span m=''94920''>each.</span>
  <span m=''96580''>And</span> <span m=''97250''>you''ll</span> <span m=''97690''>be</span>
  <span m=''97810''>given</span> <span m=''98600''>a</span> <span m=''98740''>working</span>
  <span m=''99230''>ray</span> <span m=''99410''>tracer</span> <span m=''99810''>program.</span>
  <span m=''100840''>A</span> <span m=''101060''>very</span> <span m=''101310''>slow</span>
  <span m=''101610''>one,</span> <span m=''102240''>but</span> <span m=''102450''>one</span>
  <span m=''102590''>that</span> <span m=''102700''>works.</span> <span m=''104370''>And</span>
  <span m=''104530''>your</span> <span m=''105520''>objective</span> <span m=''106000''>is</span>
  <span m=''106130''>to</span> <span m=''106210''>make</span> <span m=''106390''>it</span>
  <span m=''106490''>run</span> <span m=''106810''>as</span> <span m=''107060''>fast</span>
  <span m=''107370''>as</span> <span m=''107500''>possible.</span> </p><p><span m=''108840''>You
  can</span> <span m=''108940''>do</span> <span m=''109060''>pretty</span> <span m=''109250''>much</span>
  <span m=''109400''>anything</span> <span m=''109790''>you</span> <span m=''109920''>want</span>
  <span m=''110860''>with</span> <span m=''110960''>a</span> <span m=''111070''>few</span>
  <span m=''111230''>restrictions</span> <span m=''111850''>we''ll</span> <span m=''111970''>talk</span>
  <span m=''112200''>about</span> <span m=''112440''>later.</span> <span m=''113680''>You</span>
  <span m=''114050''>can</span> <span m=''117020''>make</span> <span m=''117390''>algorithmic</span>
  <span m=''117990''>improvements,</span> <span m=''119910''>parallelize</span> <span
  m=''120770''>it,</span> <span m=''121910''>change</span> <span m=''122250''>the</span>
  <span m=''122350''>way</span> <span m=''122690''>the</span> <span m=''123010''>rendering</span>
  <span m=''123440''>works</span> <span m=''124090''>slightly.</span> <span m=''125780''>All</span>
  <span m=''125940''>sorts</span> <span m=''126210''>of</span> <span m=''126300''>things.</span>
  <span m=''126640''>Pretty</span> <span m=''126960''>much anything you</span> <span
  m=''127280''>can</span> <span m=''127450''>think</span> <span m=''127690''>of.</span>
  </p><p><span m=''129310''>The</span> <span m=''129590''>only</span> <span m=''129880''>deliverables</span>
  <span m=''130680''>for</span> <span m=''130750''>the</span> <span m=''130840''>final</span>
  <span m=''131150''>project</span> <span m=''131650''>are</span> <span m=''132780''>the</span>
  <span m=''132920''>preliminary</span> <span m=''133670''>report</span> <span m=''135050''>due</span>
  <span m=''135190''>next</span> <span m=''135510''>week,</span> <span m=''137150''>in</span>
  <span m=''137300''>which</span> <span m=''137550''>you''ll</span> <span m=''137640''>have</span>
  <span m=''137920''>to</span> <span m=''138260''>show</span> <span m=''138520''>us</span>
  <span m=''138810''>that you''ve</span> <span m=''139160''>profiled</span> <span
  m=''139850''>the</span> <span m=''139920''>project,</span> <span m=''141050''>tell</span>
  <span m=''141310''>us</span> <span m=''143210''>what</span> <span m=''143880''>hot</span>
  <span m=''144130''>spots</span> <span m=''144510''>you''ve</span> <span m=''144670''>identified,</span>
  <span m=''145470''>and</span> <span m=''145890''>ideas</span> <span m=''146290''>you</span>
  <span m=''146530''>have</span> <span m=''146770''>for</span> <span m=''146960''>speeding</span>
  <span m=''147310''>up</span> <span m=''147420''>the</span> <span m=''147520''>ray</span>
  <span m=''147690''>tracer,</span> <span m=''148760''>as</span> <span m=''148850''>well</span>
  <span m=''148970''>as</span> <span m=''149090''>any</span> <span m=''149830''>actual</span>
  <span m=''150200''>work</span> <span m=''150460''>you''ve</span> <span m=''150610''>already</span>
  <span m=''150910''>done.</span> </p><p><span m=''153210''>The</span> <span m=''153340''>final</span>
  <span m=''153670''>project</span> <span m=''154230''>comes</span> <span m=''154550''>with</span>
  <span m=''154700''>two</span> <span m=''154910''>built-in</span> <span m=''155480''>scenes</span>
  <span m=''156820''>that</span> <span m=''157190''>can</span> <span m=''157330''>be</span>
  <span m=''157470''>ray</span> <span m=''157910''>traced.</span> <span m=''159260''>Scene</span>
  <span m=''159600''>one,</span> <span m=''161090''>this</span> <span m=''161300''>one</span>
  <span m=''161460''>here,</span> <span m=''162800''>is</span> <span m=''165580''>rendered</span>
  <span m=''166100''>much</span> <span m=''166340''>faster</span> <span m=''166810''>than</span>
  <span m=''167000''>scene</span> <span m=''167350''>two.</span> <span m=''169690''>And</span>
  <span m=''170020''>you''re</span> <span m=''170120''>going</span> <span m=''170190''>to</span>
  <span m=''170270''>want</span> <span m=''170400''>to</span> <span m=''170540''>work</span>
  <span m=''170750''>on</span> <span m=''170840''>that</span> <span m=''171010''>one</span>
  <span m=''171375''>first.</span> <span m=''172730''>And</span> <span m=''172890''>then,</span>
  <span m=''173120''>there''s</span> <span m=''173250''>scene</span> <span m=''173570''>two,</span>
  <span m=''173860''>which</span> <span m=''174090''>is</span> <span m=''174430''>slightly</span>
  <span m=''174840''>different.</span> <span m=''175470''>It has</span> <span m=''175920''>water</span>
  <span m=''176550''>and</span> <span m=''176870''>one</span> <span m=''177050''>less</span>
  <span m=''177390''>sphere.</span> </p><p><span m=''181430''>These</span> <span m=''181700''>are</span>
  <span m=''181740''>the</span> <span m=''182350''>restrictions</span> <span m=''183710''>on</span>
  <span m=''184110''>what</span> <span m=''184250''>you</span> <span m=''184350''>can</span>
  <span m=''184570''>do</span> <span m=''184750''>for</span> <span m=''184870''>the</span>
  <span m=''184980''>final</span> <span m=''185320''>project.</span> <span m=''186650''>The</span>
  <span m=''186780''>purpose</span> <span m=''187100''>of</span> <span m=''187170''>these</span>
  <span m=''187360''>restrictions</span> <span m=''188500''>is</span> <span m=''188800''>basically</span>
  <span m=''189170''>just</span> <span m=''189350''>to</span> <span m=''189420''>make</span>
  <span m=''189590''>sure</span> <span m=''189800''>that</span> <span m=''190270''>everyone''s</span>
  <span m=''190670''>ray</span> <span m=''190830''>tracer</span> <span m=''192500''>is</span>
  <span m=''192690''>doing</span> <span m=''192980''>the</span> <span m=''193050''>same</span>
  <span m=''193380''>thing.</span> <span m=''193850''>So</span> <span m=''194090''>you''re</span>
  <span m=''194250''>all</span> <span m=''194370''>working</span> <span m=''194720''>on</span>
  <span m=''194810''>the</span> <span m=''194860''>same</span> <span m=''195170''>problem,</span>
  <span m=''196950''>and</span> <span m=''197110''>you''re</span> <span m=''197200''>not</span>
  <span m=''197360''>achieving</span> <span m=''197970''>speed</span> <span m=''198280''>ups</span>
  <span m=''198530''>by</span> <span m=''199260''>simplifying</span> <span m=''200040''>out</span>
  <span m=''200290''>some</span> <span m=''200620''>functionality</span> <span m=''201870''>of</span>
  <span m=''202170''>the</span> <span m=''202550''>program.</span> </p><p><span m=''205982''>Does</span>
  <span m=''206450''>anyone</span> <span m=''206700''>have</span> <span m=''206910''>any</span>
  <span m=''207240''>questions</span> <span m=''207760''>about the</span> <span m=''208030''>final</span>
  <span m=''208300''>project</span> <span m=''208730''>before</span> <span m=''208990''>I</span>
  <span m=''209010''>move</span> <span m=''209220''>on?</span> <span m=''215408''>All
  right.</span> <span m=''217610''>Go</span> <span m=''217790''>ahead.</span> </p><p><span
  m=''218743''>AUDIENCE: [INAUDIBLE]</span> <span m=''219820''>we''re</span> <span
  m=''219920''>going</span> <span m=''220070''>to</span> <span m=''220110''>do</span>
  <span m=''220506''>a</span> <span m=''221300''>third</span> <span m=''221420''>scene</span>
  <span m=''221866''>similar</span> <span m=''222312''>to the</span> <span m=''222760''>first</span>
  <span m=''223195''>two,</span> <span m=''223630''>right?</span> </p><p><span m=''224030''>PROFESSOR:
  Oh.</span> <span m=''224430''>Yeah.</span> <span m=''226630''>In</span> <span m=''226810''>order</span>
  <span m=''227240''>to</span> <span m=''227650''>make</span> <span m=''227870''>sure</span>
  <span m=''228390''>that</span> <span m=''228960''>you''re</span> <span m=''229090''>following</span>
  <span m=''229720''>these</span> <span m=''229950''>rules,</span> <span m=''231230''>we''re</span>
  <span m=''231480''>going</span> <span m=''231850''>to</span> <span m=''232500''>test</span>
  <span m=''232810''>your</span> <span m=''233130''>ray</span> <span m=''233486''>tracer</span>
  <span m=''234200''>on</span> <span m=''234620''>one</span> <span m=''234920''>or</span>
  <span m=''234960''>more</span> <span m=''235260''>other</span> <span m=''235490''>scenes</span>
  <span m=''235820''>and</span> <span m=''235920''>make</span> <span m=''236080''>sure</span>
  <span m=''236240''>that</span> <span m=''236430''>they</span> <span m=''236560''>render</span>
  <span m=''236900''>properly.</span> <span m=''238040''>But</span> <span m=''238150''>these</span>
  <span m=''238360''>are</span> <span m=''238400''>the</span> <span m=''238650''>two</span>
  <span m=''238860''>scenes</span> <span m=''239380''>that</span> <span m=''239540''>you
  will</span> <span m=''239760''>be</span> <span m=''239860''>benchmarked</span> <span
  m=''240510''>on</span> <span m=''240840''>for</span> <span m=''241030''>your</span>
  <span m=''241120''>performance</span> <span m=''241650''>grade.</span> </p><p><span
  m=''248380''>All right.</span> <span m=''248880''>Next,</span> <span m=''249170''>we''re</span>
  <span m=''249280''>going</span> <span m=''249540''>to</span> <span m=''250510''>go</span>
  <span m=''250700''>over</span> <span m=''252320''>how</span> <span m=''252540''>ray</span>
  <span m=''252855''>tracing</span> <span m=''253170''>works</span> <span m=''253780''>and</span>
  <span m=''254690''>the</span> <span m=''255040''>big</span> <span m=''255260''>concepts</span>
  <span m=''256990''>used</span> <span m=''257300''>in</span> <span m=''257480''>the</span>
  <span m=''257890''>ray</span> <span m=''258029''>tracer</span> <span m=''258480''>you''ll</span>
  <span m=''258660''>be</span> <span m=''258750''>working</span> <span m=''259320''>on.</span>
  <span m=''261550''>So</span> <span m=''261779''>the</span> <span m=''261870''>basic</span>
  <span m=''262330''>idea</span> <span m=''262630''>behind</span> <span m=''262940''>the</span>
  <span m=''263000''>rendering</span> <span m=''264090''>is</span> <span m=''264890''>you''re</span>
  <span m=''265020''>going</span> <span m=''265310''>to</span> <span m=''265470''>construct</span>
  <span m=''266050''>a</span> <span m=''266160''>geometric</span> <span m=''266790''>model</span>
  <span m=''267850''>of</span> <span m=''268050''>the</span> <span m=''268120''>scene</span>
  <span m=''268420''>you</span> <span m=''268520''>want</span> <span m=''268680''>to</span>
  <span m=''268810''>render,</span> <span m=''270300''>and</span> <span m=''270440''>so
  it</span> <span m=''270720''>will</span> <span m=''270880''>be made</span> <span
  m=''271110''>of</span> <span m=''271230''>polygons,</span> <span m=''272160''>or</span>
  <span m=''272240''>spheres,</span> <span m=''272860''>or</span> <span m=''272950''>planes.</span>
  </p><p><span m=''275690''>And</span> <span m=''275890''>then</span> <span m=''276460''>within</span>
  <span m=''276760''>that</span> <span m=''276920''>model,</span> <span m=''277260''>you</span>
  <span m=''277430''>insert</span> <span m=''278380''>a</span> <span m=''278470''>grid</span>
  <span m=''278670''>of</span> <span m=''278780''>pixels.</span> <span m=''279490''>They''ll</span>
  <span m=''279740''>form</span> <span m=''280240''>the</span> <span m=''280420''>image</span>
  <span m=''280780''>you''re</span> <span m=''280860''>going</span> <span m=''281070''>to</span>
  <span m=''281150''>render.</span> <span m=''282240''>And</span> <span m=''282400''>then,</span>
  <span m=''282560''>you</span> <span m=''282650''>just</span> <span m=''282860''>project</span>
  <span m=''283210''>the</span> <span m=''283310''>scene</span> <span m=''283820''>onto</span>
  <span m=''284180''>the</span> <span m=''284260''>grid</span> <span m=''284430''>of</span>
  <span m=''284510''>pixels,</span> <span m=''285110''>and</span> <span m=''285920''>you</span>
  <span m=''286120''>have</span> <span m=''286330''>some</span> <span m=''286600''>image.</span>
  <span m=''289090''>The</span> <span m=''289190''>way</span> <span m=''289400''>you
  do</span> <span m=''289610''>this</span> <span m=''289930''>with</span> <span m=''290120''>ray</span>
  <span m=''290590''>tracing</span> <span m=''291830''>is</span> <span m=''292050''>you
  use</span> <span m=''292290''>a</span> <span m=''292350''>method</span> <span m=''292870''>called</span>
  <span m=''293100''>ray</span> <span m=''293270''>casting</span> <span m=''294560''>where</span>
  <span m=''295350''>you</span> <span m=''295490''>take</span> <span m=''296490''>some</span>
  <span m=''296820''>camera</span> <span m=''298180''>and</span> <span m=''298610''>cast</span>
  <span m=''298990''>rays</span> <span m=''300140''>through</span> <span m=''300490''>each</span>
  <span m=''300680''>pixel</span> <span m=''301160''>onto</span> <span m=''301450''>the</span>
  <span m=''301540''>scene.</span> <span m=''302920''>And</span> <span m=''303220''>then,</span>
  <span m=''303900''>whatever</span> <span m=''304300''>color</span> <span m=''304940''>object</span>
  <span m=''305810''>the</span> <span m=''306170''>ray hits</span> <span m=''306530''>is</span>
  <span m=''306720''>the</span> <span m=''306810''>color</span> <span m=''307690''>that</span>
  <span m=''307890''>that pixel</span> <span m=''308240''>gets</span> <span m=''308330''>shaded</span>
  <span m=''309250''>in</span> <span m=''309380''>the</span> <span m=''309460''>scene.</span>
  </p><p><span m=''313710''>This</span> <span m=''314050''>method</span> <span m=''314570''>of</span>
  <span m=''314810''>tracing</span> <span m=''315240''>rays is</span> <span m=''315660''>called</span>
  <span m=''316550''>backwards</span> <span m=''317090''>ray</span> <span m=''317310''>tracing,</span>
  <span m=''318490''>because</span> <span m=''318820''>you''re</span> <span m=''318940''>going</span>
  <span m=''319170''>in</span> <span m=''319360''>opposite</span> <span m=''321110''>direction</span>
  <span m=''321570''>that</span> <span m=''321710''>photons</span> <span m=''322840''>go</span>
  <span m=''323060''>in</span> <span m=''323420''>when</span> <span m=''323610''>you''re</span>
  <span m=''323700''>actually</span> <span m=''324020''>observing</span> <span m=''324400''>something.</span>
  <span m=''325790''>So</span> <span m=''326165''>if</span> <span m=''326540''>this</span>
  <span m=''326730''>was</span> <span m=''326920''>an</span> <span m=''327050''>actual</span>
  <span m=''327420''>scene,</span> <span m=''327660''>you''d</span> <span m=''327820''>have</span>
  <span m=''327990''>light</span> <span m=''328400''>bouncing</span> <span m=''328850''>here</span>
  <span m=''329190''>and</span> <span m=''329370''>into you''re</span> <span m=''329610''>eye.</span>
  <span m=''330560''>Whereas</span> <span m=''330970''>what</span> <span m=''331100''>you''re</span>
  <span m=''331190''>doing is</span> <span m=''331450''>you''re</span> <span m=''331570''>tracing</span>
  <span m=''331950''>backwards</span> <span m=''332400''>from</span> <span m=''332560''>the</span>
  <span m=''332680''>eye to the</span> <span m=''333110''>object.</span> </p><p><span
  m=''336150''>Ray</span> <span m=''336410''>casting--</span> <span m=''337710''>this</span>
  <span m=''337900''>image</span> <span m=''338140''>here</span> <span m=''338290''>is</span>
  <span m=''338400''>a</span> <span m=''338570''>ray</span> <span m=''339100''>image--</span>
  <span m=''339930''>is</span> <span m=''340070''>very</span> <span m=''340310''>primitive.</span>
  <span m=''341480''>It</span> <span m=''341560''>doesn''t</span> <span m=''341770''>really</span>
  <span m=''341950''>get</span> <span m=''342100''>you</span> <span m=''342260''>much.</span>
  <span m=''344130''>So</span> <span m=''345340''>what you</span> <span m=''345560''>can</span>
  <span m=''345720''>do</span> <span m=''346080''>is</span> <span m=''346350''>you</span>
  <span m=''346600''>can</span> <span m=''346900''>improve</span> <span m=''347400''>your</span>
  <span m=''347530''>physics</span> <span m=''347900''>simulation</span> <span m=''349170''>by</span>
  <span m=''349500''>adding</span> <span m=''349810''>a</span> <span m=''349830''>whole</span>
  <span m=''349960''>bunch</span> <span m=''351110''>more</span> <span m=''351320''>things</span>
  <span m=''351620''>on</span> <span m=''351740''>top</span> <span m=''352060''>of
  it,</span> <span m=''354040''>like</span> <span m=''354570''>shadows,</span> <span
  m=''354925''>and</span> <span m=''355540''>reflections,</span> <span m=''356410''>and</span>
  <span m=''357300''>global</span> <span m=''357640''>illumination.</span> <span m=''360090''>All</span>
  <span m=''360260''>sorts</span> <span m=''360530''>of</span> <span m=''360650''>fun</span>
  <span m=''360840''>stuff.</span> </p><p><span m=''363450''>So</span> <span m=''364190''>if</span>
  <span m=''364340''>you</span> <span m=''364490''>want</span> <span m=''364770''>to</span>
  <span m=''364910''>start</span> <span m=''365940''>simulating</span> <span m=''366540''>shadows,</span>
  <span m=''367310''>and</span> <span m=''367430''>reflections,</span> <span m=''368200''>and
  defraction,</span> <span m=''369300''>you</span> <span m=''369690''>need to</span>
  <span m=''369890''>start</span> <span m=''370190''>recursively</span> <span m=''370830''>casting</span>
  <span m=''371290''>rays,</span> <span m=''372040''>which</span> <span m=''372460''>is</span>
  <span m=''372660''>called</span> <span m=''372910''>ray</span> <span m=''373120''>tracing.</span>
  <span m=''375460''>So</span> <span m=''376020''>when</span> <span m=''376460''>your</span>
  <span m=''376975''>ray</span> <span m=''377270''>bounces</span> <span m=''378060''>off</span>
  <span m=''378320''>of</span> <span m=''378480''>an</span> <span m=''378570''>object,</span>
  <span m=''379660''>you can</span> <span m=''379870''>cast</span> <span m=''380860''>a</span>
  <span m=''380950''>reflection</span> <span m=''381500''>ray</span> <span m=''382690''>at</span>
  <span m=''383160''>the</span> <span m=''383350''>same</span> <span m=''383770''>angle</span>
  <span m=''384410''>mirrored</span> <span m=''385250''>from</span> <span m=''385560''>the</span>
  <span m=''385690''>perpendicular</span> <span m=''386370''>of</span> <span m=''386440''>the</span>
  <span m=''386570''>object</span> <span m=''387660''>and</span> <span m=''388800''>see</span>
  <span m=''389130''>what</span> <span m=''389300''>color</span> <span m=''389990''>object</span>
  <span m=''390410''>that</span> <span m=''390600''>ray</span> <span m=''390955''>hits,</span>
  <span m=''391650''>and</span> <span m=''391890''>then,</span> <span m=''392270''>shade</span>
  <span m=''392560''>this</span> <span m=''392740''>object</span> <span m=''393040''>with</span>
  <span m=''393140''>that</span> <span m=''393310''>color.</span> </p><p><span m=''393940''>You
  can</span> <span m=''394420''>also</span> <span m=''394700''>cast</span> <span m=''395055''>a</span>
  <span m=''395410''>refracted</span> <span m=''396060''>ray,</span> <span m=''396670''>and</span>
  <span m=''397010''>use</span> <span m=''397290''>Snell''s</span> <span m=''397750''>a
  lot to</span> <span m=''398010''>tell</span> <span m=''398330''>which direction</span>
  <span m=''398830''>it</span> <span m=''398920''>goes</span> <span m=''399190''>in</span>
  <span m=''400000''>and</span> <span m=''400330''>do</span> <span m=''400420''>the</span>
  <span m=''400510''>same</span> <span m=''400760''>thing.</span> <span m=''401520''>And
  then,</span> <span m=''401930''>you can</span> <span m=''402260''>cast</span> <span
  m=''402840''>a</span> <span m=''402910''>shadow</span> <span m=''403250''>ray</span>
  <span m=''403890''>at</span> <span m=''404040''>all</span> <span m=''404150''>the</span>
  <span m=''404270''>light</span> <span m=''404530''>sources</span> <span m=''404910''>in</span>
  <span m=''404990''>the</span> <span m=''405080''>scene.</span> <span m=''406470''>And</span>
  <span m=''406710''>if</span> <span m=''406780''>the</span> <span m=''406850''>shadow</span>
  <span m=''407220''>ray</span> <span m=''407840''>hits</span> <span m=''408200''>an</span>
  <span m=''408290''>object</span> <span m=''408720''>before</span> <span m=''409070''>hitting</span>
  <span m=''409290''>the</span> <span m=''409370''>light</span> <span m=''409590''>source,</span>
  <span m=''410470''>then</span> <span m=''410640''>you</span> <span m=''410990''>know
  that</span> <span m=''411630''>this</span> <span m=''411850''>object</span> <span
  m=''412260''>is</span> <span m=''412360''>in</span> <span m=''412470''>the</span>
  <span m=''412570''>shade</span> <span m=''413480''>and</span> <span m=''413710''>make</span>
  <span m=''413860''>it</span> <span m=''413980''>darker.</span> </p><p><span m=''417210''>And</span>
  <span m=''418760''>obviously,</span> <span m=''419260''>you have</span> <span m=''419420''>to</span>
  <span m=''419580''>limit</span> <span m=''420040''>the</span> <span m=''420210''>recursion</span>
  <span m=''420630''>depth</span> <span m=''421810''>for</span> <span m=''422430''>your</span>
  <span m=''422660''>recursive</span> <span m=''422950''>tracing,</span> <span m=''423440''>because</span>
  <span m=''423740''>otherwise,</span> <span m=''425220''>you''ll</span> <span m=''425380''>never</span>
  <span m=''425610''>finish</span> <span m=''425820''>rendering.</span> <span m=''431570''>So,</span>
  <span m=''434110''>first</span> <span m=''434430''>way</span> <span m=''434580''>of</span>
  <span m=''434680''>improving</span> <span m=''435590''>lighting</span> <span m=''436760''>is</span>
  <span m=''437350''>to</span> <span m=''437580''>start</span> <span m=''437920''>using</span>
  <span m=''438240''>direct</span> <span m=''438590''>illumination,</span> <span m=''439910''>which</span>
  <span m=''440210''>is</span> <span m=''441010''>you</span> <span m=''441110''>have</span>
  <span m=''441480''>a</span> <span m=''441590''>light</span> <span m=''441850''>source</span>
  <span m=''442150''>at</span> <span m=''442310''>the</span> <span m=''442380''>top</span>
  <span m=''442630''>of</span> <span m=''442710''>the</span> <span m=''442800''>scene.</span>
  <span m=''443940''>And</span> <span m=''444810''>when</span> <span m=''445070''>you</span>
  <span m=''445160''>hit</span> <span m=''446010''>something</span> <span m=''446390''>like</span>
  <span m=''446560''>a</span> <span m=''446620''>wall</span> <span m=''446950''>here,</span>
  <span m=''448030''>you</span> <span m=''448170''>then</span> <span m=''449320''>bounce
  a</span> <span m=''449740''>ray</span> <span m=''450110''>at</span> <span m=''450290''>the</span>
  <span m=''450350''>light</span> <span m=''450600''>source.</span> </p><p><span m=''452900''>And</span>
  <span m=''453270''>depending on how</span> <span m=''453420''>far</span> <span m=''454850''>this</span>
  <span m=''455060''>intersection</span> <span m=''455650''>A is</span> <span m=''456090''>from</span>
  <span m=''456240''>the</span> <span m=''456320''>light</span> <span m=''456550''>source,</span>
  <span m=''457730''>you</span> <span m=''457890''>shade</span> <span m=''458470''>either</span>
  <span m=''458780''>brighter</span> <span m=''459190''>or</span> <span m=''459240''>darker.</span>
  <span m=''460350''>So</span> <span m=''461050''>it</span> <span m=''461150''>might</span>
  <span m=''461280''>be</span> <span m=''461360''>hard</span> <span m=''461540''>to</span>
  <span m=''461580''>see</span> <span m=''461710''>in</span> <span m=''461790''>this</span>
  <span m=''461980''>light,</span> <span m=''462270''>but</span> <span m=''462420''>the</span>
  <span m=''462490''>wall</span> <span m=''462730''>gets</span> <span m=''463120''>darker</span>
  <span m=''463610''>the</span> <span m=''463780''>further</span> <span m=''463900''>away</span>
  <span m=''464120''>it</span> <span m=''464210''>is</span> <span m=''464400''>from
  the</span> <span m=''464650''>light.</span> <span m=''467170''>And</span> <span
  m=''467360''>then,</span> <span m=''468250''>you</span> <span m=''468460''>do</span>
  <span m=''468590''>shadows</span> <span m=''469140''>the</span> <span m=''469220''>same</span>
  <span m=''469510''>way,</span> <span m=''470570''>except</span> <span m=''471340''>at</span>
  <span m=''471520''>point</span> <span m=''471800''>B</span> <span m=''471960''>here,</span>
  <span m=''473260''>the</span> <span m=''473370''>rate</span> <span m=''473540''>it</span>
  <span m=''473640''>bounces</span> <span m=''474040''>from</span> <span m=''474190''>the</span>
  <span m=''474380''>ground</span> <span m=''475530''>hits</span> <span m=''475730''>this</span>
  <span m=''475940''>ball.</span> <span m=''476530''>And</span> <span m=''476770''>so,</span>
  <span m=''477160''>point</span> <span m=''477450''>B</span> <span m=''477590''>is</span>
  <span m=''477720''>in</span> <span m=''477810''>the</span> <span m=''477910''>shade.</span>
  </p><p><span m=''481150''>Now, you</span> <span m=''481370''>can</span> <span m=''481510''>improve</span>
  <span m=''482160''>on</span> <span m=''482430''>shadows</span> <span m=''483180''>by</span>
  <span m=''483350''>making</span> <span m=''483710''>what''s</span> <span m=''483990''>called</span>
  <span m=''484250''>soft</span> <span m=''484600''>shadows.</span> <span m=''486490''>Soft</span>
  <span m=''486810''>shadows</span> <span m=''487360''>are</span> <span m=''487620''>shadows</span>
  <span m=''488160''>that</span> <span m=''488400''>form a</span> <span m=''488650''>gradient</span>
  <span m=''489160''>from</span> <span m=''489400''>darker</span> <span m=''489820''>to</span>
  <span m=''489950''>lighter.</span> <span m=''490950''>They</span> <span m=''491070''>happen</span>
  <span m=''491420''>when</span> <span m=''491540''>you</span> <span m=''491860''>have</span>
  <span m=''492210''>a</span> <span m=''492270''>light</span> <span m=''492500''>source</span>
  <span m=''492780''>that''s</span> <span m=''492960''>not</span> <span m=''493080''>a</span>
  <span m=''493200''>point</span> <span m=''493560''>light.</span> <span m=''494360''>So</span>
  <span m=''494650''>if</span> <span m=''494740''>you</span> <span m=''494840''>look</span>
  <span m=''494970''>at</span> <span m=''495090''>the</span> <span m=''495200''>shadows</span>
  <span m=''495620''>around</span> <span m=''495890''>you</span> <span m=''495970''>in</span>
  <span m=''496040''>the</span> <span m=''496140''>room,</span> <span m=''496400''>you''ll</span>
  <span m=''496510''>see</span> <span m=''497410''>there are</span> <span m=''497730''>gradients,</span>
  <span m=''498690''>not</span> <span m=''499140''>just</span> <span m=''499350''>a</span>
  <span m=''499420''>solid</span> <span m=''499780''>block of</span> <span m=''500210''>darkness.</span>
  </p><p><span m=''501540''>And</span> <span m=''501880''>the</span> <span m=''501950''>way</span>
  <span m=''502120''>you</span> <span m=''502300''>achieve</span> <span m=''502630''>that</span>
  <span m=''503140''>is</span> <span m=''504110''>when</span> <span m=''504290''>you</span>
  <span m=''504380''>get</span> <span m=''504490''>an</span> <span m=''504660''>intersection,</span>
  <span m=''506810''>when</span> <span m=''507090''>your</span> <span m=''507260''>ray</span>
  <span m=''507440''>intersects</span> <span m=''507910''>a</span> <span m=''507980''>point,</span>
  <span m=''508870''>you</span> <span m=''509000''>cast</span> <span m=''509430''>multiple</span>
  <span m=''509880''>shadow</span> <span m=''510260''>rays</span> <span m=''511170''>at</span>
  <span m=''511330''>different</span> <span m=''511630''>points</span> <span m=''511960''>along</span>
  <span m=''512200''>the</span> <span m=''512289''>light</span> <span m=''512530''>source.</span>
  <span m=''513390''>And</span> <span m=''513549''>depending</span> <span m=''513909''>on</span>
  <span m=''513990''>how</span> <span m=''514190''>many</span> <span m=''514380''>of</span>
  <span m=''514429''>these</span> <span m=''514630''>rays</span> <span m=''514970''>hit</span>
  <span m=''515870''>something</span> <span m=''516250''>before hitting</span> <span
  m=''516370''>the</span> <span m=''516700''>light</span> <span m=''516990''>source,</span>
  <span m=''518350''>you</span> <span m=''518490''>shade</span> <span m=''520640''>some</span>
  <span m=''521039''>proportion</span> <span m=''521789''>of</span> <span m=''521929''>the</span>
  <span m=''522380''>light</span> <span m=''522710''>being</span> <span m=''522970''>casted,</span>
  <span m=''523319''>or</span> <span m=''524730''>the</span> <span m=''524820''>light</span>
  <span m=''525240''>coming</span> <span m=''525570''>from</span> <span m=''525820''>this</span>
  <span m=''526020''>light</span> <span m=''526240''>source.</span> </p><p><span m=''526980''>So
  you can</span> <span m=''527240''>see</span> <span m=''527420''>point D</span> <span
  m=''528130''>here,</span> <span m=''529320''>none of</span> <span m=''529610''>the</span>
  <span m=''529730''>rays</span> <span m=''530075''>hit</span> <span m=''530420''>the</span>
  <span m=''530670''>light</span> <span m=''530890''>source,</span> <span m=''531370''>and</span>
  <span m=''531540''>so,</span> <span m=''531720''>it''s</span> <span m=''531850''>in</span>
  <span m=''531910''>a</span> <span m=''531990''>very</span> <span m=''532230''>dark</span>
  <span m=''532550''>area.</span> <span m=''533480''>Whereas</span> <span m=''533720''>point</span>
  <span m=''534030''>C,</span> <span m=''534960''>one</span> <span m=''535100''>of</span>
  <span m=''535140''>the</span> <span m=''535220''>rays</span> <span m=''535500''>hits
  the</span> <span m=''535690''>light</span> <span m=''535930''>source,</span> <span
  m=''536300''>and</span> <span m=''536400''>so</span> <span m=''536550''>it''s</span>
  <span m=''536720''>in a</span> <span m=''536860''>slightly</span> <span m=''537250''>brighter</span>
  <span m=''537640''>area.</span> </p><p><span m=''543590''>And</span> <span m=''543700''>then</span>
  <span m=''544290''>reflection</span> <span m=''545020''>and</span> <span m=''545120''>refraction</span>
  <span m=''546590''>work</span> <span m=''546820''>very</span> <span m=''547000''>similarly</span>
  <span m=''547620''>to</span> <span m=''547780''>shadows,</span> <span m=''548320''>except</span>
  <span m=''549190''>instead</span> <span m=''549470''>of</span> <span m=''549790''>bouncing</span>
  <span m=''551270''>from</span> <span m=''552430''>here</span> <span m=''552690''>to</span>
  <span m=''552810''>the</span> <span m=''552880''>light</span> <span m=''553140''>source,</span>
  <span m=''553730''>you</span> <span m=''554290''>bounce</span> <span m=''554660''>off</span>
  <span m=''554850''>this</span> <span m=''555060''>metal</span> <span m=''555320''>ball</span>
  <span m=''556570''>at</span> <span m=''557040''>the</span> <span m=''557150''>angle</span>
  <span m=''557430''>of</span> <span m=''557520''>reflection.</span> <span m=''558680''>And</span>
  <span m=''558970''>you</span> <span m=''559060''>bounce</span> <span m=''559710''>through</span>
  <span m=''559950''>this</span> <span m=''560180''>glass</span> <span m=''560540''>ball</span>
  <span m=''561630''>using</span> <span m=''562180''>the</span> <span m=''562310''>angle</span>
  <span m=''562550''>of</span> <span m=''562650''>refraction.</span> <span m=''563260''>You</span>
  <span m=''563380''>can</span> <span m=''563500''>calculate</span> <span m=''564100''>using</span>
  <span m=''564430''>Snell''s</span> <span m=''564870''>law.</span> </p><p><span m=''571650''>Any</span>
  <span m=''572440''>questions</span> <span m=''572910''>before</span> <span m=''573130''>we</span>
  <span m=''573190''>move</span> <span m=''573370''>on?</span> <span m=''583270''>All</span>
  <span m=''583340''>right.</span> <span m=''583920''>So</span> <span m=''585820''>as</span>
  <span m=''586020''>you</span> <span m=''586210''>can</span> <span m=''586790''>see</span>
  <span m=''587060''>pretty</span> <span m=''587370''>clearly</span> <span m=''587755''>in</span>
  <span m=''588140''>this</span> <span m=''588360''>image,</span> <span m=''589190''>there''s</span>
  <span m=''589320''>still</span> <span m=''589520''>some</span> <span m=''589700''>problems.</span>
  <span m=''590400''>The</span> <span m=''590510''>ceiling</span> <span m=''590880''>is</span>
  <span m=''591020''>completely</span> <span m=''591450''>black.</span> <span m=''592620''>Shadows</span>
  <span m=''593200''>are</span> <span m=''593290''>mostly</span> <span m=''593730''>black.</span>
  <span m=''595170''>And</span> <span m=''597350''>there''s</span> <span m=''597690''>no</span>
  <span m=''597900''>light</span> <span m=''598260''>being</span> <span m=''598520''>transmitted</span>
  <span m=''599190''>through</span> <span m=''599460''>this</span> <span m=''599740''>glass</span>
  <span m=''600100''>ball</span> <span m=''600570''>either</span> <span m=''601120''>into</span>
  <span m=''601450''>the</span> <span m=''601580''>shadow</span> <span m=''601980''>here.</span>
  <span m=''602810''>So</span> <span m=''603160''>there''s</span> <span m=''603330''>definitely</span>
  <span m=''604290''>some</span> <span m=''604570''>improvements</span> <span m=''605120''>we</span>
  <span m=''605220''>can</span> <span m=''605350''>make</span> <span m=''605600''>on</span>
  <span m=''605730''>our</span> <span m=''605920''>physics</span> <span m=''606140''>simulation.</span>
  </p><p><span m=''608310''>The</span> <span m=''608420''>first</span> <span m=''608670''>thing</span>
  <span m=''608790''>we''re</span> <span m=''608880''>going</span> <span m=''609000''>to</span>
  <span m=''609130''>look</span> <span m=''609310''>at</span> <span m=''609490''>is</span>
  <span m=''609630''>called</span> <span m=''610580''>global</span> <span m=''611100''>illumination,</span>
  <span m=''612730''>which</span> <span m=''613070''>is</span> <span m=''613280''>pretty</span>
  <span m=''613450''>much</span> <span m=''613790''>any</span> <span m=''614010''>sort</span>
  <span m=''614220''>of</span> <span m=''614280''>illumination</span> <span m=''615410''>that</span>
  <span m=''615580''>doesn''t</span> <span m=''615870''>come</span> <span m=''616160''>directly</span>
  <span m=''616700''>from</span> <span m=''617060''>light</span> <span m=''617290''>sources.</span>
  <span m=''620230''>Now</span> <span m=''621250''>the</span> <span m=''621330''>reason</span>
  <span m=''622110''>this</span> <span m=''622360''>sort</span> <span m=''622550''>of</span>
  <span m=''622620''>illumination</span> <span m=''623130''>is</span> <span m=''623260''>important</span>
  <span m=''623870''>is</span> <span m=''624090''>that</span> <span m=''625850''>there''s</span>
  <span m=''626030''>actually</span> <span m=''626410''>a</span> <span m=''626480''>lot</span>
  <span m=''626740''>of</span> <span m=''626830''>light</span> <span m=''627340''>that</span>
  <span m=''628000''>gets</span> <span m=''628220''>bounced</span> <span m=''628810''>around</span>
  <span m=''629240''>the</span> <span m=''629310''>room</span> <span m=''630320''>that</span>
  <span m=''630450''>doesn''t</span> <span m=''630680''>come</span> <span m=''630920''>directly</span>
  <span m=''631360''>from</span> <span m=''631550''>the</span> <span m=''631750''>light</span>
  <span m=''631970''>source.</span> </p><p><span m=''633780''>Like</span> <span m=''634650''>that</span>
  <span m=''634890''>white</span> <span m=''635090''>wall,</span> <span m=''635350''>if</span>
  <span m=''635530''>I shine</span> <span m=''635880''>this</span> <span m=''636070''>laser</span>
  <span m=''636330''>pointer</span> <span m=''636660''>at</span> <span m=''636945''>it,</span>
  <span m=''637230''>as</span> <span m=''637420''>you</span> <span m=''637510''>can</span>
  <span m=''637650''>see,</span> <span m=''637820''>there''s</span> <span m=''637940''>still</span>
  <span m=''638110''>a</span> <span m=''638150''>lot</span> <span m=''638390''>of</span>
  <span m=''638490''>light</span> <span m=''638730''>bouncing</span> <span m=''639160''>off</span>
  <span m=''639320''>of</span> <span m=''639480''>it.</span> <span m=''640580''>It''s</span>
  <span m=''640740''>not</span> <span m=''641030''>all being</span> <span m=''641260''>absorbed.</span>
  <span m=''642330''>So</span> <span m=''642580''>what</span> <span m=''642700''>you</span>
  <span m=''642860''>can</span> <span m=''643030''>do</span> <span m=''645490''>is</span>
  <span m=''647360''>you</span> <span m=''647520''>can</span> <span m=''649000''>take</span>
  <span m=''649270''>your</span> <span m=''649770''>ray</span> <span m=''650220''>intersection,</span>
  <span m=''651590''>and</span> <span m=''652570''>you</span> <span m=''652760''>can
  use</span> <span m=''653080''>what''s</span> <span m=''653270''>called</span> <span
  m=''653570''>the</span> <span m=''653770''>Monte</span> <span m=''654110''>Carlo</span>
  <span m=''654450''>method,</span> <span m=''655170''>which</span> <span m=''655460''>is</span>
  <span m=''656270''>you</span> <span m=''656390''>take</span> <span m=''656600''>a</span>
  <span m=''656650''>whole</span> <span m=''656790''>bunch</span> <span m=''657020''>of</span>
  <span m=''657080''>random</span> <span m=''657430''>samples</span> <span m=''658540''>and</span>
  <span m=''659060''>interpolate</span> <span m=''660330''>those</span> <span m=''660480''>samples</span>
  <span m=''661510''>to</span> <span m=''661680''>get</span> <span m=''663090''>some</span>
  <span m=''663410''>value</span> <span m=''663700''>that</span> <span m=''663840''>approximates</span>
  <span m=''664710''>what</span> <span m=''665020''>the</span> <span m=''665110''>illuminant</span>
  <span m=''665470''>should</span> <span m=''665650''>be</span> <span m=''665830''>here.</span>
  </p><p><span m=''667550''>The</span> <span m=''667650''>problem</span> <span m=''667930''>with</span>
  <span m=''667990''>that,</span> <span m=''668260''>though,</span> <span m=''668980''>is</span>
  <span m=''669200''>that</span> <span m=''669420''>when</span> <span m=''669530''>you</span>
  <span m=''669640''>trace</span> <span m=''669950''>backwards,</span> <span m=''671100''>you</span>
  <span m=''671320''>get</span> <span m=''671550''>this</span> <span m=''671870''>exponential</span>
  <span m=''672540''>explosion</span> <span m=''672985''>of</span> <span m=''673430''>recursively</span>
  <span m=''675610''>cast</span> <span m=''676010''>rays.</span> <span m=''676950''>And</span>
  <span m=''677110''>you</span> <span m=''677230''>have</span> <span m=''677350''>no</span>
  <span m=''677500''>guarantee</span> <span m=''677860''>that</span> <span m=''677960''>any</span>
  <span m=''678190''>of</span> <span m=''678260''>these</span> <span m=''678660''>paths</span>
  <span m=''679000''>will</span> <span m=''679170''>ever</span> <span m=''679940''>get</span>
  <span m=''680130''>to</span> <span m=''680220''>this</span> <span m=''680430''>light</span>
  <span m=''680660''>source.</span> <span m=''682860''>So</span> <span m=''684560''>what</span>
  <span m=''684760''>you</span> <span m=''684860''>have</span> <span m=''684960''>to</span>
  <span m=''685060''>do</span> <span m=''685630''>is</span> <span m=''686720''>trace</span>
  <span m=''687200''>forwards,</span> <span m=''688510''>so</span> <span m=''688740''>you</span>
  <span m=''688880''>start</span> <span m=''689130''>at</span> <span m=''689290''>the</span>
  <span m=''689380''>light</span> <span m=''689590''>source,</span> <span m=''690580''>and</span>
  <span m=''690720''>you</span> <span m=''690860''>cast</span> <span m=''691250''>photons</span>
  <span m=''691960''>in</span> <span m=''692200''>random</span> <span m=''692500''>directions</span>
  <span m=''693710''>and</span> <span m=''694110''>let</span> <span m=''694260''>them</span>
  <span m=''694420''>bounce</span> <span m=''694780''>all</span> <span m=''694930''>around</span>
  <span m=''695140''>the</span> <span m=''695360''>scene</span> <span m=''697820''>until</span>
  <span m=''698040''>they</span> <span m=''698130''>get</span> <span m=''698250''>absorbed.</span>
  </p><p><span m=''699750''>Now, when a</span> <span m=''700170''>photon</span> <span
  m=''700660''>bounces,</span> <span m=''702500''>a</span> <span m=''702570''>bunch</span>
  <span m=''702850''>of</span> <span m=''702940''>light</span> <span m=''703190''>gets</span>
  <span m=''703410''>absorbed.</span> <span m=''704600''>But</span> <span m=''704730''>not</span>
  <span m=''704920''>all</span> <span m=''705100''>the light.</span> <span m=''706650''>And</span>
  <span m=''707080''>so,</span> <span m=''707970''>the rest of</span> <span m=''708250''>the
  light</span> <span m=''708600''>keeps</span> <span m=''708870''>reflecting.</span>
  <span m=''711090''>And</span> <span m=''711200''>depending</span> <span m=''711540''>on</span>
  <span m=''711610''>the</span> <span m=''711720''>kind</span> <span m=''711890''>of</span>
  <span m=''712070''>material,</span> <span m=''713350''>different</span> <span m=''713650''>amounts</span>
  <span m=''714090''>and</span> <span m=''714230''>colors</span> <span m=''714650''>of</span>
  <span m=''714740''>light</span> <span m=''714990''>will</span> <span m=''715110''>be</span>
  <span m=''715230''>reflected.</span> </p><p><span m=''716700''>So</span> <span m=''716870''>as
  you</span> <span m=''717060''>can</span> <span m=''717170''>see,</span> <span m=''717490''>this</span>
  <span m=''717760''>ray here</span> <span m=''718240''>bounces</span> <span m=''718670''>off</span>
  <span m=''718810''>the</span> <span m=''718930''>orange</span> <span m=''719210''>wall.</span>
  <span m=''720060''>And</span> <span m=''720170''>so,</span> <span m=''720330''>orange</span>
  <span m=''720670''>light</span> <span m=''721140''>gets</span> <span m=''721340''>reflected.</span>
  <span m=''723270''>This</span> <span m=''723990''>ray</span> <span m=''724300''>bounces</span>
  <span m=''724580''>off</span> <span m=''724700''>the</span> <span m=''724760''>blue</span>
  <span m=''725030''>wall.</span> <span m=''725380''>And</span> <span m=''725480''>so,</span>
  <span m=''725610''>blue</span> <span m=''725850''>light</span> <span m=''726090''>gets</span>
  <span m=''726220''>reflected.</span> <span m=''727280''>And</span> <span m=''727350''>this</span>
  <span m=''727510''>ray</span> <span m=''727700''>bounces</span> <span m=''728120''>off</span>
  <span m=''728460''>this</span> <span m=''728740''>metal</span> <span m=''729000''>ball,</span>
  <span m=''729780''>and</span> <span m=''729950''>so it</span> <span m=''730100''>gets</span>
  <span m=''730330''>completely</span> <span m=''731490''>reflected</span> <span m=''732140''>up</span>
  <span m=''732320''>towards</span> <span m=''732610''>the</span> <span m=''732690''>ceiling.</span>
  </p><p><span m=''735600''>So</span> <span m=''737040''>if</span> <span m=''737170''>you</span>
  <span m=''737310''>remember</span> <span m=''737770''>each</span> <span m=''737980''>bounce</span>
  <span m=''738720''>in</span> <span m=''738850''>something</span> <span m=''739130''>called</span>
  <span m=''739320''>a</span> <span m=''739380''>photon</span> <span m=''739880''>map,</span>
  <span m=''741410''>then</span> <span m=''741650''>later,</span> <span m=''741950''>you</span>
  <span m=''742070''>can</span> <span m=''742250''>come</span> <span m=''742490''>back</span>
  <span m=''742850''>and</span> <span m=''743050''>say,</span> <span m=''743890''>oh,</span>
  <span m=''744090''>there''s</span> <span m=''744950''>so</span> <span m=''745190''>many</span>
  <span m=''745350''>photons</span> <span m=''746600''>in</span> <span m=''746770''>this</span>
  <span m=''747000''>area.</span> <span m=''749800''>And that''s</span> <span m=''750080''>what</span>
  <span m=''750190''>these</span> <span m=''750310''>yellow</span> <span m=''750560''>circles</span>
  <span m=''750900''>are.</span> <span m=''751560''>So</span> <span m=''752070''>the</span>
  <span m=''752210''>illuminance</span> <span m=''752790''>is</span> <span m=''753050''>going</span>
  <span m=''753160''>to</span> <span m=''753280''>be</span> <span m=''753410''>approximately</span>
  <span m=''754050''>this.</span> </p><p><span m=''756136''>The</span> <span m=''756550''>problem</span>
  <span m=''756990''>with</span> <span m=''757140''>that</span> <span m=''757480''>is</span>
  <span m=''759310''>unless</span> <span m=''759380''>you''re</span> <span m=''759720''>simulating</span>
  <span m=''760640''>an</span> <span m=''760870''>extremely</span> <span m=''761280''>large</span>
  <span m=''761700''>number</span> <span m=''761980''>of</span> <span m=''762040''>photons,</span>
  <span m=''763040''>you''ll</span> <span m=''763260''>have</span> <span m=''764480''>an</span>
  <span m=''764660''>uneven</span> <span m=''765090''>distribution.</span> <span m=''767060''>So</span>
  <span m=''767250''>what</span> <span m=''767360''>you</span> <span m=''767460''>can</span>
  <span m=''767590''>do</span> <span m=''767790''>is</span> <span m=''767900''>you</span>
  <span m=''767990''>can</span> <span m=''768180''>hybridize</span> <span m=''769490''>forwards</span>
  <span m=''769810''>ray</span> <span m=''769980''>tracing</span> <span m=''770650''>and</span>
  <span m=''770860''>the</span> <span m=''770920''>Monte</span> <span m=''771240''>Carlo</span>
  <span m=''771560''>method.</span> </p><p><span m=''772970''>So</span> <span m=''773150''>you</span>
  <span m=''773630''>construct</span> <span m=''774050''>your</span> <span m=''774160''>photon</span>
  <span m=''774600''>map,</span> <span m=''775330''>which is</span> <span m=''775460''>represented</span>
  <span m=''776320''>in</span> <span m=''776400''>this</span> <span m=''776560''>image</span>
  <span m=''776800''>by</span> <span m=''777230''>all</span> <span m=''777390''>the</span>
  <span m=''777480''>red</span> <span m=''777670''>dots</span> <span m=''777950''>scattered</span>
  <span m=''778370''>everywhere.</span> <span m=''780170''>And</span> <span m=''780360''>then</span>
  <span m=''780560''>you</span> <span m=''780680''>do</span> <span m=''780880''>backwards</span>
  <span m=''781390''>ray</span> <span m=''781580''>tracing.</span> <span m=''783150''>Then</span>
  <span m=''783300''>when</span> <span m=''783410''>you</span> <span m=''783550''>reach</span>
  <span m=''783760''>a</span> <span m=''783820''>point,</span> <span m=''784880''>you</span>
  <span m=''785800''>randomly</span> <span m=''786290''>sample</span> <span m=''787690''>different</span>
  <span m=''788030''>reflection</span> <span m=''788550''>rays</span> <span m=''789600''>and</span>
  <span m=''790240''>average</span> <span m=''790650''>their</span> <span m=''790810''>illuminance</span>
  <span m=''791530''>to</span> <span m=''791660''>get the</span> <span m=''791780''>illuminance</span>
  <span m=''792200''>at</span> <span m=''792320''>this</span> <span m=''792500''>point.</span>
  </p><p><span m=''793800''>So</span> <span m=''794000''>you</span> <span m=''794360''>have</span>
  <span m=''795420''>blue</span> <span m=''795730''>illuminance</span> <span m=''796210''>from</span>
  <span m=''796350''>the</span> <span m=''796430''>wall</span> <span m=''796710''>here.</span>
  <span m=''797290''>And</span> <span m=''797510''>then</span> <span m=''798090''>light</span>
  <span m=''798330''>gray</span> <span m=''798550''>from</span> <span m=''798790''>here</span>
  <span m=''799210''>and</span> <span m=''800040''>darker</span> <span m=''800350''>gray</span>
  <span m=''800580''>from</span> <span m=''800800''>here.</span> <span m=''801720''>And</span>
  <span m=''801830''>the</span> <span m=''801910''>result</span> <span m=''802260''>is</span>
  <span m=''802760''>this</span> <span m=''803010''>sort</span> <span m=''803350''>of</span>
  <span m=''803720''>pale</span> <span m=''804040''>blue,</span> <span m=''804650''>which</span>
  <span m=''805110''>you</span> <span m=''805210''>can''t</span> <span m=''805430''>really</span>
  <span m=''805630''>see</span> <span m=''806060''>in the</span> <span m=''806160''>image</span>
  <span m=''806880''>because</span> <span m=''807070''>the</span> <span m=''807290''>light''s</span>
  <span m=''807585''>bad.</span> <span m=''810880''>Yeah,</span> <span m=''811210''>so</span>
  <span m=''812260''>backwards</span> <span m=''812720''>trace,</span> <span m=''813430''>randomly</span>
  <span m=''813860''>sample,</span> <span m=''814690''>illumination.</span> <span
  m=''820530''>And</span> <span m=''822270''>any</span> <span m=''822450''>questions</span>
  <span m=''822860''>before</span> <span m=''823080''>we</span> <span m=''823170''>go</span>
  <span m=''823570''>on?</span> </p><p><span m=''834880''>So</span> <span m=''835080''>it</span>
  <span m=''835170''>turns</span> <span m=''835480''>out</span> <span m=''836590''>even</span>
  <span m=''837920''>with</span> <span m=''839260''>building</span> <span m=''839630''>a</span>
  <span m=''839680''>photon</span> <span m=''840170''>map</span> <span m=''840970''>and</span>
  <span m=''841080''>then</span> <span m=''841260''>randomly</span> <span m=''841630''>sampling
  the</span> <span m=''842090''>photon</span> <span m=''842520''>map,</span> <span
  m=''843440''>calculating</span> <span m=''844150''>the</span> <span m=''844300''>irradiance</span>
  <span m=''844660''>can</span> <span m=''844790''>still</span> <span m=''845020''>be</span>
  <span m=''845140''>very</span> <span m=''845370''>expensive.</span> <span m=''847120''>So</span>
  <span m=''847820''>what</span> <span m=''847990''>we''ve</span> <span m=''848320''>implemented</span>
  <span m=''848880''>to</span> <span m=''849560''>speed</span> <span m=''849900''>that</span>
  <span m=''850090''>up</span> <span m=''850490''>is</span> <span m=''850920''>what''s</span>
  <span m=''851110''>called</span> <span m=''851390''>an</span> <span m=''851620''>irradiance</span>
  <span m=''852070''>cache.</span> <span m=''854360''>And</span> <span m=''854570''>the</span>
  <span m=''854640''>way</span> <span m=''854790''>the</span> <span m=''854900''>irradiance</span>
  <span m=''855300''>cache</span> <span m=''855570''>works</span> <span m=''856010''>is</span>
  <span m=''857320''>there</span> <span m=''857510''>are</span> <span m=''857550''>certain</span>
  <span m=''858580''>areas</span> <span m=''859540''>on</span> <span m=''859840''>objects</span>
  <span m=''860430''>that</span> <span m=''860540''>will</span> <span m=''860630''>have</span>
  <span m=''861780''>pretty</span> <span m=''862250''>much</span> <span m=''862570''>the</span>
  <span m=''862670''>same</span> <span m=''863030''>irradiance.</span> <span m=''864840''>It''s</span>
  <span m=''864990''>pretty</span> <span m=''865220''>much the</span> <span m=''865390''>same</span>
  <span m=''865690''>irradiance</span> <span m=''866090''>levels.</span> <span m=''866360''>So</span>
  <span m=''866600''>you</span> <span m=''866720''>can</span> <span m=''866840''>interpolate</span>
  <span m=''867900''>from</span> <span m=''868100''>nearby</span> <span m=''868410''>points.</span>
  </p><p><span m=''870300''>So</span> <span m=''870880''>what</span> <span m=''871310''>we</span>
  <span m=''871480''>do</span> <span m=''871600''>with</span> <span m=''871670''>the</span>
  <span m=''871790''>irradiance</span> <span m=''872240''>cache</span> <span m=''872700''>is</span>
  <span m=''873040''>as</span> <span m=''873210''>the</span> <span m=''873390''>scene</span>
  <span m=''874480''>is</span> <span m=''875070''>rendering,</span> <span m=''876560''>if</span>
  <span m=''876750''>there</span> <span m=''877040''>is</span> <span m=''877310''>a</span>
  <span m=''877410''>cache</span> <span m=''878400''>miss,</span> <span m=''880130''>then</span>
  <span m=''880530''>we</span> <span m=''880670''>calculate</span> <span m=''881240''>the</span>
  <span m=''881370''>irradiance</span> <span m=''883100''>for</span> <span m=''883300''>some</span>
  <span m=''883570''>pixel</span> <span m=''884270''>which</span> <span m=''884470''>corresponds</span>
  <span m=''885050''>to</span> <span m=''885220''>a</span> <span m=''885260''>point</span>
  <span m=''885600''>in</span> <span m=''885670''>the</span> <span m=''885750''>scene.</span>
  <span m=''887290''>And</span> <span m=''887480''>then,</span> <span m=''887820''>if</span>
  <span m=''887960''>we</span> <span m=''888060''>then</span> <span m=''888280''>trace</span>
  <span m=''888940''>a</span> <span m=''889350''>ray</span> <span m=''889760''>very</span>
  <span m=''890070''>near</span> <span m=''890340''>to</span> <span m=''890460''>that</span>
  <span m=''890650''>same</span> <span m=''890840''>pixel,</span> <span m=''892250''>you</span>
  <span m=''892390''>can</span> <span m=''892600''>then</span> <span m=''893370''>interpolate</span>
  <span m=''893980''>from</span> <span m=''894320''>nearby</span> <span m=''896430''>cached</span>
  <span m=''896880''>irradiances</span> <span m=''898120''>and</span> <span m=''898270''>get</span>
  <span m=''898520''>something</span> <span m=''900000''>that</span> <span m=''900340''>looks</span>
  <span m=''900760''>right.</span> </p><p><span m=''903000''>So</span> <span m=''903760''>if</span>
  <span m=''903960''>you</span> <span m=''904130''>take</span> <span m=''904360''>a</span>
  <span m=''904430''>look</span> <span m=''904610''>at</span> <span m=''904720''>this</span>
  <span m=''904920''>image,</span> <span m=''906480''>where</span> <span m=''906950''>the</span>
  <span m=''907040''>green</span> <span m=''907330''>dots</span> <span m=''907800''>represent</span>
  <span m=''909710''>cache</span> <span m=''910040''>misses</span> <span m=''912050''>on</span>
  <span m=''912600''>these</span> <span m=''912890''>big</span> <span m=''913380''>planer</span>
  <span m=''914050''>objects</span> <span m=''914570''>here.</span> <span m=''914940''>There''s</span>
  <span m=''915310''>very</span> <span m=''915580''>few</span> <span m=''915790''>cache</span>
  <span m=''916130''>misses.</span> <span m=''917150''>And</span> <span m=''917290''>it''s</span>
  <span m=''917440''>almost</span> <span m=''917870''>entirely</span> <span m=''919300''>cache</span>
  <span m=''919660''>hits.</span> <span m=''920650''>Whereas</span> <span m=''921400''>at</span>
  <span m=''922380''>the</span> <span m=''922910''>interface</span> <span m=''923560''>between</span>
  <span m=''924890''>different</span> <span m=''925200''>objects,</span> <span m=''926660''>the</span>
  <span m=''926850''>cache</span> <span m=''927160''>misses</span> <span m=''927510''>become</span>
  <span m=''928260''>much</span> <span m=''928630''>more</span> <span m=''930420''>common.</span>
  <span m=''931160''>But</span> <span m=''931300''>overall,</span> <span m=''931940''>the</span>
  <span m=''932310''>number</span> <span m=''932750''>of</span> <span m=''932840''>irradiance</span>
  <span m=''933270''>calculations</span> <span m=''934380''>is</span> <span m=''934650''>greatly</span>
  <span m=''935090''>reduced.</span> </p><p><span m=''939650''>And</span> <span m=''939760''>then,</span>
  <span m=''940470''>the</span> <span m=''940590''>third</span> <span m=''940910''>kind</span>
  <span m=''941230''>of</span> <span m=''941310''>illumination</span> <span m=''943470''>that</span>
  <span m=''943760''>we</span> <span m=''943900''>implement</span> <span m=''944400''>is</span>
  <span m=''944560''>called</span> <span m=''944860''>caustics.</span> <span m=''946270''>Caustics</span>
  <span m=''946730''>are</span> <span m=''946970''>just</span> <span m=''948010''>light</span>
  <span m=''948400''>being</span> <span m=''949930''>lensed</span> <span m=''951400''>into</span>
  <span m=''951960''>patterns</span> <span m=''952850''>of</span> <span m=''953220''>brighter</span>
  <span m=''953790''>and</span> <span m=''954270''>darker</span> <span m=''954640''>spaces,</span>
  <span m=''955730''>such</span> <span m=''956070''>as</span> <span m=''956340''>you</span>
  <span m=''956470''>get</span> <span m=''957000''>from</span> <span m=''957990''>a</span>
  <span m=''958100''>light</span> <span m=''958520''>pointing</span> <span m=''958780''>towards</span>
  <span m=''958990''>a</span> <span m=''959020''>glass</span> <span m=''959370''>ball.</span>
  <span m=''960340''>Or</span> <span m=''960790''>if</span> <span m=''960980''>you</span>
  <span m=''961060''>ever</span> <span m=''961220''>see</span> <span m=''961450''>the</span>
  <span m=''961640''>sort</span> <span m=''961770''>of</span> <span m=''961890''>wavy</span>
  <span m=''962220''>pattern</span> <span m=''962730''>on</span> <span m=''962810''>the</span>
  <span m=''962890''>bottom</span> <span m=''963230''>of</span> <span m=''963310''>a</span>
  <span m=''963400''>pool,</span> <span m=''964150''>that''s</span> <span m=''964360''>also</span>
  <span m=''964610''>from</span> <span m=''964820''>caustics.</span> </p><p><span
  m=''966720''>Caustics</span> <span m=''967240''>are</span> <span m=''967380''>also</span>
  <span m=''968000''>implemented</span> <span m=''968440''>with</span> <span m=''968540''>the</span>
  <span m=''968640''>photon</span> <span m=''969120''>map,</span> <span m=''970710''>except</span>
  <span m=''971100''>it''s</span> <span m=''971360''>created</span> <span m=''971740''>slightly</span>
  <span m=''972100''>differently.</span> <span m=''972660''>Instead</span> <span m=''973030''>of</span>
  <span m=''973240''>bouncing</span> <span m=''973730''>photons</span> <span m=''974260''>everywhere,</span>
  <span m=''975270''>photons</span> <span m=''975700''>are</span> <span m=''975770''>absorbed</span>
  <span m=''976240''>as</span> <span m=''976330''>soon</span> <span m=''976580''>as</span>
  <span m=''976670''>they</span> <span m=''976790''>hit</span> <span m=''977060''>a</span>
  <span m=''977150''>diffuse</span> <span m=''977550''>object.</span> <span m=''979070''>So</span>
  <span m=''980370''>a</span> <span m=''980450''>photon</span> <span m=''980900''>might</span>
  <span m=''981920''>bounce</span> <span m=''982460''>off</span> <span m=''982650''>of</span>
  <span m=''983060''>this</span> <span m=''983680''>metal</span> <span m=''984100''>sphere</span>
  <span m=''984620''>and</span> <span m=''984710''>then</span> <span m=''984840''>hit</span>
  <span m=''985020''>the</span> <span m=''985100''>wall,</span> <span m=''985850''>and</span>
  <span m=''986020''>it will be</span> <span m=''986150''>immediately</span> <span
  m=''986750''>absorbed.</span> </p><p><span m=''989010''>Whereas</span> <span m=''989520''>if</span>
  <span m=''989600''>it</span> <span m=''989700''>hits</span> <span m=''989960''>this</span>
  <span m=''990220''>sphere,</span> <span m=''991150''>it''ll</span> <span m=''991400''>bounce,</span>
  <span m=''992150''>and</span> <span m=''992330''>bounce,</span> <span m=''992870''>and</span>
  <span m=''993010''>then</span> <span m=''993160''>be</span> <span m=''993300''>absorbed.</span>
  <span m=''995000''>So</span> <span m=''995560''>the</span> <span m=''995750''>objective</span>
  <span m=''996120''>of</span> <span m=''996260''>caustics</span> <span m=''997110''>is</span>
  <span m=''997380''>to</span> <span m=''997480''>trace</span> <span m=''997880''>how</span>
  <span m=''998100''>photons</span> <span m=''999810''>are</span> <span m=''1001240''>grouped</span>
  <span m=''1001830''>based</span> <span m=''1002240''>on</span> <span m=''1002390''>the</span>
  <span m=''1002470''>optical</span> <span m=''1002990''>properties</span> <span m=''1003590''>of</span>
  <span m=''1003750''>materials</span> <span m=''1004330''>in</span> <span m=''1004420''>the</span>
  <span m=''1004510''>scene.</span> </p><p><span m=''1007700''>And</span> <span m=''1008010''>then,</span>
  <span m=''1009050''>caustics</span> <span m=''1012010''>are</span> <span m=''1012900''>rendered</span>
  <span m=''1013490''>pretty</span> <span m=''1013710''>simply.</span> <span m=''1016740''>Because</span>
  <span m=''1017170''>there''s</span> <span m=''1018070''>much</span> <span m=''1018440''>fewer</span>
  <span m=''1018660''>photons</span> <span m=''1019390''>than</span> <span m=''1019600''>in</span>
  <span m=''1019970''>the</span> <span m=''1020890''>photon</span> <span m=''1021300''>map</span>
  <span m=''1023330''>for</span> <span m=''1023630''>global</span> <span m=''1023990''>illumination,</span>
  <span m=''1024900''>you</span> <span m=''1025020''>don''t</span> <span m=''1025200''>need</span>
  <span m=''1025400''>to</span> <span m=''1025530''>use</span> <span m=''1025740''>an</span>
  <span m=''1025920''>irradiance</span> <span m=''1026349''>cache.</span> <span m=''1027440''>So</span>
  <span m=''1027640''>you</span> <span m=''1027780''>simply</span> <span m=''1030800''>trace</span>
  <span m=''1031089''>a</span> <span m=''1031180''>ray</span> <span m=''1031510''>to
  a</span> <span m=''1031579''>point</span> <span m=''1032410''>and</span> <span m=''1032640''>then</span>
  <span m=''1032920''>sample</span> <span m=''1033300''>the</span> <span m=''1033410''>number</span>
  <span m=''1033670''>of</span> <span m=''1033740''>photons</span> <span m=''1034290''>nearby.</span>
  <span m=''1035359''>And</span> <span m=''1035560''>you</span> <span m=''1035640''>end</span>
  <span m=''1035849''>up</span> <span m=''1036760''>with</span> <span m=''1036940''>something</span>
  <span m=''1037400''>like</span> <span m=''1037660''>this</span> <span m=''1038060''>if</span>
  <span m=''1038220''>you</span> <span m=''1038310''>just</span> <span m=''1038630''>do</span>
  <span m=''1038700''>caustics</span> <span m=''1039089''>shading.</span> </p><p><span
  m=''1044790''>So</span> <span m=''1044970''>then at</span> <span m=''1045210''>the</span>
  <span m=''1045319''>end,</span> <span m=''1046250''>you</span> <span m=''1046380''>take</span>
  <span m=''1046720''>your</span> <span m=''1047810''>direct</span> <span m=''1048150''>illumination,</span>
  <span m=''1049650''>and</span> <span m=''1049810''>then</span> <span m=''1049990''>add</span>
  <span m=''1050360''>it to</span> <span m=''1050470''>caustics,</span> <span m=''1051690''>and</span>
  <span m=''1051800''>then</span> <span m=''1051970''>add</span> <span m=''1052150''>it</span>
  <span m=''1052440''>to</span> <span m=''1052940''>global</span> <span m=''1053380''>illumination.</span>
  <span m=''1054800''>And</span> <span m=''1055010''>you get</span> <span m=''1055120''>something</span>
  <span m=''1055420''>that</span> <span m=''1055560''>looks</span> <span m=''1055780''>like</span>
  <span m=''1055990''>this.</span> <span m=''1060070''>Any</span> <span m=''1060190''>questions</span>
  <span m=''1060720''>before</span> <span m=''1061040''>we</span> <span m=''1061700''>go</span>
  <span m=''1061870''>to</span> <span m=''1062030''>the</span> <span m=''1062300''>code</span>
  <span m=''1062600''>overview?</span> <span m=''1069140''>Go ahead.</span> </p><p><span
  m=''1069610''>AUDIENCE: Do we</span> <span m=''1070094''>weight them</span> <span
  m=''1070578''>equally?</span> </p><p><span m=''1073000''>PROFESSOR: So</span> <span
  m=''1073110''>the</span> <span m=''1073200''>question</span> <span m=''1073600''>was,</span>
  <span m=''1074030''>do</span> <span m=''1074110''>we</span> <span m=''1074210''>weight</span>
  <span m=''1074540''>them</span> <span m=''1074700''>equally?</span> <span m=''1075830''>And</span>
  <span m=''1076290''>the</span> <span m=''1076420''>answer</span> <span m=''1076840''>is</span>
  <span m=''1077820''>yes.</span> <span m=''1080150''>And</span> <span m=''1081660''>you</span>
  <span m=''1082150''>just</span> <span m=''1082630''>sum</span> <span m=''1082900''>them</span>
  <span m=''1083080''>together.</span> <span m=''1089290''>Ideally,</span> <span m=''1090150''>you</span>
  <span m=''1090490''>were</span> <span m=''1091090''>clever</span> <span m=''1091740''>and</span>
  <span m=''1092000''>constructed</span> <span m=''1092550''>your ray</span> <span
  m=''1092870''>tracer</span> <span m=''1093350''>so</span> <span m=''1093560''>that</span>
  <span m=''1094060''>they</span> <span m=''1094210''>should</span> <span m=''1094450''>be</span>
  <span m=''1094590''>weighted</span> <span m=''1094930''>equally,</span> <span m=''1096830''>because</span>
  <span m=''1097170''>there''s</span> <span m=''1097510''>weighting</span> <span m=''1097930''>done</span>
  <span m=''1098810''>internally,</span> <span m=''1099680''>basically.</span> </p><p><span
  m=''1112380''>So</span> <span m=''1112730''>next,</span> <span m=''1113070''>we''re</span>
  <span m=''1113180''>going</span> <span m=''1113280''>to</span> <span m=''1114100''>do</span>
  <span m=''1114260''>a</span> <span m=''1114320''>quick</span> <span m=''1114730''>overview</span>
  <span m=''1115390''>of</span> <span m=''1115730''>the</span> <span m=''1116040''>code</span>
  <span m=''1116630''>that</span> <span m=''1116840''>will</span> <span m=''1117020''>be</span>
  <span m=''1117180''>in</span> <span m=''1117330''>your</span> <span m=''1117440''>repositories</span>
  <span m=''1119120''>just</span> <span m=''1119330''>get</span> <span m=''1119480''>you</span>
  <span m=''1119610''>started</span> <span m=''1120660''>and</span> <span m=''1120840''>help</span>
  <span m=''1121010''>you</span> <span m=''1121110''>understand</span> <span m=''1121560''>how
  it</span> <span m=''1121770''>works.</span> <span m=''1126080''>First,</span> <span
  m=''1126330''>we''re going to</span> <span m=''1126620''>start</span> <span m=''1127010''>by</span>
  <span m=''1127200''>explaining</span> <span m=''1128330''>some of the</span> <span
  m=''1128730''>classes</span> <span m=''1129200''>you''ll</span> <span m=''1129320''>find.</span>
  <span m=''1131030''>First</span> <span m=''1131730''>is</span> <span m=''1132090''>SceneObject,</span>
  <span m=''1134180''>which</span> <span m=''1134670''>is</span> <span m=''1135290''>the</span>
  <span m=''1136210''>parent</span> <span m=''1136540''>class</span> <span m=''1137030''>for</span>
  <span m=''1137250''>all</span> <span m=''1137520''>of the</span> <span m=''1137640''>objects</span>
  <span m=''1138100''>that will</span> <span m=''1138300''>be</span> <span m=''1138410''>used</span>
  <span m=''1138660''>to</span> <span m=''1138920''>construct</span> <span m=''1140020''>the</span>
  <span m=''1140100''>scenes</span> <span m=''1140430''>you''ll</span> <span m=''1140530''>be</span>
  <span m=''1140650''>rendering.</span> </p><p><span m=''1143030''>Every</span> <span
  m=''1143240''>scene</span> <span m=''1143470''>object</span> <span m=''1143870''>has</span>
  <span m=''1144420''>a</span> <span m=''1144560''>ray</span> <span m=''1144960''>intersection</span>
  <span m=''1145550''>method</span> <span m=''1146670''>that''s</span> <span m=''1146900''>called</span>
  <span m=''1147310''>whenever</span> <span m=''1147620''>you</span> <span m=''1148080''>trace</span>
  <span m=''1148410''>a</span> <span m=''1148700''>ray.</span> <span m=''1149830''>And</span>
  <span m=''1149990''>it''ll</span> <span m=''1151010''>return</span> <span m=''1153400''>where</span>
  <span m=''1153700''>the</span> <span m=''1153830''>ray</span> <span m=''1154100''>intersection</span>
  <span m=''1154680''>is</span> <span m=''1155700''>and</span> <span m=''1157150''>the</span>
  <span m=''1157300''>object.</span> <span m=''1159700''>And</span> <span m=''1160100''>SceneObject</span>
  <span m=''1160640''>is</span> <span m=''1160760''>inherited</span> <span m=''1161210''>by</span>
  <span m=''1161810''>these</span> <span m=''1162050''>objects</span> <span m=''1162430''>here,</span>
  <span m=''1162690''>which</span> <span m=''1163310''>all</span> <span m=''1163570''>of</span>
  <span m=''1163690''>the</span> <span m=''1167480''>objects</span> <span m=''1168100''>will</span>
  <span m=''1168470''>inherit from.</span> </p><p><span m=''1171120''>Then</span>
  <span m=''1171430''>we''ve</span> <span m=''1171560''>got</span> <span m=''1171870''>the</span>
  <span m=''1172170''>Raytracer</span> <span m=''1172770''>class,</span> <span m=''1175130''>which</span>
  <span m=''1176700''>contains</span> <span m=''1177290''>the</span> <span m=''1177840''>main</span>
  <span m=''1178200''>method.</span> <span m=''1178960''>So</span> <span m=''1179310''>it</span>
  <span m=''1179440''>starts</span> <span m=''1179740''>the</span> <span m=''1179780''>program.</span>
  <span m=''1180920''>And</span> <span m=''1181420''>it</span> <span m=''1181510''>also</span>
  <span m=''1181750''>contains</span> <span m=''1182390''>methods</span> <span m=''1182950''>for</span>
  <span m=''1183590''>constructing</span> <span m=''1184320''>the</span> <span m=''1184410''>scene</span>
  <span m=''1185420''>and</span> <span m=''1185770''>then</span> <span m=''1186930''>rendering</span>
  <span m=''1187400''>the</span> <span m=''1187490''>scene</span> <span m=''1188860''>once</span>
  <span m=''1189190''>you''ve</span> <span m=''1190760''>constructed</span> <span
  m=''1191180''>the scene</span> <span m=''1191620''>first.</span> </p><p><span m=''1193690''>We</span>
  <span m=''1193880''>have</span> <span m=''1194220''>the</span> <span m=''1194410''>LightSource</span>
  <span m=''1194990''>class,</span> <span m=''1196270''>which</span> <span m=''1196580''>is</span>
  <span m=''1197000''>a</span> <span m=''1197060''>base</span> <span m=''1197350''>class</span>
  <span m=''1197760''>for</span> <span m=''1197990''>any</span> <span m=''1198150''>light</span>
  <span m=''1198420''>sources.</span> <span m=''1199450''>In</span> <span m=''1199590''>our</span>
  <span m=''1199890''>ray</span> <span m=''1200190''>tracer,</span> <span m=''1200590''>the</span>
  <span m=''1200980''>only</span> <span m=''1202640''>subclass</span> <span m=''1203245''>is</span>
  <span m=''1203550''>square</span> <span m=''1203910''>photon</span> <span m=''1204330''>light,</span>
  <span m=''1205200''>which</span> <span m=''1205570''>is</span> <span m=''1207010''>this</span>
  <span m=''1207350''>light</span> <span m=''1207680''>at</span> <span m=''1207920''>the</span>
  <span m=''1208160''>top</span> <span m=''1208380''>of</span> <span m=''1208470''>the</span>
  <span m=''1208570''>scene</span> <span m=''1208870''>here.</span> <span m=''1210660''>And</span>
  <span m=''1212550''>what</span> <span m=''1212690''>that</span> <span m=''1212910''>does,</span>
  <span m=''1213640''>or</span> <span m=''1214120''>what</span> <span m=''1214290''>the</span>
  <span m=''1214360''>light</span> <span m=''1214600''>class</span> <span m=''1214930''>does,</span>
  <span m=''1215300''>is</span> <span m=''1215450''>it</span> <span m=''1215520''>contains</span>
  <span m=''1216070''>methods</span> <span m=''1216700''>for</span> <span m=''1217830''>constructing</span>
  <span m=''1218480''>the</span> <span m=''1218550''>photon</span> <span m=''1218990''>maps</span>
  <span m=''1219990''>and</span> <span m=''1220720''>getting</span> <span m=''1221130''>illumination</span>
  <span m=''1222040''>from</span> <span m=''1223090''>either</span> <span m=''1223410''>global,</span>
  <span m=''1223850''>or</span> <span m=''1223960''>caustic,</span> <span m=''1224480''>or</span>
  <span m=''1224900''>direct</span> <span m=''1225610''>sources.</span> </p><p><span
  m=''1227890''>And</span> <span m=''1228040''>then</span> <span m=''1228160''>there''s</span>
  <span m=''1228320''>also</span> <span m=''1229210''>the</span> <span m=''1229540''>iCache</span>
  <span m=''1230020''>class,</span> <span m=''1230680''>which</span> <span m=''1232720''>essentially</span>
  <span m=''1233240''>just</span> <span m=''1233570''>implements</span> <span m=''1234170''>the</span>
  <span m=''1234540''>iCache</span> <span m=''1234880''>for</span> <span m=''1235110''>you.</span>
  <span m=''1239820''>Any</span> <span m=''1239980''>questions?</span> <span m=''1247600''>So</span>
  <span m=''1248740''>basic</span> <span m=''1249450''>execution</span> <span m=''1251130''>overview.</span>
  </p><p><span m=''1252530''>You have the</span> <span m=''1252650''>main</span> <span
  m=''1253390''>method</span> <span m=''1253920''>for</span> <span m=''1254220''>Raytracer.</span>
  <span m=''1255770''>Parses</span> <span m=''1256090''>the</span> <span m=''1256170''>command</span>
  <span m=''1256530''>line.</span> <span m=''1257910''>Constructs</span> <span m=''1258400''>the</span>
  <span m=''1258490''>scene.</span> <span m=''1259970''>And</span> <span m=''1260440''>the</span>
  <span m=''1260520''>scene</span> <span m=''1260880''>is</span> <span m=''1261010''>just</span>
  <span m=''1261370''>a</span> <span m=''1261620''>command</span> <span m=''1261940''>line</span>
  <span m=''1262170''>switch.</span> <span m=''1262590''>So</span> <span m=''1263130''>if</span>
  <span m=''1263240''>you say</span> <span m=''1263530''>S1,</span> <span m=''1263770''>it''ll</span>
  <span m=''1263920''>construct</span> <span m=''1264480''>scene</span> <span m=''1264940''>one.</span>
  <span m=''1265750''>If you</span> <span m=''1266170''>say S2,</span> <span m=''1266440''>it''ll</span>
  <span m=''1266800''>construct</span> <span m=''1267160''>scene two.</span> <span
  m=''1269780''>Then</span> <span m=''1270170''>for</span> <span m=''1270320''>each</span>
  <span m=''1270520''>light</span> <span m=''1270740''>source,</span> <span m=''1271060''>it</span>
  <span m=''1271170''>tells</span> <span m=''1271550''>the</span> <span m=''1271620''>light</span>
  <span m=''1271820''>source</span> <span m=''1272230''>to</span> <span m=''1272480''>make</span>
  <span m=''1272680''>photon</span> <span m=''1273100''>maps</span> <span m=''1273620''>for</span>
  <span m=''1273840''>the</span> <span m=''1274270''>global</span> <span m=''1274680''>and</span>
  <span m=''1275020''>caustic</span> <span m=''1276510''>illumination.</span> </p><p><span
  m=''1276800''>GUEST SPEAKER: I</span> <span m=''1277090''>should</span> <span m=''1277582''>mention</span>
  <span m=''1278074''>that we actually</span> <span m=''1278566''>moved</span> <span
  m=''1279058''>the</span> <span m=''1279550''>main</span> <span m=''1280042''>functionality</span>
  <span m=''1280534''>into</span> <span m=''1281026''>[INAUDIBLE]</span> <span m=''1282502''>so
  you can</span> <span m=''1282994''>replace the data.</span> <span m=''1283486''>You</span>
  <span m=''1283978''>don''t</span> <span m=''1284470''>have to</span> <span m=''1284962''>touch
  that.</span> <span m=''1285454''>It</span> <span m=''1285946''>just</span> <span
  m=''1286438''>constructs the scene,</span> <span m=''1286930''>so</span> <span m=''1287422''>that
  we can then add</span> <span m=''1287914''>a scene</span> <span m=''1288406''>[INAUDIBLE]</span>
  <span m=''1288898''>from that.</span> <span m=''1289390''>So</span> <span m=''1289882''>you</span>
  <span m=''1290400''>shouldn''t need</span> <span m=''1290750''>to do that.</span>
  </p><p><span m=''1291100''>PROFESSOR: OK.</span> <span m=''1291670''>So</span> <span
  m=''1293090''>that''s</span> <span m=''1293370''>changed</span> <span m=''1294225''>then.</span>
  <span m=''1297020''>Then,</span> <span m=''1297410''>main</span> <span m=''1297820''>calls</span>
  <span m=''1298420''>the</span> <span m=''1298620''>render</span> <span m=''1298890''>function</span>
  <span m=''1299300''>of</span> <span m=''1299390''>Raytracer.</span> <span m=''1300890''>What
  the</span> <span m=''1301000''>render</span> <span m=''1301250''>function</span>
  <span m=''1302320''>does--</span> <span m=''1303800''>excuse</span> <span m=''1304050''>me,</span>
  <span m=''1304690''>method</span> <span m=''1305130''>does--</span> <span m=''1305760''>is</span>
  <span m=''1306620''>it</span> <span m=''1306800''>casts</span> <span m=''1307150''>a
  ray</span> <span m=''1307520''>for</span> <span m=''1307760''>each</span> <span
  m=''1308000''>pixel</span> <span m=''1308590''>in</span> <span m=''1308760''>the</span>
  <span m=''1308820''>scene</span> <span m=''1309550''>you''re</span> <span m=''1309720''>going</span>
  <span m=''1310210''>to</span> <span m=''1311590''>render,</span> <span m=''1312660''>finds
  the</span> <span m=''1313050''>nearest</span> <span m=''1313420''>intersection,</span>
  <span m=''1314690''>and</span> <span m=''1314890''>then</span> <span m=''1315440''>computes</span>
  <span m=''1315850''>the</span> <span m=''1316130''>shading</span> <span m=''1316410''>at</span>
  <span m=''1316570''>that</span> <span m=''1316750''>intersection</span> <span m=''1317420''>by</span>
  <span m=''1318110''>recursively</span> <span m=''1318760''>bouncing</span> <span
  m=''1319240''>rays</span> <span m=''1319880''>and</span> <span m=''1321890''>[?
  painting ?]</span> <span m=''1322170''>the</span> <span m=''1322320''>illuminance</span>
  <span m=''1322730''>cache</span> <span m=''1323140''>for</span> <span m=''1323350''>illumination.</span>
  </p><p><span m=''1327670''>And</span> <span m=''1328960''>that''s</span> <span m=''1329290''>basically</span>
  <span m=''1329760''>what</span> <span m=''1329900''>the</span> <span m=''1329990''>Raytracer</span>
  <span m=''1330650''>does.</span> <span m=''1331720''>It''s</span> <span m=''1331870''>pretty</span>
  <span m=''1332110''>simple.</span> <span m=''1333900''>So</span> <span m=''1335530''>we''re</span>
  <span m=''1335680''>also</span> <span m=''1336210''>going to</span> <span m=''1336570''>quickly</span>
  <span m=''1336920''>go over</span> <span m=''1337160''>how</span> <span m=''1337840''>the</span>
  <span m=''1338090''>light</span> <span m=''1338390''>source</span> <span m=''1338740''>traces</span>
  <span m=''1339190''>photons</span> <span m=''1339770''>for</span> <span m=''1339900''>direct</span>
  <span m=''1340255''>and</span> <span m=''1340610''>global</span> <span m=''1341010''>illumination.</span>
  <span m=''1343810''>The</span> <span m=''1343970''>difference</span> <span m=''1345220''>is</span>
  <span m=''1346660''>kind</span> <span m=''1347010''>of</span> <span m=''1347080''>settled,</span>
  <span m=''1347560''>but</span> <span m=''1347790''>pretty</span> <span m=''1348010''>important.</span>
  </p><p><span m=''1350320''>With</span> <span m=''1350520''>global</span> <span m=''1350960''>illumination,</span>
  <span m=''1353590''>you</span> <span m=''1353890''>want</span> <span m=''1354280''>some</span>
  <span m=''1354640''>total</span> <span m=''1354900''>number</span> <span m=''1355550''>of</span>
  <span m=''1356160''>photons</span> <span m=''1356880''>to be</span> <span m=''1357100''>put</span>
  <span m=''1357320''>in</span> <span m=''1357390''>the</span> <span m=''1357470''>map.</span>
  <span m=''1358710''>And</span> <span m=''1359980''>you</span> <span m=''1360150''>put</span>
  <span m=''1360370''>a</span> <span m=''1360420''>photon</span> <span m=''1361020''>in</span>
  <span m=''1361150''>the</span> <span m=''1361220''>map</span> <span m=''1362220''>whenever</span>
  <span m=''1364030''>it</span> <span m=''1364360''>hits</span> <span m=''1365030''>some</span>
  <span m=''1365380''>diffuse</span> <span m=''1365660''>surface.</span> <span m=''1370460''>And</span>
  <span m=''1370730''>then,</span> <span m=''1372540''>that</span> <span m=''1372790''>photon</span>
  <span m=''1373240''>then</span> <span m=''1373590''>continues</span> <span m=''1374150''>bouncing</span>
  <span m=''1374570''>around</span> <span m=''1375040''>until</span> <span m=''1375340''>it''s</span>
  <span m=''1375500''>absorbed.</span> </p><p><span m=''1378380''>For</span> <span
  m=''1378695''>caustic</span> <span m=''1379360''>illumination,</span> <span m=''1380950''>it''s</span>
  <span m=''1381230''>pretty similar.</span> <span m=''1381660''>You</span> <span
  m=''1381830''>have</span> <span m=''1381990''>some</span> <span m=''1382230''>set</span>
  <span m=''1382520''>number</span> <span m=''1383120''>of</span> <span m=''1383700''>photons</span>
  <span m=''1384350''>you</span> <span m=''1384410''>want</span> <span m=''1384570''>to</span>
  <span m=''1384640''>get</span> <span m=''1384730''>into</span> <span m=''1384900''>the</span>
  <span m=''1385000''>map.</span> <span m=''1386400''>You</span> <span m=''1386500''>cast</span>
  <span m=''1386850''>a ray</span> <span m=''1387250''>in</span> <span m=''1388210''>some</span>
  <span m=''1388520''>random</span> <span m=''1388800''>direction.</span> <span m=''1390410''>And</span>
  <span m=''1390650''>then,</span> <span m=''1392690''>the</span> <span m=''1392820''>ray</span>
  <span m=''1393250''>intersects</span> <span m=''1393580''>with</span> <span m=''1394180''>a</span>
  <span m=''1394590''>diffuse</span> <span m=''1395350''>material.</span> <span m=''1395960''>You</span>
  <span m=''1396100''>store</span> <span m=''1396826''>the</span> <span m=''1397190''>intersection</span>
  <span m=''1397400''>in the</span> <span m=''1397900''>photon</span> <span m=''1398280''>map.</span>
  <span m=''1398990''>And</span> <span m=''1399080''>then</span> <span m=''1399180''>you</span>
  <span m=''1399280''>break.</span> <span m=''1399850''>You</span> <span m=''1399970''>don''t</span>
  <span m=''1400240''>keep</span> <span m=''1400420''>bouncing</span> <span m=''1400850''>the</span>
  <span m=''1400930''>photons</span> <span m=''1401370''>around.</span> </p><p><span
  m=''1404900''>So</span> <span m=''1406970''>that''s</span> <span m=''1407170''>basically</span>
  <span m=''1407500''>it</span> <span m=''1407600''>for</span> <span m=''1407690''>the</span>
  <span m=''1407780''>code</span> <span m=''1408020''>overview.</span> <span m=''1409500''>This</span>
  <span m=''1409700''>slide</span> <span m=''1410050''>has</span> <span m=''1410350''>some</span>
  <span m=''1410610''>resources</span> <span m=''1411460''>that</span> <span m=''1412080''>you</span>
  <span m=''1412260''>can</span> <span m=''1412420''>use</span> <span m=''1412740''>if</span>
  <span m=''1412840''>you</span> <span m=''1412940''>want</span> <span m=''1413070''>to</span>
  <span m=''1413180''>learn</span> <span m=''1413400''>more</span> <span m=''1413560''>about</span>
  <span m=''1413820''>ray</span> <span m=''1414295''>tracing.</span> <span m=''1417370''>Some</span>
  <span m=''1417630''>of</span> <span m=''1417670''>these</span> <span m=''1417930''>will</span>
  <span m=''1418300''>explain</span> <span m=''1419140''>concepts</span> <span m=''1419630''>that</span>
  <span m=''1419740''>we</span> <span m=''1419820''>haven''t</span> <span m=''1420080''>implemented.</span>
  <span m=''1422840''>They''re</span> <span m=''1423040''>an</span> <span m=''1423600''>interesting</span>
  <span m=''1424110''>read,</span> <span m=''1424350''>but</span> <span m=''1424960''>not</span>
  <span m=''1425180''>needed</span> <span m=''1425470''>if</span> <span m=''1425590''>you
  don''t</span> <span m=''1425710''>want</span> <span m=''1425880''>to</span> <span
  m=''1425930''>read</span> <span m=''1426150''>them.</span> </p><p><span m=''1428210''>And</span>
  <span m=''1428340''>also,</span> <span m=''1432340''>there''s</span> <span m=''1432650''>no</span>
  <span m=''1434310''>standard</span> <span m=''1434960''>way</span> <span m=''1435410''>of</span>
  <span m=''1435650''>doing</span> <span m=''1436590''>global</span> <span m=''1437260''>illumination</span>
  <span m=''1438150''>or</span> <span m=''1438600''>direct</span> <span m=''1438910''>illumination.</span>
  <span m=''1440090''>So</span> <span m=''1441400''>you</span> <span m=''1441600''>may</span>
  <span m=''1441800''>come</span> <span m=''1441980''>across</span> <span m=''1442420''>resources</span>
  <span m=''1443160''>that</span> <span m=''1443320''>do</span> <span m=''1443460''>things</span>
  <span m=''1443750''>slightly</span> <span m=''1444160''>different</span> <span m=''1444990''>than</span>
  <span m=''1445320''>our</span> <span m=''1445490''>reference</span> <span m=''1445920''>implementation.</span>
  <span m=''1447320''>That</span> <span m=''1447410''>doesn''t</span> <span m=''1447650''>mean</span>
  <span m=''1447780''>either</span> <span m=''1447990''>one</span> <span m=''1448170''>is</span>
  <span m=''1448240''>wrong.</span> <span m=''1449740''>But you</span> <span m=''1449920''>should</span>
  <span m=''1450080''>be</span> <span m=''1450170''>aware</span> <span m=''1450420''>that</span>
  <span m=''1451090''>there</span> <span m=''1451280''>will</span> <span m=''1451800''>almost</span>
  <span m=''1452050''>certainly</span> <span m=''1452370''>be</span> <span m=''1452480''>differences.</span>
  <span m=''1465020''>Does</span> <span m=''1465260''>anyone have</span> <span m=''1465420''>any</span>
  <span m=''1466000''>questions?</span> <span m=''1468338''>Go ahead.</span> </p><p><span
  m=''1468792''>AUDIENCE: So we can</span> <span m=''1469246''>use one of</span> <span
  m=''1469700''>those alternatives?</span> </p><p><span m=''1470154''>PROFESSOR: Can</span>
  <span m=''1470608''>you say that</span> <span m=''1471062''>louder</span> <span
  m=''1471520''>please?</span> </p><p><span m=''1472190''>AUDIENCE: So we</span> <span
  m=''1472555''>can use</span> <span m=''1472920''>one of</span> <span m=''1473370''>those
  alternatives?</span> </p><p><span m=''1476920''>PROFESSOR: These</span> <span m=''1477200''>aren''t</span>
  <span m=''1477990''>implementations.</span> <span m=''1479290''>They''re</span>
  <span m=''1479740''>descriptions</span> <span m=''1480500''>of</span> <span m=''1480590''>how</span>
  <span m=''1481060''>ray</span> <span m=''1481320''>tracing</span> <span m=''1481580''>works.</span>
  <span m=''1484590''>You</span> <span m=''1485000''>should</span> <span m=''1485420''>not</span>
  <span m=''1485940''>change</span> <span m=''1486280''>your</span> <span m=''1486410''>code</span>
  <span m=''1486910''>to</span> <span m=''1487100''>work</span> <span m=''1487320''>in</span>
  <span m=''1487400''>this</span> <span m=''1487600''>way.</span> <span m=''1488920''>These</span>
  <span m=''1489130''>are</span> <span m=''1489190''>just</span> <span m=''1489430''>to</span>
  <span m=''1489490''>help</span> <span m=''1489720''>with</span> <span m=''1489910''>clarification</span>
  <span m=''1490850''>if</span> <span m=''1491010''>you</span> <span m=''1491160''>want</span>
  <span m=''1491410''>to</span> <span m=''1492040''>learn</span> <span m=''1492310''>more</span>
  <span m=''1492460''>about</span> <span m=''1493100''>what''s</span> <span m=''1493360''>being</span>
  <span m=''1493940''>done</span> <span m=''1494170''>in</span> <span m=''1494270''>the</span>
  <span m=''1494360''>code.</span> <span m=''1497796''>Go ahead.</span> </p><p><span
  m=''1498282''>AUDIENCE: [INAUDIBLE PHRASE]</span> <span m=''1499740''>what</span>
  <span m=''1501198''>specifically</span> <span m=''1502170''>are</span> <span m=''1502656''>we</span>
  <span m=''1503142''>allowed</span> <span m=''1503628''>to</span> <span m=''1504114''>change</span>
  <span m=''1505572''>for</span> <span m=''1506058''>the</span> <span m=''1506544''>[INAUDIBLE]?</span>
  </p><p><span m=''1508280''>PROFESSOR: So</span> <span m=''1509090''>what</span>
  <span m=''1509360''>specifically</span> <span m=''1510110''>are</span> <span m=''1510230''>you</span>
  <span m=''1510320''>allowed</span> <span m=''1510550''>to</span> <span m=''1510650''>change?</span>
  </p><p><span m=''1511003''>AUDIENCE: Yeah.</span> <span m=''1513280''>Which ever</span>
  <span m=''1513490''>one''s smaller</span> <span m=''1513966''>[INAUDIBLE PHRASE].</span>
  </p><p><span m=''1518240''>PROFESSOR: Anything</span> <span m=''1519010''>not</span>
  <span m=''1519420''>prohibited</span> <span m=''1520390''>by</span> <span m=''1520860''>these</span>
  <span m=''1521100''>rules,</span> <span m=''1522280''>which</span> <span m=''1522520''>are</span>
  <span m=''1522910''>paraphrased</span> <span m=''1523580''>from</span> <span m=''1523850''>the</span>
  <span m=''1524500''>project</span> <span m=''1525380''>handout,</span> <span m=''1526390''>you</span>
  <span m=''1526600''>can</span> <span m=''1526800''>do.</span> <span m=''1528390''>So</span>
  <span m=''1528620''>basically,</span> <span m=''1529160''>as</span> <span m=''1529300''>long</span>
  <span m=''1529590''>as</span> <span m=''1529710''>you''re</span> <span m=''1529870''>still</span>
  <span m=''1530490''>performing</span> <span m=''1531560''>the</span> <span m=''1531650''>same</span>
  <span m=''1532310''>essential</span> <span m=''1532900''>calculations,</span> <span
  m=''1535150''>you''re</span> <span m=''1535330''>fine.</span> <span m=''1536756''>Hmm?</span>
  </p><p><span m=''1537254''>GUEST SPEAKER: I would say</span> <span m=''1537752''>the</span>
  <span m=''1539246''>criteria</span> <span m=''1539744''>for correctness</span> <span
  m=''1540242''>is to look</span> <span m=''1540740''>at the</span> <span m=''1541238''>images,</span>
  <span m=''1541736''>and</span> <span m=''1542234''>say that</span> <span m=''1542740''>they
  look more or less the same.</span> <span m=''1543160''>They don''t</span> <span
  m=''1543580''>give you</span> <span m=''1544076''>a pixel by</span> <span m=''1544572''>pixel</span>
  <span m=''1545068''>accurate.</span> <span m=''1546060''>This isn''t</span> <span
  m=''1546556''>a</span> <span m=''1547052''>graphics</span> <span m=''1547548''>class</span>
  <span m=''1548044''>that</span> <span m=''1548540''>actually</span> <span m=''1549036''>does</span>
  <span m=''1549532''>that.</span> <span m=''1551020''>This</span> <span m=''1551516''>should</span>
  <span m=''1552012''>be</span> <span m=''1552508''>almost</span> <span m=''1553004''>like</span>
  <span m=''1553500''>a</span> <span m=''1553996''>[INAUDIBLE].</span> </p><p><span
  m=''1556000''>PROFESSOR: They</span> <span m=''1556110''>should</span> <span m=''1556870''>visually</span>
  <span m=''1557340''>look</span> <span m=''1557600''>the</span> <span m=''1557690''>same.</span>
  <span m=''1563970''>If</span> <span m=''1564160''>you</span> <span m=''1567370''>find</span>
  <span m=''1567840''>some</span> <span m=''1568210''>approximation</span> <span m=''1570010''>that</span>
  <span m=''1571020''>looks</span> <span m=''1571280''>almost</span> <span m=''1571520''>the</span>
  <span m=''1571610''>same</span> <span m=''1572030''>and</span> <span m=''1572160''>runs</span>
  <span m=''1572660''>100</span> <span m=''1572990''>times</span> <span m=''1573320''>faster,</span>
  <span m=''1574180''>go</span> <span m=''1574320''>for</span> <span m=''1574610''>it.</span>
  <span m=''1575880''>You</span> <span m=''1576010''>can''t</span> <span m=''1576390''>say,</span>
  <span m=''1576810''>for</span> <span m=''1577000''>example,</span> <span m=''1578380''>simplify
  your</span> <span m=''1578880''>ray</span> <span m=''1579140''>tracer</span> <span
  m=''1579570''>though</span> <span m=''1579750''>by</span> <span m=''1579950''>saying,</span>
  <span m=''1580380''>OK,</span> <span m=''1580630''>we''re</span> <span m=''1580800''>only</span>
  <span m=''1581080''>going</span> <span m=''1581260''>to</span> <span m=''1581310''>be</span>
  <span m=''1581450''>able</span> <span m=''1581610''>to</span> <span m=''1581720''>render</span>
  <span m=''1582040''>these</span> <span m=''1582290''>two</span> <span m=''1582430''>scenes,</span>
  <span m=''1582910''>but</span> <span m=''1583090''>we''ll be</span> <span m=''1583190''>able</span>
  <span m=''1583310''>to</span> <span m=''1583380''>do</span> <span m=''1583490''>it</span>
  <span m=''1583550''>really</span> <span m=''1583780''>fast.</span> </p>'
uid: c6e4162a-c7ff-2751-163c-1ff674e0f03b
---

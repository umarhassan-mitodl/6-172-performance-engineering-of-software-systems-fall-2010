---
about_this_resource_text: <p><strong>Description:</strong> Lecture covering parallelism,
  scheduling theory, the Cilk++ runtime system, and Cilk chess programs.</p> <p><strong>Speaker:</strong>
  Charles Leiserson</p>
content_type: resource
course_id: 6-172-performance-engineering-of-software-systems-fall-2010
embedded_media:
- id: Video-InternetArchive-MP4
  media_location: http://www.archive.org/download/MIT6.172F10/MIT6_172_F10_lec13_300k.mp4
  parent_uid: cadeec1b155f2ccc390892ed1a70fcb0
  title: Video-Internet Archive-MP4
  type: Video
  uid: 816a0ca07fef0414f69a21adc0356146
- id: Video-iTunesU-MP4
  media_location: http://itunes.apple.com/us/itunes-u/lecture-13-parallelism-performance/id481759887?i=109649111
  parent_uid: cadeec1b155f2ccc390892ed1a70fcb0
  title: Video-iTunes U-MP4
  type: Video
  uid: 4a13c63cb277656d1f22394b789ce156
- id: Video-YouTube-Stream
  media_location: UUKTIhxznF0
  parent_uid: cadeec1b155f2ccc390892ed1a70fcb0
  title: Video-YouTube-Stream
  type: Video
  uid: 73459aa0ee5411a7d71187120e0f0ee6
- id: Thumbnail-YouTube-JPG
  media_location: https://img.youtube.com/vi/UUKTIhxznF0/default.jpg
  parent_uid: cadeec1b155f2ccc390892ed1a70fcb0
  title: Thumbnail-YouTube-JPG
  type: Thumbnail
  uid: 02c94b42a64ecf3bcfcc3932315ac8a8
- id: MIT6_172F10_lec13.pdf
  parent_uid: cadeec1b155f2ccc390892ed1a70fcb0
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-172-performance-engineering-of-software-systems-fall-2010/video-lectures/lecture-13-parallelism-and-performance/MIT6_172F10_lec13.pdf
  title: MIT6_172F10_lec13.pdf
  type: null
  uid: 8a7c2c6b6d6e2c5bbce0bc01a3d6d526
- id: 3Play-3PlayYouTubeid-MP4
  media_location: UUKTIhxznF0
  parent_uid: cadeec1b155f2ccc390892ed1a70fcb0
  title: 3Play-3Play YouTube id
  type: 3Play
  uid: 86f04dcaa8274f1c2f44d008382fd5a3
- id: UUKTIhxznF0.srt
  parent_uid: cadeec1b155f2ccc390892ed1a70fcb0
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-172-performance-engineering-of-software-systems-fall-2010/video-lectures/lecture-13-parallelism-and-performance/UUKTIhxznF0.srt
  title: 3play caption file
  type: null
  uid: b740f571189c8b4b3f34d9858d2c6596
- id: UUKTIhxznF0.pdf
  parent_uid: cadeec1b155f2ccc390892ed1a70fcb0
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-172-performance-engineering-of-software-systems-fall-2010/video-lectures/lecture-13-parallelism-and-performance/UUKTIhxznF0.pdf
  title: 3play pdf file
  type: null
  uid: 625ed058b482633827977d17cd6b4a67
- id: Caption-3Play YouTube id-SRT
  parent_uid: cadeec1b155f2ccc390892ed1a70fcb0
  title: Caption-3Play YouTube id-SRT-English - US
  type: Caption
  uid: 8f5e06ed19fb4a3283ee680fa86c3859
- id: Transcript-3Play YouTube id-PDF
  parent_uid: cadeec1b155f2ccc390892ed1a70fcb0
  title: Transcript-3Play YouTube id-PDF-English - US
  type: Transcript
  uid: f4a0bae7d7abbecde1a7d56ba1b1f1ab
file: null
file_size: null
hide_download: true
hide_download_original: null
inline_embed_id: 94829505lecture13:parallelismandperformance37123114
layout: video
license: https://creativecommons.org/licenses/by-nc-sa/4.0/
order_index: 148
parent_uid: 24169d0487e846a39c316276f85b8cb5
related_resources_text: ''
short_url: lecture-13-parallelism-and-performance
technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-172-performance-engineering-of-software-systems-fall-2010/video-lectures/lecture-13-parallelism-and-performance
title: 'Lecture 13: Parallelism and Performance'
transcript: '<p><span m=''120''>The</span> <span m=''190''>following</span> <span
  m=''630''>content</span> <span m=''1230''>is</span> <span m=''1340''>provided</span>
  <span m=''1790''>under</span> <span m=''2070''>a</span> <span m=''2090''>Creative</span>
  <span m=''2500''>Commons</span> <span m=''2910''>license.</span> <span m=''3910''>Your</span>
  <span m=''4200''>support</span> <span m=''4870''>help</span> <span m=''5100''>MIT</span>
  <span m=''5580''>OpenCourseWare</span> <span m=''6360''>continue</span> <span m=''6870''>to</span>
  <span m=''6950''>offer</span> <span m=''7380''>high</span> <span m=''7590''>quality</span>
  <span m=''8119''>educational</span> <span m=''8740''>resources</span> <span m=''9390''>for</span>
  <span m=''9520''>free.</span> <span m=''10600''>To</span> <span m=''10730''>make</span>
  <span m=''10930''>a</span> <span m=''10980''>donation</span> <span m=''11620''>or</span>
  <span m=''11930''>view</span> <span m=''12340''>additional</span> <span m=''12800''>materials</span>
  <span m=''13340''>from</span> <span m=''13500''>hundreds</span> <span m=''13930''>of</span>
  <span m=''14040''>MIT</span> <span m=''14460''>courses,</span> <span m=''15460''>visit</span>
  <span m=''15790''>MIT</span> <span m=''16219''>OpenCourseWare</span> <span m=''17250''>at</span>
  <span m=''18130''>ocw.mit.edu.</span> </p><p><span m=''23310''>PROFESSOR: So</span>
  <span m=''23970''>today,</span> <span m=''24260''>we''re</span> <span m=''24390''>going</span>
  <span m=''24480''>to</span> <span m=''24570''>talk</span> <span m=''24930''>a</span>
  <span m=''25210''>bit</span> <span m=''26070''>more</span> <span m=''26460''>about</span>
  <span m=''26840''>parallelism</span> <span m=''28000''>and</span> <span m=''28750''>about</span>
  <span m=''29250''>how</span> <span m=''29560''>you</span> <span m=''29770''>get</span>
  <span m=''30050''>performance</span> <span m=''30680''>out</span> <span m=''30860''>of</span>
  <span m=''32360''>parallel</span> <span m=''33120''>codes.</span> <span m=''33650''>And</span>
  <span m=''34300''>also, we''re</span> <span m=''34660''>going</span> <span m=''34770''>to</span>
  <span m=''34850''>take</span> <span m=''35100''>a</span> <span m=''35170''>little</span>
  <span m=''35460''>bit</span> <span m=''35610''>of</span> <span m=''35720''>a</span>
  <span m=''35940''>tour</span> <span m=''36860''>underneath</span> <span m=''37580''>the</span>
  <span m=''37860''>Cilk++</span> <span m=''38780''>runtime</span> <span m=''39310''>system</span>
  <span m=''40150''>so</span> <span m=''40300''>you</span> <span m=''40390''>can</span>
  <span m=''40540''>get</span> <span m=''40660''>an</span> <span m=''40780''>idea</span>
  <span m=''41100''>of</span> <span m=''41210''>what''s</span> <span m=''41460''>going</span>
  <span m=''41730''>on</span> <span m=''42000''>underneath</span> <span m=''42820''>and</span>
  <span m=''43030''>why</span> <span m=''43340''>it</span> <span m=''43440''>is</span>
  <span m=''43840''>that</span> <span m=''44400''>when</span> <span m=''44700''>you</span>
  <span m=''44830''>code</span> <span m=''45160''>stuff,</span> <span m=''46580''>how</span>
  <span m=''46900''>it</span> <span m=''46970''>is</span> <span m=''47190''>that</span>
  <span m=''47300''>it</span> <span m=''47430''>gets</span> <span m=''47670''>mapped,</span>
  <span m=''48430''>scheduled</span> <span m=''48940''>on</span> <span m=''49150''>the</span>
  <span m=''49540''>processors.</span> </p><p><span m=''52700''>So</span> <span m=''55000''>when</span>
  <span m=''55260''>people</span> <span m=''55540''>talk</span> <span m=''55790''>about</span>
  <span m=''56070''>parallelism,</span> <span m=''56670''>one</span> <span m=''56780''>of</span>
  <span m=''56820''>the</span> <span m=''57020''>first</span> <span m=''57230''>things
  that</span> <span m=''57490''>often</span> <span m=''57790''>comes</span> <span
  m=''58140''>up</span> <span m=''58370''>is</span> <span m=''58530''>what''s</span>
  <span m=''58780''>called</span> <span m=''59100''>Amdahl''s</span> <span m=''59770''>Law.</span>
  <span m=''61150''>Gene</span> <span m=''61380''>Amdahl</span> <span m=''62610''>was</span>
  <span m=''64000''>the</span> <span m=''64860''>architect</span> <span m=''65680''>of</span>
  <span m=''66090''>the</span> <span m=''66770''>IBM360</span> <span m=''69070''>computers</span>
  <span m=''69630''>who</span> <span m=''69780''>then</span> <span m=''70040''>left</span>
  <span m=''70600''>IBM</span> <span m=''71150''>and</span> <span m=''72030''>formed</span>
  <span m=''72430''>his</span> <span m=''72580''>own</span> <span m=''72780''>company</span>
  <span m=''73780''>that</span> <span m=''74780''>made</span> <span m=''75400''>competing</span>
  <span m=''76020''>machines</span> <span m=''77200''>and</span> <span m=''79850''>he</span>
  <span m=''80400''>made</span> <span m=''80700''>the</span> <span m=''80770''>following</span>
  <span m=''81230''>observation</span> <span m=''82440''>about</span> <span m=''82770''>parallel</span>
  <span m=''83340''>computing,</span> <span m=''83840''>he</span> <span m=''83980''>said--</span>
  <span m=''85230''>and</span> <span m=''85490''>I''m</span> <span m=''85630''>paraphrasing</span>
  <span m=''86340''>here--</span> <span m=''88250''>half</span> <span m=''88570''>your</span>
  <span m=''88720''>application</span> <span m=''89360''>is</span> <span m=''89510''>parallel</span>
  <span m=''90570''>and</span> <span m=''90700''>half</span> <span m=''90900''>is</span>
  <span m=''91110''>serial.</span> <span m=''92720''>You</span> <span m=''92850''>can''t</span>
  <span m=''93130''>get</span> <span m=''93320''>more</span> <span m=''93540''>than</span>
  <span m=''93670''>a</span> <span m=''93720''>factor</span> <span m=''94010''>of</span>
  <span m=''94300''>two</span> <span m=''94580''>speed</span> <span m=''94960''>up,</span>
  <span m=''95200''>no</span> <span m=''95310''>matter</span> <span m=''95610''>how</span>
  <span m=''95810''>many</span> <span m=''96150''>processors</span> <span m=''96760''>it</span>
  <span m=''96860''>runs</span> <span m=''97180''>on.</span> </p><p><span m=''98980''>So</span>
  <span m=''99150''>if</span> <span m=''99210''>you</span> <span m=''99310''>think</span>
  <span m=''99540''>about</span> <span m=''99850''>it,</span> <span m=''100020''>if</span>
  <span m=''100200''>it''s</span> <span m=''100390''>half</span> <span m=''100790''>parallel</span>
  <span m=''101820''>and</span> <span m=''101970''>you</span> <span m=''102050''>managed</span>
  <span m=''102450''>to</span> <span m=''102550''>make</span> <span m=''102810''>that</span>
  <span m=''103100''>parallel</span> <span m=''104110''>part</span> <span m=''104920''>run</span>
  <span m=''105160''>in</span> <span m=''105330''>zero time,</span> <span m=''108020''>still</span>
  <span m=''108390''>the</span> <span m=''108480''>serial</span> <span m=''108950''>part</span>
  <span m=''109300''>will</span> <span m=''109420''>be</span> <span m=''109550''>half</span>
  <span m=''109920''>of</span> <span m=''110050''>the</span> <span m=''110150''>time</span>
  <span m=''111850''>and you</span> <span m=''112020''>only</span> <span m=''112280''>get</span>
  <span m=''112390''>a</span> <span m=''112430''>factor</span> <span m=''112850''>of</span>
  <span m=''112930''>two</span> <span m=''113150''>speedup.</span> <span m=''114980''>You</span>
  <span m=''115160''>can</span> <span m=''115300''>generalize</span> <span m=''115900''>that</span>
  <span m=''116130''>to</span> <span m=''116220''>say if</span> <span m=''116650''>some</span>
  <span m=''116870''>fraction</span> <span m=''117340''>alpha</span> <span m=''117910''>can</span>
  <span m=''118030''>be</span> <span m=''118160''>run</span> <span m=''118330''>in</span>
  <span m=''118430''>parallel</span> <span m=''119120''>and</span> <span m=''119290''>the</span>
  <span m=''119360''>rest</span> <span m=''119660''>must</span> <span m=''119840''>be</span>
  <span m=''119950''>run</span> <span m=''120160''>serially,</span> <span m=''121320''>the</span>
  <span m=''121420''>speedup</span> <span m=''122070''>is</span> <span m=''122310''>at</span>
  <span m=''122410''>most</span> <span m=''122780''>1</span> <span m=''122960''>over</span>
  <span m=''123140''>1</span> <span m=''123360''>minus</span> <span m=''123700''>alpha.</span>
  <span m=''125780''>OK,</span> <span m=''127030''>so</span> <span m=''128889''>this</span>
  <span m=''129070''>was</span> <span m=''129240''>used</span> <span m=''129850''>in</span>
  <span m=''130120''>the</span> <span m=''132240''>1980s</span> <span m=''133170''>in</span>
  <span m=''133310''>particular</span> <span m=''134330''>to</span> <span m=''134520''>say</span>
  <span m=''134800''>why</span> <span m=''135170''>it was</span> <span m=''135530''>that</span>
  <span m=''135620''>parallel</span> <span m=''136020''>computing</span> <span m=''136460''>had</span>
  <span m=''136680''>no</span> <span m=''136830''>future,</span> <span m=''138540''>because</span>
  <span m=''138700''>you</span> <span m=''138790''>simply</span> <span m=''139110''>weren''t</span>
  <span m=''139330''>going</span> <span m=''139460''>to</span> <span m=''139510''>be</span>
  <span m=''139740''>able</span> <span m=''139890''>to</span> <span m=''139950''>get</span>
  <span m=''140350''>very</span> <span m=''142270''>much</span> <span m=''142530''>speedups</span>
  <span m=''143090''>from</span> <span m=''143310''>parallel</span> <span m=''143660''>computing.</span>
  <span m=''144030''>You''re</span> <span m=''144160''>going</span> <span m=''144260''>to</span>
  <span m=''144300''>spend</span> <span m=''145290''>extra</span> <span m=''146720''>hardware</span>
  <span m=''147690''>on</span> <span m=''147920''>the</span> <span m=''148020''>parallel</span>
  <span m=''148560''>parts</span> <span m=''148890''>of</span> <span m=''148960''>the</span>
  <span m=''149040''>system</span> <span m=''150270''>and</span> <span m=''150490''>yet</span>
  <span m=''151870''>you</span> <span m=''152020''>might</span> <span m=''152350''>be</span>
  <span m=''152480''>limited</span> <span m=''154030''>in</span> <span m=''154210''>terms</span>
  <span m=''154510''>of</span> <span m=''154580''>how</span> <span m=''154810''>much</span>
  <span m=''155710''>parallelism</span> <span m=''156410''>there</span> <span m=''156600''>is</span>
  <span m=''156840''>in</span> <span m=''156930''>a</span> <span m=''156980''>particular</span>
  <span m=''157500''>application</span> <span m=''158690''>and</span> <span m=''158880''>you</span>
  <span m=''158990''>wouldn''t</span> <span m=''159230''>get</span> <span m=''159440''>very</span>
  <span m=''159640''>much</span> <span m=''159870''>speedup.</span> <span m=''160060''>You</span>
  <span m=''160280''>wouldn''t</span> <span m=''160480''>get</span> <span m=''160640''>the</span>
  <span m=''160710''>bang</span> <span m=''161050''>for</span> <span m=''161150''>the</span>
  <span m=''161260''>buck,</span> <span m=''161560''>if</span> <span m=''161670''>you</span>
  <span m=''161790''>will.</span> </p><p><span m=''162750''>So</span> <span m=''162930''>things</span>
  <span m=''163190''>have</span> <span m=''163290''>changed</span> <span m=''163820''>today</span>
  <span m=''164680''>that</span> <span m=''164860''>make</span> <span m=''165150''>that</span>
  <span m=''166100''>not</span> <span m=''166400''>quite</span> <span m=''166590''>the</span>
  <span m=''166650''>same</span> <span m=''166880''>story.</span> <span m=''167150''>The</span>
  <span m=''167250''>first</span> <span m=''167590''>thing</span> <span m=''167830''>is</span>
  <span m=''168610''>that</span> <span m=''168790''>with</span> <span m=''168950''>multicore</span>
  <span m=''169530''>computers,</span> <span m=''169865''>it</span> <span m=''170200''>is</span>
  <span m=''173490''>pretty</span> <span m=''173670''>much</span> <span m=''173930''>just</span>
  <span m=''174290''>as</span> <span m=''175920''>inexpensive</span> <span m=''176820''>to</span>
  <span m=''177050''>produce</span> <span m=''177410''>a</span> <span m=''179590''>p</span>
  <span m=''180600''>processor</span> <span m=''181270''>right</span> <span m=''181510''>now,</span>
  <span m=''181760''>like</span> <span m=''182000''>six</span> <span m=''182330''>processor</span>
  <span m=''183120''>machine</span> <span m=''183790''>as it is</span> <span m=''183920''>a</span>
  <span m=''183970''>one</span> <span m=''184220''>processor</span> <span m=''184730''>machine.</span>
  <span m=''185520''>so</span> <span m=''185640''>it''s</span> <span m=''185740''>not</span>
  <span m=''185920''>like</span> <span m=''186120''>you''re</span> <span m=''186250''>actually</span>
  <span m=''186580''>paying</span> <span m=''187080''>for</span> <span m=''187200''>those</span>
  <span m=''187440''>extra</span> <span m=''188340''>processing</span> <span m=''188870''>cores.</span>
  <span m=''189300''>They</span> <span m=''189480''>come</span> <span m=''189780''>for</span>
  <span m=''189970''>free.</span> <span m=''191560''>Because</span> <span m=''192270''>what</span>
  <span m=''192450''>else are</span> <span m=''192650''>you''re</span> <span m=''192750''>going</span>
  <span m=''192840''>to</span> <span m=''192880''>use</span> <span m=''193130''>that</span>
  <span m=''193340''>silicon</span> <span m=''193750''>for?</span> </p><p><span m=''196330''>And</span>
  <span m=''196600''>the</span> <span m=''196750''>other</span> <span m=''196950''>thing</span>
  <span m=''197310''>is</span> <span m=''197610''>that</span> <span m=''197750''>we''ve</span>
  <span m=''197910''>had</span> <span m=''198080''>a</span> <span m=''198140''>large</span>
  <span m=''198570''>growth</span> <span m=''199250''>of</span> <span m=''199580''>understanding</span>
  <span m=''200450''>of</span> <span m=''201130''>problems</span> <span m=''201870''>for</span>
  <span m=''202010''>which</span> <span m=''202730''>there''s</span> <span m=''203070''>ample</span>
  <span m=''203510''>parallelism,</span> <span m=''204790''>where</span> <span m=''205100''>that</span>
  <span m=''205410''>amount</span> <span m=''205780''>of</span> <span m=''205870''>time</span>
  <span m=''206160''>is,</span> <span m=''206280''>in</span> <span m=''206380''>fact,</span>
  <span m=''210140''>quite</span> <span m=''210420''>small.</span> <span m=''210830''>And</span>
  <span m=''210890''>the</span> <span m=''211030''>main</span> <span m=''211390''>place</span>
  <span m=''211740''>these</span> <span m=''211970''>things</span> <span m=''212280''>come</span>
  <span m=''212530''>from,</span> <span m=''213320''>it</span> <span m=''213500''>turns</span>
  <span m=''213810''>out,</span> <span m=''214340''>this</span> <span m=''214540''>analysis</span>
  <span m=''215160''>is</span> <span m=''215310''>kind</span> <span m=''215460''>of</span>
  <span m=''215610''>a</span> <span m=''215660''>throughput</span> <span m=''216320''>kind</span>
  <span m=''216590''>of</span> <span m=''216660''>analysis.</span> <span m=''218170''>OK,</span>
  <span m=''218620''>it</span> <span m=''218750''>says,</span> <span m=''219140''>gee,</span>
  <span m=''220050''>I</span> <span m=''220110''>only</span> <span m=''220400''>get</span>
  <span m=''220560''>50%</span> <span m=''221190''>speedup</span> <span m=''221650''>for</span>
  <span m=''221740''>that</span> <span m=''221810''>application,</span> <span m=''222410''>but</span>
  <span m=''222520''>what</span> <span m=''222680''>most</span> <span m=''222950''>people</span>
  <span m=''223240''>care</span> <span m=''223540''>about</span> <span m=''225290''>in</span>
  <span m=''225920''>most</span> <span m=''226920''>interactive</span> <span m=''227510''>applications,</span>
  <span m=''228230''>at</span> <span m=''228290''>least</span> <span m=''228970''>for</span>
  <span m=''229210''>a</span> <span m=''229260''>client</span> <span m=''229800''>side</span>
  <span m=''230130''>programming,</span> <span m=''230650''>is</span> <span m=''230800''>response</span>
  <span m=''231360''>time.</span> <span m=''233020''>And</span> <span m=''233250''>for</span>
  <span m=''233750''>any</span> <span m=''233990''>problem</span> <span m=''235020''>that</span>
  <span m=''235160''>you</span> <span m=''235420''>have</span> <span m=''235690''>that</span>
  <span m=''235840''>has</span> <span m=''236810''>a</span> <span m=''236960''>response</span>
  <span m=''237570''>time</span> <span m=''238120''>that''s</span> <span m=''238540''>too</span>
  <span m=''238730''>long</span> <span m=''239330''>and</span> <span m=''239480''>its</span>
  <span m=''239640''>compute</span> <span m=''240010''>intensive,</span> <span m=''241640''>using</span>
  <span m=''241970''>parallelism</span> <span m=''242610''>to</span> <span m=''242740''>make</span>
  <span m=''243020''>it</span> <span m=''243160''>so</span> <span m=''243370''>that</span>
  <span m=''243860''>the</span> <span m=''243960''>response</span> <span m=''244510''>is</span>
  <span m=''244630''>much</span> <span m=''246000''>zippier</span> <span m=''247590''>is</span>
  <span m=''247800''>definitely</span> <span m=''248210''>worthwhile.</span> <span
  m=''250320''>And</span> <span m=''250460''>so</span> <span m=''250580''>this</span>
  <span m=''250770''>is</span> <span m=''250940''>true,</span> <span m=''251150''>even</span>
  <span m=''251490''>for</span> <span m=''251640''>things</span> <span m=''251960''>like</span>
  <span m=''252520''>game</span> <span m=''253540''>programs.</span> <span m=''254520''>So
  in</span> <span m=''254780''>game</span> <span m=''255070''>programs,</span> <span
  m=''255540''>they</span> <span m=''255600''>don''t</span> <span m=''255750''>have</span>
  <span m=''255930''>quite</span> <span m=''256140''>a</span> <span m=''256170''>response</span>
  <span m=''256649''>time</span> <span m=''256870''>problem,</span> <span m=''257620''>they</span>
  <span m=''257820''>have</span> <span m=''258029''>what''s</span> <span m=''258209''>called</span>
  <span m=''258440''>a</span> <span m=''258510''>time</span> <span m=''258880''>box</span>
  <span m=''259480''>problem,</span> <span m=''260180''>where</span> <span m=''260490''>you</span>
  <span m=''260820''>have</span> <span m=''261180''>a</span> <span m=''261550''>certain</span>
  <span m=''261890''>amount</span> <span m=''262160''>of</span> <span m=''262240''>time--</span>
  <span m=''262700''>13</span> <span m=''263140''>milliseconds</span> <span m=''263790''>typically--</span>
  <span m=''264400''>because</span> <span m=''265000''>you</span> <span m=''265100''>need</span>
  <span m=''265320''>some</span> <span m=''265540''>slop</span> <span m=''266380''>to</span>
  <span m=''267690''>make</span> <span m=''267910''>sure</span> <span m=''268080''>that</span>
  <span m=''268260''>you</span> <span m=''268400''>can</span> <span m=''269370''>go</span>
  <span m=''269540''>from</span> <span m=''269730''>one</span> <span m=''269900''>frame</span>
  <span m=''270120''>to another,</span> <span m=''270430''>but</span> <span m=''270540''>about</span>
  <span m=''270860''>13</span> <span m=''271240''>milliseconds</span> <span m=''271880''>to</span>
  <span m=''272000''>do</span> <span m=''272780''>a</span> <span m=''273760''>rendering</span>
  <span m=''274370''>of</span> <span m=''274620''>whatever</span> <span m=''274940''>the</span>
  <span m=''275030''>frame</span> <span m=''275450''>is</span> <span m=''275790''>that
  the</span> <span m=''276970''>game</span> <span m=''277210''>player</span> <span
  m=''277540''>is</span> <span m=''277640''>going</span> <span m=''277760''>to</span>
  <span m=''277810''>see</span> <span m=''278090''>on</span> <span m=''278210''>his</span>
  <span m=''278350''>computer</span> <span m=''279660''>or</span> <span m=''279800''>her</span>
  <span m=''279970''>computer.</span> </p><p><span m=''281200''>And</span> <span m=''281450''>so</span>
  <span m=''284450''>in</span> <span m=''284630''>that</span> <span m=''284910''>time,</span>
  <span m=''285360''>you</span> <span m=''285440''>want</span> <span m=''285570''>to</span>
  <span m=''286120''>do</span> <span m=''286280''>as</span> <span m=''286380''>much</span>
  <span m=''286750''>as</span> <span m=''286870''>you</span> <span m=''286990''>possibly</span>
  <span m=''287560''>can,</span> <span m=''288690''>and</span> <span m=''288820''>so</span>
  <span m=''288980''>there''s</span> <span m=''289190''>a</span> <span m=''289240''>big</span>
  <span m=''289550''>opportunity</span> <span m=''290250''>there</span> <span m=''290530''>to</span>
  <span m=''291070''>take</span> <span m=''291310''>advantage</span> <span m=''291830''>of</span>
  <span m=''291970''>parallelism</span> <span m=''293000''>in</span> <span m=''293140''>order</span>
  <span m=''293450''>to</span> <span m=''294080''>do</span> <span m=''294230''>more,</span>
  <span m=''295010''>have</span> <span m=''295250''>more</span> <span m=''295530''>quality</span>
  <span m=''295990''>graphics,</span> <span m=''296630''>have</span> <span m=''296790''>better</span>
  <span m=''297140''>AI,</span> <span m=''297580''>have</span> <span m=''297830''>better</span>
  <span m=''298660''>physics</span> <span m=''300050''>and</span> <span m=''300120''>all</span>
  <span m=''300400''>the</span> <span m=''300540''>other</span> <span m=''300690''>components</span>
  <span m=''301190''>that</span> <span m=''301290''>make</span> <span m=''301490''>up</span>
  <span m=''301610''>a</span> <span m=''301680''>game</span> <span m=''301850''>engine.</span>
  </p><p><span m=''307210''>But</span> <span m=''308150''>one</span> <span m=''308570''>of</span>
  <span m=''308630''>the</span> <span m=''308820''>issues</span> <span m=''309290''>with</span>
  <span m=''309450''>Amdahl''s</span> <span m=''310040''>Law--</span> <span m=''310760''>and</span>
  <span m=''311250''>this</span> <span m=''311420''>analysis</span> <span m=''311990''>is</span>
  <span m=''312150''>a</span> <span m=''312250''>cogent</span> <span m=''312600''>analysis</span>
  <span m=''313310''>that</span> <span m=''313670''>Amdahl</span> <span m=''313840''>made--</span>
  <span m=''314610''>but</span> <span m=''314830''>one</span> <span m=''314970''>of</span>
  <span m=''315040''>the</span> <span m=''315240''>issues</span> <span m=''315620''>here</span>
  <span m=''316790''>is</span> <span m=''317140''>that</span> <span m=''317710''>it</span>
  <span m=''317940''>doesn''t</span> <span m=''318310''>really</span> <span m=''319880''>say</span>
  <span m=''320270''>anything</span> <span m=''320770''>about</span> <span m=''322130''>how</span>
  <span m=''322460''>fast</span> <span m=''322850''>you</span> <span m=''322940''>can</span>
  <span m=''323060''>expect</span> <span m=''323470''>your</span> <span m=''323770''>application</span>
  <span m=''324420''>to</span> <span m=''324520''>run.</span> <span m=''325750''>In</span>
  <span m=''325810''>other</span> <span m=''325940''>words,</span> <span m=''326430''>this</span>
  <span m=''326630''>is</span> <span m=''326780''>a</span> <span m=''326820''>nice</span>
  <span m=''327150''>sort</span> <span m=''327300''>of</span> <span m=''327390''>thing,</span>
  <span m=''327690''>but</span> <span m=''329680''>who</span> <span m=''330020''>really</span>
  <span m=''330320''>can</span> <span m=''330480''>decompose</span> <span m=''331160''>their</span>
  <span m=''331300''>application</span> <span m=''331940''>into</span> <span m=''332180''>the</span>
  <span m=''332420''>serial</span> <span m=''332910''>part</span> <span m=''334100''>and</span>
  <span m=''334250''>the</span> <span m=''334320''>part</span> <span m=''334700''>that</span>
  <span m=''336560''>can</span> <span m=''336720''>be</span> <span m=''336860''>parallel?</span>
  <span m=''337420''>Well</span> <span m=''337900''>fortunately,</span> <span m=''338700''>there''s</span>
  <span m=''338910''>been</span> <span m=''339030''>a</span> <span m=''339090''>lot</span>
  <span m=''339340''>of</span> <span m=''339460''>work</span> <span m=''339890''>in</span>
  <span m=''340780''>the</span> <span m=''341200''>theory</span> <span m=''341680''>of</span>
  <span m=''341940''>parallel</span> <span m=''342340''>systems</span> <span m=''343300''>to</span>
  <span m=''343400''>answer</span> <span m=''343700''>this</span> <span m=''343900''>question,</span>
  <span m=''344330''>and</span> <span m=''344460''>we''re</span> <span m=''344580''>going</span>
  <span m=''344660''>to</span> <span m=''346300''>go</span> <span m=''346440''>over</span>
  <span m=''346770''>some</span> <span m=''346960''>of</span> <span m=''347040''>that</span>
  <span m=''348280''>really</span> <span m=''348620''>outstanding</span> <span m=''349250''>research</span>
  <span m=''350300''>that</span> <span m=''350800''>helps</span> <span m=''351090''>us</span>
  <span m=''351240''>understand</span> <span m=''352360''>what</span> <span m=''352630''>parallelism</span>
  <span m=''353190''>is.</span> </p><p><span m=''355290''>So</span> <span m=''355450''>we''re</span>
  <span m=''355540''>going</span> <span m=''355620''>to</span> <span m=''355700''>talk</span>
  <span m=''355920''>a</span> <span m=''355990''>little</span> <span m=''356170''>bit</span>
  <span m=''356300''>about</span> <span m=''356550''>what</span> <span m=''356740''>parallelism</span>
  <span m=''357420''>is</span> <span m=''357780''>and</span> <span m=''357930''>come</span>
  <span m=''358120''>up</span> <span m=''358260''>with</span> <span m=''358430''>a</span>
  <span m=''358630''>very</span> <span m=''359480''>specific</span> <span m=''362240''>measure</span>
  <span m=''362800''>of</span> <span m=''362950''>parallelism,</span> <span m=''364640''>quantify</span>
  <span m=''365280''>parallelism,</span> <span m=''366450''>OK?</span> <span m=''366750''>We''re
  also</span> <span m=''367010''>going</span> <span m=''367270''>to</span> <span m=''367390''>talk</span>
  <span m=''367580''>a</span> <span m=''367630''>little</span> <span m=''367780''>bit</span>
  <span m=''367910''>about</span> <span m=''368160''>scheduling</span> <span m=''368720''>theory</span>
  <span m=''369230''>and</span> <span m=''369430''>how</span> <span m=''369650''>the</span>
  <span m=''369740''>Cilk++</span> <span m=''370540''>runtime</span> <span m=''371000''>system</span>
  <span m=''371380''>works.</span> <span m=''372060''>And</span> <span m=''372250''>then</span>
  <span m=''372420''>we''re</span> <span m=''372590''>going</span> <span m=''372880''>to</span>
  <span m=''373040''>have</span> <span m=''373160''>a</span> <span m=''373280''>little</span>
  <span m=''373520''>chess</span> <span m=''373860''>lesson.</span> <span m=''375900''>So</span>
  <span m=''376120''>who</span> <span m=''376530''>here</span> <span m=''376760''>plays</span>
  <span m=''377070''>chess?</span> <span m=''378870''>Nobody</span> <span m=''379140''>plays</span>
  <span m=''379410''>chess</span> <span m=''379650''>anymore.</span> <span m=''379930''>Who</span>
  <span m=''380250''>plays</span> <span m=''380590''>Angry</span> <span m=''380870''>Birds?</span>
  <span m=''382410''>[LAUGHTER]</span> <span m=''384710''>OK.</span> <span m=''389940''>So</span>
  <span m=''390190''>you</span> <span m=''390310''>don''t</span> <span m=''390440''>have</span>
  <span m=''390580''>to</span> <span m=''390670''>know</span> <span m=''390790''>anything</span>
  <span m=''391040''>about</span> <span m=''391280''>chess</span> <span m=''391550''>to</span>
  <span m=''391690''>learn</span> <span m=''391900''>this</span> <span m=''392070''>chess</span>
  <span m=''392300''>lesson,</span> <span m=''392950''>that''s</span> <span m=''393180''>OK.</span>
  </p><p><span m=''395700''>So we''ll</span> <span m=''395930''>start</span> <span
  m=''396210''>out</span> <span m=''396340''>with</span> <span m=''396500''>what</span>
  <span m=''396670''>is</span> <span m=''396810''>parallelism?</span> <span m=''397830''>So</span>
  <span m=''398010''>let''s</span> <span m=''398190''>recall</span> <span m=''398630''>first</span>
  <span m=''398950''>the</span> <span m=''399020''>basics</span> <span m=''399500''>of</span>
  <span m=''399590''>Cilk++.</span> <span m=''400980''>So</span> <span m=''401110''>here''s</span>
  <span m=''401400''>the</span> <span m=''401500''>example</span> <span m=''402080''>of</span>
  <span m=''402290''>the</span> <span m=''402840''>lousy</span> <span m=''403380''>Fibonacci</span>
  <span m=''404100''>that</span> <span m=''404400''>everybody</span> <span m=''404820''>parallelizes</span>
  <span m=''405600''>because</span> <span m=''406530''>it''s</span> <span m=''406730''>good</span>
  <span m=''406870''>didactically.</span> <span m=''408110''>We</span> <span m=''408470''>have</span>
  <span m=''408740''>the</span> <span m=''408810''>Cilk</span> <span m=''409100''>spawn</span>
  <span m=''409490''>statement</span> <span m=''410040''>that</span> <span m=''410190''>says</span>
  <span m=''410520''>that</span> <span m=''410680''>the</span> <span m=''411050''>child</span>
  <span m=''411490''>can</span> <span m=''411640''>execute</span> <span m=''412050''>in</span>
  <span m=''412150''>parallel</span> <span m=''412550''>with</span> <span m=''412670''>the</span>
  <span m=''412730''>parent</span> <span m=''413080''>caller</span> <span m=''413950''>and</span>
  <span m=''414090''>the</span> <span m=''414170''>sync</span> <span m=''414480''>that</span>
  <span m=''414630''>says</span> <span m=''414920''>don''t</span> <span m=''415120''>go</span>
  <span m=''415240''>past</span> <span m=''415580''>this</span> <span m=''415750''>point</span>
  <span m=''416020''>until</span> <span m=''416450''>all</span> <span m=''416640''>your</span>
  <span m=''416820''>spawn</span> <span m=''417200''>children</span> <span m=''417540''>have</span>
  <span m=''417720''>returned.</span> <span m=''418740''>And</span> <span m=''418830''>that''s</span>
  <span m=''419040''>a</span> <span m=''419110''>local</span> <span m=''419520''>sync,</span>
  <span m=''419840''>that''s</span> <span m=''420010''>just</span> <span m=''420190''>a</span>
  <span m=''420240''>sync</span> <span m=''420510''>for</span> <span m=''420610''>that</span>
  <span m=''421060''>function.</span> <span m=''422300''>It''s</span> <span m=''422370''>not</span>
  <span m=''422560''>a</span> <span m=''422610''>sync</span> <span m=''422870''>across</span>
  <span m=''423270''>the</span> <span m=''423350''>whole</span> <span m=''423560''>machine.</span>
  <span m=''424080''>So</span> <span m=''424660''>some</span> <span m=''424910''>of</span>
  <span m=''424990''>you</span> <span m=''425290''>may</span> <span m=''425410''>have</span>
  <span m=''425530''>had</span> <span m=''425710''>experience</span> <span m=''426100''>with</span>
  <span m=''426220''>open</span> <span m=''426470''>MP</span> <span m=''426840''>barriers,</span>
  <span m=''428130''>for</span> <span m=''428230''>example,</span> <span m=''428660''>that''s</span>
  <span m=''428910''>a</span> <span m=''428970''>sync</span> <span m=''429220''>across</span>
  <span m=''429610''>the</span> <span m=''429670''>whole</span> <span m=''429840''>machine.</span>
  <span m=''430110''>This</span> <span m=''430270''>is</span> <span m=''430410''>not,</span>
  <span m=''430700''>this</span> <span m=''430850''>is</span> <span m=''430970''>just</span>
  <span m=''431190''>a</span> <span m=''431240''>local</span> <span m=''431600''>sync</span>
  <span m=''432010''>for</span> <span m=''432100''>this</span> <span m=''432690''>function</span>
  <span m=''433110''>saying</span> <span m=''433870''>when</span> <span m=''434130''>I</span>
  <span m=''434320''>sync,</span> <span m=''434520''>make sure</span> <span m=''434870''>all</span>
  <span m=''435000''>my</span> <span m=''435140''>children</span> <span m=''435540''>have</span>
  <span m=''435690''>returned</span> <span m=''436080''>before</span> <span m=''436400''>going</span>
  <span m=''436620''>past</span> <span m=''436950''>this</span> <span m=''437130''>point.</span>
  </p><p><span m=''438200''>And</span> <span m=''438340''>just</span> <span m=''438520''>remember</span>
  <span m=''438950''>also</span> <span m=''439280''>that Cilk</span> <span m=''439780''>keywords</span>
  <span m=''440210''>grant</span> <span m=''440490''>permission</span> <span m=''440930''>for</span>
  <span m=''441070''>parallel</span> <span m=''441520''>execution.</span> <span m=''442480''>They</span>
  <span m=''442600''>don''t</span> <span m=''442860''>command</span> <span m=''443360''>parallel</span>
  <span m=''443810''>execution.</span> <span m=''444890''>OK</span> <span m=''445120''>so</span>
  <span m=''445280''>we</span> <span m=''445390''>can</span> <span m=''445520''>always</span>
  <span m=''446130''>execute</span> <span m=''447150''>our</span> <span m=''447470''>code</span>
  <span m=''447970''>serially</span> <span m=''448360''>if</span> <span m=''448510''>we</span>
  <span m=''448610''>choose</span> <span m=''448950''>to.</span> <span m=''451765''>Yes?</span>
  </p><p><span m=''453564''>AUDIENCE:</span> <span m=''454032''>[UNINTELLIGIBLE]</span>
  <span m=''454500''>Can''t</span> <span m=''454968''>this</span> <span m=''455436''>runtime</span>
  <span m=''455910''>figure</span> <span m=''456180''>that</span> <span m=''456450''>spawning</span>
  <span m=''456860''>an</span> <span m=''457185''>extra</span> <span m=''457510''>child</span>
  <span m=''457977''>would</span> <span m=''458444''>be</span> <span m=''458911''>more</span>
  <span m=''459378''>expensive?</span> <span m=''460312''>Can''t</span> <span m=''460780''>it
  like</span> <span m=''461115''>look at this and be like--</span> </p><p><span m=''461450''>PROFESSOR:
  We''ll</span> <span m=''461800''>go</span> <span m=''461990''>into it.</span> <span
  m=''463450''>I''ll</span> <span m=''463520''>show</span> <span m=''463650''>you</span>
  <span m=''463690''>how</span> <span m=''463850''>it</span> <span m=''463890''>works</span>
  <span m=''464910''>later</span> <span m=''465140''>in</span> <span m=''465190''>the</span>
  <span m=''465250''>lecture.</span> <span m=''466360''>I''ll</span> <span m=''466600''>show</span>
  <span m=''466770''>you</span> <span m=''467930''>how</span> <span m=''468140''>it</span>
  <span m=''468180''>works</span> <span m=''468490''>and</span> <span m=''468560''>then</span>
  <span m=''468700''>we</span> <span m=''468790''>can</span> <span m=''468940''>talk</span>
  <span m=''469240''>about</span> <span m=''469860''>what</span> <span m=''470170''>knobs</span>
  <span m=''470520''>you</span> <span m=''470690''>have</span> <span m=''470860''>to</span>
  <span m=''471030''>tune,</span> <span m=''472160''>OK?</span> </p><p><span m=''473970''>So</span>
  <span m=''476470''>it''s</span> <span m=''476580''>helpful</span> <span m=''476990''>to</span>
  <span m=''477150''>have</span> <span m=''477310''>an</span> <span m=''477390''>execution</span>
  <span m=''478110''>model</span> <span m=''480180''>for</span> <span m=''480350''>something</span>
  <span m=''480730''>like</span> <span m=''480990''>this.</span> <span m=''481320''>And</span>
  <span m=''481510''>so</span> <span m=''481620''>we''re</span> <span m=''481690''>going</span>
  <span m=''481770''>to</span> <span m=''481810''>look</span> <span m=''482000''>at</span>
  <span m=''482100''>an</span> <span m=''482230''>abstract</span> <span m=''482910''>execution</span>
  <span m=''483600''>model,</span> <span m=''485240''>which</span> <span m=''485590''>is</span>
  <span m=''485720''>basically</span> <span m=''486470''>asking</span> <span m=''487380''>what</span>
  <span m=''487700''>does</span> <span m=''487880''>the</span> <span m=''488040''>instruction</span>
  <span m=''488720''>trace</span> <span m=''489390''>look</span> <span m=''489660''>like</span>
  <span m=''490000''>for</span> <span m=''490110''>this</span> <span m=''490640''>program?</span>
  <span m=''491130''>So</span> <span m=''491260''>normally</span> <span m=''492040''>when</span>
  <span m=''492250''>you</span> <span m=''492380''>execute</span> <span m=''492880''>a</span>
  <span m=''492930''>program,</span> <span m=''493430''>you</span> <span m=''493520''>can</span>
  <span m=''493620''>imagine</span> <span m=''493990''>one</span> <span m=''494230''>instruction</span>
  <span m=''494780''>executing</span> <span m=''495300''>after</span> <span m=''495570''>the</span>
  <span m=''495750''>other.</span> <span m=''495940''>And</span> <span m=''496010''>if</span>
  <span m=''496090''>it''s</span> <span m=''496230''>a</span> <span m=''496290''>serial</span>
  <span m=''496760''>program,</span> <span m=''498120''>all</span> <span m=''498420''>those</span>
  <span m=''498630''>instructions</span> <span m=''499250''>essentially</span> <span
  m=''499690''>form</span> <span m=''500030''>a</span> <span m=''500080''>long</span>
  <span m=''500430''>chain.</span> <span m=''502470''>Well</span> <span m=''502610''>there''s</span>
  <span m=''502790''>a</span> <span m=''502850''>similar</span> <span m=''503250''>thing</span>
  <span m=''503510''>for</span> <span m=''503670''>parallel</span> <span m=''504150''>computers,</span>
  <span m=''504610''>which</span> <span m=''504820''>is</span> <span m=''505160''>that</span>
  <span m=''506600''>instead</span> <span m=''506880''>of</span> <span m=''506950''>a</span>
  <span m=''507030''>chain</span> <span m=''508420''>as</span> <span m=''508590''>you''ll</span>
  <span m=''508710''>see,</span> <span m=''509060''>it</span> <span m=''509540''>gets</span>
  <span m=''509950''>bushier</span> <span m=''510620''>and</span> <span m=''510770''>it''s</span>
  <span m=''510910''>going</span> <span m=''511020''>to</span> <span m=''511070''>be</span>
  <span m=''511210''>a</span> <span m=''511250''>directed</span> <span m=''511680''>acyclic</span>
  <span m=''512169''>graph.</span> </p><p><span m=''512580''>So</span> <span m=''512679''>let''s</span>
  <span m=''512860''>take</span> <span m=''513049''>a</span> <span m=''513100''>look</span>
  <span m=''513230''>at</span> <span m=''513360''>how</span> <span m=''513539''>we</span>
  <span m=''513650''>do</span> <span m=''513789''>this.</span> <span m=''514760''>So</span>
  <span m=''515000''>we''ll</span> <span m=''515190''>the</span> <span m=''515280''>example</span>
  <span m=''515770''>of</span> <span m=''515940''>fib of</span> <span m=''516100''>four.</span>
  <span m=''519049''>So</span> <span m=''519230''>what</span> <span m=''519390''>we''re</span>
  <span m=''519470''>going</span> <span m=''519539''>to</span> <span m=''519620''>do</span>
  <span m=''519740''>is</span> <span m=''519830''>start</span> <span m=''520200''>out</span>
  <span m=''520390''>here</span> <span m=''522929''>with</span> <span m=''523590''>a</span>
  <span m=''524920''>rectangle</span> <span m=''525520''>here</span> <span m=''525730''>that</span>
  <span m=''527670''>I</span> <span m=''527720''>want</span> <span m=''527910''>you</span>
  <span m=''528030''>think</span> <span m=''528260''>about</span> <span m=''528560''>as</span>
  <span m=''528710''>sort</span> <span m=''528900''>of</span> <span m=''528950''>a</span>
  <span m=''529720''>function</span> <span m=''530210''>call</span> <span m=''530500''>activation</span>
  <span m=''531150''>record.</span> <span m=''531810''>So</span> <span m=''531960''>it''s</span>
  <span m=''532320''>a</span> <span m=''532770''>record</span> <span m=''533130''>on</span>
  <span m=''533270''>a</span> <span m=''533320''>stack.</span> <span m=''534250''>It''s</span>
  <span m=''534490''>got</span> <span m=''534720''>variables</span> <span m=''535300''>associated</span>
  <span m=''535970''>with</span> <span m=''536150''>it.</span> <span m=''536680''>The</span>
  <span m=''536830''>only</span> <span m=''537030''>variable</span> <span m=''537430''>I''m</span>
  <span m=''537500''>going</span> <span m=''537580''>to</span> <span m=''537640''>keep</span>
  <span m=''537820''>track</span> <span m=''538170''>of</span> <span m=''538280''>is</span>
  <span m=''538470''>n,</span> <span m=''538880''>so</span> <span m=''539060''>that''s</span>
  <span m=''539270''>what</span> <span m=''539360''>the</span> <span m=''539820''>four
  is</span> <span m=''539970''>there.</span> <span m=''540840''>OK,</span> <span m=''541750''>so</span>
  <span m=''541800''>we''re</span> <span m=''541920''>going</span> <span m=''542050''>to</span>
  <span m=''542220''>do fib</span> <span m=''542630''>of four.</span> <span m=''543150''>So
  we''ve got in</span> <span m=''543320''>this</span> <span m=''543890''>activation</span>
  <span m=''544540''>frame,</span> <span m=''544900''>we</span> <span m=''545010''>have</span>
  <span m=''545310''>the</span> <span m=''545390''>variable</span> <span m=''545910''>four</span>
  <span m=''547020''>and</span> <span m=''547180''>now</span> <span m=''547360''>what</span>
  <span m=''547490''>I''ve</span> <span m=''547680''>done</span> <span m=''547900''>is</span>
  <span m=''548040''>I''ve</span> <span m=''548200''>color</span> <span m=''548560''>coded</span>
  <span m=''549040''>the</span> <span m=''549980''>fib</span> <span m=''550660''>function</span>
  <span m=''551030''>here</span> <span m=''552400''>and</span> <span m=''553480''>into</span>
  <span m=''553910''>the</span> <span m=''554000''>parts</span> <span m=''554430''>that</span>
  <span m=''554550''>are</span> <span m=''554700''>all</span> <span m=''554940''>serial.</span>
  <span m=''556100''>So</span> <span m=''556250''>there''s</span> <span m=''556430''>a</span>
  <span m=''556480''>serial</span> <span m=''556910''>part</span> <span m=''557180''>up</span>
  <span m=''557350''>to</span> <span m=''557500''>where</span> <span m=''557670''>it</span>
  <span m=''557770''>spawns,</span> <span m=''558890''>then</span> <span m=''559070''>there''s</span>
  <span m=''562100''>recursively</span> <span m=''562890''>calling</span> <span m=''563310''>the</span>
  <span m=''563400''>fib</span> <span m=''564340''>and</span> <span m=''564540''>then</span>
  <span m=''564740''>there''s</span> <span m=''564990''>returning.</span> <span m=''565270''>So</span>
  <span m=''565550''>there''s</span> <span m=''565720''>sort of</span> <span m=''566010''>three</span>
  <span m=''566380''>parts</span> <span m=''566790''>to</span> <span m=''566870''>this</span>
  <span m=''567070''>function,</span> <span m=''567460''>each</span> <span m=''567710''>of</span>
  <span m=''567830''>which</span> <span m=''568380''>is,</span> <span m=''568610''>in</span>
  <span m=''568730''>fact,</span> <span m=''569120''>a</span> <span m=''569210''>chain</span>
  <span m=''569620''>of</span> <span m=''569680''>serial</span> <span m=''570060''>instruction.</span>
  </p><p><span m=''570370''>I''m</span> <span m=''570680''>going to</span> <span m=''570750''>collapse</span>
  <span m=''571210''>those</span> <span m=''571470''>chains</span> <span m=''572240''>into</span>
  <span m=''572480''>a</span> <span m=''572530''>single</span> <span m=''574180''>circle</span>
  <span m=''574570''>here</span> <span m=''574710''>that</span> <span m=''574850''>I''m
  going to call a</span> <span m=''575240''>strand.</span> <span m=''577190''>OK,</span>
  <span m=''578180''>now</span> <span m=''578350''>what</span> <span m=''578490''>we</span>
  <span m=''578600''>do</span> <span m=''578770''>is</span> <span m=''578880''>we</span>
  <span m=''579050''>execute</span> <span m=''579600''>the</span> <span m=''579670''>strand,</span>
  <span m=''580220''>which</span> <span m=''580410''>corresponds</span> <span m=''580860''>to</span>
  <span m=''580970''>executing</span> <span m=''581520''>the</span> <span m=''581670''>instructions</span>
  <span m=''582750''>and</span> <span m=''582870''>advancing</span> <span m=''583400''>the</span>
  <span m=''583480''>program</span> <span m=''584020''>calendar</span> <span m=''584820''>up</span>
  <span m=''585020''>until</span> <span m=''585370''>the</span> <span m=''585450''>point</span>
  <span m=''585800''>we</span> <span m=''585930''>hit</span> <span m=''586170''>this</span>
  <span m=''586900''>fib</span> <span m=''587340''>of n</span> <span m=''587470''>minus</span>
  <span m=''587810''>1.</span> <span m=''590350''>At</span> <span m=''590510''>that</span>
  <span m=''590780''>point,</span> <span m=''591220''>I</span> <span m=''591530''>basically</span>
  <span m=''592140''>call</span> <span m=''592620''>fib</span> <span m=''592860''>of</span>
  <span m=''593030''>n</span> <span m=''593150''>minus</span> <span m=''593450''>1.</span>
  <span m=''593700''>So</span> <span m=''593860''>in</span> <span m=''593920''>this</span>
  <span m=''594090''>case,</span> <span m=''594290''>it''s</span> <span m=''594420''>now</span>
  <span m=''594620''>going</span> <span m=''594810''>to be</span> <span m=''595080''>fib</span>
  <span m=''595570''>of 3.</span> <span m=''596160''>So that</span> <span m=''596440''>means
  I</span> <span m=''596740''>create</span> <span m=''597620''>a</span> <span m=''597740''>child</span>
  <span m=''600280''>and</span> <span m=''600930''>start</span> <span m=''601330''>executing</span>
  <span m=''602850''>in</span> <span m=''603010''>the</span> <span m=''603100''>child,</span>
  <span m=''604000''>this</span> <span m=''604330''>prefix</span> <span m=''605510''>part</span>
  <span m=''605740''>of</span> <span m=''605840''>the</span> <span m=''606360''>function.</span>
  </p><p><span m=''607770''>However,</span> <span m=''608400''>unlike</span> <span
  m=''609360''>I</span> <span m=''609470''>were</span> <span m=''609580''>doing an</span>
  <span m=''609820''>ordinary</span> <span m=''610280''>function</span> <span m=''610710''>call,</span>
  <span m=''611010''>I</span> <span m=''611140''>would</span> <span m=''611280''>make</span>
  <span m=''611490''>this</span> <span m=''611720''>call</span> <span m=''612580''>and</span>
  <span m=''612910''>then</span> <span m=''613090''>this</span> <span m=''613330''>guy</span>
  <span m=''613510''>would</span> <span m=''613650''>just</span> <span m=''613820''>sit</span>
  <span m=''614120''>here</span> <span m=''614330''>and</span> <span m=''614450''>wait</span>
  <span m=''615830''>until</span> <span m=''616830''>this</span> <span m=''617170''>frame</span>
  <span m=''617470''>was</span> <span m=''617690''>done.</span> <span m=''619650''>But</span>
  <span m=''619990''>since</span> <span m=''620200''>it''s</span> <span m=''620370''>a</span>
  <span m=''620430''>spawn,</span> <span m=''621310''>what</span> <span m=''621560''>happens</span>
  <span m=''622050''>is</span> <span m=''622490''>I''m</span> <span m=''622700''>actually</span>
  <span m=''623030''>going</span> <span m=''623280''>to</span> <span m=''623570''>continue</span>
  <span m=''624140''>executing</span> <span m=''624820''>in</span> <span m=''624900''>the</span>
  <span m=''624980''>parent</span> <span m=''626860''>and</span> <span m=''627110''>execute,</span>
  <span m=''627620''>in</span> <span m=''627750''>fact,</span> <span m=''628070''>the</span>
  <span m=''628140''>green</span> <span m=''628450''>part.</span> <span m=''631390''>So</span>
  <span m=''632100''>in</span> <span m=''632210''>this</span> <span m=''632380''>case,</span>
  <span m=''632600''>evaluating</span> <span m=''633190''>the</span> <span m=''633300''>arguments,</span>
  <span m=''633770''>etc.</span> <span m=''635640''>Then</span> <span m=''636030''>it''s</span>
  <span m=''636280''>going</span> <span m=''636390''>to</span> <span m=''637190''>spawn</span>
  <span m=''637650''>here,</span> <span m=''638140''>but</span> <span m=''638310''>this</span>
  <span m=''638550''>guy,</span> <span m=''638770''>in</span> <span m=''638910''>fact,</span>
  <span m=''639270''>is</span> <span m=''639420''>going</span> <span m=''639580''>to</span>
  <span m=''640550''>what</span> <span m=''640740''>it</span> <span m=''640900''>does</span>
  <span m=''641130''>when</span> <span m=''641240''>it</span> <span m=''641300''>gets</span>
  <span m=''641470''>here is it</span> <span m=''641840''>evaluates</span> <span m=''642360''>n</span>
  <span m=''642490''>minus</span> <span m=''642880''>2,</span> <span m=''643430''>it</span>
  <span m=''643700''>does</span> <span m=''643900''>a</span> <span m=''643980''>call</span>
  <span m=''646650''>of</span> <span m=''646850''>fib</span> <span m=''647160''>of</span>
  <span m=''647310''>n</span> <span m=''647600''>minus</span> <span m=''647950''>2.</span>
  <span m=''648520''>So</span> <span m=''648680''>I''ve</span> <span m=''648810''>indicated</span>
  <span m=''649340''>that</span> <span m=''649490''>this</span> <span m=''649650''>was</span>
  <span m=''649810''>a</span> <span m=''649870''>called</span> <span m=''650320''>frame</span>
  <span m=''650710''>by</span> <span m=''650860''>showing</span> <span m=''651320''>it
  in a</span> <span m=''651390''>light</span> <span m=''651670''>color.</span> <span
  m=''653580''>So</span> <span m=''653720''>these</span> <span m=''653950''>are</span>
  <span m=''654030''>spawn,</span> <span m=''654540''>spawn,</span> <span m=''655480''>call,</span>
  <span m=''656130''>meanwhile</span> <span m=''656520''>this</span> <span m=''656760''>thing</span>
  <span m=''656930''>is</span> <span m=''657050''>going.</span> </p><p><span m=''657210''>So
  at</span> <span m=''657350''>this</span> <span m=''657620''>point,</span> <span
  m=''657880''>we</span> <span m=''658000''>now</span> <span m=''658220''>have</span>
  <span m=''658970''>one,</span> <span m=''659380''>two,</span> <span m=''659760''>three</span>
  <span m=''662350''>things</span> <span m=''662690''>that</span> <span m=''662780''>are</span>
  <span m=''662920''>operating</span> <span m=''663380''>in</span> <span m=''663500''>parallel</span>
  <span m=''664950''>at</span> <span m=''665160''>the</span> <span m=''665240''>same</span>
  <span m=''665530''>time.</span> <span m=''667440''>We</span> <span m=''667580''>keep</span>
  <span m=''667810''>going</span> <span m=''668120''>on,</span> <span m=''668700''>OK?</span>
  <span m=''669420''>So</span> <span m=''669800''>this</span> <span m=''670180''>guy</span>
  <span m=''670640''>that</span> <span m=''670780''>does</span> <span m=''670960''>a</span>
  <span m=''671010''>spawn</span> <span m=''671480''>and</span> <span m=''671570''>has</span>
  <span m=''671810''>a</span> <span m=''671870''>continuation,</span> <span m=''672580''>this</span>
  <span m=''672730''>one</span> <span m=''672870''>does</span> <span m=''673050''>a</span>
  <span m=''673120''>call,</span> <span m=''674030''>but</span> <span m=''675410''>while</span>
  <span m=''675780''>he''s</span> <span m=''675900''>doing</span> <span m=''676100''>a
  call, he''s</span> <span m=''676510''>waiting</span> <span m=''676910''>for</span>
  <span m=''677000''>the</span> <span m=''677110''>return</span> <span m=''677520''>so</span>
  <span m=''677650''>he</span> <span m=''677750''>doesn''t</span> <span m=''678070''>start</span>
  <span m=''678330''>executing</span> <span m=''679470''>the</span> <span m=''679580''>successor.</span>
  <span m=''680050''>He</span> <span m=''680200''>stalled</span> <span m=''680670''>at</span>
  <span m=''680800''>the</span> <span m=''681100''>Cilk</span> <span m=''681430''>sink</span>
  <span m=''681690''>here.</span> <span m=''682920''>And</span> <span m=''683180''>we</span>
  <span m=''683310''>keep</span> <span m=''683540''>executing</span> <span m=''687240''>and</span>
  <span m=''687430''>so</span> <span m=''687700''>as</span> <span m=''687900''>you</span>
  <span m=''687990''>can</span> <span m=''688120''>see,</span> <span m=''688340''>what''s</span>
  <span m=''688550''>happening</span> <span m=''689050''>is</span> <span m=''689220''>we''re</span>
  <span m=''689390''>actually</span> <span m=''689630''>creating</span> <span m=''690180''>a</span>
  <span m=''690250''>directed</span> <span m=''690780''>acyclic</span> <span m=''691360''>graph</span>
  <span m=''692280''>of</span> <span m=''692440''>these</span> <span m=''692630''>strands.</span>
  <span m=''693840''>So</span> <span m=''694030''>here</span> <span m=''694330''>basically,</span>
  <span m=''695290''>this</span> <span m=''695520''>guy</span> <span m=''695720''>was</span>
  <span m=''695910''>able</span> <span m=''696140''>to</span> <span m=''696240''>execute</span>
  <span m=''696870''>because</span> <span m=''697190''>both</span> <span m=''697550''>of</span>
  <span m=''697650''>the</span> <span m=''697760''>children,</span> <span m=''699730''>one</span>
  <span m=''699970''>that</span> <span m=''700140''>he</span> <span m=''700330''>had
  spawned</span> <span m=''700640''>and</span> <span m=''700770''>one that he had</span>
  <span m=''700910''>called,</span> <span m=''701320''>have</span> <span m=''701610''>returned.</span>
  <span m=''703120''>And</span> <span m=''703310''>so</span> <span m=''703480''>this</span>
  <span m=''703730''>fella,</span> <span m=''704280''>therefore,</span> <span m=''704780''>is</span>
  <span m=''704910''>able</span> <span m=''705260''>then</span> <span m=''705430''>to</span>
  <span m=''705530''>execute</span> <span m=''706100''>the</span> <span m=''706330''>return.</span>
  <span m=''707880''>OK,</span> <span m=''708270''>so</span> <span m=''708460''>the</span>
  <span m=''708680''>addition</span> <span m=''709350''>of</span> <span m=''709430''>x</span>
  <span m=''709650''>plus</span> <span m=''709870''>y</span> <span m=''710160''>in</span>
  <span m=''710290''>particular,</span> <span m=''711270''>and</span> <span m=''711450''>then</span>
  <span m=''711620''>the</span> <span m=''711710''>return</span> <span m=''712660''>to</span>
  <span m=''712770''>the</span> <span m=''712840''>parent.</span> <span m=''713190''>And</span>
  <span m=''713320''>so</span> <span m=''713460''>what</span> <span m=''713620''>we</span>
  <span m=''713760''>end</span> <span m=''713970''>up</span> <span m=''714150''>with</span>
  <span m=''714840''>is</span> <span m=''715210''>of</span> <span m=''715400''>all</span>
  <span m=''715620''>these</span> <span m=''715750''>serial</span> <span m=''716200''>chains</span>
  <span m=''716540''>of</span> <span m=''716640''>instructions</span> <span m=''717370''>that</span>
  <span m=''717460''>are</span> <span m=''717520''>represented</span> <span m=''718050''>by</span>
  <span m=''718220''>these</span> <span m=''718400''>strands,</span> <span m=''719890''>all</span>
  <span m=''720100''>these</span> <span m=''720230''>circles,</span> <span m=''721680''>they''re</span>
  <span m=''721910''>embedded</span> <span m=''722380''>in</span> <span m=''722690''>the</span>
  <span m=''722830''>call</span> <span m=''723270''>tree</span> <span m=''723670''>like</span>
  <span m=''723950''>you</span> <span m=''724060''>would</span> <span m=''724170''>have</span>
  <span m=''724700''>in</span> <span m=''725180''>an</span> <span m=''725560''>ordinary</span>
  <span m=''726520''>serial</span> <span m=''726960''>execution.</span> <span m=''727670''>You</span>
  <span m=''727760''>have</span> <span m=''727850''>a</span> <span m=''727910''>call</span>
  <span m=''728230''>tree</span> <span m=''728540''>that</span> <span m=''728710''>you</span>
  <span m=''728860''>execute</span> <span m=''729330''>up</span> <span m=''729440''>and</span>
  <span m=''729550''>down,</span> <span m=''729960''>you</span> <span m=''730130''>walk</span>
  <span m=''730480''>it</span> <span m=''730590''>like</span> <span m=''730820''>a</span>
  <span m=''730880''>stack</span> <span m=''731420''>normally.</span> <span m=''734370''>Now,</span>
  <span m=''734730''>in</span> <span m=''734860''>fact,</span> <span m=''735230''>what</span>
  <span m=''735320''>we</span> <span m=''735530''>have</span> <span m=''735740''>is</span>
  <span m=''735990''>embedded</span> <span m=''736460''>in</span> <span m=''736650''>there</span>
  <span m=''736910''>is</span> <span m=''737180''>the</span> <span m=''737550''>parallel</span>
  <span m=''738100''>execution</span> <span m=''743330''>which</span> <span m=''743590''>form</span>
  <span m=''743870''>a</span> <span m=''743940''>DAG,</span> <span m=''744950''>directed</span>
  <span m=''745330''>acyclic</span> <span m=''745760''>graph.</span> </p><p><span
  m=''749020''>So</span> <span m=''749300''>when</span> <span m=''749480''>you</span>
  <span m=''749580''>start</span> <span m=''749970''>thinking</span> <span m=''750290''>in</span>
  <span m=''750380''>parallel,</span> <span m=''750960''>you</span> <span m=''751080''>have</span>
  <span m=''751200''>to</span> <span m=''751320''>start</span> <span m=''751670''>thinking</span>
  <span m=''752000''>about</span> <span m=''752810''>the</span> <span m=''752910''>DAG</span>
  <span m=''753660''>as</span> <span m=''753900''>your</span> <span m=''754060''>execution</span>
  <span m=''754700''>model,</span> <span m=''755150''>not</span> <span m=''756190''>a</span>
  <span m=''756330''>chain</span> <span m=''756650''>of</span> <span m=''756750''>instructions.</span>
  <span m=''760240''>And</span> <span m=''760620''>the</span> <span m=''760810''>nice</span>
  <span m=''761150''>thing</span> <span m=''761310''>about</span> <span m=''761640''>this</span>
  <span m=''761820''>particular</span> <span m=''762210''>execution</span> <span m=''762475''>model</span>
  <span m=''762820''>we''re</span> <span m=''763000''>going</span> <span m=''763120''>to</span>
  <span m=''763170''>be</span> <span m=''763260''>looking</span> <span m=''763610''>at</span>
  <span m=''763790''>is</span> <span m=''763950''>nowhere</span> <span m=''764330''>did</span>
  <span m=''764510''>I</span> <span m=''764590''>say</span> <span m=''764850''>how</span>
  <span m=''765020''>many</span> <span m=''765190''>processors</span> <span m=''765850''>we
  were</span> <span m=''766100''>running</span> <span m=''766410''>on.</span> <span
  m=''767920''>This</span> <span m=''768040''>is</span> <span m=''768180''>a</span>
  <span m=''768250''>processor</span> <span m=''768880''>oblivious</span> <span m=''769460''>model.</span>
  <span m=''770100''>It</span> <span m=''770440''>doesn''t</span> <span m=''770720''>know</span>
  <span m=''770910''>how</span> <span m=''771050''>many</span> <span m=''771230''>processors</span>
  <span m=''771860''>you''re</span> <span m=''772020''>running</span> <span m=''772270''>on.</span>
  <span m=''777400''>We</span> <span m=''777580''>simply</span> <span m=''778140''>in</span>
  <span m=''778320''>the</span> <span m=''778990''>execution</span> <span m=''779610''>model,</span>
  <span m=''780050''>are</span> <span m=''780220''>thinking</span> <span m=''780650''>about</span>
  <span m=''782110''>abstractly</span> <span m=''783860''>what</span> <span m=''784160''>can</span>
  <span m=''784630''>run</span> <span m=''784850''>in</span> <span m=''785010''>parallel,</span>
  <span m=''786610''>not</span> <span m=''786900''>what</span> <span m=''787040''>actually</span>
  <span m=''787420''>does</span> <span m=''787760''>run</span> <span m=''787970''>in</span>
  <span m=''788080''>parallel</span> <span m=''789130''>in</span> <span m=''789280''>an</span>
  <span m=''789400''>execution.</span> </p><p><span m=''790970''>So</span> <span m=''791080''>any</span>
  <span m=''791210''>questions</span> <span m=''791690''>about</span> <span m=''792090''>this</span>
  <span m=''792760''>execution</span> <span m=''793340''>model?</span> <span m=''799260''>OK.</span>
  <span m=''801570''>So</span> <span m=''803270''>just</span> <span m=''804160''>so</span>
  <span m=''804350''>that</span> <span m=''804460''>we</span> <span m=''804570''>have</span>
  <span m=''804820''>some</span> <span m=''806470''>terminology,</span> <span m=''809600''>so</span>
  <span m=''810040''>the</span> <span m=''810150''>parallel</span> <span m=''810620''>instruction</span>
  <span m=''811200''>stream</span> <span m=''811580''>is</span> <span m=''811720''>a</span>
  <span m=''811780''>DAG</span> <span m=''812480''>with</span> <span m=''812670''>vertices</span>
  <span m=''813250''>and</span> <span m=''813350''>edges.</span> <span m=''816400''>Each</span>
  <span m=''816640''>vertex</span> <span m=''817710''>is</span> <span m=''817860''>a</span>
  <span m=''818110''>strand,</span> <span m=''819040''>OK?</span> <span m=''819320''>Which</span>
  <span m=''819500''>is</span> <span m=''819620''>a</span> <span m=''819680''>sequence</span>
  <span m=''820150''>of</span> <span m=''820490''>instructions</span> <span m=''821610''>not</span>
  <span m=''821880''>containing</span> <span m=''822480''>a</span> <span m=''822570''>call</span>
  <span m=''823020''>spawn</span> <span m=''823510''>sync,</span> <span m=''823910''>a</span>
  <span m=''824090''>return</span> <span m=''825030''>or</span> <span m=''825180''>thrown</span>
  <span m=''825520''>exception,</span> <span m=''826780''>if</span> <span m=''826980''>you''re</span>
  <span m=''827200''>doing</span> <span m=''827520''>exceptions.</span> <span m=''829480''>We''re</span>
  <span m=''829820''>not</span> <span m=''829950''>going</span> <span m=''830060''>to</span>
  <span m=''830350''>really</span> <span m=''830610''>talk</span> <span m=''830860''>about</span>
  <span m=''831080''>exceptions</span> <span m=''831620''>much.</span> <span m=''833100''>So</span>
  <span m=''834710''>they are</span> <span m=''835200''>supported</span> <span m=''835740''>in</span>
  <span m=''835960''>the</span> <span m=''836520''>software</span> <span m=''836920''>that</span>
  <span m=''837040''>we''ll</span> <span m=''837150''>be</span> <span m=''837250''>using,</span>
  <span m=''838080''>but</span> <span m=''839620''>for</span> <span m=''839750''>most</span>
  <span m=''840050''>part,</span> <span m=''840380''>we''re</span> <span m=''840490''>not</span>
  <span m=''840630''>going</span> <span m=''840710''>to</span> <span m=''840750''>have</span>
  <span m=''840890''>to</span> <span m=''840990''>worry</span> <span m=''841190''>about</span>
  <span m=''841460''>them.</span> </p><p><span m=''843170''>OK</span> <span m=''843610''>so</span>
  <span m=''843950''>there''s</span> <span m=''844270''>an</span> <span m=''844400''>initial</span>
  <span m=''844840''>strand</span> <span m=''845400''>where</span> <span m=''845550''>you</span>
  <span m=''845640''>start,</span> <span m=''846100''>and</span> <span m=''846210''>a</span>
  <span m=''846270''>final</span> <span m=''846650''>strand</span> <span m=''847130''>where</span>
  <span m=''847270''>you</span> <span m=''847430''>end.</span> <span m=''849990''>Then</span>
  <span m=''850140''>each</span> <span m=''850490''>edge</span> <span m=''851400''>is</span>
  <span m=''851770''>a</span> <span m=''852140''>spawn</span> <span m=''853170''>or</span>
  <span m=''853420''>a</span> <span m=''853500''>call</span> <span m=''854910''>or</span>
  <span m=''855150''>return</span> <span m=''856420''>or</span> <span m=''856690''>what''s</span>
  <span m=''856950''>called</span> <span m=''857410''>a</span> <span m=''857820''>continue</span>
  <span m=''858360''>edge or a</span> <span m=''858680''>continuation</span> <span
  m=''859430''>edge,</span> <span m=''860930''>which</span> <span m=''861220''>goes</span>
  <span m=''861570''>from</span> <span m=''862250''>the</span> <span m=''862530''>parent,</span>
  <span m=''863940''>when</span> <span m=''864680''>a parent</span> <span m=''865270''>spawns</span>
  <span m=''865650''>something</span> <span m=''866560''>to</span> <span m=''866850''>the</span>
  <span m=''866990''>next</span> <span m=''867430''>instruction</span> <span m=''868090''>after</span>
  <span m=''869440''>the</span> <span m=''869560''>spawn.</span> <span m=''874380''>So</span>
  <span m=''874680''>we</span> <span m=''874740''>can</span> <span m=''874860''>classify</span>
  <span m=''875490''>the</span> <span m=''875650''>edges</span> <span m=''876030''>in</span>
  <span m=''876140''>that</span> <span m=''876440''>fashion.</span> <span m=''878600''>And</span>
  <span m=''880830''>I''ve</span> <span m=''881030''>only</span> <span m=''881220''>explain</span>
  <span m=''881670''>this</span> <span m=''881930''>for</span> <span m=''882400''>spawm</span>
  <span m=''882690''>and</span> <span m=''882780''>sync,</span> <span m=''883110''>as</span>
  <span m=''883230''>you</span> <span m=''883320''>recall</span> <span m=''883640''>from</span>
  <span m=''883790''>last</span> <span m=''884130''>time,</span> <span m=''884330''>we</span>
  <span m=''884450''>also</span> <span m=''884710''>talked</span> <span m=''885090''>about</span>
  <span m=''885420''>Cilk</span> <span m=''885630''>four.</span> <span m=''886470''>It</span>
  <span m=''886650''>turns</span> <span m=''886890''>out</span> <span m=''887090''>Cilk</span>
  <span m=''887290''>four</span> <span m=''887810''>is</span> <span m=''887950''>converted</span>
  <span m=''888420''>to</span> <span m=''888520''>spawns</span> <span m=''889090''>and</span>
  <span m=''889210''>syncs</span> <span m=''889950''>using</span> <span m=''890280''>a</span>
  <span m=''890340''>recursive</span> <span m=''890850''>divide</span> <span m=''891210''>and</span>
  <span m=''891310''>conquer</span> <span m=''891750''>approach.</span> <span m=''892520''>We''ll</span>
  <span m=''892650''>talk</span> <span m=''892860''>about</span> <span m=''893100''>that</span>
  <span m=''894100''>next</span> <span m=''894390''>time</span> <span m=''894620''>on</span>
  <span m=''894690''>Thursday.</span> <span m=''896515''>So</span> <span m=''896770''>we''ll</span>
  <span m=''896890''>talk</span> <span m=''897150''>more</span> <span m=''897370''>about</span>
  <span m=''897640''>Cilk</span> <span m=''897800''>four</span> <span m=''898280''>and</span>
  <span m=''899360''>how</span> <span m=''899570''>it''s</span> <span m=''899710''>implemented</span>
  <span m=''900280''>and</span> <span m=''900370''>the</span> <span m=''900480''>implications</span>
  <span m=''901140''>of</span> <span m=''901220''>how</span> <span m=''901870''>loop</span>
  <span m=''901980''>parallelism</span> <span m=''902630''>works.</span> </p><p><span
  m=''903390''>So</span> <span m=''903800''>at</span> <span m=''903950''>the</span>
  <span m=''904020''>fundamental</span> <span m=''904680''>level,</span> <span m=''904950''>the</span>
  <span m=''905030''>runtime</span> <span m=''905490''>system</span> <span m=''905850''>is</span>
  <span m=''905940''>only</span> <span m=''906180''>concerned</span> <span m=''906670''>about</span>
  <span m=''906960''>spawns</span> <span m=''907400''>and</span> <span m=''907510''>syncs.</span>
  <span m=''912190''>Now</span> <span m=''912780''>given</span> <span m=''913060''>that</span>
  <span m=''913160''>we</span> <span m=''913250''>have</span> <span m=''913400''>a</span>
  <span m=''913460''>DAG, so</span> <span m=''913900''>I''ve</span> <span m=''914070''>taken</span>
  <span m=''914410''>away</span> <span m=''914730''>the</span> <span m=''914860''>call</span>
  <span m=''915240''>tree</span> <span m=''915540''>and</span> <span m=''915660''>just</span>
  <span m=''915910''>left</span> <span m=''916190''>the</span> <span m=''916270''>strands</span>
  <span m=''916635''>of</span> <span m=''918090''>a</span> <span m=''918140''>computation.</span>
  <span m=''918480''>It''s</span> <span m=''918820''>actually</span> <span m=''919080''>not</span>
  <span m=''919300''>the</span> <span m=''919370''>same</span> <span m=''919650''>as</span>
  <span m=''919950''>the</span> <span m=''920160''>computation</span> <span m=''920690''>we</span>
  <span m=''920770''>saw</span> <span m=''921020''>before.</span> <span m=''922700''>We</span>
  <span m=''923030''>would</span> <span m=''923160''>like</span> <span m=''923370''>to</span>
  <span m=''923490''>understand,</span> <span m=''924750''>is</span> <span m=''924960''>this</span>
  <span m=''925160''>a</span> <span m=''925230''>good</span> <span m=''925520''>parallel</span>
  <span m=''926260''>program</span> <span m=''926770''>or</span> <span m=''926850''>not?</span>
  <span m=''928620''>Based</span> <span m=''929060''>on</span> <span m=''929310''>if</span>
  <span m=''929440''>I</span> <span m=''929580''>understand</span> <span m=''930170''>the</span>
  <span m=''930230''>logical</span> <span m=''930730''>parallelism</span> <span m=''931000''>that
  I''ve</span> <span m=''931500''>exposed.</span> <span m=''932690''>So</span> <span
  m=''932820''>how</span> <span m=''932980''>much</span> <span m=''933190''>parallelism</span>
  <span m=''933750''>do</span> <span m=''933820''>you</span> <span m=''933890''>think</span>
  <span m=''934120''>is</span> <span m=''934260''>in</span> <span m=''934370''>here?</span>
  <span m=''937850''>Give</span> <span m=''937980''>me</span> <span m=''938100''>a</span>
  <span m=''938150''>number.</span> <span m=''939060''>How</span> <span m=''939210''>many</span>
  <span m=''939360''>processors</span> <span m=''940670''>does</span> <span m=''940830''>it</span>
  <span m=''940910''>make</span> <span m=''941130''>sense</span> <span m=''941390''>to</span>
  <span m=''941490''>run</span> <span m=''941700''>this</span> <span m=''941900''>on?</span>
  <span m=''943470''>Five?</span> <span m=''947260''>That''s</span> <span m=''947460''>as</span>
  <span m=''947590''>parallel</span> <span m=''948060''>as</span> <span m=''948160''>it</span>
  <span m=''948280''>gets.</span> <span m=''949080''>Let''s</span> <span m=''949880''>take</span>
  <span m=''950060''>a</span> <span m=''950110''>look.</span> <span m=''950350''>We''re</span>
  <span m=''950450''>going</span> <span m=''950550''>to</span> <span m=''950600''>do</span>
  <span m=''950730''>an</span> <span m=''950810''>analysis.</span> <span m=''951730''>At</span>
  <span m=''951820''>the</span> <span m=''951940''>end</span> <span m=''952090''>of</span>
  <span m=''952170''>it,</span> <span m=''952310''>we''ll</span> <span m=''952520''>know</span>
  <span m=''952690''>what</span> <span m=''952900''>the</span> <span m=''954430''>answer</span>
  <span m=''954790''>is.</span> </p><p><span m=''955620''>So</span> <span m=''955830''>for</span>
  <span m=''956110''>that,</span> <span m=''956400''>let</span> <span m=''957050''>tp</span>
  <span m=''957960''>be</span> <span m=''958320''>the</span> <span m=''958500''>execution</span>
  <span m=''959200''>time</span> <span m=''960350''>on</span> <span m=''960550''>p</span>
  <span m=''960780''>processors</span> <span m=''961560''>for</span> <span m=''961650''>this</span>
  <span m=''961880''>particular</span> <span m=''962360''>program.</span> <span m=''966600''>It</span>
  <span m=''966790''>turns</span> <span m=''967220''>but</span> <span m=''967360''>there</span>
  <span m=''967460''>are</span> <span m=''967560''>two</span> <span m=''967870''>measures</span>
  <span m=''968460''>that</span> <span m=''968560''>are</span> <span m=''968640''>really</span>
  <span m=''968970''>important.</span> <span m=''969410''>The</span> <span m=''969610''>first</span>
  <span m=''969810''>is</span> <span m=''969940''>called</span> <span m=''970260''>the</span>
  <span m=''970320''>work.</span> <span m=''971380''>OK,</span> <span m=''971780''>so</span>
  <span m=''973260''>of</span> <span m=''973400''>course,</span> <span m=''973680''>we</span>
  <span m=''973800''>know</span> <span m=''974070''>that</span> <span m=''974240''>real</span>
  <span m=''974440''>machines</span> <span m=''974900''>have</span> <span m=''975030''>caches,</span>
  <span m=''975580''>etc.</span> <span m=''976180''>Let''s</span> <span m=''976370''>forget</span>
  <span m=''976620''>all</span> <span m=''976760''>of that.</span> <span m=''977000''>Just</span>
  <span m=''977220''>very</span> <span m=''977450''>simple</span> <span m=''978310''>algorithmic</span>
  <span m=''980220''>model</span> <span m=''981150''>where</span> <span m=''981370''>every</span>
  <span m=''981820''>strand,</span> <span m=''982320''>let''s say,</span> <span m=''982880''>costs
  us</span> <span m=''983270''>unit</span> <span m=''983590''>time</span> <span m=''985280''>as</span>
  <span m=''985410''>opposed</span> <span m=''985840''>to</span> <span m=''986320''>in</span>
  <span m=''986460''>practice,</span> <span m=''986930''>they</span> <span m=''987030''>may</span>
  <span m=''987200''>be</span> <span m=''987390''>many</span> <span m=''987700''>instructions</span>
  <span m=''988400''>and</span> <span m=''988540''>so</span> <span m=''988690''>forth.</span>
  <span m=''988880''>We</span> <span m=''988980''>can</span> <span m=''989110''>take</span>
  <span m=''989340''>that</span> <span m=''989490''>into</span> <span m=''989710''>account.</span>
  <span m=''990370''>Let''s</span> <span m=''990570''>take</span> <span m=''990750''>that</span>
  <span m=''990920''>into</span> <span m=''991130''>account</span> <span m=''991460''>separately.</span>
  </p><p><span m=''992680''>So</span> <span m=''993390''>T1</span> <span m=''994320''>is</span>
  <span m=''994820''>the</span> <span m=''994920''>work.</span> <span m=''995390''>It''s</span>
  <span m=''995590''>the</span> <span m=''995700''>time</span> <span m=''996190''>it</span>
  <span m=''996300''>if</span> <span m=''996500''>I</span> <span m=''996590''>had</span>
  <span m=''996770''>to</span> <span m=''996860''>execute</span> <span m=''997370''>it</span>
  <span m=''998330''>on</span> <span m=''998540''>one</span> <span m=''998800''>processor,</span>
  <span m=''999620''>I''ve</span> <span m=''999760''>got</span> <span m=''999900''>to</span>
  <span m=''999970''>do</span> <span m=''1000120''>all</span> <span m=''1000380''>the</span>
  <span m=''1000460''>work</span> <span m=''1000740''>that''s</span> <span m=''1000940''>in</span>
  <span m=''1001020''>here.</span> <span m=''1003450''>So</span> <span m=''1003700''>what''s</span>
  <span m=''1003960''>the</span> <span m=''1004050''>work</span> <span m=''1004330''>of</span>
  <span m=''1004450''>this</span> <span m=''1004680''>particular</span> <span m=''1005530''>computation?</span>
  <span m=''1011850''>I</span> <span m=''1011940''>think</span> <span m=''1012080''>it''s</span>
  <span m=''1012210''>18,</span> <span m=''1012900''>right?</span> <span m=''1012940''>Yeah,</span>
  <span m=''1013600''>18.</span> <span m=''1015230''>So</span> <span m=''1015640''>T1</span>
  <span m=''1015860''>is</span> <span m=''1016000''>the</span> <span m=''1016100''>work.</span>
  <span m=''1016600''>So</span> <span m=''1017090''>even</span> <span m=''1017260''>though</span>
  <span m=''1017400''>I''m</span> <span m=''1017830''>executing a</span> <span m=''1017910''>parallel,</span>
  <span m=''1018420''>I</span> <span m=''1018510''>could</span> <span m=''1018740''>it</span>
  <span m=''1018800''>execute</span> <span m=''1019280''>it</span> <span m=''1019410''>serially</span>
  <span m=''1020760''>and</span> <span m=''1020930''>then</span> <span m=''1022520''>T1</span>
  <span m=''1023200''>is</span> <span m=''1023380''>the</span> <span m=''1023480''>amount</span>
  <span m=''1023770''>of</span> <span m=''1023970''>work</span> <span m=''1024270''>it</span>
  <span m=''1024359''>would</span> <span m=''1024490''>take.</span> </p><p><span m=''1026440''>The</span>
  <span m=''1026599''>other</span> <span m=''1027260''>measure</span> <span m=''1027680''>is</span>
  <span m=''1027829''>called</span> <span m=''1028109''>the</span> <span m=''1028180''>span,</span>
  <span m=''1030160''>and</span> <span m=''1030359''>sometimes</span> <span m=''1030790''>called</span>
  <span m=''1031040''>critical</span> <span m=''1031430''>path</span> <span m=''1031790''>length</span>
  <span m=''1032140''>or</span> <span m=''1032220''>computational</span> <span m=''1032950''>depth.</span>
  <span m=''1033490''>And it</span> <span m=''1033710''>corresponds</span> <span m=''1034280''>to</span>
  <span m=''1034349''>the</span> <span m=''1034420''>longest</span> <span m=''1035220''>path</span>
  <span m=''1035495''>of</span> <span m=''1036619''>dependencies</span> <span m=''1037440''>in</span>
  <span m=''1037619''>the</span> <span m=''1037710''>DAG.</span> <span m=''1040349''>We</span>
  <span m=''1040470''>call</span> <span m=''1040710''>it</span> <span m=''1040849''>T</span>
  <span m=''1041079''>infinity</span> <span m=''1041589''>because</span> <span m=''1041880''>even</span>
  <span m=''1042220''>if</span> <span m=''1042319''>you</span> <span m=''1042460''>had</span>
  <span m=''1042589''>an</span> <span m=''1042750''>infinite</span> <span m=''1043220''>number</span>
  <span m=''1043470''>of</span> <span m=''1043540''>processors,</span> <span m=''1045190''>you</span>
  <span m=''1045310''>still</span> <span m=''1045690''>can''t</span> <span m=''1046040''>do</span>
  <span m=''1046319''>this</span> <span m=''1046619''>one</span> <span m=''1046930''>until</span>
  <span m=''1047160''>you</span> <span m=''1047280''>finish</span> <span m=''1047579''>that</span>
  <span m=''1047900''>one.</span> <span m=''1048240''>You</span> <span m=''1048790''>can''t</span>
  <span m=''1049040''>do</span> <span m=''1049150''>this</span> <span m=''1049410''>one</span>
  <span m=''1049600''>until</span> <span m=''1049830''>you</span> <span m=''1049950''>finish</span>
  <span m=''1050230''>that</span> <span m=''1050570''>one,</span> <span m=''1050820''>can''t</span>
  <span m=''1051040''>do</span> <span m=''1051150''>this</span> <span m=''1051370''>one
  till</span> <span m=''1051580''>you''ve</span> <span m=''1051770''>finished</span>
  <span m=''1052040''>that</span> <span m=''1052360''>one</span> <span m=''1053200''>and</span>
  <span m=''1053370''>so</span> <span m=''1053580''>forth.</span> <span m=''1053800''>So</span>
  <span m=''1053910''>even</span> <span m=''1054110''>with</span> <span m=''1054260''>an</span>
  <span m=''1054320''>infinite</span> <span m=''1054710''>number of</span> <span m=''1054990''>processors,</span>
  <span m=''1055900''>I</span> <span m=''1056030''>still</span> <span m=''1056390''>wouldn''t</span>
  <span m=''1056620''>go</span> <span m=''1056780''>faster</span> <span m=''1057400''>than</span>
  <span m=''1057590''>the</span> <span m=''1057660''>span.</span> <span m=''1058670''>So</span>
  <span m=''1058800''>that''s</span> <span m=''1058980''>why</span> <span m=''1059130''>we</span>
  <span m=''1059260''>denote</span> <span m=''1059690''>by</span> <span m=''1059840''>T</span>
  <span m=''1060080''>infinity.</span> </p><p><span m=''1063130''>So</span> <span
  m=''1063310''>these</span> <span m=''1063610''>are</span> <span m=''1063640''>the</span>
  <span m=''1063940''>two</span> <span m=''1064250''>important</span> <span m=''1064660''>measures.</span>
  <span m=''1065080''>Now what</span> <span m=''1065210''>we''re</span> <span m=''1065430''>really</span>
  <span m=''1065690''>interested</span> <span m=''1066000''>in</span> <span m=''1066080''>is</span>
  <span m=''1066250''>Tp</span> <span m=''1066870''>for a given</span> <span m=''1067360''>p.</span>
  <span m=''1068530''>As</span> <span m=''1068830''>you''ll</span> <span m=''1068970''>see,</span>
  <span m=''1069310''>we</span> <span m=''1069510''>actually</span> <span m=''1069900''>can</span>
  <span m=''1070080''>get</span> <span m=''1070250''>some</span> <span m=''1070430''>bounds</span>
  <span m=''1072630''>on</span> <span m=''1073030''>the</span> <span m=''1074080''>performance</span>
  <span m=''1075210''>on</span> <span m=''1075480''>p</span> <span m=''1075730''>processors</span>
  <span m=''1076470''>just</span> <span m=''1076790''>by</span> <span m=''1076960''>looking</span>
  <span m=''1077370''>at</span> <span m=''1078360''>the</span> <span m=''1078480''>work,</span>
  <span m=''1079060''>the</span> <span m=''1079160''>span</span> <span m=''1079760''>and</span>
  <span m=''1079950''>the</span> <span m=''1080020''>number of</span> <span m=''1080290''>processors</span>
  <span m=''1080940''>we''re</span> <span m=''1081090''>executing</span> <span m=''1081580''>on.</span>
  <span m=''1082660''>So</span> <span m=''1082800''>the</span> <span m=''1082870''>first</span>
  <span m=''1083260''>bound</span> <span m=''1083570''>is</span> <span m=''1083700''>the</span>
  <span m=''1083780''>following,</span> <span m=''1084270''>it''s</span> <span m=''1084410''>called</span>
  <span m=''1084610''>the</span> <span m=''1084680''>Work</span> <span m=''1085010''>Law.</span>
  <span m=''1086700''>The</span> <span m=''1086790''>Work</span> <span m=''1087060''>Law</span>
  <span m=''1087320''>says</span> <span m=''1087610''>that</span> <span m=''1087740''>the</span>
  <span m=''1087880''>time</span> <span m=''1088460''>on</span> <span m=''1088680''>p</span>
  <span m=''1088930''>processors</span> <span m=''1089680''>is</span> <span m=''1089830''>at</span>
  <span m=''1089910''>least</span> <span m=''1090730''>the</span> <span m=''1090860''>time</span>
  <span m=''1091210''>on</span> <span m=''1091340''>one</span> <span m=''1091620''>processor</span>
  <span m=''1092200''>divided</span> <span m=''1092610''>by</span> <span m=''1092800''>p.</span>
  <span m=''1094170''>So</span> <span m=''1094340''>why</span> <span m=''1094530''>does</span>
  <span m=''1094680''>that</span> <span m=''1095130''>Work</span> <span m=''1095380''>Law</span>
  <span m=''1095590''>make</span> <span m=''1095820''>sense?</span> <span m=''1097190''>What''s</span>
  <span m=''1097660''>that</span> <span m=''1097850''>saying?</span> <span m=''1102880''>Sorry?</span>
  </p><p><span m=''1104028''>AUDIENCE:</span> <span m=''1104516''>Like</span> <span
  m=''1105004''>work</span> <span m=''1105492''>is</span> <span m=''1105980''>conserved
  sort of?</span> <span m=''1106468''>I mean, you have to do</span> <span m=''1106956''>the
  same</span> <span m=''1107444''>amount of work.</span> </p><p><span m=''1108910''>PROFESSOR:
  You have to do</span> <span m=''1109090''>the</span> <span m=''1109190''>same</span>
  <span m=''1109480''>amount</span> <span m=''1109750''>of</span> <span m=''1109870''>work,
  so</span> <span m=''1110220''>on</span> <span m=''1110410''>every</span> <span m=''1110760''>time</span>
  <span m=''1111140''>step,</span> <span m=''1111800''>you</span> <span m=''1111920''>can</span>
  <span m=''1112040''>get</span> <span m=''1112280''>p</span> <span m=''1112830''>pieces</span>
  <span m=''1113250''>of</span> <span m=''1113360''>work</span> <span m=''1113640''>done.</span>
  <span m=''1115350''>So</span> <span m=''1115500''>if</span> <span m=''1115570''>you''re</span>
  <span m=''1115750''>running</span> <span m=''1116090''>for</span> <span m=''1116290''>fewer</span>
  <span m=''1117870''>than</span> <span m=''1118430''>T1</span> <span m=''1118650''>over</span>
  <span m=''1118940''>p</span> <span m=''1119160''>steps,</span> <span m=''1119810''>you''ve</span>
  <span m=''1120020''>done</span> <span m=''1120290''>less</span> <span m=''1120610''>than</span>
  <span m=''1120980''>T1</span> <span m=''1121260''>work</span> <span m=''1121650''>over</span>
  <span m=''1122080''>and</span> <span m=''1123650''>time</span> <span m=''1123990''>Tp.</span>
  <span m=''1126440''>So</span> <span m=''1126570''>you</span> <span m=''1126660''>won''t</span>
  <span m=''1126810''>have</span> <span m=''1126950''>done</span> <span m=''1127150''>all</span>
  <span m=''1127300''>the</span> <span m=''1127440''>work</span> <span m=''1127760''>if</span>
  <span m=''1127860''>you</span> <span m=''1127980''>run</span> <span m=''1128670''>for</span>
  <span m=''1128790''>less</span> <span m=''1129080''>than</span> <span m=''1129210''>this.</span>
  <span m=''1130420''>So</span> <span m=''1130540''>the</span> <span m=''1130610''>time</span>
  <span m=''1130900''>must</span> <span m=''1131090''>be</span> <span m=''1131200''>at</span>
  <span m=''1131260''>least</span> <span m=''1132280''>Tp,</span> <span m=''1134240''>time</span>
  <span m=''1134590''>Tp</span> <span m=''1134890''>must</span> <span m=''1135080''>be</span>
  <span m=''1135180''>at</span> <span m=''1135250''>least</span> <span m=''1135700''>T1</span>
  <span m=''1135890''>over</span> <span m=''1136110''>p.</span> <span m=''1136790''>You</span>
  <span m=''1136880''>only</span> <span m=''1137050''>get</span> <span m=''1137190''>to</span>
  <span m=''1137280''>do</span> <span m=''1137510''>p</span> <span m=''1137730''>work</span>
  <span m=''1138170''>on</span> <span m=''1138370''>one</span> <span m=''1138550''>step.</span>
  <span m=''1140365''>Is</span> <span m=''1140630''>that</span> <span m=''1141120''>pretty</span>
  <span m=''1141320''>clear?</span> </p><p><span m=''1142750''>The</span> <span m=''1142960''>second</span>
  <span m=''1143180''>one</span> <span m=''1143420''>should</span> <span m=''1143550''>be</span>
  <span m=''1143680''>even</span> <span m=''1143930''>clearer,</span> <span m=''1145210''>the</span>
  <span m=''1145320''>Span</span> <span m=''1145810''>Law.</span> <span m=''1146880''>On</span>
  <span m=''1147060''>p</span> <span m=''1147290''>processors,</span> <span m=''1148550''>you''re</span>
  <span m=''1148700''>not</span> <span m=''1148930''>going</span> <span m=''1149040''>to</span>
  <span m=''1149080''>go</span> <span m=''1149270''>faster</span> <span m=''1150990''>than</span>
  <span m=''1151170''>if</span> <span m=''1151250''>you</span> <span m=''1151340''>had</span>
  <span m=''1151430''>an</span> <span m=''1151500''>infinite</span> <span m=''1151860''>number</span>
  <span m=''1152090''>of</span> <span m=''1152160''>processors</span> <span m=''1152880''>because</span>
  <span m=''1153230''>the</span> <span m=''1153330''>infinite</span> <span m=''1153860''>processor</span>
  <span m=''1154470''>could</span> <span m=''1154600''>always</span> <span m=''1154860''>use</span>
  <span m=''1155150''>fewer</span> <span m=''1155410''>processors</span> <span m=''1156060''>if</span>
  <span m=''1156170''>it''s</span> <span m=''1156300''>scheduled.</span> <span m=''1157370''>Once</span>
  <span m=''1157650''>again,</span> <span m=''1157850''>this is a</span> <span m=''1157990''>very</span>
  <span m=''1158250''>simple</span> <span m=''1158560''>model.</span> <span m=''1158800''>We''re</span>
  <span m=''1158890''>not</span> <span m=''1159070''>taking</span> <span m=''1159360''>into</span>
  <span m=''1159570''>account</span> <span m=''1160250''>scheduling,</span> <span
  m=''1160970''>we''re</span> <span m=''1161070''>not</span> <span m=''1161260''>taking</span>
  <span m=''1161520''>into</span> <span m=''1161720''>account</span> <span m=''1162050''>overheads</span>
  <span m=''1162760''>or</span> <span m=''1162850''>whatever,</span> <span m=''1163190''>just</span>
  <span m=''1163510''>a</span> <span m=''1163800''>simple</span> <span m=''1164190''>conceptual</span>
  <span m=''1164750''>model</span> <span m=''1165120''>for</span> <span m=''1165290''>understanding</span>
  <span m=''1166830''>parallelism.</span> </p><p><span m=''1168930''>So</span> <span
  m=''1169050''>any</span> <span m=''1169220''>questions</span> <span m=''1169620''>about</span>
  <span m=''1169880''>these</span> <span m=''1170070''>two</span> <span m=''1170260''>laws?</span>
  <span m=''1173620''>There''s</span> <span m=''1173850''>going</span> <span m=''1173930''>to</span>
  <span m=''1174020''>be</span> <span m=''1174100''>a</span> <span m=''1174180''>couple</span>
  <span m=''1174550''>of</span> <span m=''1174640''>formulas</span> <span m=''1175500''>in</span>
  <span m=''1175710''>this</span> <span m=''1176100''>lecture</span> <span m=''1176470''>today</span>
  <span m=''1176840''>that</span> <span m=''1176990''>you</span> <span m=''1177090''>should</span>
  <span m=''1177330''>write</span> <span m=''1177670''>down</span> <span m=''1178490''>and</span>
  <span m=''1178690''>play</span> <span m=''1178950''>with.</span> <span m=''1179610''>So</span>
  <span m=''1179750''>these</span> <span m=''1180120''>two,</span> <span m=''1180760''>they</span>
  <span m=''1180900''>may</span> <span m=''1181150''>seem</span> <span m=''1181420''>simple,</span>
  <span m=''1183030''>but</span> <span m=''1183240''>these</span> <span m=''1183460''>are</span>
  <span m=''1183550''>hugely</span> <span m=''1184280''>important</span> <span m=''1184830''>formulas.</span>
  <span m=''1186790''>So</span> <span m=''1186920''>you</span> <span m=''1187060''>should</span>
  <span m=''1187270''>know</span> <span m=''1187490''>that</span> <span m=''1187760''>Tp</span>
  <span m=''1188230''>is</span> <span m=''1188390''>at</span> <span m=''1188450''>least</span>
  <span m=''1188900''>T1</span> <span m=''1189080''>over</span> <span m=''1189280''>p,</span>
  <span m=''1189540''>that''s</span> <span m=''1189780''>the</span> <span m=''1189860''>Work
  Law</span> <span m=''1190720''>and</span> <span m=''1190830''>that</span> <span
  m=''1190940''>Tp</span> <span m=''1191410''>is</span> <span m=''1191550''>at</span>
  <span m=''1191610''>least</span> <span m=''1191980''>T</span> <span m=''1192170''>infinity.</span>
  <span m=''1193080''>Those</span> <span m=''1193290''>are</span> <span m=''1193370''>bounds</span>
  <span m=''1193790''>on</span> <span m=''1193860''>how</span> <span m=''1194030''>fast</span>
  <span m=''1194420''>you</span> <span m=''1194540''>could</span> <span m=''1194700''>execute.</span>
  <span m=''1195480''>Do</span> <span m=''1195780''>I</span> <span m=''1195910''>have
  a</span> <span m=''1196040''>question</span> <span m=''1196420''>in that</span>
  <span m=''1196490''>back</span> <span m=''1196730''>there?</span> </p><p><span m=''1199250''>OK</span>
  <span m=''1201680''>so</span> <span m=''1202150''>let''s</span> <span m=''1202450''>see</span>
  <span m=''1203450''>what</span> <span m=''1203650''>happens</span> <span m=''1204210''>to</span>
  <span m=''1204380''>work</span> <span m=''1204670''>in</span> <span m=''1204780''>span</span>
  <span m=''1206700''>in</span> <span m=''1206850''>terms</span> <span m=''1207220''>of</span>
  <span m=''1207330''>how</span> <span m=''1207580''>we</span> <span m=''1207690''>can</span>
  <span m=''1207820''>understand</span> <span m=''1208330''>our</span> <span m=''1208420''>programs</span>
  <span m=''1208990''>and</span> <span m=''1209140''>decompose</span> <span m=''1209495''>them.</span>
  <span m=''1210490''>So</span> <span m=''1210650''>suppose</span> <span m=''1211130''>that</span>
  <span m=''1211200''>I</span> <span m=''1211390''>have</span> <span m=''1212240''>a</span>
  <span m=''1213190''>computation</span> <span m=''1214120''>A</span> <span m=''1214660''>followed</span>
  <span m=''1215040''>by</span> <span m=''1215200''>computation</span> <span m=''1215950''>B</span>
  <span m=''1216850''>and</span> <span m=''1216990''>I</span> <span m=''1217040''>connect</span>
  <span m=''1217430''>them</span> <span m=''1217500''>in</span> <span m=''1217850''>series.</span>
  <span m=''1218990''>What</span> <span m=''1219280''>happens</span> <span m=''1219680''>to</span>
  <span m=''1219810''>the</span> <span m=''1219900''>work?</span> <span m=''1221580''>How</span>
  <span m=''1221750''>does</span> <span m=''1221960''>the</span> <span m=''1222050''>work</span>
  <span m=''1223380''>of</span> <span m=''1224560''>all</span> <span m=''1225260''>this</span>
  <span m=''1225490''>whole</span> <span m=''1225770''>thing</span> <span m=''1226000''>correspond</span>
  <span m=''1226530''>to</span> <span m=''1226590''>the</span> <span m=''1226690''>work</span>
  <span m=''1226980''>of</span> <span m=''1227050''>A</span> <span m=''1227310''>and</span>
  <span m=''1227500''>the</span> <span m=''1227570''>work</span> <span m=''1227810''>of</span>
  <span m=''1227890''>B?</span> <span m=''1232840''>What''s</span> <span m=''1233070''>that?</span>
  </p><p><span m=''1233740''>AUDIENCE:</span> <span m=''1234000''>[UNINTELLIGIBLE]</span>
  </p><p><span m=''1234280''>PROFESSOR:</span> <span m=''1234560''>Yeah,</span> <span
  m=''1234730''>add</span> <span m=''1234920''>them</span> <span m=''1235050''>together.</span>
  <span m=''1237210''>You</span> <span m=''1237250''>get</span> <span m=''1238250''>T1</span>
  <span m=''1238500''>of</span> <span m=''1238620''>A</span> <span m=''1238890''>plus</span>
  <span m=''1239310''>T1</span> <span m=''1239730''>of</span> <span m=''1239790''>B.</span>
  <span m=''1240510''>Take</span> <span m=''1240670''>the</span> <span m=''1240750''>work</span>
  <span m=''1241030''>of</span> <span m=''1241120''>this</span> <span m=''1241410''>and</span>
  <span m=''1241570''>the</span> <span m=''1241650''>work</span> <span m=''1241880''>of</span>
  <span m=''1241970''>this.</span> <span m=''1243110''>OK,</span> <span m=''1243500''>that''s</span>
  <span m=''1243710''>pretty</span> <span m=''1243880''>easy.</span> <span m=''1244460''>What</span>
  <span m=''1244590''>about</span> <span m=''1244830''>the</span> <span m=''1244910''>span?</span>
  <span m=''1250290''>So</span> <span m=''1250460''>the</span> <span m=''1250550''>span</span>
  <span m=''1250970''>is</span> <span m=''1251090''>the</span> <span m=''1251180''>longest</span>
  <span m=''1251860''>path</span> <span m=''1252210''>of</span> <span m=''1252290''>dependencies.</span>
  <span m=''1255850''>What</span> <span m=''1255990''>happens</span> <span m=''1256290''>to
  the</span> <span m=''1256390''>span</span> <span m=''1256820''>when</span> <span
  m=''1256970''>I</span> <span m=''1257020''>connect</span> <span m=''1257370''>two</span>
  <span m=''1257500''>things</span> <span m=''1257800''>in a</span> <span m=''1257880''>series?</span>
  <span m=''1261130''>Yeah, it</span> <span m=''1261300''>just</span> <span m=''1261500''>sums</span>
  <span m=''1261790''>as</span> <span m=''1261920''>well</span> <span m=''1264210''>because</span>
  <span m=''1264840''>I</span> <span m=''1264920''>take</span> <span m=''1265120''>whatever</span>
  <span m=''1265360''>the</span> <span m=''1265430''>longest</span> <span m=''1265860''>path</span>
  <span m=''1266080''>is</span> <span m=''1266200''>from</span> <span m=''1266330''>here</span>
  <span m=''1266510''>to</span> <span m=''1266560''>here</span> <span m=''1267180''>and</span>
  <span m=''1267280''>then the</span> <span m=''1267380''>longest</span> <span m=''1267920''>one</span>
  <span m=''1268050''>from</span> <span m=''1268210''>here</span> <span m=''1268400''>to</span>
  <span m=''1268460''>here,</span> <span m=''1268745''>it</span> <span m=''1269500''>just</span>
  <span m=''1269730''>adds.</span> </p><p><span m=''1271470''>But</span> <span m=''1271660''>now</span>
  <span m=''1271830''>let''s</span> <span m=''1272050''>look</span> <span m=''1272270''>at</span>
  <span m=''1272410''>parallel</span> <span m=''1272850''>composition,</span> <span
  m=''1274430''>So</span> <span m=''1274590''>now</span> <span m=''1274880''>suppose</span>
  <span m=''1275370''>that</span> <span m=''1275490''>I</span> <span m=''1275590''>can</span>
  <span m=''1275780''>execute</span> <span m=''1276310''>these</span> <span m=''1276530''>two</span>
  <span m=''1276670''>things</span> <span m=''1276970''>in</span> <span m=''1277090''>parallel.</span>
  <span m=''1278500''>What</span> <span m=''1278800''>happens</span> <span m=''1279150''>to</span>
  <span m=''1279260''>the</span> <span m=''1279360''>work?</span> <span m=''1285160''>It</span>
  <span m=''1285460''>just</span> <span m=''1285670''>adds,</span> <span m=''1286850''>just</span>
  <span m=''1287070''>as</span> <span m=''1287190''>before.</span> <span m=''1288330''>The</span>
  <span m=''1288420''>work</span> <span m=''1288660''>always</span> <span m=''1289020''>adds.</span>
  <span m=''1289460''>The</span> <span m=''1289540''>work</span> <span m=''1289780''>is</span>
  <span m=''1289910''>easy</span> <span m=''1290180''>because</span> <span m=''1290420''>it''s</span>
  <span m=''1291210''>additive.</span> <span m=''1292910''>What</span> <span m=''1293090''>happens</span>
  <span m=''1293410''>to</span> <span m=''1293530''>the</span> <span m=''1293630''>span?</span>
  <span m=''1300560''>What''s</span> <span m=''1301357''>that?</span> </p><p><span
  m=''1301744''>AUDIENCE:</span> <span m=''1302131''>[UNINTELLIGIBLE]</span> </p><p><span
  m=''1302520''>PROFESSOR: It''s</span> <span m=''1302700''>the</span> <span m=''1302790''>max</span>
  <span m=''1303110''>of</span> <span m=''1303430''>the</span> <span m=''1303520''>spans.</span>
  <span m=''1305030''>Right,</span> <span m=''1306030''>so</span> <span m=''1306240''>whatever</span>
  <span m=''1306600''>is</span> <span m=''1306710''>the</span> <span m=''1306810''>longest,</span>
  <span m=''1309080''>whichever</span> <span m=''1309570''>one</span> <span m=''1309760''>of</span>
  <span m=''1309860''>these</span> <span m=''1310370''>ones</span> <span m=''1310630''>has</span>
  <span m=''1310800''>a</span> <span m=''1310860''>longer</span> <span m=''1311390''>span,</span>
  <span m=''1311900''>that''s</span> <span m=''1312130''>going</span> <span m=''1312220''>to</span>
  <span m=''1312320''>be</span> <span m=''1312440''>the</span> <span m=''1312500''>span</span>
  <span m=''1312900''>of</span> <span m=''1312960''>the</span> <span m=''1313050''>total.</span>
  <span m=''1315670''>Does</span> <span m=''1316080''>that</span> <span m=''1316900''>give</span>
  <span m=''1317020''>you</span> <span m=''1317110''>some</span> <span m=''1317290''>Intuition</span>
  <span m=''1318260''>So</span> <span m=''1318470''>we''re</span> <span m=''1318640''>going</span>
  <span m=''1318710''>to</span> <span m=''1318780''>see</span> <span m=''1319020''>when</span>
  <span m=''1319180''>we</span> <span m=''1319360''>analyze</span> <span m=''1320140''>the</span>
  <span m=''1320240''>spans</span> <span m=''1320820''>of</span> <span m=''1320950''>things</span>
  <span m=''1321910''>that</span> <span m=''1322640''>in</span> <span m=''1322780''>fact,</span>
  <span m=''1324230''>we''re</span> <span m=''1324390''>going</span> <span m=''1324460''>to</span>
  <span m=''1324540''>see</span> <span m=''1324700''>maxes</span> <span m=''1325230''>occurring</span>
  <span m=''1325600''>all</span> <span m=''1325840''>over</span> <span m=''1325940''>the</span>
  <span m=''1326050''>place.</span> </p><p><span m=''1329570''>So</span> <span m=''1332420''>speedup</span>
  <span m=''1333120''>is</span> <span m=''1333420''>defined</span> <span m=''1333960''>to</span>
  <span m=''1334050''>be</span> <span m=''1334610''>T1</span> <span m=''1334970''>over</span>
  <span m=''1335420''>Tp.</span> <span m=''1337810''>So</span> <span m=''1337970''>speedup</span>
  <span m=''1338520''>is</span> <span m=''1338870''>how</span> <span m=''1339060''>much</span>
  <span m=''1339330''>faster</span> <span m=''1339910''>am</span> <span m=''1340110''>I</span>
  <span m=''1340330''>on</span> <span m=''1340670''>p</span> <span m=''1340890''>processors</span>
  <span m=''1341600''>than</span> <span m=''1341780''>I</span> <span m=''1341870''>am</span>
  <span m=''1342110''>on</span> <span m=''1342230''>one</span> <span m=''1342460''>processor?</span>
  <span m=''1345450''>Pretty</span> <span m=''1345690''>easy.</span> <span m=''1346300''>So</span>
  <span m=''1346730''>if</span> <span m=''1347080''>T1</span> <span m=''1347450''>over</span>
  <span m=''1347740''>Tp</span> <span m=''1348150''>is</span> <span m=''1348330''>equal</span>
  <span m=''1348700''>to</span> <span m=''1348780''>p,</span> <span m=''1349710''>we</span>
  <span m=''1349970''>say</span> <span m=''1350210''>we</span> <span m=''1350370''>have</span>
  <span m=''1350650''>perfect</span> <span m=''1351050''>linear</span> <span m=''1351380''>speedup,</span>
  <span m=''1352250''>or</span> <span m=''1352450''>linear</span> <span m=''1352770''>speedup.</span>
  <span m=''1356840''>That''s</span> <span m=''1357100''>good,</span> <span m=''1357410''>right?</span>
  <span m=''1358460''>Because</span> <span m=''1359070''>if</span> <span m=''1359400''>I</span>
  <span m=''1359550''>put</span> <span m=''1359910''>on</span> <span m=''1360710''>use</span>
  <span m=''1361010''>p</span> <span m=''1361210''>processors,</span> <span m=''1362870''>I''d</span>
  <span m=''1363060''>like</span> <span m=''1363320''>to</span> <span m=''1363660''>have</span>
  <span m=''1363970''>things</span> <span m=''1364210''>go</span> <span m=''1364330''>p</span>
  <span m=''1364530''>times</span> <span m=''1364860''>faster.</span> <span m=''1365970''>OK,</span>
  <span m=''1366230''>that</span> <span m=''1366400''>would</span> <span m=''1366500''>be</span>
  <span m=''1366600''>the</span> <span m=''1366740''>ideal</span> <span m=''1367110''>world.</span>
  <span m=''1369530''>If</span> <span m=''1370120''>T1</span> <span m=''1370850''>over</span>
  <span m=''1371230''>Tp,</span> <span m=''1372070''>which</span> <span m=''1372290''>is</span>
  <span m=''1372500''>the</span> <span m=''1372580''>speedup,</span> <span m=''1373160''>is</span>
  <span m=''1373430''>greater</span> <span m=''1373880''>than</span> <span m=''1374100''>p,</span>
  <span m=''1375720''>that</span> <span m=''1375960''>says</span> <span m=''1376260''>we</span>
  <span m=''1376410''>have</span> <span m=''1376590''>super</span> <span m=''1377050''>linear</span>
  <span m=''1377410''>speedup.</span> <span m=''1378550''>And</span> <span m=''1378720''>in</span>
  <span m=''1378860''>our</span> <span m=''1379040''>model,</span> <span m=''1379420''>we</span>
  <span m=''1379530''>don''t</span> <span m=''1379800''>get</span> <span m=''1380040''>that</span>
  <span m=''1380420''>because</span> <span m=''1380820''>of</span> <span m=''1380910''>the</span>
  <span m=''1381000''>work</span> <span m=''1381310''>law.</span> <span m=''1381590''>Because</span>
  <span m=''1381750''>the</span> <span m=''1381830''>work</span> <span m=''1382080''>law</span>
  <span m=''1382560''>says Tp</span> <span m=''1382990''>is</span> <span m=''1383360''>greater</span>
  <span m=''1383650''>than or</span> <span m=''1383730''>equal</span> <span m=''1384000''>to</span>
  <span m=''1384320''>T1</span> <span m=''1384580''>over</span> <span m=''1384920''>p</span>
  <span m=''1386270''>and</span> <span m=''1386420''>just</span> <span m=''1386610''>do</span>
  <span m=''1386710''>a</span> <span m=''1386800''>little</span> <span m=''1387200''>algebra</span>
  <span m=''1387700''>here,</span> <span m=''1387950''>you</span> <span m=''1388090''>get</span>
  <span m=''1388750''>T1</span> <span m=''1388910''>over</span> <span m=''1389580''>Tp</span>
  <span m=''1390210''>must</span> <span m=''1390520''>be</span> <span m=''1390740''>less</span>
  <span m=''1391030''>than</span> <span m=''1391140''>or</span> <span m=''1391220''>equal</span>
  <span m=''1391500''>to</span> <span m=''1391620''>p.</span> </p><p><span m=''1393930''>So</span>
  <span m=''1394100''>you</span> <span m=''1394190''>can''t</span> <span m=''1394490''>get</span>
  <span m=''1394650''>super</span> <span m=''1394940''>linear</span> <span m=''1395190''>speedup.</span>
  <span m=''1395500''>In</span> <span m=''1395690''>practice,</span> <span m=''1396580''>there</span>
  <span m=''1396750''>are</span> <span m=''1396900''>situations</span> <span m=''1397610''>where</span>
  <span m=''1397720''>you can</span> <span m=''1397850''>get</span> <span m=''1398600''>super</span>
  <span m=''1398940''>linear</span> <span m=''1399190''>speedup</span> <span m=''1400000''>due
  to</span> <span m=''1400360''>caching</span> <span m=''1400850''>effects</span>
  <span m=''1401320''>and</span> <span m=''1401420''>a</span> <span m=''1401460''>variety
  of</span> <span m=''1401800''>things.</span> <span m=''1401970''>We''ll</span> <span
  m=''1402100''>talk</span> <span m=''1402390''>about</span> <span m=''1402700''>some</span>
  <span m=''1402870''>of</span> <span m=''1402930''>those</span> <span m=''1403180''>things.</span>
  <span m=''1403590''>But</span> <span m=''1403770''>in</span> <span m=''1403830''>this</span>
  <span m=''1404000''>simple</span> <span m=''1404290''>model,</span> <span m=''1405630''>we</span>
  <span m=''1405810''>don''t</span> <span m=''1406220''>get</span> <span m=''1407470''>that</span>
  <span m=''1407670''>kind</span> <span m=''1407920''>of</span> <span m=''1409470''>behavior.</span>
  <span m=''1411130''>And</span> <span m=''1411380''>of</span> <span m=''1411490''>course,</span>
  <span m=''1411750''>the</span> <span m=''1411840''>case</span> <span m=''1412110''>I</span>
  <span m=''1412170''>left</span> <span m=''1412470''>out</span> <span m=''1412680''>is</span>
  <span m=''1413370''>the</span> <span m=''1413450''>common</span> <span m=''1413840''>case,</span>
  <span m=''1414170''>which</span> <span m=''1414390''>is</span> <span m=''1414540''>the</span>
  <span m=''1414860''>T1</span> <span m=''1415120''>over</span> <span m=''1415450''>Tp</span>
  <span m=''1415810''>is</span> <span m=''1415940''>less</span> <span m=''1416210''>than</span>
  <span m=''1416320''>p,</span> <span m=''1417500''>and</span> <span m=''1417630''>that''s</span>
  <span m=''1417910''>very</span> <span m=''1418160''>common</span> <span m=''1418590''>people</span>
  <span m=''1418910''>write</span> <span m=''1419150''>code</span> <span m=''1419470''>which</span>
  <span m=''1420090''>doesn''t</span> <span m=''1420370''>give</span> <span m=''1420540''>them</span>
  <span m=''1421680''>linear</span> <span m=''1421990''>speedup.</span> <span m=''1424090''>We''re</span>
  <span m=''1424360''>mostly</span> <span m=''1424890''>interested</span> <span m=''1425370''>in</span>
  <span m=''1425510''>getting</span> <span m=''1425790''>linear</span> <span m=''1426100''>speedup</span>
  <span m=''1426540''>here.</span> <span m=''1427060''>That''s</span> <span m=''1427320''>our</span>
  <span m=''1427430''>goal.</span> <span m=''1428790''>So</span> <span m=''1429010''>that</span>
  <span m=''1430170''>we''re</span> <span m=''1430290''>getting</span> <span m=''1430670''>the</span>
  <span m=''1430890''>most</span> <span m=''1431110''>bang</span> <span m=''1431390''>for</span>
  <span m=''1431480''>the</span> <span m=''1431570''>buck</span> <span m=''1431830''>out
  of</span> <span m=''1431940''>the</span> <span m=''1432050''>processors</span> <span
  m=''1432690''>we''re</span> <span m=''1432950''>using.</span> </p><p><span m=''1435110''>OK,</span>
  <span m=''1435680''>parallelism.</span> <span m=''1436330''>So</span> <span m=''1436470''>we''re</span>
  <span m=''1436590''>finally</span> <span m=''1437140''>to</span> <span m=''1437260''>the</span>
  <span m=''1437350''>point</span> <span m=''1437640''>where</span> <span m=''1437760''>I</span>
  <span m=''1437810''>can</span> <span m=''1437970''>talk</span> <span m=''1438240''>about</span>
  <span m=''1438500''>parallelism</span> <span m=''1439090''>and</span> <span m=''1439700''>give</span>
  <span m=''1439930''>a</span> <span m=''1442720''>quantitative</span> <span m=''1443410''>definition</span>
  <span m=''1443970''>of</span> <span m=''1444050''>parallelism.</span> <span m=''1446120''>So</span>
  <span m=''1446810''>the</span> <span m=''1446910''>Span</span> <span m=''1447370''>Law</span>
  <span m=''1447720''>says</span> <span m=''1448340''>that</span> <span m=''1448530''>Tp</span>
  <span m=''1448910''>is</span> <span m=''1449060''>at</span> <span m=''1449180''>least</span>
  <span m=''1449890''>T</span> <span m=''1450170''>infinity,</span> <span m=''1450760''>right?</span>
  <span m=''1451950''>The</span> <span m=''1452040''>time</span> <span m=''1452400''>on
  p</span> <span m=''1452760''>processors</span> <span m=''1453075''>is</span> <span
  m=''1453390''>at</span> <span m=''1453450''>least</span> <span m=''1453930''>the</span>
  <span m=''1454020''>time</span> <span m=''1454300''>on</span> <span m=''1454490''>an
  infinite</span> <span m=''1454580''>number of</span> <span m=''1454900''>processors.</span>
  <span m=''1456060''>So</span> <span m=''1456250''>the</span> <span m=''1456360''>maximum</span>
  <span m=''1457010''>possible</span> <span m=''1457610''>speedup,</span> <span m=''1459100''>that''s</span>
  <span m=''1459600''>T1</span> <span m=''1459860''>over</span> <span m=''1460170''>Tp,</span>
  <span m=''1461390''>given</span> <span m=''1463520''>T1</span> <span m=''1463880''>and
  T</span> <span m=''1464100''>infinity</span> <span m=''1464700''>is</span> <span
  m=''1465260''>T1</span> <span m=''1465520''>over</span> <span m=''1465900''>T</span>
  <span m=''1466130''>infinity.</span> <span m=''1469020''>And</span> <span m=''1469110''>we</span>
  <span m=''1469230''>call</span> <span m=''1469500''>that</span> <span m=''1469730''>the</span>
  <span m=''1469810''>parallelism.</span> <span m=''1472900''>It''s</span> <span m=''1473090''>the</span>
  <span m=''1473190''>maximum</span> <span m=''1473920''>amount</span> <span m=''1474500''>of</span>
  <span m=''1476360''>speedup</span> <span m=''1476940''>we</span> <span m=''1477050''>could</span>
  <span m=''1477210''>possibly</span> <span m=''1478030''>attain.</span> <span m=''1481080''>So</span>
  <span m=''1481290''>we</span> <span m=''1481370''>have</span> <span m=''1481480''>the</span>
  <span m=''1481560''>speedup</span> <span m=''1482330''>and</span> <span m=''1482420''>the</span>
  <span m=''1482520''>speedup</span> <span m=''1483610''>by</span> <span m=''1483770''>the</span>
  <span m=''1483920''>Span</span> <span m=''1484310''>Law</span> <span m=''1485070''>that</span>
  <span m=''1485220''>says</span> <span m=''1485570''>this</span> <span m=''1485750''>is</span>
  <span m=''1486020''>the</span> <span m=''1486140''>maximum</span> <span m=''1486840''>amount</span>
  <span m=''1487070''>we</span> <span m=''1487170''>can</span> <span m=''1487330''>get,</span>
  <span m=''1488150''>we</span> <span m=''1488340''>could</span> <span m=''1488440''>also</span>
  <span m=''1488740''>view</span> <span m=''1488990''>it</span> <span m=''1489090''>as</span>
  <span m=''1489230''>if</span> <span m=''1489370''>I</span> <span m=''1489470''>look</span>
  <span m=''1489740''>along</span> <span m=''1492110''>the</span> <span m=''1492700''>critical</span>
  <span m=''1493120''>path</span> <span m=''1493480''>of</span> <span m=''1493570''>the</span>
  <span m=''1493660''>computation.</span> <span m=''1495900''>It''s</span> <span m=''1496120''>sort</span>
  <span m=''1496370''>of</span> <span m=''1496440''>what''s</span> <span m=''1496660''>the</span>
  <span m=''1496800''>average</span> <span m=''1497210''>amount</span> <span m=''1497460''>of</span>
  <span m=''1497530''>work</span> <span m=''1497830''>at</span> <span m=''1497900''>every</span>
  <span m=''1498140''>level.</span> <span m=''1499302''>The</span> <span m=''1499900''>work,</span>
  <span m=''1500390''>the</span> <span m=''1500480''>total</span> <span m=''1500790''>amount</span>
  <span m=''1501020''>of</span> <span m=''1501080''>stuff</span> <span m=''1501320''>here</span>
  <span m=''1501800''>divided</span> <span m=''1502290''>by</span> <span m=''1502520''>that</span>
  <span m=''1502830''>length</span> <span m=''1503130''>there</span> <span m=''1503550''>that</span>
  <span m=''1503880''>sort</span> <span m=''1504060''>of</span> <span m=''1504140''>tells</span>
  <span m=''1504430''>us</span> <span m=''1504590''>the</span> <span m=''1504690''>width,</span>
  <span m=''1505080''>what''s</span> <span m=''1505350''>the</span> <span m=''1505500''>average</span>
  <span m=''1505990''>amount</span> <span m=''1506320''>of</span> <span m=''1506410''>stuff</span>
  <span m=''1506810''>that''s</span> <span m=''1507020''>going</span> <span m=''1507270''>on
  in</span> <span m=''1507500''>every</span> <span m=''1508090''>step.</span> </p><p><span
  m=''1510180''>So</span> <span m=''1510440''>for</span> <span m=''1510650''>this</span>
  <span m=''1510820''>example,</span> <span m=''1511710''>what</span> <span m=''1511940''>is</span>
  <span m=''1512330''>the--</span> <span m=''1512700''>I</span> <span m=''1513140''>forgot</span>
  <span m=''1513380''>to</span> <span m=''1513440''>put</span> <span m=''1513600''>this</span>
  <span m=''1513760''>on</span> <span m=''1513860''>my</span> <span m=''1513960''>slide--</span>
  <span m=''1516790''>what</span> <span m=''1517020''>is</span> <span m=''1517130''>the</span>
  <span m=''1517200''>parallelism</span> <span m=''1517810''>of</span> <span m=''1517920''>this</span>
  <span m=''1518140''>particular</span> <span m=''1521060''>DAG</span> <span m=''1521370''>here?</span>
  <span m=''1526830''>Two,</span> <span m=''1528150''>right?</span> <span m=''1528730''>So</span>
  <span m=''1529030''>the</span> <span m=''1529180''>span</span> <span m=''1529710''>has</span>
  <span m=''1529950''>length</span> <span m=''1530330''>nine--</span> <span m=''1530700''>this</span>
  <span m=''1531490''>is</span> <span m=''1531640''>assuming</span> <span m=''1532110''>everything</span>
  <span m=''1532460''>was</span> <span m=''1532580''>unit</span> <span m=''1532870''>time--</span>
  <span m=''1533440''>obviously</span> <span m=''1534170''>in</span> <span m=''1534800''>reality,</span>
  <span m=''1535540''>when you</span> <span m=''1535690''>have</span> <span m=''1535840''>more</span>
  <span m=''1536050''>instructions,</span> <span m=''1537460''>you</span> <span m=''1537670''>in</span>
  <span m=''1537780''>fact</span> <span m=''1538420''>would</span> <span m=''1539400''>make</span>
  <span m=''1539990''>it</span> <span m=''1540210''>be</span> <span m=''1540460''>whatever</span>
  <span m=''1540870''>the</span> <span m=''1541130''>length</span> <span m=''1542160''>of</span>
  <span m=''1542360''>this</span> <span m=''1542560''>was</span> <span m=''1542820''>in</span>
  <span m=''1542920''>terms</span> <span m=''1543220''>of</span> <span m=''1543290''>number</span>
  <span m=''1543550''>of</span> <span m=''1543630''>instructions</span> <span m=''1544400''>or</span>
  <span m=''1544700''>what</span> <span m=''1544840''>have</span> <span m=''1545050''>you,</span>
  <span m=''1546390''>of</span> <span m=''1546590''>execution</span> <span m=''1547220''>time</span>
  <span m=''1547500''>of</span> <span m=''1547620''>all</span> <span m=''1547760''>these</span>
  <span m=''1547930''>things.</span> <span m=''1548160''>So</span> <span m=''1548310''>this</span>
  <span m=''1548530''>is</span> <span m=''1548990''>length</span> <span m=''1549250''>9,</span>
  <span m=''1550080''>there''s</span> <span m=''1550310''>18</span> <span m=''1550870''>things</span>
  <span m=''1551170''>here,</span> <span m=''1551750''>parallelism</span> <span m=''1552240''>is</span>
  <span m=''1552370''>2.</span> <span m=''1554660''>So</span> <span m=''1554890''>we</span>
  <span m=''1555000''>can</span> <span m=''1555140''>quantify</span> <span m=''1555760''>parallelism</span>
  <span m=''1556380''>precisely.</span> <span m=''1557410''>We''ll</span> <span m=''1557570''>see</span>
  <span m=''1557770''>why</span> <span m=''1558020''>it''s</span> <span m=''1558130''>important</span>
  <span m=''1558590''>to</span> <span m=''1558680''>quantify</span> <span m=''1559260''>it.</span>
  </p><p><span m=''1559650''>So</span> <span m=''1559780''>that</span> <span m=''1559900''>the</span>
  <span m=''1560030''>maximum</span> <span m=''1560630''>speedup</span> <span m=''1561130''>we''re</span>
  <span m=''1561250''>going</span> <span m=''1561360''>to</span> <span m=''1561410''>get</span>
  <span m=''1561670''>when</span> <span m=''1561830''>we</span> <span m=''1561970''>run</span>
  <span m=''1562210''>this</span> <span m=''1562400''>application.</span> <span m=''1565180''>Here''s</span>
  <span m=''1565400''>another</span> <span m=''1565710''>example</span> <span m=''1566410''>we</span>
  <span m=''1566580''>did</span> <span m=''1566730''>before.</span> <span m=''1567110''>Fib</span>
  <span m=''1567300''>of</span> <span m=''1567705''>four.</span> <span m=''1569930''>So</span>
  <span m=''1570090''>let''s</span> <span m=''1570290''>assume</span> <span m=''1570640''>again</span>
  <span m=''1570930''>that</span> <span m=''1571060''>each</span> <span m=''1572290''>strand</span>
  <span m=''1573430''>takes</span> <span m=''1573700''>unit</span> <span m=''1573950''>time</span>
  <span m=''1574230''>to</span> <span m=''1574340''>execute.</span> <span m=''1576320''>So</span>
  <span m=''1576560''>what</span> <span m=''1576760''>is</span> <span m=''1576900''>the</span>
  <span m=''1576990''>work</span> <span m=''1577450''>in</span> <span m=''1577660''>this</span>
  <span m=''1578270''>particular</span> <span m=''1581880''>computation?</span> <span
  m=''1591680''>Assume</span> <span m=''1591930''>every</span> <span m=''1592210''>strand</span>
  <span m=''1592610''>takes</span> <span m=''1592830''>unit</span> <span m=''1593010''>time</span>
  <span m=''1593260''>to</span> <span m=''1593360''>execute,</span> <span m=''1593870''>which</span>
  <span m=''1594010''>of</span> <span m=''1594050''>course</span> <span m=''1594310''>it</span>
  <span m=''1594410''>doesn''t,</span> <span m=''1595286''>but--</span> <span m=''1608190''>anybody</span>
  <span m=''1608340''>care</span> <span m=''1608510''>to</span> <span m=''1608560''>hazard</span>
  <span m=''1608860''>a</span> <span m=''1608900''>guess?</span> <span m=''1612340''>17,</span>
  <span m=''1613060''>yeah,</span> <span m=''1613380''>because</span> <span m=''1614360''>there''s</span>
  <span m=''1614800''>four</span> <span m=''1615860''>nodes</span> <span m=''1616170''>here</span>
  <span m=''1616350''>that</span> <span m=''1616480''>have</span> <span m=''1616710''>3</span>
  <span m=''1617620''>plus</span> <span m=''1618400''>5.</span> <span m=''1619320''>So</span>
  <span m=''1619900''>3</span> <span m=''1620060''>times</span> <span m=''1620310''>4</span>
  <span m=''1620500''>plus</span> <span m=''1620750''>5</span> <span m=''1621000''>is</span>
  <span m=''1621080''>17.</span> <span m=''1623830''>So</span> <span m=''1624230''>the</span>
  <span m=''1624400''>work</span> <span m=''1624680''>is</span> <span m=''1624790''>17.</span>
  </p><p><span m=''1626670''>OK,</span> <span m=''1626800''>what''s</span> <span m=''1626970''>the</span>
  <span m=''1627140''>span?</span> <span m=''1632590''>This</span> <span m=''1632770''>one''s</span>
  <span m=''1632970''>tricky.</span> <span m=''1641370''>Too bad it''s not</span>
  <span m=''1641660''>a</span> <span m=''1641900''>little</span> <span m=''1642090''>bit</span>
  <span m=''1642230''>more</span> <span m=''1642400''>focused.</span> <span m=''1647270''>What</span>
  <span m=''1647670''>the</span> <span m=''1647750''>span?</span> </p><p><span m=''1648075''>AUDIENCE:</span>
  <span m=''1648400''>8.</span> </p><p><span m=''1650146''>PROFESSOR:</span> <span
  m=''1650482''>8,</span> <span m=''1650820''>that''s</span> <span m=''1651320''>correct.</span>
  <span m=''1652610''>Who</span> <span m=''1652720''>got</span> <span m=''1652940''>7?</span>
  <span m=''1655320''>Yeah,</span> <span m=''1655700''>so</span> <span m=''1656030''>I</span>
  <span m=''1656170''>got</span> <span m=''1656390''>7</span> <span m=''1656660''>when</span>
  <span m=''1656820''>I</span> <span m=''1656900''>did</span> <span m=''1657090''>this</span>
  <span m=''1657360''>and</span> <span m=''1657460''>then</span> <span m=''1658810''>I</span>
  <span m=''1658910''>looked</span> <span m=''1659110''>harder</span> <span m=''1659450''>and</span>
  <span m=''1659520''>it</span> <span m=''1659590''>was</span> <span m=''1659760''>8.</span>
  <span m=''1660330''>It''s</span> <span m=''1660950''>8,</span> <span m=''1661290''>so</span>
  <span m=''1661480''>here</span> <span m=''1661710''>it</span> <span m=''1661770''>is.</span>
  <span m=''1664000''>Here''s</span> <span m=''1664430''>the</span> <span m=''1664600''>span.</span>
  <span m=''1666410''>There</span> <span m=''1666690''>is</span> <span m=''1666945''>goes.</span>
  <span m=''1668360''>Ooh</span> <span m=''1668640''>that</span> <span m=''1668840''>little</span>
  <span m=''1669230''>sidestep</span> <span m=''1669950''>there,</span> <span m=''1670130''>that''s</span>
  <span m=''1670410''>what</span> <span m=''1670830''>makes</span> <span m=''1671080''>it</span>
  <span m=''1671180''>8.</span> </p><p><span m=''1674590''>OK</span> <span m=''1675090''>so</span>
  <span m=''1675410''>basically, it</span> <span m=''1675900''>comes</span> <span
  m=''1676260''>down</span> <span m=''1676540''>here</span> <span m=''1677460''>and</span>
  <span m=''1678080''>I</span> <span m=''1678260''>had</span> <span m=''1678420''>gone</span>
  <span m=''1678700''>down</span> <span m=''1678940''>like</span> <span m=''1679160''>that</span>
  <span m=''1679560''>when</span> <span m=''1679740''>I</span> <span m=''1679840''>did</span>
  <span m=''1680020''>it,</span> <span m=''1680520''>but</span> <span m=''1680720''>in</span>
  <span m=''1680850''>fact,</span> <span m=''1681170''>you''ve</span> <span m=''1681260''>got</span>
  <span m=''1681390''>to</span> <span m=''1681440''>go</span> <span m=''1681620''>over</span>
  <span m=''1681940''>and</span> <span m=''1681980''>back</span> <span m=''1682260''>up.</span>
  <span m=''1683770''>So</span> <span m=''1683890''>it''s</span> <span m=''1684010''>actually</span>
  <span m=''1684360''>8.</span> <span m=''1686450''>So</span> <span m=''1686600''>that</span>
  <span m=''1686830''>says</span> <span m=''1687050''>that</span> <span m=''1687180''>the</span>
  <span m=''1687260''>parallelism</span> <span m=''1688040''>is</span> <span m=''1691836''>a</span>
  <span m=''1692280''>little</span> <span m=''1692470''>bit</span> <span m=''1692620''>more</span>
  <span m=''1692790''>than</span> <span m=''1692950''>2,</span> <span m=''1693470''>2</span>
  <span m=''1693620''>and</span> <span m=''1693700''>1/8.</span> <span m=''1696520''>What</span>
  <span m=''1696680''>that</span> <span m=''1696870''>says</span> <span m=''1697270''>is</span>
  <span m=''1697560''>that</span> <span m=''1697780''>if</span> <span m=''1697950''>I</span>
  <span m=''1698130''>use</span> <span m=''1698360''>many</span> <span m=''1698720''>more</span>
  <span m=''1698930''>than</span> <span m=''1699140''>two</span> <span m=''1699370''>processors,</span>
  <span m=''1702250''>I</span> <span m=''1702360''>can''t</span> <span m=''1702670''>get</span>
  <span m=''1702790''>linear</span> <span m=''1703100''>speedup</span> <span m=''1703530''>anymore.</span>
  <span m=''1704970''>I''m</span> <span m=''1705150''>only</span> <span m=''1705340''>going</span>
  <span m=''1705410''>to</span> <span m=''1705480''>get</span> <span m=''1705660''>marginal</span>
  <span m=''1706130''>performance</span> <span m=''1706710''>gains.</span> <span m=''1708890''>If
  I</span> <span m=''1709000''>use</span> <span m=''1709190''>more</span> <span m=''1709350''>than</span>
  <span m=''1709510''>2,</span> <span m=''1709880''>because</span> <span m=''1710090''>the</span>
  <span m=''1710180''>maximum</span> <span m=''1710640''>speedup</span> <span m=''1711080''>I</span>
  <span m=''1711170''>can</span> <span m=''1711340''>get</span> <span m=''1711530''>is</span>
  <span m=''1711920''>like</span> <span m=''1712200''>2.125</span> <span m=''1714210''>if</span>
  <span m=''1714360''>I</span> <span m=''1714580''>had</span> <span m=''1714810''>an
  infinite</span> <span m=''1714910''>number of</span> <span m=''1715220''>processors.</span>
  </p><p><span m=''1719120''>So</span> <span m=''1719260''>any</span> <span m=''1719400''>questions</span>
  <span m=''1719830''>about</span> <span m=''1720030''>this?</span> <span m=''1720190''>So</span>
  <span m=''1720300''>this</span> <span m=''1721360''>by</span> <span m=''1721460''>the</span>
  <span m=''1721520''>way</span> <span m=''1722050''>deceptively</span> <span m=''1722770''>simple</span>
  <span m=''1724070''>and</span> <span m=''1725980''>yet,</span> <span m=''1726460''>if</span>
  <span m=''1726590''>you</span> <span m=''1726700''>don''t</span> <span m=''1726960''>play</span>
  <span m=''1727820''>around</span> <span m=''1728350''>with</span> <span m=''1728510''>it</span>
  <span m=''1728600''>a</span> <span m=''1728690''>little</span> <span m=''1728930''>bit,</span>
  <span m=''1729340''>you</span> <span m=''1729500''>can</span> <span m=''1729670''>get</span>
  <span m=''1729830''>confused</span> <span m=''1730300''>very</span> <span m=''1730550''>easily.</span>
  <span m=''1733350''>Deceptively</span> <span m=''1733900''>simple,</span> <span
  m=''1734120''>very</span> <span m=''1734440''>powerful</span> <span m=''1736410''>to</span>
  <span m=''1736880''>be</span> <span m=''1737340''>able</span> <span m=''1737510''>to</span>
  <span m=''1737680''>do this.</span> </p><p><span m=''1741740''>So</span> <span m=''1741960''>here</span>
  <span m=''1742180''>we</span> <span m=''1742330''>have</span> <span m=''1744420''>for</span>
  <span m=''1744510''>the</span> <span m=''1744610''>analysis</span> <span m=''1745100''>of</span>
  <span m=''1745190''>parallelism,</span> <span m=''1745890''>one</span> <span m=''1746110''>of</span>
  <span m=''1746170''>the</span> <span m=''1746230''>things</span> <span m=''1746460''>that</span>
  <span m=''1746540''>we</span> <span m=''1746650''>have</span> <span m=''1746850''>going</span>
  <span m=''1747200''>for</span> <span m=''1747530''>us</span> <span m=''1747670''>in</span>
  <span m=''1747860''>using</span> <span m=''1748230''>the</span> <span m=''1748320''>Cilk</span>
  <span m=''1749170''>tool</span> <span m=''1749460''>suite</span> <span m=''1750050''>is</span>
  <span m=''1750360''>a</span> <span m=''1750560''>program</span> <span m=''1751060''>called</span>
  <span m=''1751420''>Cilkview,</span> <span m=''1752790''>which</span> <span m=''1753030''>has</span>
  <span m=''1753280''>a</span> <span m=''1753350''>scalability</span> <span m=''1754290''>analyzer.</span>
  <span m=''1757110''>And</span> <span m=''1757410''>it</span> <span m=''1757830''>is</span>
  <span m=''1758010''>like</span> <span m=''1758420''>the</span> <span m=''1758530''>race</span>
  <span m=''1758860''>detector</span> <span m=''1759350''>that</span> <span m=''1759510''>I</span>
  <span m=''1759600''>talked</span> <span m=''1759970''>to</span> <span m=''1760120''>you</span>
  <span m=''1760290''>about</span> <span m=''1760560''>last</span> <span m=''1760940''>time</span>
  <span m=''1761230''>in</span> <span m=''1761400''>that</span> <span m=''1761520''>it</span>
  <span m=''1761670''>uses</span> <span m=''1762040''>dynamic</span> <span m=''1762570''>instrumentation.</span>
  <span m=''1763780''>So</span> <span m=''1763940''>you</span> <span m=''1764090''>run</span>
  <span m=''1764310''>it</span> <span m=''1764480''>under</span> <span m=''1764830''>Cilkview,</span>
  <span m=''1767010''>it''s</span> <span m=''1767120''>like</span> <span m=''1767300''>running</span>
  <span m=''1767550''>it</span> <span m=''1767630''>under</span> <span m=''1767820''>[?
  Valgrhen ?]</span> <span m=''1768400''>for</span> <span m=''1768560''>example,</span>
  <span m=''1770060''>or</span> <span m=''1770530''>what</span> <span m=''1770670''>have</span>
  <span m=''1770810''>you.</span> <span m=''1770960''>So</span> <span m=''1771560''>basically</span>
  <span m=''1772000''>you</span> <span m=''1772090''>run</span> <span m=''1772270''>your</span>
  <span m=''1772400''>program</span> <span m=''1772780''>under</span> <span m=''1773070''>it,
  and</span> <span m=''1773260''>it</span> <span m=''1773430''>analyzes</span> <span
  m=''1774070''>your</span> <span m=''1774210''>program</span> <span m=''1774670''>for</span>
  <span m=''1774770''>scalability.</span> <span m=''1777040''>It</span> <span m=''1777230''>computes</span>
  <span m=''1777760''>the</span> <span m=''1777860''>work</span> <span m=''1778170''>and</span>
  <span m=''1778290''>span</span> <span m=''1779560''>of</span> <span m=''1779760''>your</span>
  <span m=''1779920''>program</span> <span m=''1780930''>to</span> <span m=''1781070''>derive</span>
  <span m=''1781530''>some</span> <span m=''1781820''>upper</span> <span m=''1782080''>bounds</span>
  <span m=''1782450''>on</span> <span m=''1782540''>parallel</span> <span m=''1782980''>performance</span>
  <span m=''1784050''>and</span> <span m=''1784210''>it</span> <span m=''1784260''>also</span>
  <span m=''1784630''>estimates</span> <span m=''1785220''>a</span> <span m=''1785280''>scheduling</span>
  <span m=''1785910''>overhead</span> <span m=''1786215''>to</span> <span m=''1786520''>compute</span>
  <span m=''1786860''>what''s</span> <span m=''1787090''>called</span> <span m=''1787310''>a</span>
  <span m=''1787350''>burden</span> <span m=''1787800''>span</span> <span m=''1788500''>for</span>
  <span m=''1788620''>lower</span> <span m=''1788950''>bounds.</span> </p><p><span
  m=''1792710''>So</span> <span m=''1792940''>let''s</span> <span m=''1794570''>take</span>
  <span m=''1794810''>a</span> <span m=''1794880''>look.</span> <span m=''1795230''>So</span>
  <span m=''1795330''>here''s,</span> <span m=''1795810''>for</span> <span m=''1795920''>example,</span>
  <span m=''1796310''>here''s</span> <span m=''1796540''>a</span> <span m=''1796620''>quick</span>
  <span m=''1796890''>sort</span> <span m=''1797350''>program.</span> <span m=''1798690''>So</span>
  <span m=''1798840''>let''s</span> <span m=''1798980''>just</span> <span m=''1799950''>see</span>
  <span m=''1800880''>this</span> <span m=''1801060''>is</span> <span m=''1801190''>a</span>
  <span m=''1801250''>c++</span> <span m=''1802110''>program.</span> <span m=''1803110''>So</span>
  <span m=''1803300''>here</span> <span m=''1803490''>we''re</span> <span m=''1803620''>using</span>
  <span m=''1803940''>a</span> <span m=''1803990''>template</span> <span m=''1804520''>so</span>
  <span m=''1804640''>that</span> <span m=''1804830''>the</span> <span m=''1804940''>type</span>
  <span m=''1805360''>of</span> <span m=''1805770''>items</span> <span m=''1806180''>that</span>
  <span m=''1806260''>I''m</span> <span m=''1806360''>sorting</span> <span m=''1806800''>I</span>
  <span m=''1806880''>can</span> <span m=''1807040''>make</span> <span m=''1807270''>be
  a</span> <span m=''1807450''>variable.</span> <span m=''1809400''>So</span> <span
  m=''1810060''>tightening--</span> <span m=''1810340''>can</span> <span m=''1810620''>we</span>
  <span m=''1810770''>shut</span> <span m=''1811060''>the</span> <span m=''1811140''>back</span>
  <span m=''1811470''>door</span> <span m=''1811660''>there?</span> <span m=''1813000''>One
  of</span> <span m=''1813240''>the</span> <span m=''1813410''>TAs?</span> <span m=''1813620''>Somebody</span>
  <span m=''1813950''>run</span> <span m=''1814110''>up</span> <span m=''1814280''>to--</span>
  <span m=''1817210''>thank</span> <span m=''1817430''>you.</span> </p><p><span m=''1820610''>So</span>
  <span m=''1821060''>we</span> <span m=''1821400''>have</span> <span m=''1821510''>the</span>
  <span m=''1821970''>variable</span> <span m=''1822590''>T</span> <span m=''1822960''>And</span>
  <span m=''1823050''>we''re</span> <span m=''1823160''>going</span> <span m=''1823260''>to</span>
  <span m=''1823370''>quick</span> <span m=''1823700''>sort</span> <span m=''1824130''>from</span>
  <span m=''1825380''>the</span> <span m=''1825540''>beginning</span> <span m=''1826120''>to</span>
  <span m=''1826280''>the</span> <span m=''1826460''>end</span> <span m=''1826880''>of</span>
  <span m=''1828290''>the</span> <span m=''1828480''>array.</span> <span m=''1829080''>And</span>
  <span m=''1829240''>what</span> <span m=''1829400''>we</span> <span m=''1829520''>do</span>
  <span m=''1829880''>is,</span> <span m=''1830170''>just</span> <span m=''1830390''>as</span>
  <span m=''1830510''>you''re</span> <span m=''1830630''>familiar</span> <span m=''1830970''>with</span>
  <span m=''1831100''>quick</span> <span m=''1831340''>sort,</span> <span m=''1832550''>if</span>
  <span m=''1833280''>there''s</span> <span m=''1833530''>actually</span> <span m=''1833790''>something</span>
  <span m=''1834190''>to</span> <span m=''1834250''>be</span> <span m=''1834380''>sorted,</span>
  <span m=''1834820''>more</span> <span m=''1834970''>than</span> <span m=''1835130''>one</span>
  <span m=''1835360''>thing,</span> <span m=''1836210''>then</span> <span m=''1836500''>we</span>
  <span m=''1836650''>find</span> <span m=''1836940''>the</span> <span m=''1837010''>middle</span>
  <span m=''1837410''>by</span> <span m=''1837590''>partitioning</span> <span m=''1838840''>the</span>
  <span m=''1839590''>thing</span> <span m=''1839860''>and</span> <span m=''1839950''>this</span>
  <span m=''1840100''>is</span> <span m=''1840240''>a</span> <span m=''1840290''>bit</span>
  <span m=''1840490''>of</span> <span m=''1840750''>a</span> <span m=''1840910''>c++</span>
  <span m=''1841610''>magic</span> <span m=''1842470''>to</span> <span m=''1842580''>find</span>
  <span m=''1842990''>the</span> <span m=''1843950''>middle</span> <span m=''1844310''>element.</span>
  <span m=''1845200''>And</span> <span m=''1845400''>then</span> <span m=''1845560''>the</span>
  <span m=''1845660''>important</span> <span m=''1846130''>part</span> <span m=''1846390''>from</span>
  <span m=''1846550''>our</span> <span m=''1846740''>point</span> <span m=''1846940''>of</span>
  <span m=''1847010''>view</span> <span m=''1847210''>is</span> <span m=''1847320''>after</span>
  <span m=''1847600''>we''ve</span> <span m=''1847750''>done</span> <span m=''1847960''>this</span>
  <span m=''1848150''>partition,</span> <span m=''1849080''>we</span> <span m=''1849380''>quick</span>
  <span m=''1849680''>sort</span> <span m=''1850400''>the</span> <span m=''1850540''>first</span>
  <span m=''1850920''>part</span> <span m=''1851130''>of</span> <span m=''1851170''>the</span>
  <span m=''1851330''>array,</span> <span m=''1851640''>from</span> <span m=''1851820''>beginning</span>
  <span m=''1852170''>to</span> <span m=''1852280''>middle</span> <span m=''1852920''>and</span>
  <span m=''1853070''>then</span> <span m=''1853250''>from</span> <span m=''1853550''>the</span>
  <span m=''1853790''>beginning</span> <span m=''1854220''>plus</span> <span m=''1854520''>1</span>
  <span m=''1858920''>or</span> <span m=''1859110''>the</span> <span m=''1859200''>middle,</span>
  <span m=''1859490''>whichever</span> <span m=''1860010''>is</span> <span m=''1860170''>greater</span>
  <span m=''1860870''>to</span> <span m=''1860980''>the</span> <span m=''1861150''>end.</span>
  <span m=''1862200''>And</span> <span m=''1862370''>then</span> <span m=''1862550''>we</span>
  <span m=''1863760''>sync.</span> </p><p><span m=''1864260''>So what</span> <span
  m=''1864410''>we''re</span> <span m=''1864550''>doing</span> <span m=''1864850''>is</span>
  <span m=''1864980''>quick</span> <span m=''1865220''>sort</span> <span m=''1865550''>where</span>
  <span m=''1865720''>we''re</span> <span m=''1866410''>spawning</span> <span m=''1866990''>off</span>
  <span m=''1867350''>the</span> <span m=''1867480''>two</span> <span m=''1867770''>sub</span>
  <span m=''1868170''>problems</span> <span m=''1869730''>to</span> <span m=''1869880''>be</span>
  <span m=''1870020''>solved</span> <span m=''1870400''>in</span> <span m=''1870500''>parallel</span>
  <span m=''1871230''>recursively.</span> <span m=''1871940''>So</span> <span m=''1872120''>they''re</span>
  <span m=''1872320''>going</span> <span m=''1872440''>to</span> <span m=''1872530''>execute</span>
  <span m=''1873010''>in</span> <span m=''1873150''>parallel</span> <span m=''1873980''>and</span>
  <span m=''1874140''>they''re</span> <span m=''1874280''>going</span> <span m=''1874380''>to</span>
  <span m=''1874430''>execute</span> <span m=''1874830''>in</span> <span m=''1874910''>parallel</span>
  <span m=''1875360''>and</span> <span m=''1875470''>so</span> <span m=''1875630''>forth.</span>
  <span m=''1877380''>So</span> <span m=''1877750''>a</span> <span m=''1877900''>fairly</span>
  <span m=''1878310''>natural</span> <span m=''1878770''>thing</span> <span m=''1879020''>to</span>
  <span m=''1879150''>divide,</span> <span m=''1879830''>to</span> <span m=''1879940''>do</span>
  <span m=''1880080''>divide</span> <span m=''1880400''>and</span> <span m=''1880480''>conquer</span>
  <span m=''1880880''>on</span> <span m=''1880990''>quick</span> <span m=''1881230''>sort</span>
  <span m=''1882320''>because</span> <span m=''1882670''>the</span> <span m=''1882760''>two</span>
  <span m=''1882960''>some</span> <span m=''1883210''>problems</span> <span m=''1883580''>can</span>
  <span m=''1883690''>be</span> <span m=''1883810''>operated</span> <span m=''1884390''>on</span>
  <span m=''1884570''>independently.</span> <span m=''1885580''>We</span> <span m=''1885700''>just</span>
  <span m=''1885860''>sort</span> <span m=''1886170''>them</span> <span m=''1886640''>recursively.</span>
  <span m=''1887830''>But</span> <span m=''1888060''>we</span> <span m=''1888140''>can</span>
  <span m=''1888230''>sort</span> <span m=''1888410''>them</span> <span m=''1888590''>in</span>
  <span m=''1888710''>parallel.</span> <span m=''1890330''>OK,</span> <span m=''1891010''>so</span>
  <span m=''1891280''>suppose</span> <span m=''1891870''>that</span> <span m=''1892000''>we</span>
  <span m=''1892170''>are</span> <span m=''1892260''>sorting</span> <span m=''1892700''>100,000</span>
  <span m=''1893490''>numbers.</span> <span m=''1894010''>How</span> <span m=''1894150''>much</span>
  <span m=''1894360''>parallelism</span> <span m=''1894970''>do</span> <span m=''1895050''>you</span>
  <span m=''1895110''>think</span> <span m=''1895350''>is</span> <span m=''1895490''>in</span>
  <span m=''1895610''>this</span> <span m=''1895780''>code?</span> <span m=''1906770''>So</span>
  <span m=''1906930''>remember</span> <span m=''1907240''>that</span> <span m=''1907350''>we''re</span>
  <span m=''1907920''>getting</span> <span m=''1908280''>this</span> <span m=''1908480''>recursive</span>
  <span m=''1909000''>stuff</span> <span m=''1909650''>done.</span> <span m=''1910850''>How</span>
  <span m=''1910960''>many</span> <span m=''1911150''>people</span> <span m=''1911560''>think--</span>
  <span m=''1913854''>well,</span> <span m=''1914740''>it''s</span> <span m=''1914890''>not</span>
  <span m=''1915060''>going</span> <span m=''1915150''>to</span> <span m=''1915190''>be</span>
  <span m=''1915300''>more</span> <span m=''1915540''>than</span> <span m=''1915670''>100,000,</span>
  <span m=''1916460''>I</span> <span m=''1916510''>promise</span> <span m=''1916910''>you.</span>
  <span m=''1917090''>So</span> <span m=''1917260''>how</span> <span m=''1917380''>many</span>
  <span m=''1917550''>people</span> <span m=''1917860''>think</span> <span m=''1918340''>more</span>
  <span m=''1918590''>than</span> <span m=''1918730''>a</span> <span m=''1918770''>million</span>
  <span m=''1919110''>parallels?</span> <span m=''1920500''>Raise</span> <span m=''1920640''>your</span>
  <span m=''1920750''>hand,</span> <span m=''1921020''>more</span> <span m=''1921150''>than</span>
  <span m=''1921290''>a</span> <span m=''1921310''>million?</span> <span m=''1922570''>And</span>
  <span m=''1922770''>how</span> <span m=''1922890''>many</span> <span m=''1923080''>people</span>
  <span m=''1923410''>think</span> <span m=''1924320''>more</span> <span m=''1924880''>than</span>
  <span m=''1925160''>100,000?</span> <span m=''1929370''>And</span> <span m=''1929500''>how</span>
  <span m=''1929630''>many</span> <span m=''1929810''>people</span> <span m=''1930120''>think</span>
  <span m=''1930370''>more</span> <span m=''1930550''>than</span> <span m=''1930700''>10,000?</span>
  <span m=''1933470''>OK,</span> <span m=''1933700''>between</span> <span m=''1934280''>the</span>
  <span m=''1934400''>two.</span> <span m=''1937380''>More</span> <span m=''1937550''>than</span>
  <span m=''1940510''>1,000?</span> <span m=''1941050''>OK,</span> <span m=''1941660''>how</span>
  <span m=''1941800''>about</span> <span m=''1941980''>more</span> <span m=''1942150''>than</span>
  <span m=''1942670''>100?</span> <span m=''1942990''>100 to</span> <span m=''1943070''>1,000?</span>
  <span m=''1945520''>How</span> <span m=''1945610''>about</span> <span m=''1945870''>10</span>
  <span m=''1946130''>to</span> <span m=''1946290''>100?</span> <span m=''1949440''>How</span>
  <span m=''1949620''>about</span> <span m=''1949790''>between</span> <span m=''1950140''>1</span>
  <span m=''1950340''>and</span> <span m=''1950450''>10?</span> </p><p><span m=''1954380''>So</span>
  <span m=''1954880''>a</span> <span m=''1954940''>lot</span> <span m=''1955140''>of</span>
  <span m=''1955190''>people</span> <span m=''1955420''>think</span> <span m=''1955600''>between</span>
  <span m=''1955920''>1 and 10.</span> <span m=''1956290''>Why</span> <span m=''1956460''>do</span>
  <span m=''1956510''>you</span> <span m=''1956570''>think</span> <span m=''1956830''>that</span>
  <span m=''1957060''>there''s</span> <span m=''1957700''>so</span> <span m=''1957920''>little</span>
  <span m=''1958130''>parallels</span> <span m=''1958530''>in</span> <span m=''1958760''>this?</span>
  <span m=''1962700''>You</span> <span m=''1963460''>don''t</span> <span m=''1963630''>have</span>
  <span m=''1963770''>to</span> <span m=''1963860''>justify</span> <span m=''1964120''>yourself,</span>
  <span m=''1964720''>OK.</span> <span m=''1966140''>Well</span> <span m=''1966270''>let''s</span>
  <span m=''1966450''>see</span> <span m=''1966570''>how</span> <span m=''1966670''>much</span>
  <span m=''1966890''>there</span> <span m=''1967090''>is</span> <span m=''1967280''>according</span>
  <span m=''1967680''>to</span> <span m=''1968060''>Cilkview.</span> <span m=''1969760''>So</span>
  <span m=''1969890''>here''s</span> <span m=''1970180''>the</span> <span m=''1970270''>type</span>
  <span m=''1970500''>of</span> <span m=''1970620''>output</span> <span m=''1971070''>that</span>
  <span m=''1971180''>you''ll</span> <span m=''1971360''>get.</span> <span m=''1971630''>You''ll</span>
  <span m=''1971730''>get</span> <span m=''1971870''>a</span> <span m=''1971890''>graphical</span>
  <span m=''1972550''>curve.</span> <span m=''1972820''>You''ll</span> <span m=''1972880''>also</span>
  <span m=''1973140''>get</span> <span m=''1973340''>a</span> <span m=''1974550''>textual</span>
  <span m=''1975080''>output.</span> <span m=''1975430''>But</span> <span m=''1975550''>this</span>
  <span m=''1975690''>is</span> <span m=''1975790''>sort</span> <span m=''1975880''>of</span>
  <span m=''1975980''>the</span> <span m=''1976050''>graphical</span> <span m=''1976640''>output.</span>
  <span m=''1977320''>And</span> <span m=''1977460''>this</span> <span m=''1977600''>is</span>
  <span m=''1977740''>basically</span> <span m=''1978290''>showing</span> <span m=''1978860''>what</span>
  <span m=''1979060''>the</span> <span m=''1979150''>running</span> <span m=''1979460''>time</span>
  <span m=''1979790''>here</span> <span m=''1980060''>is.</span> <span m=''1980910''>So</span>
  <span m=''1981050''>the</span> <span m=''1981110''>first</span> <span m=''1981390''>thing</span>
  <span m=''1981560''>it</span> <span m=''1981640''>shows</span> <span m=''1982000''>is</span>
  <span m=''1982350''>it</span> <span m=''1982510''>will</span> <span m=''1982690''>actually</span>
  <span m=''1983070''>run</span> <span m=''1983380''>your</span> <span m=''1983550''>program,</span>
  <span m=''1984130''>benchmark</span> <span m=''1984690''>your</span> <span m=''1984820''>program,</span>
  <span m=''1985780''>on</span> <span m=''1986160''>in</span> <span m=''1986280''>this</span>
  <span m=''1986460''>case,</span> <span m=''1986740''>up</span> <span m=''1986950''>to</span>
  <span m=''1987090''>8</span> <span m=''1987360''>course.</span> <span m=''1988800''>We</span>
  <span m=''1989150''>ran</span> <span m=''1989540''>it.</span> <span m=''1991330''>So</span>
  <span m=''1991460''>we</span> <span m=''1991510''>ran</span> <span m=''1991740''>up</span>
  <span m=''1991870''>to</span> <span m=''1991980''>8</span> <span m=''1992250''>course</span>
  <span m=''1993430''>and</span> <span m=''1994180''>give</span> <span m=''1994400''>you</span>
  <span m=''1994580''>what</span> <span m=''1994770''>your</span> <span m=''1994890''>measured</span>
  <span m=''1995260''>speedup</span> <span m=''1995740''>is.</span> </p><p><span m=''1997980''>So</span>
  <span m=''1998210''>the</span> <span m=''1998320''>second</span> <span m=''1998700''>thing</span>
  <span m=''1998930''>is</span> <span m=''1999050''>it</span> <span m=''1999160''>tells</span>
  <span m=''1999410''>you</span> <span m=''1999500''>the</span> <span m=''1999610''>parallels.</span>
  <span m=''2000140''>If you</span> <span m=''2000270''>can''t</span> <span m=''2000590''>read</span>
  <span m=''2000830''>that</span> <span m=''2001110''>it''s,</span> <span m=''2001290''>11.21.</span>
  <span m=''2004760''>So</span> <span m=''2004880''>we</span> <span m=''2004950''>get</span>
  <span m=''2005040''>about</span> <span m=''2006090''>11.</span> <span m=''2008590''>Why</span>
  <span m=''2008940''>do</span> <span m=''2009010''>you</span> <span m=''2009100''>think</span>
  <span m=''2009310''>it''s</span> <span m=''2009490''>not</span> <span m=''2009680''>higher?</span>
  <span m=''2015880''>What''s</span> <span m=''2016010''>that?</span> </p><p><span
  m=''2016740''>AUDIENCE:</span> <span m=''2017180''>It''s the log.</span> </p><p><span
  m=''2017620''>PROFESSOR: What''s</span> <span m=''2017850''>the</span> <span m=''2017930''>log?</span>
  </p><p><span m=''2019890''>AUDIENCE:</span> <span m=''2020380''>[UNINTELLIGIBLE]</span>
  </p><p><span m=''2026000''>PROFESSOR: Yeah, but</span> <span m=''2026380''>you''re</span>
  <span m=''2026490''>doing</span> <span m=''2026740''>the</span> <span m=''2026850''>two</span>
  <span m=''2027020''>things</span> <span m=''2027400''>in</span> <span m=''2027570''>parallel,</span>
  <span m=''2028010''>right?</span> <span m=''2028670''>We''ll</span> <span m=''2029040''>actually</span>
  <span m=''2029330''>analyze</span> <span m=''2029820''>this.</span> <span m=''2030060''>So</span>
  <span m=''2030550''>it</span> <span m=''2030650''>has</span> <span m=''2030840''>to
  do with the</span> <span m=''2031100''>fact</span> <span m=''2031290''>that</span>
  <span m=''2031480''>the</span> <span m=''2031580''>partition</span> <span m=''2032170''>routine</span>
  <span m=''2033280''>is</span> <span m=''2033500''>a</span> <span m=''2033550''>serial</span>
  <span m=''2034000''>piece</span> <span m=''2034230''>of</span> <span m=''2034330''>code</span>
  <span m=''2034710''>and</span> <span m=''2034840''>it''s</span> <span m=''2035010''>big.</span>
  <span m=''2036140''>So</span> <span m=''2036310''>the</span> <span m=''2036440''>initial</span>
  <span m=''2036790''>partitioning</span> <span m=''2037440''>takes you</span> <span
  m=''2037650''>100,000--</span> <span m=''2040236''>sorry, 100</span> <span m=''2040670''>million</span>
  <span m=''2041060''>steps</span> <span m=''2041630''>of</span> <span m=''2041810''>doing</span>
  <span m=''2042110''>a</span> <span m=''2042180''>partition--</span> <span m=''2044100''>before</span>
  <span m=''2044450''>you</span> <span m=''2044530''>get</span> <span m=''2044720''>to</span>
  <span m=''2044810''>do</span> <span m=''2044980''>any</span> <span m=''2045170''>parallelism</span>
  <span m=''2045650''>at</span> <span m=''2045925''>all.</span> <span m=''2046790''>And</span>
  <span m=''2046850''>we''ll</span> <span m=''2047170''>see</span> <span m=''2047330''>that
  in</span> <span m=''2047570''>just</span> <span m=''2047750''>a</span> <span m=''2047790''>minute.</span>
  <span m=''2048620''>So</span> <span m=''2048830''>it</span> <span m=''2048949''>gives</span>
  <span m=''2049120''>you</span> <span m=''2049210''>the</span> <span m=''2049290''>parallelism.</span>
  <span m=''2050699''>It</span> <span m=''2050790''>also</span> <span m=''2051080''>plots</span>
  <span m=''2051620''>this.</span> <span m=''2052260''>So</span> <span m=''2052420''>this</span>
  <span m=''2052659''>is</span> <span m=''2052909''>the</span> <span m=''2053120''>parallelism.</span>
  <span m=''2054130''>Notice that''s</span> <span m=''2054489''>the</span> <span m=''2054560''>same</span>
  <span m=''2054790''>number,</span> <span m=''2055080''>11.21</span> <span m=''2056960''>is</span>
  <span m=''2057170''>plotted</span> <span m=''2058290''>as</span> <span m=''2058600''>this</span>
  <span m=''2059030''>bound.</span> <span m=''2060260''>So</span> <span m=''2060429''>it</span>
  <span m=''2060510''>tells</span> <span m=''2060699''>you</span> <span m=''2060790''>the</span>
  <span m=''2060880''>span</span> <span m=''2061290''>law</span> <span m=''2062170''>and</span>
  <span m=''2063050''>it</span> <span m=''2063250''>tells</span> <span m=''2063540''>you</span>
  <span m=''2063710''>the</span> <span m=''2063929''>work</span> <span m=''2064239''>law.</span>
  <span m=''2064800''>This</span> <span m=''2064960''>is</span> <span m=''2065100''>the</span>
  <span m=''2065170''>linear</span> <span m=''2065500''>speedup.</span> <span m=''2065980''>If</span>
  <span m=''2066110''>you</span> <span m=''2066210''>were</span> <span m=''2066290''>having</span>
  <span m=''2066650''>linear</span> <span m=''2066949''>speedup,</span> <span m=''2067429''>this</span>
  <span m=''2067600''>is</span> <span m=''2067719''>what</span> <span m=''2067909''>your</span>
  <span m=''2068040''>program</span> <span m=''2068540''>would</span> <span m=''2069150''>give</span>
  <span m=''2069330''>you.</span> <span m=''2069960''>So it</span> <span m=''2070090''>gives</span>
  <span m=''2070380''>you</span> <span m=''2070520''>these</span> <span m=''2070790''>two</span>
  <span m=''2070949''>bounds,</span> <span m=''2072170''>the</span> <span m=''2072250''>work</span>
  <span m=''2072550''>law and</span> <span m=''2072840''>span</span> <span m=''2073250''>law</span>
  <span m=''2073949''>on</span> <span m=''2074120''>your</span> <span m=''2074250''>speedup.</span>
  <span m=''2075659''>And</span> <span m=''2075830''>then</span> <span m=''2075980''>it</span>
  <span m=''2076090''>also</span> <span m=''2077030''>computes</span> <span m=''2078580''>what''s</span>
  <span m=''2078800''>called</span> <span m=''2078969''>a</span> <span m=''2079010''>burden</span>
  <span m=''2079460''>parallelism,</span> <span m=''2080030''>estimating</span> <span
  m=''2080590''>scheduling</span> <span m=''2081120''>overheads</span> <span m=''2081610''>to</span>
  <span m=''2081710''>sort</span> <span m=''2081920''>of</span> <span m=''2081969''>give</span>
  <span m=''2082139''>you</span> <span m=''2082250''>a</span> <span m=''2082300''>lower</span>
  <span m=''2082639''>bound.</span> </p><p><span m=''2084699''>Now</span> <span m=''2084800''>that''s</span>
  <span m=''2085030''>not</span> <span m=''2085170''>to</span> <span m=''2085310''>say</span>
  <span m=''2085590''>that</span> <span m=''2085719''>your</span> <span m=''2085850''>numbers</span>
  <span m=''2086199''>can''t</span> <span m=''2086469''>fall</span> <span m=''2086790''>outside</span>
  <span m=''2087250''>this</span> <span m=''2087389''>range.</span> <span m=''2088400''>But</span>
  <span m=''2088530''>when</span> <span m=''2088679''>they</span> <span m=''2088820''>do,</span>
  <span m=''2090030''>it</span> <span m=''2090199''>will</span> <span m=''2090370''>tell</span>
  <span m=''2090639''>you</span> <span m=''2091100''>essentially</span> <span m=''2091540''>what</span>
  <span m=''2091830''>the</span> <span m=''2091989''>issues</span> <span m=''2092389''>are</span>
  <span m=''2092610''>with</span> <span m=''2092780''>your</span> <span m=''2093370''>program.</span>
  <span m=''2094639''>And</span> <span m=''2094820''>we''ll</span> <span m=''2094940''>discuss</span>
  <span m=''2095380''>how</span> <span m=''2095530''>you</span> <span m=''2095710''>diagnose</span>
  <span m=''2096330''>some</span> <span m=''2096469''>of</span> <span m=''2096730''>those</span>
  <span m=''2097470''>issues.</span> <span m=''2097850''>Actually</span> <span m=''2098100''>that''s</span>
  <span m=''2098330''>in</span> <span m=''2098480''>one</span> <span m=''2098640''>of</span>
  <span m=''2098730''>the</span> <span m=''2099470''>handouts</span> <span m=''2102950''>that</span>
  <span m=''2103580''>we''ve</span> <span m=''2103750''>provided.</span> <span m=''2105400''>I</span>
  <span m=''2105470''>think</span> <span m=''2105670''>that''s</span> <span m=''2105820''>in</span>
  <span m=''2106010''>one of</span> <span m=''2106080''>the</span> <span m=''2106150''>handouts.</span>
  <span m=''2107320''>If</span> <span m=''2107480''>not,</span> <span m=''2107680''>we''ll</span>
  <span m=''2107750''>make</span> <span m=''2107940''>sure</span> <span m=''2108080''>it''s</span>
  <span m=''2108200''>among</span> <span m=''2108430''>the</span> <span m=''2108500''>handouts.</span>
  </p><p><span m=''2110390''>So</span> <span m=''2110560''>basically,</span> <span
  m=''2110820''>this</span> <span m=''2111080''>gives</span> <span m=''2111390''>you</span>
  <span m=''2111600''>a range</span> <span m=''2112080''>for</span> <span m=''2112410''>what</span>
  <span m=''2112600''>you</span> <span m=''2112720''>can</span> <span m=''2112850''>expect.</span>
  <span m=''2113610''>So</span> <span m=''2113750''>the</span> <span m=''2113850''>important</span>
  <span m=''2114270''>thing</span> <span m=''2114430''>here</span> <span m=''2114680''>is</span>
  <span m=''2114800''>to</span> <span m=''2114890''>notice</span> <span m=''2115180''>here</span>
  <span m=''2115770''>for</span> <span m=''2115870''>example,</span> <span m=''2116340''>that</span>
  <span m=''2116480''>we''re</span> <span m=''2116690''>losing</span> <span m=''2117190''>performance,</span>
  <span m=''2117950''>but</span> <span m=''2118100''>it''s</span> <span m=''2118270''>not</span>
  <span m=''2118750''>due</span> <span m=''2119710''>to</span> <span m=''2119920''>the</span>
  <span m=''2120200''>parallelism,</span> <span m=''2121570''>to</span> <span m=''2121690''>the</span>
  <span m=''2121780''>work</span> <span m=''2122110''>law.</span> <span m=''2124450''>Basically,</span>
  <span m=''2124920''>in</span> <span m=''2125010''>some</span> <span m=''2125230''>sense,</span>
  <span m=''2125460''>what''s</span> <span m=''2125640''>happening</span> <span m=''2126100''>is</span>
  <span m=''2127840''>we</span> <span m=''2128040''>are</span> <span m=''2128230''>losing</span>
  <span m=''2128510''>it</span> <span m=''2128630''>because</span> <span m=''2128920''>the</span>
  <span m=''2129000''>Span</span> <span m=''2129440''>Law</span> <span m=''2129630''>because</span>
  <span m=''2129850''>we''re</span> <span m=''2129970''>starting</span> <span m=''2130290''>to</span>
  <span m=''2130380''>approach</span> <span m=''2130830''>the</span> <span m=''2130940''>point</span>
  <span m=''2131600''>where</span> <span m=''2131830''>the</span> <span m=''2131940''>span</span>
  <span m=''2132380''>is</span> <span m=''2132520''>going</span> <span m=''2132600''>to</span>
  <span m=''2134360''>be</span> <span m=''2134500''>the</span> <span m=''2134640''>issue.</span>
  <span m=''2135530''>So</span> <span m=''2135670''>we''ll</span> <span m=''2135760''>talk</span>
  <span m=''2136040''>more</span> <span m=''2136250''>about</span> <span m=''2136550''>this.</span>
  <span m=''2136740''>So</span> <span m=''2137150''>the</span> <span m=''2137240''>main</span>
  <span m=''2137470''>thing</span> <span m=''2137690''>is</span> <span m=''2137820''>you</span>
  <span m=''2137940''>have</span> <span m=''2138060''>a</span> <span m=''2138150''>tool</span>
  <span m=''2138840''>that</span> <span m=''2139020''>can</span> <span m=''2139160''>tell</span>
  <span m=''2139380''>you</span> <span m=''2139550''>the</span> <span m=''2139660''>work</span>
  <span m=''2139910''>and</span> <span m=''2140020''>span</span> <span m=''2140970''>and</span>
  <span m=''2141110''>so</span> <span m=''2141210''>that</span> <span m=''2141340''>you</span>
  <span m=''2141490''>can</span> <span m=''2141640''>analyze</span> <span m=''2142500''>your</span>
  <span m=''2142740''>own</span> <span m=''2142890''>programs</span> <span m=''2143550''>to</span>
  <span m=''2143670''>understand</span> <span m=''2145070''>are</span> <span m=''2145250''>you</span>
  <span m=''2145410''>bounded</span> <span m=''2145900''>by</span> <span m=''2146140''>parallelism,</span>
  <span m=''2146800''>for</span> <span m=''2146920''>example,</span> <span m=''2147340''>in</span>
  <span m=''2147420''>particular,</span> <span m=''2150330''>in</span> <span m=''2150470''>the</span>
  <span m=''2150560''>code that</span> <span m=''2150810''>you''ve</span> <span m=''2151050''>written.</span>
  </p><p><span m=''2153040''>OK</span> <span m=''2153180''>let''s</span> <span m=''2153470''>do</span>
  <span m=''2153660''>a</span> <span m=''2154640''>theoretical</span> <span m=''2155280''>analysis</span>
  <span m=''2155860''>of</span> <span m=''2155940''>this</span> <span m=''2156120''>to</span>
  <span m=''2156210''>understand</span> <span m=''2156680''>why</span> <span m=''2156970''>that</span>
  <span m=''2157220''>number</span> <span m=''2157500''>is</span> <span m=''2157620''>small.</span>
  <span m=''2159590''>So</span> <span m=''2159830''>the</span> <span m=''2160130''>main</span>
  <span m=''2160260''>thing</span> <span m=''2160390''>here</span> <span m=''2160770''>is</span>
  <span m=''2160950''>that the</span> <span m=''2161320''>expected</span> <span m=''2161790''>work,
  as you</span> <span m=''2162170''>recall,</span> <span m=''2162600''>of</span> <span
  m=''2162740''>quick</span> <span m=''2162970''>sort</span> <span m=''2163300''>is</span>
  <span m=''2163510''>order</span> <span m=''2163830''>n</span> <span m=''2164010''>log
  n.</span> <span m=''2165900''>You</span> <span m=''2166030''>tend</span> <span m=''2166340''>to</span>
  <span m=''2166430''>do</span> <span m=''2166960''>order</span> <span m=''2167260''>n</span>
  <span m=''2167420''>log</span> <span m=''2167675''>n</span> <span m=''2167930''>work,</span>
  <span m=''2168650''>you</span> <span m=''2168760''>partition</span> <span m=''2169430''>and</span>
  <span m=''2169550''>then</span> <span m=''2169700''>you''re</span> <span m=''2169810''>solving</span>
  <span m=''2170180''>two</span> <span m=''2170350''>problems</span> <span m=''2170750''>of
  the</span> <span m=''2170850''>same</span> <span m=''2171110''>size.</span> <span
  m=''2171470''>If</span> <span m=''2171550''>you</span> <span m=''2171630''>actually</span>
  <span m=''2171850''>draw</span> <span m=''2172200''>out the</span> <span m=''2172380''>recursion</span>
  <span m=''2172780''>tree,</span> <span m=''2173490''>it''s</span> <span m=''2173690''>log</span>
  <span m=''2174060''>height</span> <span m=''2174570''>with</span> <span m=''2174730''>linear</span>
  <span m=''2175150''>amount</span> <span m=''2175390''>of</span> <span m=''2175490''>work</span>
  <span m=''2175760''>on</span> <span m=''2175870''>every</span> <span m=''2176080''>level</span>
  <span m=''2176440''>for</span> <span m=''2176600''>n</span> <span m=''2176790''>log</span>
  <span m=''2177130''>end</span> <span m=''2177330''>total</span> <span m=''2177650''>work.</span>
  </p><p><span m=''2180050''>The</span> <span m=''2180130''>expected</span> <span
  m=''2180680''>span,</span> <span m=''2181160''>however,</span> <span m=''2181880''>is</span>
  <span m=''2182100''>order</span> <span m=''2182440''>n</span> <span m=''2183580''>because</span>
  <span m=''2183880''>the</span> <span m=''2183960''>partition</span> <span m=''2184610''>routine</span>
  <span m=''2185600''>is</span> <span m=''2185790''>a</span> <span m=''2185840''>serial</span>
  <span m=''2186350''>program</span> <span m=''2187430''>that</span> <span m=''2187610''>partitions</span>
  <span m=''2188260''>up</span> <span m=''2188880''>the</span> <span m=''2188990''>thing</span>
  <span m=''2189240''>of</span> <span m=''2189310''>size</span> <span m=''2189700''>n</span>
  <span m=''2190030''>in</span> <span m=''2190200''>order</span> <span m=''2190540''>n</span>
  <span m=''2190800''>time.</span> <span m=''2192090''>So</span> <span m=''2192260''>when</span>
  <span m=''2192400''>you</span> <span m=''2192500''>compute</span> <span m=''2192910''>the</span>
  <span m=''2193000''>parallelism,</span> <span m=''2194510''>you</span> <span m=''2194640''>get</span>
  <span m=''2194840''>parallelism</span> <span m=''2195360''>of</span> <span m=''2195750''>order</span>
  <span m=''2196170''>log</span> <span m=''2196540''>n and</span> <span m=''2196930''>log</span>
  <span m=''2197290''>n</span> <span m=''2197620''>is</span> <span m=''2198230''>kind</span>
  <span m=''2198360''>of</span> <span m=''2198490''>puny</span> <span m=''2198830''>parallelism,</span>
  <span m=''2199320''>and</span> <span m=''2199570''>that''s</span> <span m=''2199780''>our</span>
  <span m=''2199890''>technical</span> <span m=''2200320''>word</span> <span m=''2200560''>for</span>
  <span m=''2201203''>it.</span> <span m=''2202380''>So</span> <span m=''2202640''>puny</span>
  <span m=''2202970''>parallelism</span> <span m=''2203510''>is</span> <span m=''2203620''>what</span>
  <span m=''2203770''>we</span> <span m=''2203870''>get</span> <span m=''2204060''>out</span>
  <span m=''2204210''>of</span> <span m=''2204280''>quick</span> <span m=''2204520''>sort.</span>
  </p><p><span m=''2208360''>So</span> <span m=''2209030''>it</span> <span m=''2209300''>turns</span>
  <span m=''2209580''>out</span> <span m=''2209750''>there</span> <span m=''2209840''>are</span>
  <span m=''2209870''>lots</span> <span m=''2210210''>of</span> <span m=''2210310''>things</span>
  <span m=''2210560''>that</span> <span m=''2210670''>you</span> <span m=''2210790''>can</span>
  <span m=''2210940''>analyze.</span> <span m=''2211630''>Here''s</span> <span m=''2211790''>just</span>
  <span m=''2212050''>a</span> <span m=''2212160''>selection</span> <span m=''2212850''>of</span>
  <span m=''2213530''>some</span> <span m=''2213830''>of</span> <span m=''2213890''>the</span>
  <span m=''2214430''>interesting</span> <span m=''2214910''>practical</span> <span
  m=''2215490''>algorithms</span> <span m=''2216130''>and</span> <span m=''2216330''>the</span>
  <span m=''2216410''>kinds</span> <span m=''2216900''>of</span> <span m=''2217070''>analyses</span>
  <span m=''2217770''>that</span> <span m=''2217900''>you</span> <span m=''2218050''>can</span>
  <span m=''2218200''>do</span> <span m=''2218950''>showing</span> <span m=''2219250''>that,</span>
  <span m=''2219390''>for</span> <span m=''2219470''>example,</span> <span m=''2219850''>with</span>
  <span m=''2220000''>merge</span> <span m=''2220320''>sort</span> <span m=''2220680''>you</span>
  <span m=''2220800''>can</span> <span m=''2220920''>do</span> <span m=''2221090''>it</span>
  <span m=''2221150''>with</span> <span m=''2221310''>work</span> <span m=''2221630''>n</span>
  <span m=''2221810''>log</span> <span m=''2222140''>n.</span> <span m=''2223380''>You</span>
  <span m=''2223560''>can</span> <span m=''2224580''>get</span> <span m=''2224760''>a</span>
  <span m=''2224820''>span</span> <span m=''2225360''>of</span> <span m=''2225710''>log</span>
  <span m=''2226380''>qn</span> <span m=''2227540''>and</span> <span m=''2227680''>so</span>
  <span m=''2227830''>then</span> <span m=''2228110''>the</span> <span m=''2228190''>parallelism</span>
  <span m=''2228870''>is</span> <span m=''2229010''>the</span> <span m=''2229100''>ratio</span>
  <span m=''2229540''>of</span> <span m=''2229650''>the</span> <span m=''2229750''>two.</span>
  <span m=''2232750''>In</span> <span m=''2232900''>fact,</span> <span m=''2233210''>you</span>
  <span m=''2233330''>can</span> <span m=''2233450''>actually</span> <span m=''2233730''>theoretically</span>
  <span m=''2234390''>get</span> <span m=''2234600''>log</span> <span m=''2234910''>squared</span>
  <span m=''2235400''>n</span> <span m=''2235590''>span,</span> <span m=''2236650''>but</span>
  <span m=''2237020''>that''s</span> <span m=''2237650''>not</span> <span m=''2237880''>as</span>
  <span m=''2237990''>practical</span> <span m=''2238540''>an</span> <span m=''2238640''>algorithm</span>
  <span m=''2238910''>as</span> <span m=''2239170''>the</span> <span m=''2239250''>one</span>
  <span m=''2239410''>that</span> <span m=''2239530''>gives</span> <span m=''2239700''>you</span>
  <span m=''2239830''>log</span> <span m=''2240120''>cubed</span> <span m=''2240480''>n.</span>
  <span m=''2240930''>And</span> <span m=''2241040''>you</span> <span m=''2241130''>can</span>
  <span m=''2241230''>go</span> <span m=''2241390''>through</span> <span m=''2241690''>and</span>
  <span m=''2241770''>there are a</span> <span m=''2241950''>whole</span> <span m=''2242160''>bunch</span>
  <span m=''2242410''>of</span> <span m=''2243620''>algorithms</span> <span m=''2244150''>for</span>
  <span m=''2244260''>which</span> <span m=''2244470''>you</span> <span m=''2244580''>can</span>
  <span m=''2245630''>get</span> <span m=''2247650''>very</span> <span m=''2248040''>good</span>
  <span m=''2248600''>parallelism.</span> </p><p><span m=''2249080''>So</span> <span
  m=''2249290''>all</span> <span m=''2249600''>of</span> <span m=''2249690''>these,</span>
  <span m=''2249900''>if</span> <span m=''2249990''>you</span> <span m=''2250120''>look</span>
  <span m=''2250310''>at</span> <span m=''2250390''>the</span> <span m=''2250470''>ratio</span>
  <span m=''2250900''>of</span> <span m=''2251000''>these,</span> <span m=''2251250''>the</span>
  <span m=''2251330''>parallelism</span> <span m=''2251890''>is</span> <span m=''2252040''>quite</span>
  <span m=''2252300''>high.</span> <span m=''2255510''>So</span> <span m=''2255680''>let''s</span>
  <span m=''2255930''>talk</span> <span m=''2256210''>a</span> <span m=''2256290''>little</span>
  <span m=''2256530''>bit</span> <span m=''2256730''>about</span> <span m=''2257160''>what''s</span>
  <span m=''2257430''>going</span> <span m=''2257680''>on</span> <span m=''2257900''>underneath</span>
  <span m=''2258390''>and</span> <span m=''2258450''>why</span> <span m=''2258750''>parallelism</span>
  <span m=''2259440''>is</span> <span m=''2259570''>important.</span> <span m=''2261580''>So</span>
  <span m=''2262130''>when</span> <span m=''2264010''>you</span> <span m=''2264170''>describe</span>
  <span m=''2264730''>your</span> <span m=''2264850''>program</span> <span m=''2265440''>in</span>
  <span m=''2266020''>Cilk,</span> <span m=''2267220''>you</span> <span m=''2267430''>express</span>
  <span m=''2268020''>the</span> <span m=''2268110''>potential</span> <span m=''2268780''>parallelism</span>
  <span m=''2270920''>of</span> <span m=''2270990''>your</span> <span m=''2271160''>application.</span>
  <span m=''2273810''>You</span> <span m=''2273960''>don''t</span> <span m=''2274210''>say</span>
  <span m=''2274380''>exactly</span> <span m=''2274880''>how</span> <span m=''2275060''>it''s</span>
  <span m=''2275180''>going</span> <span m=''2275250''>to</span> <span m=''2275320''>be</span>
  <span m=''2275420''>scheduled,</span> <span m=''2275940''>that''s</span> <span m=''2276360''>done</span>
  <span m=''2276840''>by</span> <span m=''2277270''>the</span> <span m=''2277820''>Cilk++</span>
  <span m=''2278710''>scheduler,</span> <span m=''2279750''>which</span> <span m=''2279950''>maps</span>
  <span m=''2280390''>the</span> <span m=''2280480''>strands</span> <span m=''2280980''>dynamically</span>
  <span m=''2281810''>onto</span> <span m=''2282400''>the</span> <span m=''2282540''>processors</span>
  <span m=''2283370''>at</span> <span m=''2283560''>run</span> <span m=''2283780''>time.</span>
  <span m=''2285450''>So</span> <span m=''2285690''>it''s</span> <span m=''2285910''>going</span>
  <span m=''2286030''>to</span> <span m=''2286090''>do</span> <span m=''2286710''>the</span>
  <span m=''2286820''>load</span> <span m=''2287130''>balancing</span> <span m=''2287415''>and</span>
  <span m=''2287700''>everything</span> <span m=''2288040''>necessary</span> <span
  m=''2289090''>to</span> <span m=''2289290''>balance</span> <span m=''2289770''>your</span>
  <span m=''2290200''>computation</span> <span m=''2290820''>off</span> <span m=''2291150''>the</span>
  <span m=''2291230''>number of</span> <span m=''2291490''>processors.</span> <span
  m=''2292710''>We</span> <span m=''2292950''>want</span> <span m=''2293120''>to</span>
  <span m=''2293160''>understand</span> <span m=''2293980''>how</span> <span m=''2294260''>that</span>
  <span m=''2294520''>process</span> <span m=''2295000''>works,</span> <span m=''2295440''>because</span>
  <span m=''2295660''>that''s</span> <span m=''2295890''>going</span> <span m=''2295990''>to</span>
  <span m=''2296030''>help</span> <span m=''2296300''>us</span> <span m=''2296430''>to</span>
  <span m=''2296530''>understand</span> <span m=''2297730''>how</span> <span m=''2297990''>it</span>
  <span m=''2298060''>is</span> <span m=''2298220''>that</span> <span m=''2298320''>we</span>
  <span m=''2298490''>can</span> <span m=''2298650''>build</span> <span m=''2298920''>codes</span>
  <span m=''2299920''>that</span> <span m=''2300130''>will</span> <span m=''2300380''>map</span>
  <span m=''2301380''>very</span> <span m=''2301620''>effectively</span> <span m=''2302300''>on</span>
  <span m=''2302550''>to</span> <span m=''2302670''>the</span> <span m=''2302760''>number</span>
  <span m=''2303070''>of</span> <span m=''2303140''>processors.</span> </p><p><span
  m=''2305000''>Now</span> <span m=''2305100''>it</span> <span m=''2305370''>turns</span>
  <span m=''2305660''>out</span> <span m=''2305920''>that</span> <span m=''2306080''>the</span>
  <span m=''2306180''>theory</span> <span m=''2306640''>of</span> <span m=''2306950''>the</span>
  <span m=''2307150''>distributed</span> <span m=''2307760''>schedulers</span> <span
  m=''2308310''>such</span> <span m=''2308600''>as</span> <span m=''2308780''>is</span>
  <span m=''2309360''>in</span> <span m=''2310070''>Cilk++</span> <span m=''2311360''>is</span>
  <span m=''2311570''>complicated.</span> <span m=''2313150''>I''ll</span> <span m=''2314230''>wave</span>
  <span m=''2314600''>my</span> <span m=''2314760''>hands</span> <span m=''2315080''>about</span>
  <span m=''2315350''>it</span> <span m=''2315480''>towards</span> <span m=''2315790''>the</span>
  <span m=''2315960''>end,</span> <span m=''2316280''>but</span> <span m=''2316430''>the</span>
  <span m=''2316550''>analysis</span> <span m=''2317170''>of</span> <span m=''2317330''>it</span>
  <span m=''2319410''>is</span> <span m=''2319750''>advanced.</span> <span m=''2320280''>You</span>
  <span m=''2320350''>have</span> <span m=''2320490''>to take</span> <span m=''2320770''>a</span>
  <span m=''2320810''>graduate</span> <span m=''2321240''>course</span> <span m=''2321560''>to</span>
  <span m=''2321660''>get</span> <span m=''2321860''>that</span> <span m=''2322070''>stuff.</span>
  <span m=''2324030''>So</span> <span m=''2324180''>instead,</span> <span m=''2324590''>we''re</span>
  <span m=''2324680''>going</span> <span m=''2324780''>to</span> <span m=''2324820''>explore</span>
  <span m=''2325260''>the</span> <span m=''2325440''>ideas</span> <span m=''2325890''>with</span>
  <span m=''2326050''>a</span> <span m=''2326560''>centralized,</span> <span m=''2327480''>much</span>
  <span m=''2327650''>simpler,</span> <span m=''2328140''>scheduler</span> <span m=''2330200''>which</span>
  <span m=''2331890''>serves</span> <span m=''2332400''>as</span> <span m=''2332540''>a</span>
  <span m=''2332600''>surrogate</span> <span m=''2333130''>for</span> <span m=''2333260''>understanding</span>
  <span m=''2333950''>what''s</span> <span m=''2334180''>going</span> <span m=''2334460''>on.</span>
  </p><p><span m=''2338010''>So</span> <span m=''2338210''>the</span> <span m=''2338310''>basic</span>
  <span m=''2338790''>idea</span> <span m=''2339980''>of</span> <span m=''2340550''>almost</span>
  <span m=''2340960''>all</span> <span m=''2341220''>scheduling</span> <span m=''2341810''>theory</span>
  <span m=''2342980''>in</span> <span m=''2343160''>this</span> <span m=''2343380''>domain</span>
  <span m=''2344220''>is</span> <span m=''2344590''>greedy</span> <span m=''2344980''>scheduling.</span>
  <span m=''2347220''>And</span> <span m=''2347380''>so</span> <span m=''2347520''>this</span>
  <span m=''2347780''>is--</span> <span m=''2347940''>by</span> <span m=''2348070''>the</span>
  <span m=''2348170''>way,</span> <span m=''2348290''>we''re</span> <span m=''2348440''>coming</span>
  <span m=''2348710''>to</span> <span m=''2348830''>the</span> <span m=''2348910''>second</span>
  <span m=''2349360''>thing</span> <span m=''2349550''>you</span> <span m=''2349710''>have</span>
  <span m=''2349860''>to</span> <span m=''2350010''>understand</span> <span m=''2350560''>really</span>
  <span m=''2350840''>well</span> <span m=''2351290''>in</span> <span m=''2351400''>order</span>
  <span m=''2351630''>to</span> <span m=''2351720''>be</span> <span m=''2351930''>able</span>
  <span m=''2352050''>to</span> <span m=''2352140''>generate</span> <span m=''2352550''>good</span>
  <span m=''2352720''>code,</span> <span m=''2353460''>the</span> <span m=''2353580''>second</span>
  <span m=''2353980''>sort</span> <span m=''2354150''>of</span> <span m=''2354230''>theoretical</span>
  <span m=''2354760''>thing--</span> <span m=''2355370''>so</span> <span m=''2355510''>the</span>
  <span m=''2355640''>idea</span> <span m=''2355930''>of</span> <span m=''2356000''>a</span>
  <span m=''2356060''>greedy</span> <span m=''2356390''>scheduler</span> <span m=''2357430''>is</span>
  <span m=''2357650''>you</span> <span m=''2357770''>want</span> <span m=''2357960''>to</span>
  <span m=''2358030''>do</span> <span m=''2358290''>as</span> <span m=''2359020''>much</span>
  <span m=''2359360''>work</span> <span m=''2359760''>as</span> <span m=''2360010''>possible</span>
  <span m=''2361570''>on</span> <span m=''2362500''>each</span> <span m=''2362750''>step.</span>
  <span m=''2364700''>So</span> <span m=''2364910''>the</span> <span m=''2365060''>idea</span>
  <span m=''2365350''>here</span> <span m=''2366340''>is</span> <span m=''2368360''>let''s</span>
  <span m=''2369940''>take</span> <span m=''2370290''>a</span> <span m=''2370380''>look,</span>
  <span m=''2370660''>for</span> <span m=''2370750''>example,</span> <span m=''2371080''>suppose</span>
  <span m=''2371490''>that</span> <span m=''2371580''>we''ve</span> <span m=''2371800''>executed</span>
  <span m=''2372490''>this</span> <span m=''2372700''>part</span> <span m=''2372980''>of</span>
  <span m=''2373060''>the</span> <span m=''2373140''>DAG</span> <span m=''2373570''>already.</span>
  <span m=''2376200''>Then</span> <span m=''2376670''>there</span> <span m=''2376800''>are</span>
  <span m=''2376850''>certain</span> <span m=''2377200''>number</span> <span m=''2377430''>of</span>
  <span m=''2377490''>strands</span> <span m=''2378030''>that are</span> <span m=''2378190''>ready</span>
  <span m=''2378680''>to</span> <span m=''2378830''>execute,</span> <span m=''2380060''>meaning</span>
  <span m=''2380420''>all</span> <span m=''2380690''>their</span> <span m=''2380810''>predecessors</span>
  <span m=''2382020''>have</span> <span m=''2382250''>exited.</span> <span m=''2382910''>How</span>
  <span m=''2383060''>many</span> <span m=''2383240''>strands</span> <span m=''2383740''>are</span>
  <span m=''2383810''>ready</span> <span m=''2384070''>to</span> <span m=''2384150''>execute</span>
  <span m=''2384670''>on</span> <span m=''2384820''>this</span> <span m=''2385200''>DAG?</span>
  <span m=''2386680''>Five,</span> <span m=''2388170''>right?</span> <span m=''2388460''>These</span>
  <span m=''2388700''>guys.</span> <span m=''2391620''>So</span> <span m=''2391770''>those</span>
  <span m=''2392020''>five</span> <span m=''2392570''>strands</span> <span m=''2393020''>are</span>
  <span m=''2393120''>ready</span> <span m=''2393430''>to</span> <span m=''2393550''>execute.</span>
  </p><p><span m=''2394560''>So</span> <span m=''2394740''>the</span> <span m=''2394890''>idea</span>
  <span m=''2395370''>is--</span> <span m=''2395830''>and</span> <span m=''2395960''>let</span>
  <span m=''2396080''>me</span> <span m=''2396180''>illustrate</span> <span m=''2396790''>for</span>
  <span m=''2398090''>p</span> <span m=''2398400''>equals</span> <span m=''2398810''>3--</span>
  <span m=''2399810''>the</span> <span m=''2399960''>idea</span> <span m=''2400350''>is</span>
  <span m=''2401340''>to</span> <span m=''2402170''>understand</span> <span m=''2402810''>the</span>
  <span m=''2402920''>execution</span> <span m=''2403560''>in</span> <span m=''2403700''>terms</span>
  <span m=''2404040''>of</span> <span m=''2404230''>two</span> <span m=''2404480''>types</span>
  <span m=''2404870''>of</span> <span m=''2404970''>steps.</span> <span m=''2406120''>So</span>
  <span m=''2406290''>in a</span> <span m=''2406380''>greed</span> <span m=''2406720''>schedule,
  you</span> <span m=''2407160''>always</span> <span m=''2407640''>do</span> <span
  m=''2407780''>as</span> <span m=''2407900''>much</span> <span m=''2408120''>as</span>
  <span m=''2408240''>possible.</span> <span m=''2408800''>So</span> <span m=''2409260''>is</span>
  <span m=''2409400''>what</span> <span m=''2409620''>would</span> <span m=''2409750''>be</span>
  <span m=''2409850''>called</span> <span m=''2410150''>a</span> <span m=''2410210''>complete</span>
  <span m=''2410750''>step</span> <span m=''2411440''>because</span> <span m=''2411830''>I</span>
  <span m=''2411920''>can</span> <span m=''2412120''>schedule</span> <span m=''2412900''>all</span>
  <span m=''2413160''>three</span> <span m=''2413940''>processors</span> <span m=''2415290''>to</span>
  <span m=''2415400''>have</span> <span m=''2415670''>some</span> <span m=''2415850''>work</span>
  <span m=''2416110''>to</span> <span m=''2416220''>do</span> <span m=''2416390''>on</span>
  <span m=''2416530''>that</span> <span m=''2416770''>step.</span> <span m=''2418600''>So</span>
  <span m=''2418780''>which</span> <span m=''2418980''>are</span> <span m=''2419060''>the</span>
  <span m=''2419140''>best</span> <span m=''2419570''>three</span> <span m=''2420560''>guys</span>
  <span m=''2421000''>to</span> <span m=''2421410''>be</span> <span m=''2421600''>able</span>
  <span m=''2421900''>to</span> <span m=''2423640''>execute?</span> <span m=''2427270''>Yes,</span>
  <span m=''2427830''>so</span> <span m=''2428410''>I''m</span> <span m=''2428460''>not
  sure what</span> <span m=''2428770''>the</span> <span m=''2428890''>best</span>
  <span m=''2429150''>three</span> <span m=''2429370''>are,</span> <span m=''2429450''>but</span>
  <span m=''2429650''>for</span> <span m=''2429760''>sure,</span> <span m=''2430100''>you</span>
  <span m=''2430190''>want</span> <span m=''2430340''>to</span> <span m=''2430380''>get</span>
  <span m=''2430600''>this</span> <span m=''2430820''>guy</span> <span m=''2431360''>and</span>
  <span m=''2431500''>this</span> <span m=''2431720''>guy,</span> <span m=''2431960''>right?</span>
  <span m=''2432560''>Maybe</span> <span m=''2432740''>that</span> <span m=''2432920''>guy''s</span>
  <span m=''2433150''>not,</span> <span m=''2433420''>but</span> <span m=''2433630''>this</span>
  <span m=''2433850''>guy,</span> <span m=''2434720''>you</span> <span m=''2434810''>definitely</span>
  <span m=''2435210''>want</span> <span m=''2435400''>to</span> <span m=''2435450''>execute.</span>
  <span m=''2438050''>And</span> <span m=''2438230''>these</span> <span m=''2438480''>guys,</span>
  <span m=''2438740''>I</span> <span m=''2438800''>guess,</span> <span m=''2439060''>OK.</span>
  <span m=''2440950''>So</span> <span m=''2441100''>in</span> <span m=''2441250''>a</span>
  <span m=''2441300''>greedy</span> <span m=''2441590''>schedule,</span> <span m=''2441980''>no,</span>
  <span m=''2442100''>you''re</span> <span m=''2442260''>not</span> <span m=''2442410''>allowed</span>
  <span m=''2442710''>to</span> <span m=''2442820''>look</span> <span m=''2443090''>to</span>
  <span m=''2443200''>see</span> <span m=''2443430''>which</span> <span m=''2443610''>ones</span>
  <span m=''2443870''>are</span> <span m=''2443890''>the</span> <span m=''2443990''>best</span>
  <span m=''2444280''>execute.</span> <span m=''2445240''>You</span> <span m=''2445340''>don''t</span>
  <span m=''2445530''>know</span> <span m=''2445650''>what</span> <span m=''2445810''>the</span>
  <span m=''2445900''>future</span> <span m=''2446380''>is,</span> <span m=''2446540''>the</span>
  <span m=''2446610''>scheduler</span> <span m=''2447070''>isn''t</span> <span m=''2447310''>going</span>
  <span m=''2447430''>to</span> <span m=''2447490''>know</span> <span m=''2447650''>what</span>
  <span m=''2447780''>the</span> <span m=''2447860''>future</span> <span m=''2448280''>is</span>
  <span m=''2448800''>so</span> <span m=''2448930''>it</span> <span m=''2449000''>just</span>
  <span m=''2449270''>executes</span> <span m=''2449940''>any</span> <span m=''2451350''>p</span>
  <span m=''2453990''>course.</span> <span m=''2462630''>You</span> <span m=''2462770''>just</span>
  <span m=''2462960''>execute</span> <span m=''2463460''>any</span> <span m=''2463810''>p</span>
  <span m=''2463960''>course.</span> <span m=''2464300''>In</span> <span m=''2464360''>this</span>
  <span m=''2464490''>case,</span> <span m=''2464720''>I</span> <span m=''2464830''>executed</span>
  <span m=''2465340''>the</span> <span m=''2465740''>p</span> <span m=''2466240''>strand.</span>
  <span m=''2467830''>In</span> <span m=''2468110''>this</span> <span m=''2468260''>case,</span>
  <span m=''2468470''>I</span> <span m=''2468550''>executed</span> <span m=''2469040''>these</span>
  <span m=''2469410''>three</span> <span m=''2469640''>guys</span> <span m=''2471080''>even</span>
  <span m=''2471350''>though</span> <span m=''2471500''>they</span> <span m=''2471610''>weren''t</span>
  <span m=''2471820''>necessarily</span> <span m=''2472320''>the</span> <span m=''2472410''>best.</span>
  <span m=''2472910''>And</span> <span m=''2473140''>in a</span> <span m=''2473190''>greedy</span>
  <span m=''2473490''>scheduler,</span> <span m=''2474790''>it</span> <span m=''2474910''>doesn''t</span>
  <span m=''2475210''>look</span> <span m=''2475570''>to</span> <span m=''2475680''>see</span>
  <span m=''2476160''>what''s</span> <span m=''2476490''>the</span> <span m=''2476580''>best</span>
  <span m=''2476910''>one</span> <span m=''2477050''>to</span> <span m=''2477840''>execute,</span>
  <span m=''2478810''>it just executes</span> <span m=''2480100''>as</span> <span
  m=''2480260''>many</span> <span m=''2480500''>as</span> <span m=''2480590''>it</span>
  <span m=''2480700''>can</span> <span m=''2480950''>this</span> <span m=''2481100''>case.</span>
  <span m=''2481300''>In</span> <span m=''2481440''>this case, it''s</span> <span
  m=''2481820''>p.</span> </p><p><span m=''2482340''>Now</span> <span m=''2482610''>we</span>
  <span m=''2482730''>have</span> <span m=''2482910''>what''s</span> <span m=''2483150''>called</span>
  <span m=''2483410''>an</span> <span m=''2483540''>incomplete</span> <span m=''2484210''>step.</span>
  <span m=''2484570''>Notice</span> <span m=''2484910''>nothing</span> <span m=''2485260''>got</span>
  <span m=''2485470''>enabled.</span> <span m=''2485960''>That</span> <span m=''2486160''>was</span>
  <span m=''2486360''>sort</span> <span m=''2486620''>of</span> <span m=''2486710''>too</span>
  <span m=''2486840''>bad.</span> <span m=''2488300''>So</span> <span m=''2488450''>there''s</span>
  <span m=''2488620''>only</span> <span m=''2488850''>two</span> <span m=''2489050''>guys</span>
  <span m=''2489370''>that are</span> <span m=''2489510''>ready</span> <span m=''2489790''>to</span>
  <span m=''2489860''>go.</span> <span m=''2490150''>What</span> <span m=''2490290''>do</span>
  <span m=''2490330''>you</span> <span m=''2490410''>think</span> <span m=''2490580''>happens</span>
  <span m=''2492110''>if</span> <span m=''2492320''>I</span> <span m=''2492440''>have</span>
  <span m=''2493580''>an</span> <span m=''2493730''>incomplete</span> <span m=''2494310''>step,</span>
  <span m=''2494630''>namely</span> <span m=''2495030''>p</span> <span m=''2495310''>strands</span>
  <span m=''2495780''>are</span> <span m=''2495870''>ready,</span> <span m=''2496450''>fewer</span>
  <span m=''2496690''>than</span> <span m=''2496810''>p</span> <span m=''2496990''>strands</span>
  <span m=''2497650''>are</span> <span m=''2497770''>ready?</span> <span m=''2499140''>I</span>
  <span m=''2499240''>just</span> <span m=''2499380''>to</span> <span m=''2499470''>execute</span>
  <span m=''2499930''>all of them,</span> <span m=''2501190''>as</span> <span m=''2501400''>many</span>
  <span m=''2501660''>as</span> <span m=''2501770''>I</span> <span m=''2501850''>can.</span>
  <span m=''2502390''>Run</span> <span m=''2502520''>all</span> <span m=''2502810''>of
  them.</span> </p><p><span m=''2503820''>So</span> <span m=''2503990''>that''s</span>
  <span m=''2504200''>what</span> <span m=''2504320''>a</span> <span m=''2504360''>greedy</span>
  <span m=''2504670''>scheduler</span> <span m=''2505150''>does.</span> <span m=''2505500''>Just</span>
  <span m=''2505750''>at</span> <span m=''2505830''>every</span> <span m=''2506090''>step,</span>
  <span m=''2506760''>it</span> <span m=''2506840''>executes</span> <span m=''2507350''>as</span>
  <span m=''2507470''>many</span> <span m=''2507800''>as</span> <span m=''2507910''>it</span>
  <span m=''2508040''>can</span> <span m=''2509680''>and</span> <span m=''2510090''>we</span>
  <span m=''2510330''>can</span> <span m=''2510520''>classify</span> <span m=''2511290''>the</span>
  <span m=''2511410''>steps</span> <span m=''2512460''>as</span> <span m=''2512800''>ones</span>
  <span m=''2513220''>which</span> <span m=''2513500''>are</span> <span m=''2513740''>complete,</span>
  <span m=''2514350''>meaning</span> <span m=''2514620''>we</span> <span m=''2514750''>used</span>
  <span m=''2515110''>all</span> <span m=''2515380''>our</span> <span m=''2515540''>processors</span>
  <span m=''2516640''>versus</span> <span m=''2517070''>incomplete,</span> <span m=''2517930''>meaning</span>
  <span m=''2518210''>we</span> <span m=''2518360''>only</span> <span m=''2518580''>used</span>
  <span m=''2518880''>a</span> <span m=''2518990''>subset</span> <span m=''2519510''>of</span>
  <span m=''2519600''>our</span> <span m=''2519750''>processors</span> <span m=''2520480''>in</span>
  <span m=''2520680''>scheduling</span> <span m=''2521200''>it.</span> <span m=''2523540''>So</span>
  <span m=''2523680''>that''s</span> <span m=''2523860''>what</span> <span m=''2523970''>a</span>
  <span m=''2524010''>greedy</span> <span m=''2524330''>scheduler</span> <span m=''2524780''>does.</span>
  </p><p><span m=''2525060''>Now</span> <span m=''2525350''>the</span> <span m=''2525490''>important</span>
  <span m=''2526000''>thing,</span> <span m=''2528180''>which</span> <span m=''2528540''>is</span>
  <span m=''2529320''>the</span> <span m=''2529440''>analysis</span> <span m=''2530070''>of</span>
  <span m=''2530180''>this</span> <span m=''2530390''>program.</span> <span m=''2531430''>And</span>
  <span m=''2531590''>this</span> <span m=''2531780''>is,</span> <span m=''2531960''>by</span>
  <span m=''2532100''>the</span> <span m=''2532220''>way,</span> <span m=''2532350''>the</span>
  <span m=''2532690''>single</span> <span m=''2533050''>most</span> <span m=''2533310''>important</span>
  <span m=''2533730''>thing</span> <span m=''2533900''>in</span> <span m=''2533970''>scheduling</span>
  <span m=''2534460''>theory</span> <span m=''2535170''>but</span> <span m=''2535390''>you''re</span>
  <span m=''2535540''>going</span> <span m=''2535670''>to</span> <span m=''2535770''>ever</span>
  <span m=''2536000''>learn</span> <span m=''2538160''>is</span> <span m=''2538370''>this</span>
  <span m=''2538600''>particular</span> <span m=''2539060''>theory.</span> <span m=''2539520''>It</span>
  <span m=''2539840''>goes</span> <span m=''2540040''>all</span> <span m=''2540150''>the</span>
  <span m=''2540260''>way</span> <span m=''2540450''>back</span> <span m=''2540770''>to</span>
  <span m=''2540890''>1968</span> <span m=''2543460''>and</span> <span m=''2544420''>what</span>
  <span m=''2544660''>it</span> <span m=''2544760''>basically</span> <span m=''2545290''>says</span>
  <span m=''2545790''>it</span> <span m=''2545880''>is</span> <span m=''2547020''>any</span>
  <span m=''2547280''>greedy</span> <span m=''2547660''>scheduler</span> <span m=''2548860''>achieves</span>
  <span m=''2551910''>a bound</span> <span m=''2552520''>of</span> <span m=''2552850''>T1</span>
  <span m=''2553050''>over</span> <span m=''2553290''>p</span> <span m=''2553570''>plus</span>
  <span m=''2554020''>T</span> <span m=''2554230''>infinity.</span> <span m=''2556160''>So</span>
  <span m=''2556320''>why</span> <span m=''2556590''>is</span> <span m=''2556710''>that</span>
  <span m=''2556920''>an</span> <span m=''2557080''>interesting</span> <span m=''2557840''>upper</span>
  <span m=''2558110''>bound?</span> <span m=''2560590''>Yeah?</span> </p><p><span
  m=''2562034''>AUDIENCE:</span> <span m=''2562531''>That</span> <span m=''2563028''>says</span>
  <span m=''2563525''>that</span> <span m=''2564022''>it''s</span> <span m=''2564519''>got
  the refinement</span> <span m=''2565016''>of</span> <span m=''2565513''>what you
  said before,</span> <span m=''2566010''>even</span> <span m=''2566507''>if</span>
  <span m=''2567004''>you</span> <span m=''2567501''>add</span> <span m=''2567998''>as</span>
  <span m=''2568495''>many</span> <span m=''2568992''>processors</span> <span m=''2569489''>as
  you can,</span> <span m=''2570000''>basically</span> <span m=''2570470''>you''re</span>
  <span m=''2570940''>bounded</span> <span m=''2571210''>by T infinity.</span> </p><p><span
  m=''2571560''>PROFESSOR:</span> <span m=''2572039''>Yeah.</span> </p><p><span m=''2572997''>AUDIENCE:</span>
  <span m=''2574913''>It''s compulsory.</span> </p><p><span m=''2578266''>PROFESSOR:</span>
  <span m=''2578750''>So basically,</span> <span m=''2579180''>each of these, this</span>
  <span m=''2579610''>term</span> <span m=''2579910''>here</span> <span m=''2580360''>is</span>
  <span m=''2580540''>the</span> <span m=''2580650''>term</span> <span m=''2581260''>in
  the</span> <span m=''2581400''>Work</span> <span m=''2581740''>Law.</span> <span
  m=''2582410''>This</span> <span m=''2582630''>is</span> <span m=''2582780''>the</span>
  <span m=''2582900''>term</span> <span m=''2583270''>in</span> <span m=''2583380''>the</span>
  <span m=''2583460''>Span</span> <span m=''2583940''>Law,</span> <span m=''2585010''>and</span>
  <span m=''2585110''>we''re</span> <span m=''2585200''>saying</span> <span m=''2585440''>you</span>
  <span m=''2585500''>can</span> <span m=''2585640''>always</span> <span m=''2586010''>achieve</span>
  <span m=''2586350''>the</span> <span m=''2586430''>sum</span> <span m=''2586890''>of</span>
  <span m=''2587010''>those</span> <span m=''2587290''>two</span> <span m=''2587450''>lower</span>
  <span m=''2587750''>bounds</span> <span m=''2588780''>as</span> <span m=''2588980''>an</span>
  <span m=''2589110''>upper</span> <span m=''2589420''>bound.</span> <span m=''2592030''>So</span>
  <span m=''2592190''>let''s</span> <span m=''2592400''>see</span> <span m=''2592540''>how</span>
  <span m=''2592730''>we</span> <span m=''2592850''>do</span> <span m=''2593030''>this</span>
  <span m=''2593460''>and</span> <span m=''2593650''>then</span> <span m=''2593820''>we''ll</span>
  <span m=''2594010''>look</span> <span m=''2594170''>at</span> <span m=''2594260''>some</span>
  <span m=''2594410''>of the</span> <span m=''2594510''>implications.</span> <span
  m=''2595620''>Question,</span> <span m=''2596330''>do you</span> <span m=''2596390''>have</span>
  <span m=''2596450''>a</span> <span m=''2596750''>question?</span> <span m=''2597534''>No?</span>
  </p><p><span m=''2599230''>So</span> <span m=''2599380''>here''s</span> <span m=''2599650''>the</span>
  <span m=''2599730''>proof</span> <span m=''2601520''>that</span> <span m=''2602150''>you</span>
  <span m=''2602290''>meet</span> <span m=''2602540''>this.</span> <span m=''2602780''>So</span>
  <span m=''2603010''>that</span> <span m=''2603590''>the</span> <span m=''2604300''>proof</span>
  <span m=''2604580''>says--</span> <span m=''2604920''>and</span> <span m=''2605270''>I''ll</span>
  <span m=''2605430''>illustrate</span> <span m=''2605890''>for</span> <span m=''2605990''>P</span>
  <span m=''2606130''>equals</span> <span m=''2606480''>3--</span> <span m=''2607700''>how</span>
  <span m=''2607870''>many</span> <span m=''2608050''>complete</span> <span m=''2608560''>steps</span>
  <span m=''2609040''>could</span> <span m=''2609200''>we</span> <span m=''2609520''>have?</span>
  <span m=''2611570''>So</span> <span m=''2611750''>I''ll</span> <span m=''2611830''>argue</span>
  <span m=''2612320''>that</span> <span m=''2612510''>the</span> <span m=''2612590''>number
  of</span> <span m=''2612920''>complete</span> <span m=''2613370''>steps</span> <span
  m=''2613720''>is</span> <span m=''2613840''>at</span> <span m=''2613960''>most</span>
  <span m=''2614590''>T1</span> <span m=''2614790''>over</span> <span m=''2615070''>p.</span>
  <span m=''2617140''>Why</span> <span m=''2617440''>is</span> <span m=''2617590''>that?</span>
  <span m=''2618610''>Every</span> <span m=''2618940''>complete</span> <span m=''2619420''>step</span>
  <span m=''2619840''>performs</span> <span m=''2620510''>p</span> <span m=''2620880''>work.</span>
  <span m=''2623240''>So</span> <span m=''2623380''>if</span> <span m=''2623450''>I</span>
  <span m=''2623560''>had</span> <span m=''2623700''>more</span> <span m=''2624460''>complete</span>
  <span m=''2624840''>steps</span> <span m=''2625210''>than</span> <span m=''2625560''>T1</span>
  <span m=''2625760''>over</span> <span m=''2626382''>p,</span> <span m=''2627530''>I''d</span>
  <span m=''2627810''>be</span> <span m=''2627970''>doing</span> <span m=''2628260''>more</span>
  <span m=''2628480''>than</span> <span m=''2628860''>T1</span> <span m=''2629090''>work.</span>
  <span m=''2631280''>But</span> <span m=''2631420''>I</span> <span m=''2631470''>only</span>
  <span m=''2631680''>have</span> <span m=''2632070''>T1</span> <span m=''2632280''>work</span>
  <span m=''2632520''>to</span> <span m=''2632620''>do.</span> <span m=''2635120''>OK,</span>
  <span m=''2635440''>so</span> <span m=''2635660''>the</span> <span m=''2635770''>maximum</span>
  <span m=''2636310''>number</span> <span m=''2636680''>of</span> <span m=''2636900''>complete</span>
  <span m=''2637300''>steps</span> <span m=''2637610''>I</span> <span m=''2637690''>could</span>
  <span m=''2637870''>have</span> <span m=''2638120''>is</span> <span m=''2638220''>at</span>
  <span m=''2638320''>most</span> <span m=''2638750''>T1</span> <span m=''2638950''>over</span>
  <span m=''2639210''>p.</span> <span m=''2639470''>Do</span> <span m=''2639980''>people</span>
  <span m=''2640260''>follow</span> <span m=''2640550''>that?</span> </p><p><span
  m=''2643200''>So</span> <span m=''2643370''>the</span> <span m=''2643500''>trickier</span>
  <span m=''2644060''>part</span> <span m=''2644350''>of</span> <span m=''2644400''>the</span>
  <span m=''2644480''>proof,</span> <span m=''2644880''>which</span> <span m=''2645050''>is</span>
  <span m=''2645160''>not</span> <span m=''2645520''>all</span> <span m=''2645720''>that</span>
  <span m=''2645960''>tricky</span> <span m=''2646280''>but</span> <span m=''2646440''>it''s</span>
  <span m=''2646550''>a</span> <span m=''2646600''>little</span> <span m=''2646750''>bit</span>
  <span m=''2646900''>trickier,</span> <span m=''2647300''>is</span> <span m=''2647520''>the</span>
  <span m=''2647660''>other</span> <span m=''2647860''>side.</span> <span m=''2648630''>How</span>
  <span m=''2648890''>many</span> <span m=''2649180''>incomplete</span> <span m=''2649830''>steps</span>
  <span m=''2650220''>could</span> <span m=''2650390''>I</span> <span m=''2650650''>have?</span>
  <span m=''2652120''>So</span> <span m=''2652370''>we</span> <span m=''2653060''>execute</span>
  <span m=''2653490''>those.</span> <span m=''2654420''>So</span> <span m=''2654580''>I</span>
  <span m=''2654630''>claim</span> <span m=''2654990''>that</span> <span m=''2655140''>the</span>
  <span m=''2655210''>number</span> <span m=''2655500''>of</span> <span m=''2655610''>incomplete</span>
  <span m=''2656280''>steps</span> <span m=''2657190''>is</span> <span m=''2657580''>bounded</span>
  <span m=''2658020''>by</span> <span m=''2659000''>the</span> <span m=''2659110''>critical</span>
  <span m=''2659510''>path</span> <span m=''2659880''>length,</span> <span m=''2660280''>by</span>
  <span m=''2660460''>the</span> <span m=''2660570''>span.</span> <span m=''2662610''>Why</span>
  <span m=''2662940''>is</span> <span m=''2663110''>that?</span> <span m=''2664440''>Well</span>
  <span m=''2664690''>let''s</span> <span m=''2664950''>take</span> <span m=''2665190''>a</span>
  <span m=''2665260''>look</span> <span m=''2665570''>at</span> <span m=''2665670''>the</span>
  <span m=''2665760''>part</span> <span m=''2666130''>of</span> <span m=''2666320''>DAG</span>
  <span m=''2666730''>that</span> <span m=''2666860''>has</span> <span m=''2667050''>yet</span>
  <span m=''2667430''>to</span> <span m=''2667520''>be</span> <span m=''2667710''>executed.</span>
  <span m=''2669290''>So</span> <span m=''2669470''>that</span> <span m=''2669670''>this</span>
  <span m=''2669890''>gray</span> <span m=''2670180''>part</span> <span m=''2670440''>here.</span>
  <span m=''2671230''>There''s</span> <span m=''2671450''>some</span> <span m=''2671670''>span</span>
  <span m=''2672180''>associated</span> <span m=''2672900''>with</span> <span m=''2673000''>that.</span>
  <span m=''2673270''>In</span> <span m=''2673380''>this</span> <span m=''2673560''>case,</span>
  <span m=''2673820''>it''s</span> <span m=''2673990''>this</span> <span m=''2674190''>longest</span>
  <span m=''2674610''>path.</span> <span m=''2677440''>When</span> <span m=''2677900''>I</span>
  <span m=''2678490''>execute</span> <span m=''2684250''>all</span> <span m=''2684570''>of</span>
  <span m=''2684650''>the</span> <span m=''2685360''>ready</span> <span m=''2685680''>threads</span>
  <span m=''2686010''>that are</span> <span m=''2686150''>ready</span> <span m=''2686460''>to</span>
  <span m=''2686540''>go,</span> <span m=''2687630''>I</span> <span m=''2687760''>guarantee</span>
  <span m=''2688400''>to</span> <span m=''2688650''>reduce</span> <span m=''2689800''>the</span>
  <span m=''2690070''>span</span> <span m=''2690340''>of</span> <span m=''2690450''>that</span>
  <span m=''2691810''>unexecuted</span> <span m=''2692530''>DAG</span> <span m=''2693350''>by</span>
  <span m=''2693990''>at</span> <span m=''2694130''>least</span> <span m=''2694450''>one.</span>
  <span m=''2698300''>So</span> <span m=''2698590''>as</span> <span m=''2698790''>I</span>
  <span m=''2698900''>do</span> <span m=''2699140''>here,</span> <span m=''2699690''>so</span>
  <span m=''2699850''>I</span> <span m=''2700180''>reduce</span> <span m=''2700560''>it</span>
  <span m=''2700690''>by</span> <span m=''2700840''>one</span> <span m=''2701170''>when</span>
  <span m=''2701350''>I</span> <span m=''2701460''>execute.</span> </p><p><span m=''2702780''>So</span>
  <span m=''2703040''>if</span> <span m=''2703240''>I</span> <span m=''2703400''>have</span>
  <span m=''2703560''>a</span> <span m=''2703730''>complete</span> <span m=''2704160''>step,</span>
  <span m=''2704440''>I</span> <span m=''2704590''>don''t</span> <span m=''2704740''>guaranteed</span>
  <span m=''2705240''>to</span> <span m=''2705310''>reduce</span> <span m=''2707022''>the</span>
  <span m=''2709400''>span</span> <span m=''2709850''>of</span> <span m=''2709920''>the</span>
  <span m=''2710060''>unexecuted</span> <span m=''2710730''>DAG,</span> <span m=''2712020''>because</span>
  <span m=''2712300''>I</span> <span m=''2712380''>may</span> <span m=''2712630''>execute</span>
  <span m=''2713200''>things</span> <span m=''2713500''>as</span> <span m=''2713640''>I</span>
  <span m=''2713700''>showed</span> <span m=''2713990''>you</span> <span m=''2714080''>in</span>
  <span m=''2714150''>this</span> <span m=''2714340''>example,</span> <span m=''2714870''>you</span>
  <span m=''2715470''>don''t</span> <span m=''2715630''>actually</span> <span m=''2715950''>advance</span>
  <span m=''2716320''>anything.</span> <span m=''2717240''>But</span> <span m=''2718080''>I</span>
  <span m=''2718220''>execute</span> <span m=''2718850''>all</span> <span m=''2719220''>the</span>
  <span m=''2719310''>ready</span> <span m=''2719630''>threads</span> <span m=''2721840''>on</span>
  <span m=''2722090''>an</span> <span m=''2722260''>incomplete</span> <span m=''2722870''>step,</span>
  <span m=''2723770''>and</span> <span m=''2723920''>that''s</span> <span m=''2724170''>going</span>
  <span m=''2724270''>to</span> <span m=''2724370''>reduce</span> <span m=''2724800''>it</span>
  <span m=''2724940''>by</span> <span m=''2725130''>one.</span> <span m=''2725490''>So</span>
  <span m=''2725610''>the</span> <span m=''2725720''>number</span> <span m=''2726060''>of</span>
  <span m=''2726190''>incomplete</span> <span m=''2726710''>steps</span> <span m=''2727030''>is</span>
  <span m=''2727140''>at</span> <span m=''2727240''>most</span> <span m=''2727600''>infinity.</span>
  <span m=''2728410''>So</span> <span m=''2728570''>the</span> <span m=''2728680''>total</span>
  <span m=''2729010''>number</span> <span m=''2729290''>of</span> <span m=''2729350''>steps</span>
  <span m=''2729730''>is</span> <span m=''2729840''>at</span> <span m=''2729950''>most</span>
  <span m=''2731570''>the</span> <span m=''2731630''>sum.</span> <span m=''2732650''>So</span>
  <span m=''2732790''>as</span> <span m=''2732910''>I</span> <span m=''2732960''>say,</span>
  <span m=''2733150''>this</span> <span m=''2733800''>proof</span> <span m=''2734120''>you</span>
  <span m=''2734250''>should</span> <span m=''2734470''>understand</span> <span m=''2735460''>in</span>
  <span m=''2735590''>your</span> <span m=''2735710''>sleep</span> <span m=''2735960''>because</span>
  <span m=''2736130''>it''s</span> <span m=''2736310''>the</span> <span m=''2736520''>most</span>
  <span m=''2736830''>important</span> <span m=''2737750''>scheduling</span> <span
  m=''2738420''>theory</span> <span m=''2739380''>proof</span> <span m=''2739900''>that</span>
  <span m=''2740030''>you''re</span> <span m=''2740150''>going</span> <span m=''2740240''>to</span>
  <span m=''2740330''>probably</span> <span m=''2740700''>see</span> <span m=''2740890''>in</span>
  <span m=''2740960''>your</span> <span m=''2741080''>lifetime.</span> <span m=''2743250''>It''s</span>
  <span m=''2743750''>very</span> <span m=''2744030''>old,</span> <span m=''2745080''>and</span>
  <span m=''2745320''>really,</span> <span m=''2745590''>very,</span> <span m=''2745940''>very</span>
  <span m=''2746220''>simple</span> <span m=''2747020''>and</span> <span m=''2747210''>yet,</span>
  <span m=''2748180''>there''s</span> <span m=''2748420''>a</span> <span m=''2748480''>huge</span>
  <span m=''2748970''>amount</span> <span m=''2749230''>of</span> <span m=''2749290''>scheduling</span>
  <span m=''2749810''>theory</span> <span m=''2750520''>if</span> <span m=''2750630''>you</span>
  <span m=''2750720''>have</span> <span m=''2750840''>a</span> <span m=''2750900''>look</span>
  <span m=''2751130''>at</span> <span m=''2751230''>scheduling</span> <span m=''2751650''>theory,</span>
  <span m=''2752640''>that</span> <span m=''2753070''>comes</span> <span m=''2753370''>out</span>
  <span m=''2753730''>of</span> <span m=''2753960''>this</span> <span m=''2754330''>just</span>
  <span m=''2754560''>making</span> <span m=''2754920''>this</span> <span m=''2755470''>same</span>
  <span m=''2755850''>problem</span> <span m=''2756330''>more</span> <span m=''2756540''>complicated</span>
  <span m=''2757320''>and</span> <span m=''2757430''>more</span> <span m=''2757720''>real</span>
  <span m=''2758080''>and</span> <span m=''2758160''>more</span> <span m=''2758360''>interesting</span>
  <span m=''2758830''>and</span> <span m=''2758930''>so</span> <span m=''2759110''>forth.</span>
  <span m=''2760340''>But</span> <span m=''2760490''>this</span> <span m=''2760650''>is</span>
  <span m=''2760770''>really</span> <span m=''2761140''>the</span> <span m=''2761330''>crux</span>
  <span m=''2761760''>of</span> <span m=''2761850''>what''s</span> <span m=''2762090''>going</span>
  <span m=''2762330''>on.</span> <span m=''2763590''>Any</span> <span m=''2763870''>questions</span>
  <span m=''2764310''>about</span> <span m=''2764550''>this</span> <span m=''2764720''>proof?</span>
  </p><p><span m=''2767510''>So</span> <span m=''2769630''>one</span> <span m=''2769880''>corollary</span>
  <span m=''2770750''>of</span> <span m=''2771110''>the</span> <span m=''2771200''>greedy</span>
  <span m=''2771500''>scheduling</span> <span m=''2772400''>algorithm</span> <span
  m=''2772990''>is</span> <span m=''2773210''>that</span> <span m=''2773370''>any</span>
  <span m=''2773640''>greedy</span> <span m=''2774040''>scheduler</span> <span m=''2774700''>achieves</span>
  <span m=''2775180''>within</span> <span m=''2775410''>a</span> <span m=''2775470''>factor</span>
  <span m=''2775960''>of</span> <span m=''2776110''>two</span> <span m=''2776530''>of</span>
  <span m=''2776650''>optimal</span> <span m=''2777240''>scheduling.</span> <span
  m=''2780280''>So</span> <span m=''2780470''>let''s</span> <span m=''2780700''>see</span>
  <span m=''2780800''>why</span> <span m=''2781040''>that</span> <span m=''2781250''>is.</span>
  <span m=''2781400''>So</span> <span m=''2781560''>it''s</span> <span m=''2781730''>guaranteed</span>
  <span m=''2782400''>as</span> <span m=''2782600''>an</span> <span m=''2782720''>upper</span>
  <span m=''2783000''>bound</span> <span m=''2783260''>to</span> <span m=''2783310''>get</span>
  <span m=''2783440''>within</span> <span m=''2783620''>a</span> <span m=''2783680''>factor</span>
  <span m=''2784070''>of</span> <span m=''2784150''>two</span> <span m=''2784370''>of</span>
  <span m=''2784480''>optimal.</span> <span m=''2786220''>So</span> <span m=''2786340''>here''s</span>
  <span m=''2786660''>the</span> <span m=''2786740''>proof.</span> <span m=''2787650''>So</span>
  <span m=''2787820''>let''s</span> <span m=''2788450''>Tp</span> <span m=''2788950''>star</span>
  <span m=''2789295''>be</span> <span m=''2789640''>the</span> <span m=''2789740''>execution</span>
  <span m=''2790320''>time</span> <span m=''2790580''>produced</span> <span m=''2791280''>by</span>
  <span m=''2791540''>the</span> <span m=''2791700''>optimal</span> <span m=''2792170''>scheduler.</span>
  <span m=''2792425''>This</span> <span m=''2792820''>is</span> <span m=''2792940''>the</span>
  <span m=''2793040''>schedule</span> <span m=''2793450''>that</span> <span m=''2793570''>knows</span>
  <span m=''2793960''>the</span> <span m=''2794070''>whole</span> <span m=''2794390''>DAG</span>
  <span m=''2794740''>in</span> <span m=''2794820''>advance</span> <span m=''2795630''>and</span>
  <span m=''2795820''>can</span> <span m=''2795970''>schedule</span> <span m=''2796420''>things</span>
  <span m=''2796740''>exactly</span> <span m=''2797310''>where</span> <span m=''2797460''>they</span>
  <span m=''2797600''>need</span> <span m=''2797800''>to</span> <span m=''2797870''>be</span>
  <span m=''2798000''>scheduled</span> <span m=''2798430''>to</span> <span m=''2798690''>minimize</span>
  <span m=''2799220''>the</span> <span m=''2799320''>total</span> <span m=''2799610''>amount</span>
  <span m=''2799820''>of</span> <span m=''2799900''>time.</span> <span m=''2800790''>Now</span>
  <span m=''2800950''>even</span> <span m=''2801270''>though</span> <span m=''2801560''>the</span>
  <span m=''2801700''>optimal</span> <span m=''2802040''>scheduler</span> <span m=''2803650''>can</span>
  <span m=''2803880''>schedule</span> <span m=''2804320''>very</span> <span m=''2804550''>officially,</span>
  <span m=''2805010''>it''s</span> <span m=''2805250''>still</span> <span m=''2805610''>bound</span>
  <span m=''2806540''>by</span> <span m=''2806700''>the</span> <span m=''2806820''>Work</span>
  <span m=''2807200''>Law</span> <span m=''2807760''>and</span> <span m=''2807910''>the</span>
  <span m=''2807980''>Span</span> <span m=''2808400''>Law.</span> <span m=''2810170''>So</span>
  <span m=''2810360''>therefore,</span> <span m=''2810850''>Tp</span> <span m=''2811230''>star</span>
  <span m=''2811700''>has</span> <span m=''2811780''>still</span> <span m=''2812140''>got</span>
  <span m=''2812280''>to</span> <span m=''2812340''>be</span> <span m=''2812470''>greater</span>
  <span m=''2812890''>than</span> <span m=''2813260''>T1</span> <span m=''2813430''>over</span>
  <span m=''2813730''>p</span> <span m=''2814600''>and</span> <span m=''2814940''>greater</span>
  <span m=''2815280''>than</span> <span m=''2815530''>T</span> <span m=''2815770''>infinity</span>
  <span m=''2816480''>by</span> <span m=''2816630''>the</span> <span m=''2816730''>Work</span>
  <span m=''2816970''>and</span> <span m=''2817070''>Span</span> <span m=''2817410''>Laws.</span>
  <span m=''2818360''>Even</span> <span m=''2818580''>though</span> <span m=''2818750''>it''s</span>
  <span m=''2818850''>optimal,</span> <span m=''2819990''>every</span> <span m=''2820380''>scheduler</span>
  <span m=''2821140''>must</span> <span m=''2821440''>obey</span> <span m=''2821730''>the</span>
  <span m=''2821850''>Work</span> <span m=''2822100''>Laws</span> <span m=''2822710''>and</span>
  <span m=''2822930''>Spam</span> <span m=''2823280''>Law.</span> </p><p><span m=''2825190''>So</span>
  <span m=''2825380''>then</span> <span m=''2825640''>we</span> <span m=''2825780''>have,</span>
  <span m=''2826790''>by</span> <span m=''2826970''>the</span> <span m=''2827070''>greedy</span>
  <span m=''2827400''>scheduling</span> <span m=''2827830''>theorem,</span> <span
  m=''2828070''>Tp</span> <span m=''2828450''>is</span> <span m=''2828590''>at</span>
  <span m=''2828680''>most</span> <span m=''2829240''>T1</span> <span m=''2829450''>over</span>
  <span m=''2829730''>p</span> <span m=''2829990''>plus</span> <span m=''2830300''>T</span>
  <span m=''2830480''>infinity.</span> <span m=''2831770''>Well</span> <span m=''2831880''>that''s</span>
  <span m=''2832120''>at</span> <span m=''2832230''>most</span> <span m=''2832630''>twice</span>
  <span m=''2833270''>the</span> <span m=''2833360''>maximum</span> <span m=''2834180''>of</span>
  <span m=''2834390''>these</span> <span m=''2834650''>two</span> <span m=''2834860''>values,</span>
  <span m=''2835660''>whichever</span> <span m=''2836060''>is</span> <span m=''2836170''>larger.</span>
  <span m=''2837180''>I''ve</span> <span m=''2837290''>just</span> <span m=''2837590''>plugged</span>
  <span m=''2837845''>in</span> <span m=''2838100''>to</span> <span m=''2838200''>get</span>
  <span m=''2838380''>the</span> <span m=''2838460''>maximum</span> <span m=''2839060''>of</span>
  <span m=''2839160''>those</span> <span m=''2839460''>two</span> <span m=''2840740''>and</span>
  <span m=''2840880''>that''s</span> <span m=''2841130''>at</span> <span m=''2841280''>most,</span>
  <span m=''2841840''>by</span> <span m=''2842300''>this</span> <span m=''2842690''>equation,</span>
  <span m=''2843590''>twice</span> <span m=''2844720''>the</span> <span m=''2844860''>optimal</span>
  <span m=''2845240''>time.</span> <span m=''2849060''>So</span> <span m=''2849640''>this</span>
  <span m=''2849840''>is</span> <span m=''2850640''>a</span> <span m=''2850940''>very</span>
  <span m=''2851270''>simple</span> <span m=''2851650''>corollary</span> <span m=''2852220''>says</span>
  <span m=''2852520''>oh,</span> <span m=''2853450''>greedy scheduling</span> <span
  m=''2854220''>is</span> <span m=''2854330''>actually</span> <span m=''2854650''>pretty</span>
  <span m=''2854900''>good.</span> <span m=''2855110''>It''s</span> <span m=''2855280''>not</span>
  <span m=''2855480''>optimal,</span> <span m=''2855830''>in</span> <span m=''2855900''>fact,</span>
  <span m=''2856910''>optimal</span> <span m=''2857400''>scheduling</span> <span m=''2857900''>is</span>
  <span m=''2858010''>mP</span> <span m=''2858310''>complete.</span> <span m=''2859200''>Very</span>
  <span m=''2859400''>hard</span> <span m=''2859650''>problem</span> <span m=''2859920''>to</span>
  <span m=''2859990''>solve.</span> <span m=''2861010''>But</span> <span m=''2861300''>getting</span>
  <span m=''2861520''>within</span> <span m=''2861770''>a</span> <span m=''2861820''>factor</span>
  <span m=''2862250''>of two,</span> <span m=''2862700''>you</span> <span m=''2862960''>just</span>
  <span m=''2863240''>do</span> <span m=''2863330''>greedy</span> <span m=''2863630''>scheduling,</span>
  <span m=''2864130''>it</span> <span m=''2864180''>works just</span> <span m=''2864450''>fine.</span>
  </p><p><span m=''2867460''>More</span> <span m=''2867700''>importantly</span> <span
  m=''2868690''>is</span> <span m=''2869410''>the</span> <span m=''2869630''>next</span>
  <span m=''2869990''>corollary,</span> <span m=''2871990''>which</span> <span m=''2872170''>has</span>
  <span m=''2872380''>to</span> <span m=''2872490''>do</span> <span m=''2872670''>is</span>
  <span m=''2872770''>when</span> <span m=''2873050''>do you</span> <span m=''2873210''>get</span>
  <span m=''2873410''>linear</span> <span m=''2873760''>speedup?</span> <span m=''2874630''>And</span>
  <span m=''2874840''>this</span> <span m=''2875010''>is,</span> <span m=''2875250''>I</span>
  <span m=''2875460''>think,</span> <span m=''2875680''>the</span> <span m=''2875770''>most</span>
  <span m=''2876050''>important</span> <span m=''2876500''>thing</span> <span m=''2876660''>to</span>
  <span m=''2876740''>get</span> <span m=''2876900''>out</span> <span m=''2877070''>of</span>
  <span m=''2877150''>this.</span> <span m=''2877770''>So</span> <span m=''2877960''>any</span>
  <span m=''2879270''>greedy</span> <span m=''2879600''>scheduler</span> <span m=''2880260''>achieves</span>
  <span m=''2880740''>near</span> <span m=''2880950''>perfect</span> <span m=''2881470''>linear</span>
  <span m=''2881820''>speedup</span> <span m=''2883020''>whenever--</span> <span m=''2884590''>what''s</span>
  <span m=''2884810''>this</span> <span m=''2885030''>thing</span> <span m=''2885190''>on</span>
  <span m=''2885300''>the</span> <span m=''2885350''>left-hand</span> <span m=''2885750''>side?</span>
  <span m=''2885970''>What''s</span> <span m=''2886120''>the</span> <span m=''2886220''>name</span>
  <span m=''2886400''>we</span> <span m=''2886500''>call</span> <span m=''2886740''>that?--</span>
  <span m=''2888940''>the</span> <span m=''2889050''>parallelism,</span> <span m=''2890100''>right?</span>
  <span m=''2890550''>That''s</span> <span m=''2890770''>the</span> <span m=''2890860''>parallelism,</span>
  <span m=''2891960''>is</span> <span m=''2892200''>much</span> <span m=''2892570''>bigger</span>
  <span m=''2893340''>than</span> <span m=''2893460''>the</span> <span m=''2893560''>number</span>
  <span m=''2893830''>of</span> <span m=''2893900''>processors</span> <span m=''2894600''>you''re</span>
  <span m=''2894700''>running</span> <span m=''2895040''>on.</span> <span m=''2896300''>So</span>
  <span m=''2896440''>if</span> <span m=''2896610''>the</span> <span m=''2896700''>number
  of</span> <span m=''2896970''>processors</span> <span m=''2897630''>are</span> <span
  m=''2897740''>running</span> <span m=''2898070''>on</span> <span m=''2898210''>is</span>
  <span m=''2898260''>smaller</span> <span m=''2899320''>than</span> <span m=''2899440''>the</span>
  <span m=''2899520''>parallelism</span> <span m=''2900310''>of</span> <span m=''2900420''>your</span>
  <span m=''2900600''>code</span> <span m=''2902050''>says</span> <span m=''2902360''>you</span>
  <span m=''2902510''>can</span> <span m=''2902670''>expect</span> <span m=''2903170''>near</span>
  <span m=''2903400''>perfect</span> <span m=''2903800''>linear</span> <span m=''2904140''>speedup.</span>
  <span m=''2906510''>OK,</span> <span m=''2906690''>so</span> <span m=''2906810''>what</span>
  <span m=''2906930''>does</span> <span m=''2907040''>that</span> <span m=''2907260''>say</span>
  <span m=''2907470''>you</span> <span m=''2907580''>want</span> <span m=''2907750''>to</span>
  <span m=''2907820''>do</span> <span m=''2908010''>in</span> <span m=''2908100''>your</span>
  <span m=''2908240''>program?</span> <span m=''2909140''>You</span> <span m=''2909300''>want</span>
  <span m=''2909450''>to</span> <span m=''2909500''>make</span> <span m=''2909730''>sure</span>
  <span m=''2909990''>you</span> <span m=''2910200''>have</span> <span m=''2910600''>ample</span>
  <span m=''2911020''>parallelism</span> <span m=''2912560''>and</span> <span m=''2912790''>then</span>
  <span m=''2913000''>the</span> <span m=''2913690''>scheduler</span> <span m=''2914750''>will</span>
  <span m=''2914930''>be</span> <span m=''2915100''>able</span> <span m=''2915300''>to</span>
  <span m=''2915370''>schedule</span> <span m=''2915940''>it</span> <span m=''2916540''>so</span>
  <span m=''2916710''>that</span> <span m=''2916870''>you</span> <span m=''2916990''>get</span>
  <span m=''2917210''>near</span> <span m=''2917390''>perfect</span> <span m=''2917890''>linear</span>
  <span m=''2918200''>speedup.</span> <span m=''2919170''>Let''s</span> <span m=''2919380''>see</span>
  <span m=''2919490''>why</span> <span m=''2919730''>that''s</span> <span m=''2920030''>true.</span>
  </p><p><span m=''2922210''>So</span> <span m=''2922750''>T1</span> <span m=''2923020''>over</span>
  <span m=''2923260''>T</span> <span m=''2923470''>infinity</span> <span m=''2924040''>is</span>
  <span m=''2924220''>much</span> <span m=''2924440''>bigger</span> <span m=''2924680''>than</span>
  <span m=''2924870''>p</span> <span m=''2925660''>is</span> <span m=''2925840''>equivalent</span>
  <span m=''2926380''>to</span> <span m=''2926470''>saying</span> <span m=''2926840''>that</span>
  <span m=''2927030''>T</span> <span m=''2927220''>infinity</span> <span m=''2927800''>is</span>
  <span m=''2927930''>much</span> <span m=''2928200''>less</span> <span m=''2928480''>than</span>
  <span m=''2928830''>T1</span> <span m=''2929030''>over</span> <span m=''2929280''>p.</span>
  <span m=''2930860''>That''s</span> <span m=''2931110''>just</span> <span m=''2931310''>algebra.</span>
  <span m=''2933960''>Well</span> <span m=''2934100''>what</span> <span m=''2934220''>does</span>
  <span m=''2934360''>that</span> <span m=''2934630''>mean?</span> <span m=''2935060''>The</span>
  <span m=''2935200''>greedy</span> <span m=''2935640''>scheduling</span> <span m=''2936180''>theorem</span>
  <span m=''2936500''>says</span> <span m=''2936750''>Tp</span> <span m=''2937150''>is</span>
  <span m=''2937280''>at</span> <span m=''2937370''>most</span> <span m=''2937840''>T1</span>
  <span m=''2938010''>over</span> <span m=''2938230''>p</span> <span m=''2938420''>plus</span>
  <span m=''2938710''>T</span> <span m=''2938890''>infinity.</span> <span m=''2939700''>We</span>
  <span m=''2939830''>just</span> <span m=''2940010''>said</span> <span m=''2940300''>that</span>
  <span m=''2940480''>if</span> <span m=''2940880''>we</span> <span m=''2941000''>have</span>
  <span m=''2941190''>this</span> <span m=''2941440''>condition,</span> <span m=''2942300''>then</span>
  <span m=''2942560''>T</span> <span m=''2942780''>infinity</span> <span m=''2943270''>is</span>
  <span m=''2943420''>very</span> <span m=''2943740''>small</span> <span m=''2944940''>compared</span>
  <span m=''2945370''>to</span> <span m=''2945670''>T1</span> <span m=''2945850''>over</span>
  <span m=''2946100''>p.</span> <span m=''2948020''>So</span> <span m=''2948210''>if
  this</span> <span m=''2948450''>is</span> <span m=''2948600''>negligible,</span>
  <span m=''2950160''>then</span> <span m=''2951010''>the</span> <span m=''2951160''>whole</span>
  <span m=''2951420''>thing</span> <span m=''2951710''>is</span> <span m=''2951830''>about</span>
  <span m=''2952350''>T1</span> <span m=''2952530''>over</span> <span m=''2952770''>p.</span>
  <span m=''2955850''>Well</span> <span m=''2957050''>that</span> <span m=''2957270''>just</span>
  <span m=''2957460''>says</span> <span m=''2957770''>that</span> <span m=''2957950''>the</span>
  <span m=''2958030''>speedup</span> <span m=''2958580''>is</span> <span m=''2958740''>about</span>
  <span m=''2959130''>p.</span> <span m=''2963320''>So</span> <span m=''2963490''>the</span>
  <span m=''2963550''>name</span> <span m=''2963790''>of</span> <span m=''2963850''>the</span>
  <span m=''2963930''>game</span> <span m=''2964430''>is</span> <span m=''2964550''>to</span>
  <span m=''2964670''>make</span> <span m=''2964890''>sure</span> <span m=''2965280''>that</span>
  <span m=''2965480''>your</span> <span m=''2966610''>span</span> <span m=''2967710''>is</span>
  <span m=''2967920''>relatively</span> <span m=''2968580''>short</span> <span m=''2969570''>compared</span>
  <span m=''2970010''>to</span> <span m=''2970180''>the</span> <span m=''2970910''>amount</span>
  <span m=''2971190''>of</span> <span m=''2971320''>work</span> <span m=''2971820''>per</span>
  <span m=''2971950''>processor</span> <span m=''2972640''>that</span> <span m=''2972780''>you''re</span>
  <span m=''2972920''>doing.</span> <span m=''2974082''>And</span> <span m=''2974780''>in</span>
  <span m=''2974960''>that</span> <span m=''2975180''>case,</span> <span m=''2975450''>you''ll</span>
  <span m=''2975580''>get</span> <span m=''2975730''>linear</span> <span m=''2976020''>speedup.</span>
  <span m=''2977510''>And</span> <span m=''2977710''>that</span> <span m=''2977840''>happens</span>
  <span m=''2978310''>when</span> <span m=''2978460''>you''ve</span> <span m=''2978680''>got</span>
  <span m=''2978880''>enough</span> <span m=''2979180''>parallelism</span> <span m=''2980050''>compared</span>
  <span m=''2980450''>to</span> <span m=''2980540''>the</span> <span m=''2980640''>number</span>
  <span m=''2980910''>processors</span> <span m=''2981540''>you''re</span> <span m=''2981640''>running</span>
  <span m=''2981900''>on.</span> <span m=''2983150''>Any</span> <span m=''2983330''>questions</span>
  <span m=''2983820''>about</span> <span m=''2984280''>this?</span> <span m=''2984460''>This
  is</span> <span m=''2987610''>like</span> <span m=''2988560''>the</span> <span m=''2988840''>most</span>
  <span m=''2989130''>important</span> <span m=''2989610''>thing</span> <span m=''2989780''>you''re</span>
  <span m=''2989920''>going</span> <span m=''2990000''>to</span> <span m=''2990090''>learn</span>
  <span m=''2990460''>about</span> <span m=''2990760''>parallel</span> <span m=''2991140''>computing.</span>
  </p><p><span m=''2997410''>Everything</span> <span m=''2997780''>else</span> <span
  m=''2997950''>we''re</span> <span m=''2998060''>going</span> <span m=''2998140''>to</span>
  <span m=''2998210''>do</span> <span m=''2998340''>is</span> <span m=''2998450''>going</span>
  <span m=''2998490''>to</span> <span m=''2998530''>be</span> <span m=''2998640''>derivatives</span>
  <span m=''2999230''>of</span> <span m=''2999330''>this,</span> <span m=''2999560''>so</span>
  <span m=''2999660''>if</span> <span m=''2999740''>you</span> <span m=''2999820''>don''t</span>
  <span m=''3000020''>understand</span> <span m=''3000560''>this,</span> <span m=''3002020''>you</span>
  <span m=''3002200''>have</span> <span m=''3002400''>a</span> <span m=''3002430''>hard</span>
  <span m=''3002690''>time</span> <span m=''3002930''>with</span> <span m=''3003040''>the</span>
  <span m=''3003180''>other</span> <span m=''3003350''>stuff.</span> <span m=''3005670''>So</span>
  <span m=''3006250''>in</span> <span m=''3006390''>some</span> <span m=''3006620''>sense,</span>
  <span m=''3006930''>it''s</span> <span m=''3007120''>deceptively</span> <span m=''3007750''>simple,</span>
  <span m=''3008140''>right?</span> <span m=''3008360''>We</span> <span m=''3008460''>just</span>
  <span m=''3008660''>have</span> <span m=''3008770''>a</span> <span m=''3008820''>few</span>
  <span m=''3009060''>variables,</span> <span m=''3009760''>T1,</span> <span m=''3010660''>Tp,</span>
  <span m=''3011430''>T</span> <span m=''3011610''>infinity,</span> <span m=''3012440''>p,</span>
  <span m=''3013570''>there''s</span> <span m=''3013730''>not</span> <span m=''3013880''>much</span>
  <span m=''3014090''>else</span> <span m=''3014300''>going</span> <span m=''3014530''>on.</span>
  <span m=''3014890''>But</span> <span m=''3015080''>there are</span> <span m=''3015230''>these</span>
  <span m=''3015480''>bounds</span> <span m=''3017110''>and</span> <span m=''3017310''>these</span>
  <span m=''3017940''>elegant</span> <span m=''3018410''>theorems</span> <span m=''3018820''>that</span>
  <span m=''3019590''>tell</span> <span m=''3019840''>us</span> <span m=''3020010''>something</span>
  <span m=''3020370''>about</span> <span m=''3021220''>how</span> <span m=''3024270''>no</span>
  <span m=''3024390''>matter</span> <span m=''3024600''>what</span> <span m=''3024820''>the</span>
  <span m=''3024900''>shape</span> <span m=''3025260''>of</span> <span m=''3025340''>the</span>
  <span m=''3025430''>DAG</span> <span m=''3025685''>is</span> <span m=''3025940''>or</span>
  <span m=''3026020''>whatever,</span> <span m=''3026480''>these</span> <span m=''3026770''>two</span>
  <span m=''3027010''>values,</span> <span m=''3027670''>the</span> <span m=''3027770''>work</span>
  <span m=''3028140''>and</span> <span m=''3028250''>the</span> <span m=''3028500''>span,</span>
  <span m=''3029200''>really</span> <span m=''3029510''>characterize</span> <span
  m=''3030570''>very</span> <span m=''3031090''>closely</span> <span m=''3033050''>where</span>
  <span m=''3033430''>it</span> <span m=''3033490''>is</span> <span m=''3033700''>that</span>
  <span m=''3033810''>you</span> <span m=''3033890''>can</span> <span m=''3034010''>expect</span>
  <span m=''3034400''>to</span> <span m=''3034460''>get</span> <span m=''3034620''>linear</span>
  <span m=''3034910''>speedup.</span> <span m=''3037440''>Any</span> <span m=''3037620''>questions?</span>
  <span m=''3039660''>OK,</span> <span m=''3043350''>good.</span> </p><p><span m=''3046500''>So</span>
  <span m=''3046700''>the</span> <span m=''3046960''>quantity</span> <span m=''3047760''>T1</span>
  <span m=''3048020''>over</span> <span m=''3048300''>PT</span> <span m=''3048750''>infinity,</span>
  <span m=''3049470''>so</span> <span m=''3049650''>what</span> <span m=''3049800''>is</span>
  <span m=''3049950''>that?</span> <span m=''3050220''>That''s</span> <span m=''3050520''>just</span>
  <span m=''3052050''>the</span> <span m=''3053030''>parallelism</span> <span m=''3053860''>divided</span>
  <span m=''3054400''>by</span> <span m=''3054600''>p.</span> <span m=''3056310''>That''s</span>
  <span m=''3056550''>called</span> <span m=''3056770''>the</span> <span m=''3056830''>parallel</span>
  <span m=''3057250''>slackness.</span> <span m=''3059410''>So</span> <span m=''3060300''>this</span>
  <span m=''3060490''>parallel</span> <span m=''3060830''>slackness</span> <span m=''3061340''>is</span>
  <span m=''3061510''>10,</span> <span m=''3061940''>means</span> <span m=''3064570''>you
  have</span> <span m=''3064770''>10</span> <span m=''3064930''>times</span> <span
  m=''3065200''>more</span> <span m=''3065700''>parallelism</span> <span m=''3066420''>than</span>
  <span m=''3066600''>processors.</span> <span m=''3068120''>So</span> <span m=''3068260''>if</span>
  <span m=''3068370''>you</span> <span m=''3068490''>have</span> <span m=''3068660''>high</span>
  <span m=''3068950''>slackness,</span> <span m=''3069670''>you</span> <span m=''3069790''>can</span>
  <span m=''3069900''>expect</span> <span m=''3070330''>to</span> <span m=''3070400''>get</span>
  <span m=''3071610''>linear</span> <span m=''3071920''>speedup.</span> <span m=''3072340''>If</span>
  <span m=''3072450''>you</span> <span m=''3072540''>have</span> <span m=''3072640''>low</span>
  <span m=''3072890''>slackness,</span> <span m=''3073510''>don''t</span> <span m=''3073710''>expect</span>
  <span m=''3074070''>to</span> <span m=''3074140''>get</span> <span m=''3074280''>linear</span>
  <span m=''3074570''>speedup.</span> <span m=''3077660''>OK.</span> <span m=''3078540''>Now</span>
  <span m=''3080350''>the</span> <span m=''3080900''>scheduler</span> <span m=''3080980''>we''re</span>
  <span m=''3081160''>using</span> <span m=''3081570''>is</span> <span m=''3081740''>not</span>
  <span m=''3082240''>a</span> <span m=''3084730''>greedy</span> <span m=''3085070''>scheduler.</span>
  <span m=''3086920''>It''s</span> <span m=''3087130''>better</span> <span m=''3089280''>in</span>
  <span m=''3089440''>many</span> <span m=''3089690''>ways,</span> <span m=''3090360''>because</span>
  <span m=''3092490''>it''s</span> <span m=''3092660''>a</span> <span m=''3092720''>distributed,</span>
  <span m=''3093530''>what''s</span> <span m=''3093760''>called</span> <span m=''3093990''>work</span>
  <span m=''3094240''>stealing</span> <span m=''3094600''>scheduler</span> <span m=''3095150''>and</span>
  <span m=''3095240''>I''ll</span> <span m=''3095310''>show</span> <span m=''3095490''>you</span>
  <span m=''3095580''>how</span> <span m=''3095830''>it</span> <span m=''3095880''>works</span>
  <span m=''3096190''>in</span> <span m=''3096250''>a</span> <span m=''3096300''>little</span>
  <span m=''3096500''>bit.</span> <span m=''3098450''>But</span> <span m=''3098600''>it''s</span>
  <span m=''3098740''>based</span> <span m=''3099080''>on</span> <span m=''3099190''>the</span>
  <span m=''3099260''>same</span> <span m=''3099580''>theory.</span> <span m=''3101070''>Even</span>
  <span m=''3101360''>though</span> <span m=''3101610''>it''s</span> <span m=''3101950''>a</span>
  <span m=''3102740''>more</span> <span m=''3103140''>complicated</span> <span m=''3103810''>scheduler</span>
  <span m=''3105110''>from</span> <span m=''3105653''>an</span> <span m=''3106340''>analytical</span>
  <span m=''3106940''>point</span> <span m=''3107180''>of</span> <span m=''3107250''>view,</span>
  <span m=''3107510''>it''s</span> <span m=''3107670''>really</span> <span m=''3107970''>based</span>
  <span m=''3108390''>on</span> <span m=''3108490''>the</span> <span m=''3108570''>same</span>
  <span m=''3108900''>theory</span> <span m=''3109300''>as</span> <span m=''3109820''>greedy</span>
  <span m=''3110100''>scheduling.</span> <span m=''3111080''>It</span> <span m=''3111350''>guarantees</span>
  <span m=''3112610''>that</span> <span m=''3114040''>the</span> <span m=''3114410''>time</span>
  <span m=''3114770''>on p</span> <span m=''3115090''>processors</span> <span m=''3115930''>is</span>
  <span m=''3116110''>at</span> <span m=''3116250''>most</span> <span m=''3116940''>T1</span>
  <span m=''3117110''>over</span> <span m=''3117380''>p</span> <span m=''3117630''>plus</span>
  <span m=''3118110''>order</span> <span m=''3118600''>T</span> <span m=''3118830''>infinity.</span>
  <span m=''3119300''>So</span> <span m=''3119480''>there''s</span> <span m=''3119660''>a</span>
  <span m=''3119710''>constant</span> <span m=''3120200''>here.</span> </p><p><span
  m=''3122310''>And</span> <span m=''3122460''>it''s</span> <span m=''3122590''>a</span>
  <span m=''3122640''>randomized</span> <span m=''3123210''>scheduler,</span> <span
  m=''3124720''>so</span> <span m=''3124970''>it</span> <span m=''3125110''>actually</span>
  <span m=''3125460''>only</span> <span m=''3125660''>guarantees</span> <span m=''3126170''>this
  in</span> <span m=''3126360''>expectation.</span> <span m=''3128120''>It</span>
  <span m=''3128240''>actually</span> <span m=''3128865''>guarantees</span> <span
  m=''3129800''>very</span> <span m=''3130020''>close</span> <span m=''3130380''>to</span>
  <span m=''3130480''>this</span> <span m=''3131010''>with</span> <span m=''3131180''>high</span>
  <span m=''3131590''>probability.</span> <span m=''3133060''>OK</span> <span m=''3133560''>so</span>
  <span m=''3136940''>the</span> <span m=''3137110''>difference</span> <span m=''3137570''>is</span>
  <span m=''3137720''>the</span> <span m=''3137800''>big</span> <span m=''3138060''>O,</span>
  <span m=''3138350''>but</span> <span m=''3138480''>if</span> <span m=''3138560''>you</span>
  <span m=''3138670''>look</span> <span m=''3138900''>at</span> <span m=''3138980''>any</span>
  <span m=''3139190''>of</span> <span m=''3139230''>the</span> <span m=''3139310''>formulas</span>
  <span m=''3139900''>that</span> <span m=''3140000''>we</span> <span m=''3140130''>did</span>
  <span m=''3140340''>with</span> <span m=''3140460''>the</span> <span m=''3140520''>greedy</span>
  <span m=''3140840''>scheduler,</span> <span m=''3141390''>the</span> <span m=''3141500''>fact</span>
  <span m=''3141830''>that</span> <span m=''3141970''>there''s</span> <span m=''3142160''>a</span>
  <span m=''3142230''>constant</span> <span m=''3142780''>there</span> <span m=''3143600''>doesn''t</span>
  <span m=''3143910''>really</span> <span m=''3144150''>matter.</span> <span m=''3144480''>You</span>
  <span m=''3144610''>get</span> <span m=''3144730''>the</span> <span m=''3144800''>same</span>
  <span m=''3145270''>effect,</span> <span m=''3145730''>it</span> <span m=''3145830''>just</span>
  <span m=''3146090''>means</span> <span m=''3146780''>that</span> <span m=''3146930''>the</span>
  <span m=''3147020''>slackness</span> <span m=''3147700''>that</span> <span m=''3147840''>you</span>
  <span m=''3148330''>need</span> <span m=''3148530''>to</span> <span m=''3148580''>get</span>
  <span m=''3148750''>linear</span> <span m=''3149020''>speedup</span> <span m=''3149780''>has</span>
  <span m=''3149980''>to</span> <span m=''3150090''>not</span> <span m=''3150290''>only</span>
  <span m=''3150580''>overcome</span> <span m=''3151210''>the</span> <span m=''3151320''>T</span>
  <span m=''3151500''>infinity,</span> <span m=''3151840''>it''s</span> <span m=''3151980''>also</span>
  <span m=''3152210''>got</span> <span m=''3152380''>to</span> <span m=''3152480''>overcome</span>
  <span m=''3152920''>the</span> <span m=''3153010''>constant</span> <span m=''3153680''>there.</span>
  <span m=''3156200''>And</span> <span m=''3156420''>empirically,</span> <span m=''3157610''>it</span>
  <span m=''3157790''>actually</span> <span m=''3158140''>turns</span> <span m=''3158430''>out</span>
  <span m=''3158620''>this</span> <span m=''3158800''>is</span> <span m=''3158940''>not</span>
  <span m=''3159420''>bad</span> <span m=''3160230''>as</span> <span m=''3160440''>an</span>
  <span m=''3160530''>estimate</span> <span m=''3161020''>using</span> <span m=''3161350''>the</span>
  <span m=''3161420''>greedy</span> <span m=''3161750''>bound.</span> <span m=''3164040''>Not
  bad</span> <span m=''3164210''>as</span> <span m=''3164380''>an</span> <span m=''3164460''>estimate,</span>
  <span m=''3165310''>so</span> <span m=''3165450''>this</span> <span m=''3165640''>is</span>
  <span m=''3165750''>sort</span> <span m=''3165860''>of</span> <span m=''3165980''>a</span>
  <span m=''3166040''>model</span> <span m=''3166550''>that</span> <span m=''3166690''>we''ll</span>
  <span m=''3166890''>take</span> <span m=''3168100''>as</span> <span m=''3168410''>if</span>
  <span m=''3168670''>we''re</span> <span m=''3168810''>doing</span> <span m=''3169130''>things</span>
  <span m=''3169450''>with</span> <span m=''3169570''>a</span> <span m=''3169610''>greedy</span>
  <span m=''3169940''>scheduler.</span> <span m=''3171130''>And</span> <span m=''3171400''>that</span>
  <span m=''3171520''>will</span> <span m=''3171700''>be</span> <span m=''3171940''>very</span>
  <span m=''3172270''>close</span> <span m=''3172750''>for</span> <span m=''3172860''>what</span>
  <span m=''3173040''>we''re</span> <span m=''3173190''>actually</span> <span m=''3173420''>going</span>
  <span m=''3173540''>to</span> <span m=''3173940''>see</span> <span m=''3174440''>in</span>
  <span m=''3175100''>practice</span> <span m=''3175330''>with</span> <span m=''3175550''>the</span>
  <span m=''3175740''>Cilk++</span> <span m=''3176560''>scheduler.</span> </p><p><span
  m=''3178790''>So</span> <span m=''3179020''>once</span> <span m=''3179280''>again,
  it</span> <span m=''3179500''>means</span> <span m=''3179740''>near</span> <span
  m=''3179920''>perfect</span> <span m=''3180310''>linear</span> <span m=''3180580''>speedup</span>
  <span m=''3181050''>as</span> <span m=''3181280''>long</span> <span m=''3181620''>as</span>
  <span m=''3181810''>p</span> <span m=''3182160''>is</span> <span m=''3182290''>much</span>
  <span m=''3182540''>less</span> <span m=''3182810''>than</span> <span m=''3183120''>T1</span>
  <span m=''3183300''>over</span> <span m=''3183500''>T</span> <span m=''3183690''>infinity</span>
  <span m=''3184340''>generally.</span> <span m=''3186330''>And</span> <span m=''3186490''>so</span>
  <span m=''3186750''>Cilkview</span> <span m=''3187630''>allows</span> <span m=''3188140''>us</span>
  <span m=''3188320''>to</span> <span m=''3188470''>measure</span> <span m=''3189100''>T1</span>
  <span m=''3189330''>and</span> <span m=''3189420''>T</span> <span m=''3189660''>infinity.</span>
  <span m=''3190820''>So</span> <span m=''3191040''>that''s</span> <span m=''3191340''>going</span>
  <span m=''3191440''>to</span> <span m=''3191490''>be</span> <span m=''3191600''>good,</span>
  <span m=''3192370''>because</span> <span m=''3192570''>then</span> <span m=''3192710''>we</span>
  <span m=''3192820''>can</span> <span m=''3192970''>figure</span> <span m=''3193220''>out</span>
  <span m=''3193320''>what</span> <span m=''3193460''>our</span> <span m=''3193580''>parallelism</span>
  <span m=''3194200''>is</span> <span m=''3194730''>and</span> <span m=''3194890''>look</span>
  <span m=''3195260''>to</span> <span m=''3195360''>see</span> <span m=''3195610''>how</span>
  <span m=''3195910''>we''re</span> <span m=''3196210''>running</span> <span m=''3196480''>on</span>
  <span m=''3196720''>typically</span> <span m=''3197120''>12</span> <span m=''3197450''>cores,</span>
  <span m=''3200000''>how</span> <span m=''3200160''>much</span> <span m=''3200350''>parallels</span>
  <span m=''3200700''>do we</span> <span m=''3200850''>have?</span> <span m=''3201910''>If</span>
  <span m=''3202080''>our</span> <span m=''3202260''>parallelism</span> <span m=''3202830''>is</span>
  <span m=''3202980''>12,</span> <span m=''3204140''>we</span> <span m=''3204260''>don''t</span>
  <span m=''3204430''>have</span> <span m=''3204530''>a</span> <span m=''3204640''>lot</span>
  <span m=''3204860''>of</span> <span m=''3204920''>slackness.</span> <span m=''3205500''>We</span>
  <span m=''3205600''>won''t</span> <span m=''3205840''>get</span> <span m=''3206020''>very</span>
  <span m=''3206250''>good</span> <span m=''3206490''>speedup.</span> <span m=''3207440''>But</span>
  <span m=''3207710''>if</span> <span m=''3207810''>we</span> <span m=''3207930''>have</span>
  <span m=''3208050''>a</span> <span m=''3208100''>parallelism</span> <span m=''3208660''>of</span>
  <span m=''3209240''>say,</span> <span m=''3209450''>10</span> <span m=''3209700''>times</span>
  <span m=''3210040''>more,</span> <span m=''3210400''>say</span> <span m=''3210550''>120,</span>
  <span m=''3212180''>we</span> <span m=''3212320''>should</span> <span m=''3212500''>get</span>
  <span m=''3212710''>very,</span> <span m=''3213090''>very</span> <span m=''3214180''>good</span>
  <span m=''3214620''>parallelism,</span> <span m=''3215730''>very,</span> <span m=''3215970''>very</span>
  <span m=''3216200''>good</span> <span m=''3216780''>speedup</span> <span m=''3217630''>on</span>
  <span m=''3217780''>12</span> <span m=''3218090''>cores.</span> <span m=''3218370''>We</span>
  <span m=''3218450''>should</span> <span m=''3218580''>get</span> <span m=''3218770''>close</span>
  <span m=''3219110''>to</span> <span m=''3220230''>perfect</span> <span m=''3220560''>speedup.</span>
  </p><p><span m=''3225100''>So</span> <span m=''3225230''>let''s</span> <span m=''3225430''>talk</span>
  <span m=''3225680''>about</span> <span m=''3225960''>the</span> <span m=''3226030''>runtime</span>
  <span m=''3226530''>system</span> <span m=''3226890''>and</span> <span m=''3226960''>how</span>
  <span m=''3227270''>this</span> <span m=''3227490''>work</span> <span m=''3227730''>stealing</span>
  <span m=''3228100''>scheduler</span> <span m=''3228610''>works,</span> <span m=''3229970''>because</span>
  <span m=''3230210''>it</span> <span m=''3230490''>different</span> <span m=''3230740''>from</span>
  <span m=''3230980''>the</span> <span m=''3231320''>other</span> <span m=''3231720''>one.</span>
  <span m=''3231890''>And</span> <span m=''3232000''>this</span> <span m=''3232150''>will</span>
  <span m=''3232230''>be</span> <span m=''3232360''>helpful</span> <span m=''3232730''>also</span>
  <span m=''3233290''>for</span> <span m=''3233600''>understanding</span> <span m=''3235700''>when</span>
  <span m=''3235950''>you</span> <span m=''3236160''>program</span> <span m=''3236710''>these</span>
  <span m=''3236940''>things</span> <span m=''3237170''>what</span> <span m=''3237350''>you</span>
  <span m=''3237470''>can</span> <span m=''3237590''>expect.</span> <span m=''3239530''>So</span>
  <span m=''3239700''>the</span> <span m=''3239810''>basic</span> <span m=''3240270''>idea</span>
  <span m=''3242230''>of</span> <span m=''3242400''>the</span> <span m=''3242490''>schedule</span>
  <span m=''3242990''>is</span> <span m=''3243820''>there''s</span> <span m=''3244030''>two</span>
  <span m=''3247730''>strategies</span> <span m=''3248620''>the</span> <span m=''3248720''>people</span>
  <span m=''3249070''>have</span> <span m=''3249180''>explored</span> <span m=''3249870''>for</span>
  <span m=''3249990''>doing</span> <span m=''3250660''>scheduling.</span> <span m=''3251810''>One</span>
  <span m=''3252010''>is</span> <span m=''3252200''>called</span> <span m=''3252570''>work</span>
  <span m=''3252840''>sharing,</span> <span m=''3253490''>which</span> <span m=''3253670''>is</span>
  <span m=''3253780''>not</span> <span m=''3254150''>what</span> <span m=''3254340''>Cilk++</span>
  <span m=''3255820''>does.</span> <span m=''3256110''>But</span> <span m=''3256260''>let</span>
  <span m=''3256410''>me</span> <span m=''3256510''>explain</span> <span m=''3257090''>what</span>
  <span m=''3257940''>work</span> <span m=''3258150''>sharing</span> <span m=''3258620''>is</span>
  <span m=''3258960''>because</span> <span m=''3259250''>it''s</span> <span m=''3259390''>helpful</span>
  <span m=''3259850''>to</span> <span m=''3259960''>contrast</span> <span m=''3260570''>it</span>
  <span m=''3260650''>with</span> <span m=''3260810''>work</span> <span m=''3261050''>stealing.</span>
  </p><p><span m=''3262200''>So</span> <span m=''3262490''>in</span> <span m=''3262560''>works</span>
  <span m=''3263420''>sharing,</span> <span m=''3264040''>what</span> <span m=''3264200''>you</span>
  <span m=''3264310''>do</span> <span m=''3264530''>is</span> <span m=''3264690''>when</span>
  <span m=''3264900''>you</span> <span m=''3265040''>spawn</span> <span m=''3265510''>off</span>
  <span m=''3265730''>some</span> <span m=''3265990''>work,</span> <span m=''3266990''>you</span>
  <span m=''3267100''>say</span> <span m=''3267320''>let</span> <span m=''3267560''>me</span>
  <span m=''3267700''>go</span> <span m=''3267900''>find</span> <span m=''3268580''>some</span>
  <span m=''3270280''>low</span> <span m=''3270680''>utilized</span> <span m=''3271360''>processor</span>
  <span m=''3272280''>and</span> <span m=''3273370''>put</span> <span m=''3273600''>that</span>
  <span m=''3273870''>worked</span> <span m=''3274210''>there</span> <span m=''3274500''>for</span>
  <span m=''3274710''>it</span> <span m=''3274940''>to</span> <span m=''3275215''>operate</span>
  <span m=''3275490''>on.</span> <span m=''3277450''>The</span> <span m=''3277940''>problem</span>
  <span m=''3278410''>with</span> <span m=''3278600''>work</span> <span m=''3278860''>sharing</span>
  <span m=''3279970''>is</span> <span m=''3280230''>that</span> <span m=''3280400''>you</span>
  <span m=''3280570''>have</span> <span m=''3280750''>to</span> <span m=''3280870''>do</span>
  <span m=''3281150''>some</span> <span m=''3281470''>communication</span> <span m=''3282260''>and</span>
  <span m=''3282400''>synchronization</span> <span m=''3284300''>every</span> <span
  m=''3284710''>time</span> <span m=''3285430''>you</span> <span m=''3285600''>do</span>
  <span m=''3285780''>a</span> <span m=''3285830''>spawn.</span> <span m=''3287960''>Every</span>
  <span m=''3288180''>time</span> <span m=''3288410''>you</span> <span m=''3288460''>do</span>
  <span m=''3288610''>a</span> <span m=''3288660''>spawn,</span> <span m=''3289130''>you''re</span>
  <span m=''3289290''>going</span> <span m=''3289430''>to</span> <span m=''3289480''>go</span>
  <span m=''3289710''>out.</span> <span m=''3289830''>This</span> <span m=''3289970''>is</span>
  <span m=''3290150''>kind</span> <span m=''3290350''>of</span> <span m=''3290550''>what</span>
  <span m=''3290840''>Pthreads</span> <span m=''3291490''>does,</span> <span m=''3292080''>when</span>
  <span m=''3292290''>you</span> <span m=''3292410''>do</span> <span m=''3292550''>Pthread</span>
  <span m=''3293080''>create.</span> <span m=''3293580''>It</span> <span m=''3293730''>goes</span>
  <span m=''3294020''>out</span> <span m=''3294170''>and</span> <span m=''3294290''>says</span>
  <span m=''3294500''>OK,</span> <span m=''3294930''>let</span> <span m=''3295150''>me</span>
  <span m=''3296250''>create</span> <span m=''3297350''>all</span> <span m=''3297580''>of</span>
  <span m=''3297670''>the</span> <span m=''3297730''>things</span> <span m=''3298030''>it</span>
  <span m=''3298120''>needs</span> <span m=''3298340''>to</span> <span m=''3298460''>do</span>
  <span m=''3298720''>and</span> <span m=''3298840''>get</span> <span m=''3298980''>it</span>
  <span m=''3299090''>schedule</span> <span m=''3299345''>then</span> <span m=''3300800''>on</span>
  <span m=''3300970''>a</span> <span m=''3301030''>processor.</span> </p><p><span
  m=''3303070''>Work</span> <span m=''3303630''>stealing,</span> <span m=''3304340''>on</span>
  <span m=''3304440''>the</span> <span m=''3304590''>other</span> <span m=''3304750''>hand,</span>
  <span m=''3305980''>takes</span> <span m=''3306410''>the</span> <span m=''3306670''>opposite</span>
  <span m=''3306860''>approach.</span> <span m=''3308310''>Whenever</span> <span m=''3308720''>it</span>
  <span m=''3308830''>spawns</span> <span m=''3309370''>work,</span> <span m=''3310030''>it''s</span>
  <span m=''3310240''>just</span> <span m=''3310740''>going</span> <span m=''3310870''>to</span>
  <span m=''3310950''>keep</span> <span m=''3311270''>that</span> <span m=''3311500''>work</span>
  <span m=''3311780''>local</span> <span m=''3312230''>to</span> <span m=''3312430''>it,</span>
  <span m=''3312790''>but</span> <span m=''3313000''>make</span> <span m=''3313250''>it</span>
  <span m=''3313340''>available</span> <span m=''3314210''>for</span> <span m=''3314380''>stealing.</span>
  <span m=''3316230''>A</span> <span m=''3316320''>processor</span> <span m=''3316910''>that</span>
  <span m=''3317070''>runs</span> <span m=''3317530''>out</span> <span m=''3317710''>of</span>
  <span m=''3317850''>work</span> <span m=''3319710''>is</span> <span m=''3319860''>going</span>
  <span m=''3319990''>to</span> <span m=''3320030''>go</span> <span m=''3320220''>looking</span>
  <span m=''3321220''>for</span> <span m=''3321640''>work</span> <span m=''3322010''>to</span>
  <span m=''3322120''>steal,</span> <span m=''3322830''>to</span> <span m=''3322940''>bring</span>
  <span m=''3323210''>back.</span> <span m=''3323720''>The</span> <span m=''3324140''>advantage</span>
  <span m=''3324560''>of</span> <span m=''3324770''>work</span> <span m=''3325030''>stealing</span>
  <span m=''3325630''>is</span> <span m=''3328290''>that</span> <span m=''3328480''>the</span>
  <span m=''3328670''>processor</span> <span m=''3330900''>doesn''t</span> <span m=''3331540''>do</span>
  <span m=''3331770''>any</span> <span m=''3331960''>synchronization</span> <span
  m=''3332860''>except</span> <span m=''3333350''>when</span> <span m=''3333500''>it''s</span>
  <span m=''3333650''>actually</span> <span m=''3334050''>load</span> <span m=''3334310''>balancing.</span>
  <span m=''3336210''>So</span> <span m=''3336390''>if</span> <span m=''3336690''>all
  of the</span> <span m=''3336780''>processors</span> <span m=''3337470''>have</span>
  <span m=''3337600''>ample</span> <span m=''3338000''>work</span> <span m=''3338360''>to</span>
  <span m=''3338470''>do,</span> <span m=''3342690''>then</span> <span m=''3342850''>what</span>
  <span m=''3343010''>happens</span> <span m=''3343510''>is</span> <span m=''3345380''>there''s</span>
  <span m=''3345870''>no</span> <span m=''3346330''>overhead</span> <span m=''3346890''>for</span>
  <span m=''3347020''>scheduling</span> <span m=''3347570''>whatsoever.</span> <span
  m=''3348380''>They</span> <span m=''3348530''>all</span> <span m=''3348760''>just</span>
  <span m=''3349000''>crank</span> <span m=''3349350''>away.</span> <span m=''3351600''>And</span>
  <span m=''3351780''>so</span> <span m=''3351880''>you</span> <span m=''3352030''>get</span>
  <span m=''3352490''>very,</span> <span m=''3352760''>very</span> <span m=''3352970''>low</span>
  <span m=''3353200''>overheads</span> <span m=''3354290''>when</span> <span m=''3355260''>there''s</span>
  <span m=''3355560''>ample</span> <span m=''3356120''>work</span> <span m=''3356360''>to</span>
  <span m=''3356460''>do</span> <span m=''3356640''>on</span> <span m=''3356750''>each</span>
  <span m=''3356910''>processor.</span> </p><p><span m=''3358320''>So</span> <span
  m=''3358450''>let''s</span> <span m=''3358630''>see</span> <span m=''3358740''>how</span>
  <span m=''3358930''>this</span> <span m=''3359110''>works.</span> <span m=''3360980''>So</span>
  <span m=''3361160''>the</span> <span m=''3361440''>particular</span> <span m=''3362000''>way</span>
  <span m=''3362230''>that</span> <span m=''3362360''>it</span> <span m=''3362470''>maintains</span>
  <span m=''3363070''>it</span> <span m=''3363500''>is</span> <span m=''3363930''>that</span>
  <span m=''3364120''>basically,</span> <span m=''3365200''>each</span> <span m=''3365450''>processor</span>
  <span m=''3365950''>maintains</span> <span m=''3366520''>a</span> <span m=''3366650''>work</span>
  <span m=''3367110''>deck.</span> <span m=''3368180''>So</span> <span m=''3368360''>a</span>
  <span m=''3368420''>deck</span> <span m=''3368690''>is</span> <span m=''3368830''>a</span>
  <span m=''3368890''>double-ended</span> <span m=''3369530''>queue</span> <span m=''3372090''>of</span>
  <span m=''3372900''>the</span> <span m=''3373010''>ready</span> <span m=''3373310''>strands.</span>
  <span m=''3373750''>It</span> <span m=''3373880''>manipulates</span> <span m=''3374510''>the</span>
  <span m=''3374600''>bottom</span> <span m=''3375020''>of</span> <span m=''3375120''>the</span>
  <span m=''3375220''>deck</span> <span m=''3375550''>like</span> <span m=''3375770''>a</span>
  <span m=''3375820''>stack.</span> <span m=''3377500''>So</span> <span m=''3377640''>what</span>
  <span m=''3377760''>that</span> <span m=''3377960''>says</span> <span m=''3378330''>is,</span>
  <span m=''3378620''>for</span> <span m=''3378720''>example,</span> <span m=''3379110''>here,</span>
  <span m=''3380090''>we</span> <span m=''3380220''>had</span> <span m=''3380310''>a</span>
  <span m=''3380410''>spawn</span> <span m=''3381020''>followed</span> <span m=''3381410''>by</span>
  <span m=''3381610''>two</span> <span m=''3381870''>calls.</span> <span m=''3384310''>And</span>
  <span m=''3384490''>basically,</span> <span m=''3385100''>it''s</span> <span m=''3385280''>operating</span>
  <span m=''3385800''>just</span> <span m=''3386100''>as</span> <span m=''3386250''>it</span>
  <span m=''3386360''>would</span> <span m=''3386530''>have</span> <span m=''3386710''>to</span>
  <span m=''3386810''>operate</span> <span m=''3387210''>in</span> <span m=''3391210''>an</span>
  <span m=''3391390''>ordinary</span> <span m=''3393050''>stack,</span> <span m=''3394000''>an</span>
  <span m=''3394690''>ordinary</span> <span m=''3395060''>call</span> <span m=''3395410''>stack.</span>
  <span m=''3396210''>So,</span> <span m=''3396410''>for</span> <span m=''3396560''>example,</span>
  <span m=''3396880''>this</span> <span m=''3397050''>guy</span> <span m=''3397220''>says</span>
  <span m=''3397530''>call,</span> <span m=''3398870''>well</span> <span m=''3399110''>it</span>
  <span m=''3399250''>pushes</span> <span m=''3399590''>a</span> <span m=''3399640''>frame</span>
  <span m=''3400000''>on</span> <span m=''3400090''>the</span> <span m=''3400170''>bottom</span>
  <span m=''3400510''>of</span> <span m=''3400650''>the</span> <span m=''3401220''>call
  stack</span> <span m=''3401790''>just</span> <span m=''3402050''>like</span> <span
  m=''3402540''>normal.</span> <span m=''3404460''>It</span> <span m=''3404590''>says</span>
  <span m=''3404800''>spawn,</span> <span m=''3405920''>it</span> <span m=''3406500''>pushes</span>
  <span m=''3406800''>a</span> <span m=''3406880''>spawn</span> <span m=''3407300''>frame</span>
  <span m=''3407610''>on</span> <span m=''3407780''>the</span> <span m=''3407950''>bottom</span>
  <span m=''3408400''>of</span> <span m=''3408490''>the</span> <span m=''3408590''>deck.</span>
  </p><p><span m=''3412910''>In</span> <span m=''3413070''>fact,</span> <span m=''3413660''>of</span>
  <span m=''3413880''>course,</span> <span m=''3414100''>it''s</span> <span m=''3414260''>running</span>
  <span m=''3414560''>in</span> <span m=''3414650''>parallel,</span> <span m=''3415170''>so</span>
  <span m=''3415350''>you</span> <span m=''3415450''>can</span> <span m=''3415560''>have</span>
  <span m=''3415710''>a</span> <span m=''3415760''>bunch</span> <span m=''3416010''>of</span>
  <span m=''3416090''>guys</span> <span m=''3416440''>that</span> <span m=''3416520''>are</span>
  <span m=''3416580''>both</span> <span m=''3416860''>calling</span> <span m=''3417320''>and</span>
  <span m=''3417470''>spawning</span> <span m=''3418420''>and</span> <span m=''3418480''>they</span>
  <span m=''3418610''>all</span> <span m=''3418860''>push</span> <span m=''3419080''>whatever</span>
  <span m=''3419390''>their</span> <span m=''3419530''>frames</span> <span m=''3419940''>are.</span>
  <span m=''3421270''>When</span> <span m=''3421430''>somebody</span> <span m=''3421760''>says</span>
  <span m=''3422030''>return,</span> <span m=''3422780''>you</span> <span m=''3422900''>just</span>
  <span m=''3423080''>pop</span> <span m=''3423330''>it</span> <span m=''3423410''>off.</span>
  <span m=''3425380''>So</span> <span m=''3425560''>in</span> <span m=''3425610''>the</span>
  <span m=''3425710''>common</span> <span m=''3426220''>case,</span> <span m=''3428550''>each</span>
  <span m=''3428800''>of</span> <span m=''3428880''>these</span> <span m=''3429080''>guys</span>
  <span m=''3429390''>is</span> <span m=''3429510''>just</span> <span m=''3429750''>executing</span>
  <span m=''3430420''>the</span> <span m=''3430520''>code</span> <span m=''3430800''>serially</span>
  <span m=''3432100''>the</span> <span m=''3432210''>way</span> <span m=''3432460''>that</span>
  <span m=''3432610''>it</span> <span m=''3432700''>would</span> <span m=''3432900''>normally</span>
  <span m=''3433420''>executing</span> <span m=''3434190''>in</span> <span m=''3434320''>C</span>
  <span m=''3434640''>or</span> <span m=''3434910''>C++.</span> <span m=''3438120''>However,</span>
  <span m=''3440280''>if</span> <span m=''3440440''>somebody</span> <span m=''3440790''>runs</span>
  <span m=''3441100''>out</span> <span m=''3441270''>of</span> <span m=''3441380''>work,</span>
  <span m=''3443900''>then</span> <span m=''3444610''>it</span> <span m=''3444800''>becomes</span>
  <span m=''3445300''>a</span> <span m=''3445370''>thief</span> <span m=''3448650''>and</span>
  <span m=''3449210''>it</span> <span m=''3449560''>looks</span> <span m=''3450770''>for</span>
  <span m=''3451000''>a</span> <span m=''3451240''>victim</span> <span m=''3452210''>and</span>
  <span m=''3452400''>the</span> <span m=''3452470''>strategy</span> <span m=''3453110''>that''s</span>
  <span m=''3453310''>used</span> <span m=''3453560''>by</span> <span m=''3453710''>Cilk++</span>
  <span m=''3454750''>is</span> <span m=''3454940''>to</span> <span m=''3455040''>look</span>
  <span m=''3455460''>at</span> <span m=''3455670''>random.</span> <span m=''3456150''>It</span>
  <span m=''3457400''>says</span> <span m=''3458600''>let</span> <span m=''3458700''>me</span>
  <span m=''3458950''>just</span> <span m=''3459800''>go</span> <span m=''3460060''>to</span>
  <span m=''3460190''>any</span> <span m=''3460480''>other</span> <span m=''3462470''>processor</span>
  <span m=''3463120''>or</span> <span m=''3463740''>any</span> <span m=''3463980''>other</span>
  <span m=''3464270''>workers--</span> <span m=''3465050''>I</span> <span m=''3465150''>call</span>
  <span m=''3465420''>these</span> <span m=''3465620''>workers--</span> <span m=''3468880''>and</span>
  <span m=''3470300''>grab</span> <span m=''3470690''>away</span> <span m=''3471440''>some</span>
  <span m=''3471670''>of</span> <span m=''3471750''>their</span> <span m=''3471930''>work.</span>
  <span m=''3472730''>But</span> <span m=''3473060''>when</span> <span m=''3473180''>it</span>
  <span m=''3473280''>grabs</span> <span m=''3473670''>it</span> <span m=''3473750''>away,</span>
  <span m=''3474240''>what</span> <span m=''3474450''>it</span> <span m=''3474620''>does</span>
  <span m=''3475130''>is</span> <span m=''3475330''>it</span> <span m=''3475450''>steals</span>
  <span m=''3475960''>it</span> <span m=''3476170''>from</span> <span m=''3477260''>the</span>
  <span m=''3477890''>opposite</span> <span m=''3478450''>end</span> <span m=''3478990''>of</span>
  <span m=''3479160''>the</span> <span m=''3479240''>deck</span> <span m=''3479700''>from</span>
  <span m=''3479960''>where</span> <span m=''3482700''>this</span> <span m=''3482990''>particular</span>
  <span m=''3483470''>victim</span> <span m=''3483950''>is</span> <span m=''3484060''>actually</span>
  <span m=''3484370''>doing</span> <span m=''3484670''>its</span> <span m=''3484850''>work.</span>
  <span m=''3486050''>So it</span> <span m=''3486210''>steals</span> <span m=''3486610''>the</span>
  <span m=''3486760''>oldest</span> <span m=''3487150''>stuff</span> <span m=''3487460''>first.</span>
  <span m=''3489650''>So</span> <span m=''3489820''>it</span> <span m=''3489890''>moves</span>
  <span m=''3490220''>that</span> <span m=''3490370''>over</span> <span m=''3491490''>and</span>
  <span m=''3491670''>now</span> <span m=''3491830''>here</span> <span m=''3492070''>what</span>
  <span m=''3492210''>it''s</span> <span m=''3492380''>doing</span> <span m=''3492660''>is</span>
  <span m=''3492770''>it''s</span> <span m=''3492970''>stealing</span> <span m=''3493430''>up</span>
  <span m=''3493650''>to</span> <span m=''3493750''>the</span> <span m=''3493850''>point</span>
  <span m=''3494240''>that</span> <span m=''3494340''>it</span> <span m=''3494390''>spawns.</span>
  <span m=''3494710''>So it</span> <span m=''3495030''>steals</span> <span m=''3495420''>from</span>
  <span m=''3495540''>the</span> <span m=''3495660''>top</span> <span m=''3495950''>of</span>
  <span m=''3496030''>the</span> <span m=''3496110''>deck</span> <span m=''3496760''>down</span>
  <span m=''3497120''>to</span> <span m=''3497250''>where</span> <span m=''3497490''>there''s</span>
  <span m=''3497740''>a</span> <span m=''3497800''>spawn</span> <span m=''3498240''>on</span>
  <span m=''3498330''>top.</span> <span m=''3498640''>Yes?</span> </p><p><span m=''3499521''>AUDIENCE:</span>
  <span m=''3499992''>Is</span> <span m=''3500463''>there</span> <span m=''3500934''>always
  a spawn</span> <span m=''3501405''>on</span> <span m=''3501876''>the top of every
  deck?</span> </p><p><span m=''3505540''>PROFESSOR:</span> <span m=''3505870''>Close,</span>
  <span m=''3506380''>almost</span> <span m=''3506800''>always.</span> <span m=''3508140''>Yes,</span>
  <span m=''3508960''>so</span> <span m=''3509120''>I</span> <span m=''3509230''>think</span>
  <span m=''3509510''>that</span> <span m=''3509740''>you</span> <span m=''3509850''>could</span>
  <span m=''3510010''>say</span> <span m=''3510320''>that</span> <span m=''3510550''>there</span>
  <span m=''3510770''>are.</span> <span m=''3511150''>So</span> <span m=''3511370''>the</span>
  <span m=''3511630''>initial</span> <span m=''3512360''>deck</span> <span m=''3512630''>does</span>
  <span m=''3512800''>not</span> <span m=''3512980''>have</span> <span m=''3513110''>a</span>
  <span m=''3513160''>spawn</span> <span m=''3513420''>on</span> <span m=''3513650''>top</span>
  <span m=''3513920''>of</span> <span m=''3514030''>it,</span> <span m=''3514160''>but</span>
  <span m=''3514290''>you</span> <span m=''3514420''>could</span> <span m=''3515460''>imagine</span>
  <span m=''3515950''>that it</span> <span m=''3516190''>did.</span> <span m=''3517250''>And</span>
  <span m=''3517390''>then</span> <span m=''3517550''>when</span> <span m=''3517670''>you</span>
  <span m=''3517760''>steal,</span> <span m=''3518130''>you''re</span> <span m=''3518330''>always</span>
  <span m=''3518600''>stealing</span> <span m=''3519090''>from</span> <span m=''3519240''>the</span>
  <span m=''3519350''>top</span> <span m=''3519680''>down</span> <span m=''3520020''>to</span>
  <span m=''3521180''>a</span> <span m=''3521330''>spawn.</span> <span m=''3521920''>If</span>
  <span m=''3522220''>there</span> <span m=''3522380''>isn''t</span> <span m=''3525410''>something,</span>
  <span m=''3526350''>if</span> <span m=''3526580''>this</span> <span m=''3526760''>is</span>
  <span m=''3526890''>just</span> <span m=''3527110''>a</span> <span m=''3527170''>call</span>
  <span m=''3527500''>here,</span> <span m=''3527710''>this</span> <span m=''3527990''>cannot</span>
  <span m=''3528560''>any</span> <span m=''3528760''>longer</span> <span m=''3529100''>be</span>
  <span m=''3529240''>stolen.</span> <span m=''3529640''>There''s</span> <span m=''3529830''>no</span>
  <span m=''3529930''>work</span> <span m=''3530220''>there</span> <span m=''3530350''>to</span>
  <span m=''3530580''>be stolen</span> <span m=''3531340''>because</span> <span m=''3531590''>this</span>
  <span m=''3531760''>is</span> <span m=''3531890''>just</span> <span m=''3532130''>a</span>
  <span m=''3532170''>single</span> <span m=''3532570''>execution,</span> <span m=''3533200''>there''s</span>
  <span m=''3533400''>nothing</span> <span m=''3533700''>that''s</span> <span m=''3533940''>been</span>
  <span m=''3534520''>spawned</span> <span m=''3534990''>off</span> <span m=''3535210''>at</span>
  <span m=''3535370''>this</span> <span m=''3535530''>point.</span> <span m=''3537440''>This</span>
  <span m=''3537620''>is</span> <span m=''3537760''>the</span> <span m=''3537860''>result</span>
  <span m=''3538360''>of</span> <span m=''3538480''>having</span> <span m=''3538770''>been</span>
  <span m=''3538950''>spawned</span> <span m=''3539410''>as</span> <span m=''3539530''>opposed</span>
  <span m=''3539950''>to</span> <span m=''3540200''>that</span> <span m=''3540600''>it''s</span>
  <span m=''3540770''>doing</span> <span m=''3541030''>a</span> <span m=''3541080''>spawn.</span>
  <span m=''3541950''>So</span> <span m=''3542160''>yes,</span> <span m=''3543100''>basically</span>
  <span m=''3543650''>you''re</span> <span m=''3543830''>right.</span> <span m=''3545230''>There''s</span>
  <span m=''3545570''>a</span> <span m=''3545660''>spawn</span> <span m=''3546050''>on</span>
  <span m=''3546130''>the</span> <span m=''3546230''>top.</span> </p><p><span m=''3546890''>So
  it</span> <span m=''3547060''>basically</span> <span m=''3547580''>steals</span>
  <span m=''3547990''>that</span> <span m=''3548160''>off</span> <span m=''3548550''>and</span>
  <span m=''3548750''>then</span> <span m=''3548900''>it</span> <span m=''3549030''>resumes</span>
  <span m=''3549670''>execution</span> <span m=''3553610''>afterwards</span> <span
  m=''3554170''>and</span> <span m=''3554260''>starts</span> <span m=''3554600''>then</span>
  <span m=''3554770''>operating</span> <span m=''3555270''>just</span> <span m=''3555540''>like</span>
  <span m=''3555780''>an</span> <span m=''3555930''>ordinary</span> <span m=''3558360''>deck.</span>
  <span m=''3559190''>So</span> <span m=''3562180''>the</span> <span m=''3562380''>theorem</span>
  <span m=''3562770''>that</span> <span m=''3562900''>you</span> <span m=''3563030''>can</span>
  <span m=''3563170''>prove</span> <span m=''3563580''>for</span> <span m=''3564010''>this</span>
  <span m=''3564210''>type</span> <span m=''3564450''>of</span> <span m=''3564550''>scheduler</span>
  <span m=''3565090''>is</span> <span m=''3565360''>that</span> <span m=''3565440''>if</span>
  <span m=''3565540''>you</span> <span m=''3565660''>have</span> <span m=''3565790''>sufficient</span>
  <span m=''3566370''>parallelism,</span> <span m=''3567590''>so</span> <span m=''3568380''>you</span>
  <span m=''3568480''>all</span> <span m=''3568640''>know</span> <span m=''3568730''>what</span>
  <span m=''3568870''>parallelism</span> <span m=''3569560''>is</span> <span m=''3569730''>at
  this</span> <span m=''3569910''>point,</span> <span m=''3571070''>you</span> <span
  m=''3571220''>can</span> <span m=''3571380''>prove</span> <span m=''3571910''>that</span>
  <span m=''3572050''>the</span> <span m=''3572140''>workers</span> <span m=''3572640''>steal</span>
  <span m=''3573250''>infrequently.</span> <span m=''3575990''>So</span> <span m=''3576190''>in</span>
  <span m=''3576410''>a</span> <span m=''3576610''>a</span> <span m=''3576660''>typical</span>
  <span m=''3577100''>execution,</span> <span m=''3578240''>you</span> <span m=''3578360''>might</span>
  <span m=''3578570''>have</span> <span m=''3578730''>a</span> <span m=''3578780''>few</span>
  <span m=''3579150''>hundred</span> <span m=''3580880''>load</span> <span m=''3581230''>balancing</span>
  <span m=''3581780''>operations</span> <span m=''3582390''>of</span> <span m=''3582540''>this</span>
  <span m=''3582690''>nature</span> <span m=''3583600''>for</span> <span m=''3583750''>something</span>
  <span m=''3584200''>which</span> <span m=''3584370''>is</span> <span m=''3584530''>doing</span>
  <span m=''3585510''>billions</span> <span m=''3586010''>and</span> <span m=''3586120''>billions</span>
  <span m=''3586520''>of</span> <span m=''3586590''>instructions.</span> <span m=''3588420''>So</span>
  <span m=''3589570''>you</span> <span m=''3590370''>steal</span> <span m=''3590790''>infrequently.</span>
  <span m=''3591220''>If</span> <span m=''3591910''>you''re</span> <span m=''3592110''>stealing</span>
  <span m=''3592460''>infrequently</span> <span m=''3593190''>and</span> <span m=''3593270''>all</span>
  <span m=''3593560''>the</span> <span m=''3593630''>rest</span> <span m=''3593860''>of</span>
  <span m=''3593950''>the</span> <span m=''3594050''>time</span> <span m=''3594470''>you''re</span>
  <span m=''3594590''>just</span> <span m=''3594850''>executing</span> <span m=''3595530''>like</span>
  <span m=''3596580''>the</span> <span m=''3596730''>C</span> <span m=''3597230''>or</span>
  <span m=''3597650''>C++,</span> <span m=''3599970''>hey,</span> <span m=''3600380''>now</span>
  <span m=''3600550''>you''ve</span> <span m=''3600710''>got</span> <span m=''3600940''>linear</span>
  <span m=''3601200''>speedup</span> <span m=''3601560''>because</span> <span m=''3601680''>you''ve</span>
  <span m=''3601790''>got</span> <span m=''3602030''>all</span> <span m=''3602330''>of</span>
  <span m=''3602560''>these</span> <span m=''3602790''>guys</span> <span m=''3603140''>working</span>
  <span m=''3603550''>all</span> <span m=''3603810''>the</span> <span m=''3603900''>time.</span>
  </p><p><span m=''3608140''>And</span> <span m=''3608320''>so</span> <span m=''3608980''>as</span>
  <span m=''3609170''>I</span> <span m=''3609240''>say,</span> <span m=''3609820''>the</span>
  <span m=''3609920''>main</span> <span m=''3610200''>thing</span> <span m=''3610360''>to</span>
  <span m=''3610440''>understand</span> <span m=''3610950''>is</span> <span m=''3611080''>that</span>
  <span m=''3611230''>there''s</span> <span m=''3611440''>this</span> <span m=''3611590''>work</span>
  <span m=''3611860''>stealing</span> <span m=''3612700''>scheduler</span> <span m=''3613310''>running</span>
  <span m=''3613650''>underneath.</span> <span m=''3614550''>It''s</span> <span m=''3614640''>more</span>
  <span m=''3614830''>complicated</span> <span m=''3615165''>to</span> <span m=''3615500''>analyze</span>
  <span m=''3616280''>then</span> <span m=''3616450''>the</span> <span m=''3616760''>greedy</span>
  <span m=''3617050''>scheduler,</span> <span m=''3617420''>but</span> <span m=''3617570''>it</span>
  <span m=''3617630''>gives</span> <span m=''3617810''>you</span> <span m=''3617920''>pretty</span>
  <span m=''3618190''>much</span> <span m=''3618430''>the</span> <span m=''3618530''>same</span>
  <span m=''3620210''>qualitative</span> <span m=''3621510''>kinds</span> <span m=''3621840''>of</span>
  <span m=''3621950''>results.</span> <span m=''3624620''>And</span> <span m=''3625390''>the</span>
  <span m=''3625620''>idea</span> <span m=''3625960''>then</span> <span m=''3626330''>is</span>
  <span m=''3627030''>that</span> <span m=''3629590''>the</span> <span m=''3629670''>stealing</span>
  <span m=''3630080''>occurs</span> <span m=''3630420''>infrequently</span> <span
  m=''3631450''>so</span> <span m=''3631570''>you</span> <span m=''3631650''>get</span>
  <span m=''3631800''>linear</span> <span m=''3632110''>speedup.</span> <span m=''3632500''>So</span>
  <span m=''3632630''>the</span> <span m=''3632760''>idea</span> <span m=''3633120''>then</span>
  <span m=''3633360''>is</span> <span m=''3633540''>just</span> <span m=''3633830''>as</span>
  <span m=''3634000''>with greedy</span> <span m=''3634210''>scheduling,</span> <span
  m=''3635210''>make</span> <span m=''3635470''>sure</span> <span m=''3635620''>you</span>
  <span m=''3635730''>have</span> <span m=''3635850''>enough</span> <span m=''3636090''>parallelism,</span>
  <span m=''3637090''>because</span> <span m=''3637280''>then</span> <span m=''3637450''>the</span>
  <span m=''3637540''>load</span> <span m=''3637790''>balancing</span> <span m=''3638600''>is</span>
  <span m=''3638770''>a</span> <span m=''3638840''>small</span> <span m=''3639270''>fraction</span>
  <span m=''3639840''>of</span> <span m=''3639900''>the</span> <span m=''3640000''>time</span>
  <span m=''3640880''>these</span> <span m=''3641550''>processors</span> <span m=''3642180''>are</span>
  <span m=''3642250''>spending</span> <span m=''3644020''>executing</span> <span m=''3644570''>the</span>
  <span m=''3644670''>code.</span> <span m=''3645890''>Because</span> <span m=''3646120''>whenever</span>
  <span m=''3646500''>it''s</span> <span m=''3646770''>doing</span> <span m=''3647010''>things</span>
  <span m=''3647270''>like</span> <span m=''3647470''>work</span> <span m=''3647660''>stealing,</span>
  <span m=''3648090''>it''s</span> <span m=''3648220''>not</span> <span m=''3648460''>working</span>
  <span m=''3648800''>on</span> <span m=''3648960''>your</span> <span m=''3649130''>code</span>
  <span m=''3649470''>executing,</span> <span m=''3650080''>making</span> <span m=''3650270''>it</span>
  <span m=''3650470''>go</span> <span m=''3651460''>fast.</span> <span m=''3652460''>It''s</span>
  <span m=''3652750''>doing</span> <span m=''3653250''>bookkeeping</span> <span m=''3653980''>and</span>
  <span m=''3656360''>overhead</span> <span m=''3656890''>and</span> <span m=''3657020''>stuff.</span>
  <span m=''3657790''>So</span> <span m=''3657910''>you</span> <span m=''3657980''>want</span>
  <span m=''3658120''>to</span> <span m=''3658160''>make</span> <span m=''3658350''>sure</span>
  <span m=''3658480''>that</span> <span m=''3658710''>stays</span> <span m=''3659020''>low.</span>
  <span m=''3659910''>So</span> <span m=''3660020''>any</span> <span m=''3660180''>questions</span>
  <span m=''3660620''>about</span> <span m=''3660850''>that?</span> </p><p><span m=''3663290''>So</span>
  <span m=''3663470''>specifically,</span> <span m=''3664210''>we</span> <span m=''3664350''>have</span>
  <span m=''3664470''>these</span> <span m=''3664710''>bounds.</span> <span m=''3667150''>You</span>
  <span m=''3667430''>have achieved</span> <span m=''3667780''>this</span> <span m=''3667990''>expected</span>
  <span m=''3668590''>running</span> <span m=''3668870''>time,</span> <span m=''3669580''>which</span>
  <span m=''3669700''>I</span> <span m=''3669750''>mentioned</span> <span m=''3670050''>before.</span>
  <span m=''3670400''>Let</span> <span m=''3670530''>me</span> <span m=''3670640''>give</span>
  <span m=''3670790''>you</span> <span m=''3670950''>a</span> <span m=''3671070''>pseudo-proof</span>
  <span m=''3671910''>of</span> <span m=''3672060''>this.</span> <span m=''3673920''>So</span>
  <span m=''3674080''>this</span> <span m=''3674280''>is</span> <span m=''3674400''>not</span>
  <span m=''3674650''>a</span> <span m=''3674710''>real</span> <span m=''3674990''>proof</span>
  <span m=''3675910''>because</span> <span m=''3676790''>it</span> <span m=''3676930''>ignores</span>
  <span m=''3677520''>things</span> <span m=''3677850''>like</span> <span m=''3679030''>independence</span>
  <span m=''3679910''>of</span> <span m=''3680120''>probabilities.</span> <span m=''3681540''>So</span>
  <span m=''3681710''>when</span> <span m=''3681800''>you</span> <span m=''3681880''>do</span>
  <span m=''3681990''>a</span> <span m=''3682040''>probability</span> <span m=''3682600''>analysis,</span>
  <span m=''3682970''>you''re</span> <span m=''3683580''>not</span> <span m=''3683750''>allowed</span>
  <span m=''3684000''>to</span> <span m=''3684080''>multiply</span> <span m=''3684500''>probabilities</span>
  <span m=''3685270''>unless</span> <span m=''3685640''>they''re</span> <span m=''3686320''>independent.</span>
  <span m=''3687310''>So</span> <span m=''3687450''>anyway,</span> <span m=''3687990''>here</span>
  <span m=''3688200''>I''m</span> <span m=''3688270''>multiplying</span> <span m=''3688800''>probabilities</span>
  <span m=''3689490''>that</span> <span m=''3690125''>are</span> <span m=''3690420''>independent.</span>
  <span m=''3692080''>So</span> <span m=''3692260''>the</span> <span m=''3692390''>idea</span>
  <span m=''3692770''>is</span> <span m=''3693660''>you</span> <span m=''3693810''>can</span>
  <span m=''3693970''>view</span> <span m=''3694180''>a</span> <span m=''3694250''>processor</span>
  <span m=''3694850''>as</span> <span m=''3694960''>either</span> <span m=''3695180''>working</span>
  <span m=''3695770''>or</span> <span m=''3696000''>stealing.</span> <span m=''3696940''>So</span>
  <span m=''3697080''>it</span> <span m=''3697180''>goes</span> <span m=''3697430''>into</span>
  <span m=''3697580''>one</span> <span m=''3697760''>of</span> <span m=''3697860''>two</span>
  <span m=''3698030''>modes.</span> <span m=''3698880''>It''s</span> <span m=''3699560''>going</span>
  <span m=''3699660''>to</span> <span m=''3699700''>be</span> <span m=''3699760''>stealing</span>
  <span m=''3700240''>if</span> <span m=''3700330''>it''s</span> <span m=''3700470''>run</span>
  <span m=''3700650''>out</span> <span m=''3700780''>of</span> <span m=''3700840''>work,</span>
  <span m=''3702220''>otherwise</span> <span m=''3702700''>it''s</span> <span m=''3702830''>working.</span>
  <span m=''3703840''>So</span> <span m=''3704010''>the</span> <span m=''3704130''>total</span>
  <span m=''3704460''>time</span> <span m=''3704780''>all</span> <span m=''3704950''>processors</span>
  <span m=''3705530''>spend</span> <span m=''3705860''>working</span> <span m=''3706280''>is</span>
  <span m=''3706630''>T1,</span> <span m=''3707440''>hooray,</span> <span m=''3707930''>that''s</span>
  <span m=''3708610''>at</span> <span m=''3708730''>least</span> <span m=''3710840''>a</span>
  <span m=''3711130''>bound.</span> </p><p><span m=''3711900''>Now</span> <span m=''3712080''>it</span>
  <span m=''3712200''>turns</span> <span m=''3712530''>out</span> <span m=''3712720''>that</span>
  <span m=''3712890''>every</span> <span m=''3713270''>steal</span> <span m=''3714220''>has</span>
  <span m=''3714410''>a</span> <span m=''3714490''>1</span> <span m=''3714790''>over</span>
  <span m=''3715170''>p</span> <span m=''3715380''>chance</span> <span m=''3715890''>of</span>
  <span m=''3716060''>reducing</span> <span m=''3716630''>the</span> <span m=''3716720''>span</span>
  <span m=''3717230''>by</span> <span m=''3717440''>one.</span> <span m=''3719550''>So</span>
  <span m=''3719790''>you</span> <span m=''3719950''>can</span> <span m=''3720120''>prove</span>
  <span m=''3721070''>that</span> <span m=''3721585''>of</span> <span m=''3721940''>all</span>
  <span m=''3722220''>of</span> <span m=''3722310''>the</span> <span m=''3722680''>work</span>
  <span m=''3723240''>that''s</span> <span m=''3723460''>in</span> <span m=''3723620''>the</span>
  <span m=''3723710''>top</span> <span m=''3724040''>of</span> <span m=''3724200''>all</span>
  <span m=''3724370''>those</span> <span m=''3724650''>decks</span> <span m=''3725820''>that</span>
  <span m=''3726100''>those</span> <span m=''3726440''>are</span> <span m=''3726530''>where</span>
  <span m=''3726910''>any</span> <span m=''3727190''>of</span> <span m=''3727280''>the</span>
  <span m=''3727380''>ready</span> <span m=''3727720''>threads</span> <span m=''3728160''>are</span>
  <span m=''3728420''>going to</span> <span m=''3728510''>be</span> <span m=''3729520''>there</span>
  <span m=''3729790''>are</span> <span m=''3734070''>in</span> <span m=''3734220''>a</span>
  <span m=''3734280''>position</span> <span m=''3735180''>of</span> <span m=''3735240''>reducing</span>
  <span m=''3735890''>the</span> <span m=''3735980''>span</span> <span m=''3736830''>if</span>
  <span m=''3736960''>you</span> <span m=''3737080''>execute</span> <span m=''3737580''>them.</span>
  <span m=''3738680''>And</span> <span m=''3738830''>so</span> <span m=''3738930''>whenever</span>
  <span m=''3739240''>you</span> <span m=''3739360''>steal,</span> <span m=''3739790''>you</span>
  <span m=''3739860''>have</span> <span m=''3739940''>a</span> <span m=''3740020''>1</span>
  <span m=''3740220''>over</span> <span m=''3740450''>p</span> <span m=''3740660''>chance</span>
  <span m=''3741650''>of</span> <span m=''3741780''>hitting</span> <span m=''3742090''>the</span>
  <span m=''3742190''>guy</span> <span m=''3743020''>that</span> <span m=''3743240''>matters</span>
  <span m=''3746920''>for</span> <span m=''3748050''>the</span> <span m=''3748110''>span</span>
  <span m=''3748580''>of</span> <span m=''3749020''>unexecuted</span> <span m=''3749710''>DAG.</span>
  <span m=''3750360''>So</span> <span m=''3750530''>the same</span> <span m=''3750870''>kind</span>
  <span m=''3751020''>of</span> <span m=''3751180''>thing</span> <span m=''3751360''>as</span>
  <span m=''3751500''>in</span> <span m=''3751620''>theory.</span> <span m=''3753190''>You</span>
  <span m=''3753380''>have</span> <span m=''3753430''>a 1 over p</span> <span m=''3753730''>chance.</span>
  <span m=''3754050''>So</span> <span m=''3754110''>the</span> <span m=''3754180''>expected</span>
  <span m=''3754740''>cost</span> <span m=''3755100''>of</span> <span m=''3755200''>all</span>
  <span m=''3755370''>steals</span> <span m=''3756240''>is</span> <span m=''3756510''>order</span>
  <span m=''3756960''>PT</span> <span m=''3757450''>infinity.</span> <span m=''3759580''>So</span>
  <span m=''3759740''>this</span> <span m=''3759920''>is</span> <span m=''3760090''>true,</span>
  <span m=''3760480''>but</span> <span m=''3760690''>not</span> <span m=''3760920''>for</span>
  <span m=''3761000''>this</span> <span m=''3761190''>reason.</span> <span m=''3763580''>But</span>
  <span m=''3763750''>it''s</span> <span m=''3763970''>kind,</span> <span m=''3764830''>the</span>
  <span m=''3764950''>intuition</span> <span m=''3765400''>is</span> <span m=''3765520''>right.</span>
  <span m=''3768610''>So</span> <span m=''3768880''>therefore</span> <span m=''3769500''>the</span>
  <span m=''3769670''>cost</span> <span m=''3770010''>of</span> <span m=''3770070''>all</span>
  <span m=''3770230''>steals</span> <span m=''3770660''>is</span> <span m=''3770890''>PT</span>
  <span m=''3771260''>infinity</span> <span m=''3771530''>and</span> <span m=''3771800''>the</span>
  <span m=''3772070''>cost</span> <span m=''3772300''>of</span> <span m=''3772360''>the</span>
  <span m=''3772450''>work</span> <span m=''3772740''>is</span> <span m=''3773120''>T1,</span>
  <span m=''3773470''>so</span> <span m=''3773590''>that''s</span> <span m=''3773860''>the</span>
  <span m=''3773990''>total</span> <span m=''3774320''>amount</span> <span m=''3775110''>of</span>
  <span m=''3775320''>work</span> <span m=''3775830''>and</span> <span m=''3776400''>time</span>
  <span m=''3776730''>spent</span> <span m=''3777060''>stealing</span> <span m=''3777890''>by</span>
  <span m=''3778110''>all</span> <span m=''3778450''>the</span> <span m=''3778530''>p</span>
  <span m=''3778750''>processors.</span> <span m=''3780480''>So</span> <span m=''3780590''>to</span>
  <span m=''3780820''>get</span> <span m=''3780930''>the</span> <span m=''3782370''>time</span>
  <span m=''3782740''>spent</span> <span m=''3783120''>doing</span> <span m=''3783370''>that,</span>
  <span m=''3783590''>we</span> <span m=''3783700''>divide</span> <span m=''3784100''>by</span>
  <span m=''3784250''>p,</span> <span m=''3785250''>because</span> <span m=''3785420''>they''re</span>
  <span m=''3785560''>p</span> <span m=''3785750''>processors.</span> <span m=''3788220''>And</span>
  <span m=''3788350''>when</span> <span m=''3788480''>I</span> <span m=''3788560''>do</span>
  <span m=''3788740''>that,</span> <span m=''3788960''>I</span> <span m=''3789030''>get</span>
  <span m=''3789450''>T1</span> <span m=''3789650''>over</span> <span m=''3789870''>p</span>
  <span m=''3790090''>plus</span> <span m=''3790340''>order</span> <span m=''3790550''>T</span>
  <span m=''3790860''>infinity.</span> <span m=''3792140''>So</span> <span m=''3792260''>that''s</span>
  <span m=''3792420''>kind</span> <span m=''3792630''>of</span> <span m=''3792840''>where</span>
  <span m=''3792980''>that</span> <span m=''3793210''>bound</span> <span m=''3793490''>is</span>
  <span m=''3793620''>coming</span> <span m=''3793890''>from.</span> </p><p><span
  m=''3795550''>So</span> <span m=''3795730''>you</span> <span m=''3795860''>can</span>
  <span m=''3796010''>see</span> <span m=''3796300''>what''s</span> <span m=''3796520''>important</span>
  <span m=''3797020''>here</span> <span m=''3797760''>is</span> <span m=''3798070''>that</span>
  <span m=''3798340''>the</span> <span m=''3799620''>term,</span> <span m=''3800070''>that</span>
  <span m=''3800380''>order</span> <span m=''3800660''>T</span> <span m=''3800880''>infinity</span>
  <span m=''3801390''>term,</span> <span m=''3801640''>this</span> <span m=''3801970''>the</span>
  <span m=''3802060''>one</span> <span m=''3802260''>where</span> <span m=''3802400''>all</span>
  <span m=''3802730''>the</span> <span m=''3802860''>overhead</span> <span m=''3803340''>of</span>
  <span m=''3803410''>scheduling</span> <span m=''3803960''>and</span> <span m=''3804050''>synchronization</span>
  <span m=''3804860''>is.</span> <span m=''3805630''>There''s</span> <span m=''3805830''>no</span>
  <span m=''3806150''>overhead</span> <span m=''3806730''>for</span> <span m=''3806840''>scheduling</span>
  <span m=''3807120''>and</span> <span m=''3807400''>synchronization</span> <span
  m=''3808120''>in</span> <span m=''3808200''>the</span> <span m=''3808470''>T1</span>
  <span m=''3808650''>over</span> <span m=''3808910''>p</span> <span m=''3809210''>term.</span>
  <span m=''3809940''>The</span> <span m=''3810160''>only</span> <span m=''3810390''>overhead</span>
  <span m=''3810910''>there</span> <span m=''3811210''>is</span> <span m=''3811450''>to</span>
  <span m=''3811720''>do</span> <span m=''3811850''>things</span> <span m=''3812100''>like</span>
  <span m=''3812270''>mark</span> <span m=''3812670''>the</span> <span m=''3812760''>frames</span>
  <span m=''3813850''>as</span> <span m=''3814040''>being</span> <span m=''3815230''>a</span>
  <span m=''3815310''>steel</span> <span m=''3815700''>frame</span> <span m=''3816180''>or</span>
  <span m=''3816460''>a</span> <span m=''3817180''>spawn</span> <span m=''3817680''>frame</span>
  <span m=''3818750''>and</span> <span m=''3818920''>do</span> <span m=''3819030''>the</span>
  <span m=''3819140''>bookkeeping</span> <span m=''3820210''>of</span> <span m=''3820380''>the</span>
  <span m=''3820470''>deck</span> <span m=''3820790''>as</span> <span m=''3820970''>you''re</span>
  <span m=''3821110''>executing</span> <span m=''3822010''>so</span> <span m=''3822210''>the</span>
  <span m=''3822360''>spawn</span> <span m=''3823820''>can</span> <span m=''3824000''>be</span>
  <span m=''3824130''>implemented</span> <span m=''3824570''>very</span> <span m=''3824790''>cheaply.</span>
  </p><p><span m=''3828070''>Now</span> <span m=''3828960''>in</span> <span m=''3829100''>addition</span>
  <span m=''3829730''>to</span> <span m=''3833800''>the</span> <span m=''3834220''>scheduling</span>
  <span m=''3834740''>things,</span> <span m=''3835060''>there are</span> <span m=''3835130''>some</span>
  <span m=''3835290''>other</span> <span m=''3835490''>things</span> <span m=''3835750''>to</span>
  <span m=''3835840''>understand</span> <span m=''3836320''>a</span> <span m=''3836370''>little</span>
  <span m=''3836560''>bit</span> <span m=''3836700''>about</span> <span m=''3837020''>the</span>
  <span m=''3837090''>scheduler</span> <span m=''3837610''>and</span> <span m=''3837840''>that</span>
  <span m=''3838090''>is</span> <span m=''3838900''>that</span> <span m=''3839680''>it</span>
  <span m=''3839880''>supports</span> <span m=''3840790''>the</span> <span m=''3841450''>C,</span>
  <span m=''3841800''>C++</span> <span m=''3842670''>rule</span> <span m=''3842960''>for</span>
  <span m=''3843110''>pointers.</span> <span m=''3843720''>So</span> <span m=''3844150''>remember</span>
  <span m=''3844540''>in</span> <span m=''3844640''>C</span> <span m=''3844920''>and</span>
  <span m=''3845520''>C++,</span> <span m=''3846420''>you</span> <span m=''3846540''>can</span>
  <span m=''3846660''>pass</span> <span m=''3846980''>a</span> <span m=''3847040''>pointer</span>
  <span m=''3847570''>to</span> <span m=''3847690''>stack</span> <span m=''3848130''>space</span>
  <span m=''3848570''>down,</span> <span m=''3848960''>but</span> <span m=''3849120''>you</span>
  <span m=''3849220''>can''t</span> <span m=''3849510''>pass</span> <span m=''3850230''>a</span>
  <span m=''3850310''>pointer</span> <span m=''3850690''>to</span> <span m=''3850790''>stack</span>
  <span m=''3851190''>space</span> <span m=''3851610''>back</span> <span m=''3852110''>to</span>
  <span m=''3852200''>your</span> <span m=''3852310''>parent,</span> <span m=''3852800''>right?</span>
  <span m=''3853430''>Because it</span> <span m=''3853480''>popped</span> <span m=''3853670''>off.</span>
  <span m=''3857340''>So</span> <span m=''3858220''>if</span> <span m=''3858380''>you</span>
  <span m=''3858910''>think</span> <span m=''3859160''>about</span> <span m=''3859740''>a</span>
  <span m=''3859930''>C</span> <span m=''3860870''>or</span> <span m=''3861200''>C++</span>
  <span m=''3861720''>execution,</span> <span m=''3862490''>let''s</span> <span m=''3862800''>say</span>
  <span m=''3862880''>we</span> <span m=''3862990''>have</span> <span m=''3863110''>this</span>
  <span m=''3863310''>call</span> <span m=''3863590''>structure</span> <span m=''3864090''>here.</span>
  <span m=''3865940''>A</span> <span m=''3866680''>really</span> <span m=''3867050''>cannot</span>
  <span m=''3867440''>see</span> <span m=''3867690''>any</span> <span m=''3867950''>of</span>
  <span m=''3868040''>the</span> <span m=''3868290''>stack</span> <span m=''3868690''>space</span>
  <span m=''3868970''>of</span> <span m=''3869020''>B,C,D</span> <span m=''3869355''>or</span>
  <span m=''3869690''>E.</span> <span m=''3870680''>So</span> <span m=''3870820''>this</span>
  <span m=''3870960''>is</span> <span m=''3871080''>what A</span> <span m=''3871530''>gets</span>
  <span m=''3871780''>to</span> <span m=''3871890''>see.</span> <span m=''3873130''>And</span>
  <span m=''3873320''>B,</span> <span m=''3873600''>meanwhile,</span> <span m=''3874190''>can</span>
  <span m=''3874320''>see</span> <span m=''3874760''>A</span> <span m=''3875040''>space,</span>
  <span m=''3875540''>because</span> <span m=''3875710''>that''s</span> <span m=''3875980''>down</span>
  <span m=''3876280''>on</span> <span m=''3876350''>the</span> <span m=''3876430''>stack,</span>
  <span m=''3876780''>but</span> <span m=''3876900''>it</span> <span m=''3877000''>can''t</span>
  <span m=''3877560''>see</span> <span m=''3877880''>C,</span> <span m=''3878285''>D
  or E.</span> <span m=''3878930''>Particularly</span> <span m=''3879440''>if you''re</span>
  <span m=''3879700''>executing</span> <span m=''3880190''>this</span> <span m=''3880280''>serially,</span>
  <span m=''3880660''>it</span> <span m=''3880820''>can''t</span> <span m=''3881170''>see</span>
  <span m=''3881650''>C</span> <span m=''3881930''>because</span> <span m=''3882110''>C</span>
  <span m=''3882280''>hasn''t</span> <span m=''3882490''>executed</span> <span m=''3883100''>yet</span>
  <span m=''3884140''>when</span> <span m=''3884380''>B</span> <span m=''3884600''>executes.</span>
  </p><p><span m=''3885860''>However,</span> <span m=''3886170''>C,</span> <span m=''3886440''>it</span>
  <span m=''3886570''>turns</span> <span m=''3886840''>out,</span> <span m=''3887490''>the</span>
  <span m=''3887580''>same</span> <span m=''3887900''>thing.</span> <span m=''3889190''>I</span>
  <span m=''3889310''>can''t</span> <span m=''3889660''>see</span> <span m=''3889950''>any</span>
  <span m=''3890150''>of</span> <span m=''3890190''>the</span> <span m=''3890280''>variables</span>
  <span m=''3890800''>that</span> <span m=''3890940''>might</span> <span m=''3891150''>be</span>
  <span m=''3891310''>allocated</span> <span m=''3892240''>in</span> <span m=''3892380''>the</span>
  <span m=''3892450''>space</span> <span m=''3892880''>for</span> <span m=''3893000''>B</span>
  <span m=''3894040''>when</span> <span m=''3894180''>I''m</span> <span m=''3894270''>executing</span>
  <span m=''3894760''>here</span> <span m=''3895020''>on</span> <span m=''3895170''>a</span>
  <span m=''3895240''>stack.</span> <span m=''3895800''>You</span> <span m=''3896040''>can
  see</span> <span m=''3896450''>them</span> <span m=''3896590''>in</span> <span m=''3896660''>a</span>
  <span m=''3896750''>heap,</span> <span m=''3897050''>but</span> <span m=''3897170''>not</span>
  <span m=''3897350''>on</span> <span m=''3897440''>the</span> <span m=''3897510''>stack,</span>
  <span m=''3898240''>because</span> <span m=''3898660''>B</span> <span m=''3898810''>has</span>
  <span m=''3898970''>been</span> <span m=''3899120''>popped</span> <span m=''3899480''>off</span>
  <span m=''3899710''>at</span> <span m=''3899820''>that</span> <span m=''3900060''>point</span>
  <span m=''3900910''>and</span> <span m=''3901090''>so</span> <span m=''3901290''>forth.</span>
  <span m=''3902250''>So</span> <span m=''3902420''>this</span> <span m=''3902610''>is</span>
  <span m=''3902760''>basically</span> <span m=''3903320''>the</span> <span m=''3903460''>normal</span>
  <span m=''3903950''>rule,</span> <span m=''3904400''>the</span> <span m=''3904490''>normal</span>
  <span m=''3904790''>views</span> <span m=''3905190''>of</span> <span m=''3905270''>stack</span>
  <span m=''3906180''>that</span> <span m=''3906380''>you</span> <span m=''3906480''>get</span>
  <span m=''3906720''>in</span> <span m=''3906860''>C</span> <span m=''3907150''>or</span>
  <span m=''3909200''>C++.</span> <span m=''3909790''>In</span> <span m=''3910050''>Cilk++,
  you</span> <span m=''3910170''>get</span> <span m=''3910320''>exactly</span> <span
  m=''3910960''>the</span> <span m=''3911070''>same</span> <span m=''3911450''>behavior</span>
  <span m=''3913390''>except</span> <span m=''3913930''>that</span> <span m=''3914380''>multiple</span>
  <span m=''3914940''>ones</span> <span m=''3915240''>of</span> <span m=''3915340''>these</span>
  <span m=''3915580''>views</span> <span m=''3915960''>may</span> <span m=''3916880''>exist</span>
  <span m=''3917420''>at</span> <span m=''3917660''>the</span> <span m=''3917740''>same</span>
  <span m=''3918110''>time.</span> <span m=''3920260''>So</span> <span m=''3920920''>if,</span>
  <span m=''3921120''>for</span> <span m=''3921230''>example,</span> <span m=''3921630''>B</span>
  <span m=''3921910''>and</span> <span m=''3922040''>C</span> <span m=''3922360''>are</span>
  <span m=''3922440''>both</span> <span m=''3922840''>executing</span> <span m=''3923420''>at</span>
  <span m=''3923510''>the</span> <span m=''3923590''>same</span> <span m=''3923900''>time,</span>
  <span m=''3924960''>they</span> <span m=''3925120''>each</span> <span m=''3925390''>will</span>
  <span m=''3925540''>see</span> <span m=''3925800''>their</span> <span m=''3926000''>own</span>
  <span m=''3926240''>stack</span> <span m=''3926690''>space</span> <span m=''3927390''>and</span>
  <span m=''3927770''>a</span> <span m=''3927990''>stack</span> <span m=''3928400''>space.</span>
  <span m=''3930600''>And</span> <span m=''3930730''>so</span> <span m=''3930850''>the</span>
  <span m=''3930950''>cactus</span> <span m=''3931430''>stack</span> <span m=''3931760''>maintains</span>
  <span m=''3932830''>that</span> <span m=''3933150''>fiction</span> <span m=''3933730''>that</span>
  <span m=''3934220''>you can sort of</span> <span m=''3934620''>look</span> <span
  m=''3934760''>at</span> <span m=''3934910''>your</span> <span m=''3935090''>ancestors</span>
  <span m=''3935800''>and</span> <span m=''3935910''>see</span> <span m=''3936090''>your</span>
  <span m=''3936280''>ancestors,</span> <span m=''3936810''>but</span> <span m=''3936970''>now</span>
  <span m=''3937190''>it''s</span> <span m=''3937330''>maintained.</span> <span m=''3938280''>It''s</span>
  <span m=''3938400''>called</span> <span m=''3938600''>a</span> <span m=''3938660''>cactus</span>
  <span m=''3939180''>stack</span> <span m=''3939550''>because</span> <span m=''3940560''>it''s</span>
  <span m=''3941280''>kind</span> <span m=''3941520''>of</span> <span m=''3941600''>like</span>
  <span m=''3941810''>a</span> <span m=''3941890''>tree</span> <span m=''3942220''>structure</span>
  <span m=''3944310''>upside</span> <span m=''3944750''>down,</span> <span m=''3944970''>like</span>
  <span m=''3945260''>a</span> <span m=''3946460''>what''s</span> <span m=''3946660''>the</span>
  <span m=''3946730''>name</span> <span m=''3946940''>of</span> <span m=''3947000''>that</span>
  <span m=''3947240''>big</span> <span m=''3947410''>cactus</span> <span m=''3947820''>out</span>
  <span m=''3948200''>West?</span> <span m=''3949310''>Yes,</span> <span m=''3949640''>saguaro.</span>
  <span m=''3950105''>The saguaro</span> <span m=''3950510''>cactus,</span> <span
  m=''3951200''>yep.</span> <span m=''3952490''>This</span> <span m=''3952810''>kind</span>
  <span m=''3953010''>of</span> <span m=''3953070''>looks</span> <span m=''3953310''>like</span>
  <span m=''3953520''>that</span> <span m=''3953760''>if</span> <span m=''3953870''>you</span>
  <span m=''3953970''>look</span> <span m=''3954080''>at</span> <span m=''3954730''>the</span>
  <span m=''3954820''>stacks.</span> </p><p><span m=''3958110''>This</span> <span
  m=''3958720''>leads</span> <span m=''3959160''>to</span> <span m=''3959610''>a</span>
  <span m=''3959740''>very</span> <span m=''3960160''>powerful</span> <span m=''3962470''>bound</span>
  <span m=''3962970''>on</span> <span m=''3963110''>how</span> <span m=''3963230''>much</span>
  <span m=''3963500''>space</span> <span m=''3963940''>your</span> <span m=''3964070''>program</span>
  <span m=''3964530''>is</span> <span m=''3964640''>using.</span> <span m=''3965850''>So</span>
  <span m=''3966100''>normally,</span> <span m=''3966660''>if</span> <span m=''3966790''>you</span>
  <span m=''3966910''>do</span> <span m=''3967150''>a</span> <span m=''3967210''>greedy</span>
  <span m=''3967580''>scheduler,</span> <span m=''3968520''>you</span> <span m=''3968670''>could</span>
  <span m=''3968820''>end</span> <span m=''3969010''>up</span> <span m=''3969160''>using</span>
  <span m=''3969570''>gobs</span> <span m=''3970110''>more</span> <span m=''3970320''>space</span>
  <span m=''3970960''>then</span> <span m=''3971110''>you</span> <span m=''3971220''>would</span>
  <span m=''3971380''>in</span> <span m=''3971500''>a</span> <span m=''3971560''>serial</span>
  <span m=''3971950''>execution,</span> <span m=''3972530''>gobs</span> <span m=''3972820''>more</span>
  <span m=''3972990''>stack</span> <span m=''3973360''>space.</span> <span m=''3975250''>In</span>
  <span m=''3976220''>Cilk++</span> <span m=''3977120''>programs,</span> <span m=''3977600''>you</span>
  <span m=''3977730''>have</span> <span m=''3977870''>a</span> <span m=''3977930''>bound.</span>
  <span m=''3978600''>It''s</span> <span m=''3978880''>p</span> <span m=''3979140''>times</span>
  <span m=''3979500''>s1</span> <span m=''3980630''>is</span> <span m=''3980840''>the</span>
  <span m=''3980920''>maximum</span> <span m=''3981215''>amount of</span> <span m=''3981510''>stack</span>
  <span m=''3981900''>space</span> <span m=''3982320''>you''ll</span> <span m=''3982530''>ever</span>
  <span m=''3982720''>use</span> <span m=''3983830''>where</span> <span m=''3984130''>s1</span>
  <span m=''3984510''>is</span> <span m=''3984660''>the</span> <span m=''3984740''>stack</span>
  <span m=''3985090''>space</span> <span m=''3985420''>used</span> <span m=''3985670''>by</span>
  <span m=''3985850''>serial</span> <span m=''3986280''>execution.</span> <span m=''3987250''>So</span>
  <span m=''3987380''>if</span> <span m=''3987450''>you</span> <span m=''3987600''>can</span>
  <span m=''3987750''>keep</span> <span m=''3988030''>your</span> <span m=''3988240''>serial</span>
  <span m=''3988570''>execution</span> <span m=''3989200''>to</span> <span m=''3989250''>use</span>
  <span m=''3989500''>a</span> <span m=''3989570''>reasonable</span> <span m=''3989950''>amount</span>
  <span m=''3990170''>of</span> <span m=''3990230''>stack</span> <span m=''3990620''>space--</span>
  <span m=''3990910''>and</span> <span m=''3990990''>usually</span> <span m=''3991320''>it</span>
  <span m=''3991430''>does--</span> <span m=''3992270''>then</span> <span m=''3992550''>in</span>
  <span m=''3992650''>parallel,</span> <span m=''3993160''>you</span> <span m=''3993280''>don''t</span>
  <span m=''3993490''>use</span> <span m=''3993690''>more</span> <span m=''3993880''>than</span>
  <span m=''3994080''>p</span> <span m=''3994340''>times</span> <span m=''3994780''>that</span>
  <span m=''3994920''>amount</span> <span m=''3995170''>of</span> <span m=''3995230''>stack</span>
  <span m=''3995550''>space.</span> </p><p><span m=''3996890''>And</span> <span m=''3997000''>the</span>
  <span m=''3997070''>proof</span> <span m=''3997400''>for</span> <span m=''3997500''>that</span>
  <span m=''3997750''>is</span> <span m=''3997830''>sort</span> <span m=''3998020''>of</span>
  <span m=''3998090''>by</span> <span m=''3998300''>induction,</span> <span m=''3999510''>which</span>
  <span m=''3999890''>basically</span> <span m=''4000400''>says</span> <span m=''4001950''>there''s</span>
  <span m=''4002110''>a</span> <span m=''4002170''>property</span> <span m=''4002610''>called</span>
  <span m=''4002850''>the</span> <span m=''4002910''>Busy</span> <span m=''4003240''>Leaves</span>
  <span m=''4005850''>Property</span> <span m=''4007610''>that</span> <span m=''4007780''>says</span>
  <span m=''4008100''>that</span> <span m=''4008310''>if</span> <span m=''4008480''>you</span>
  <span m=''4008640''>have</span> <span m=''4008800''>a</span> <span m=''4008890''>leaf</span>
  <span m=''4010270''>that''s</span> <span m=''4010530''>being</span> <span m=''4010960''>worked</span>
  <span m=''4011300''>on</span> <span m=''4011530''>but</span> <span m=''4011670''>hasn''t</span>
  <span m=''4013070''>been</span> <span m=''4013290''>completed--</span> <span m=''4014810''>so</span>
  <span m=''4014990''>I''ve</span> <span m=''4015160''>indicated</span> <span m=''4015610''>those</span>
  <span m=''4015850''>by</span> <span m=''4016020''>the</span> <span m=''4016130''>purple</span>
  <span m=''4016540''>and</span> <span m=''4016650''>pink</span> <span m=''4016890''>ones--</span>
  <span m=''4017720''>then</span> <span m=''4017880''>if</span> <span m=''4018000''>it''s</span>
  <span m=''4018160''>a</span> <span m=''4018230''>leaf,</span> <span m=''4019180''>it</span>
  <span m=''4019370''>has</span> <span m=''4019750''>a</span> <span m=''4019900''>worker</span>
  <span m=''4020350''>executing</span> <span m=''4020930''>on</span> <span m=''4021090''>it.</span>
  <span m=''4022720''>And</span> <span m=''4022890''>so</span> <span m=''4023050''>therefore,</span>
  <span m=''4023650''>if</span> <span m=''4023760''>you</span> <span m=''4023890''>look</span>
  <span m=''4024340''>at</span> <span m=''4024910''>how</span> <span m=''4025090''>much</span>
  <span m=''4025860''>stack</span> <span m=''4026330''>space you''re</span> <span
  m=''4026610''>using,</span> <span m=''4027000''>each</span> <span m=''4027250''>of</span>
  <span m=''4027340''>these</span> <span m=''4027570''>guys</span> <span m=''4027870''>can</span>
  <span m=''4028000''>trace</span> <span m=''4028420''>up</span> <span m=''4029120''>and</span>
  <span m=''4029280''>they</span> <span m=''4029360''>may</span> <span m=''4029600''>double</span>
  <span m=''4029990''>count</span> <span m=''4031090''>the</span> <span m=''4031400''>stack</span>
  <span m=''4031790''>space,</span> <span m=''4032620''>but</span> <span m=''4032830''>it''ll</span>
  <span m=''4033020''>still</span> <span m=''4033300''>be</span> <span m=''4033440''>bounded</span>
  <span m=''4034040''>by p</span> <span m=''4034550''>times</span> <span m=''4035030''>the</span>
  <span m=''4035120''>depth</span> <span m=''4035440''>that</span> <span m=''4035580''>they''re
  at,</span> <span m=''4035855''>or</span> <span m=''4036130''>p</span> <span m=''4036320''>times</span>
  <span m=''4036670''>s1,</span> <span m=''4037750''>which</span> <span m=''4037930''>is</span>
  <span m=''4038040''>the</span> <span m=''4038120''>maximum</span> <span m=''4038580''>amount.</span>
  <span m=''4040620''>So</span> <span m=''4041840''>it</span> <span m=''4042020''>has</span>
  <span m=''4042280''>good</span> <span m=''4042490''>space</span> <span m=''4042890''>bounds.</span>
  <span m=''4043160''>That''s</span> <span m=''4043390''>not</span> <span m=''4043640''>so</span>
  <span m=''4043820''>crucial</span> <span m=''4044180''>for</span> <span m=''4044310''>you</span>
  <span m=''4044430''>folks</span> <span m=''4044830''>to</span> <span m=''4045400''>know</span>
  <span m=''4045610''>as</span> <span m=''4045670''>a</span> <span m=''4045730''>practical</span>
  <span m=''4046100''>matter,</span> <span m=''4046380''>but</span> <span m=''4047140''>it</span>
  <span m=''4047260''>would</span> <span m=''4047440''>be</span> <span m=''4047630''>if</span>
  <span m=''4047770''>this</span> <span m=''4047960''>didn''t</span> <span m=''4048150''>hold.</span>
  <span m=''4049690''>If</span> <span m=''4049860''>this</span> <span m=''4050030''>didn''t</span>
  <span m=''4050210''>hold,</span> <span m=''4050530''>then</span> <span m=''4051240''>you</span>
  <span m=''4051390''>would</span> <span m=''4051540''>have</span> <span m=''4051690''>more</span>
  <span m=''4051940''>programming</span> <span m=''4052410''>problems</span> <span
  m=''4052860''>than</span> <span m=''4052950''>you''ll</span> <span m=''4053090''>have.</span>
  </p><p><span m=''4057080''>The</span> <span m=''4057430''>implications</span> <span
  m=''4058700''>of</span> <span m=''4058800''>this</span> <span m=''4058950''>work</span>
  <span m=''4059190''>stealing</span> <span m=''4059550''>scheduler</span> <span m=''4060460''>is</span>
  <span m=''4060780''>interesting</span> <span m=''4061360''>from</span> <span m=''4061660''>the</span>
  <span m=''4063860''>linguistic</span> <span m=''4064440''>point</span> <span m=''4064700''>of</span>
  <span m=''4064760''>view,</span> <span m=''4065920''>because</span> <span m=''4066300''>you</span>
  <span m=''4066440''>can</span> <span m=''4066600''>write a</span> <span m=''4066920''>code</span>
  <span m=''4067240''>like</span> <span m=''4067470''>this,</span> <span m=''4068020''>so</span>
  <span m=''4068190''>for i</span> <span m=''4068690''>gets</span> <span m=''4068910''>one</span>
  <span m=''4069180''>to</span> <span m=''4069290''>a</span> <span m=''4069410''>billion,</span>
  <span m=''4072900''>spawn</span> <span m=''4073830''>some sub-routine</span> <span
  m=''4074460''>foo</span> <span m=''4074740''>of</span> <span m=''4075070''>i</span>
  <span m=''4076360''>and</span> <span m=''4076480''>then</span> <span m=''4076690''>sync.</span>
  <span m=''4078000''>So</span> <span m=''4078260''>one</span> <span m=''4078590''>way</span>
  <span m=''4078780''>of</span> <span m=''4078880''>executing</span> <span m=''4079170''>this,</span>
  <span m=''4079650''>the</span> <span m=''4079740''>way</span> <span m=''4079930''>that</span>
  <span m=''4080040''>the</span> <span m=''4080970''>work</span> <span m=''4081210''>sharing</span>
  <span m=''4081920''>schedulers</span> <span m=''4082530''>tend</span> <span m=''4082740''>to</span>
  <span m=''4082820''>do</span> <span m=''4082930''>this,</span> <span m=''4083460''>is</span>
  <span m=''4083590''>they</span> <span m=''4083710''>say</span> <span m=''4083990''>oh,</span>
  <span m=''4084310''>I''ve</span> <span m=''4084750''>got</span> <span m=''4085060''>a</span>
  <span m=''4085180''>billion</span> <span m=''4086230''>tasks</span> <span m=''4086850''>to</span>
  <span m=''4086970''>do.</span> <span m=''4088600''>So</span> <span m=''4088760''>let</span>
  <span m=''4088870''>me</span> <span m=''4089020''>create</span> <span m=''4089490''>a</span>
  <span m=''4089570''>billion</span> <span m=''4090150''>tasks</span> <span m=''4091700''>and</span>
  <span m=''4091880''>now</span> <span m=''4092080''>schedule</span> <span m=''4092560''>them</span>
  <span m=''4093090''>and</span> <span m=''4093210''>the</span> <span m=''4093270''>space</span>
  <span m=''4093770''>just</span> <span m=''4094000''>vrooms</span> <span m=''4094690''>to</span>
  <span m=''4094810''>store</span> <span m=''4095180''>all</span> <span m=''4095310''>those</span>
  <span m=''4095530''>billion</span> <span m=''4095860''>tasks,</span> <span m=''4096180''>it</span>
  <span m=''4096500''>gets</span> <span m=''4097060''>to</span> <span m=''4097130''>be</span>
  <span m=''4097260''>huge.</span> <span m=''4098100''>Now of</span> <span m=''4098310''>course,</span>
  <span m=''4098540''>they</span> <span m=''4098680''>have</span> <span m=''4098830''>some</span>
  <span m=''4099029''>strategies</span> <span m=''4099569''>they</span> <span m=''4099710''>can</span>
  <span m=''4099850''>use</span> <span m=''4100080''>to</span> <span m=''4100200''>reduce</span>
  <span m=''4100620''>it</span> <span m=''4101000''>by</span> <span m=''4101180''>bunching</span>
  <span m=''4101609''>tasks</span> <span m=''4102060''>together</span> <span m=''4102450''>and</span>
  <span m=''4102580''>so</span> <span m=''4102710''>forth.</span> <span m=''4102939''>But</span>
  <span m=''4103080''>in</span> <span m=''4103240''>principle,</span> <span m=''4104300''>you</span>
  <span m=''4104420''>got</span> <span m=''4104609''>a</span> <span m=''4104660''>billion</span>
  <span m=''4105090''>pieces</span> <span m=''4105490''>of</span> <span m=''4105590''>work</span>
  <span m=''4105830''>to</span> <span m=''4105930''>do</span> <span m=''4106689''>even</span>
  <span m=''4107029''>if</span> <span m=''4107120''>you</span> <span m=''4107279''>execute</span>
  <span m=''4107779''>on</span> <span m=''4107939''>one</span> <span m=''4108140''>processor.</span>
  <span m=''4110630''>Whereas</span> <span m=''4111979''>in the</span> <span m=''4112300''>work</span>
  <span m=''4112590''>stealing</span> <span m=''4112979''>type</span> <span m=''4113229''>execution,</span>
  <span m=''4113890''>what</span> <span m=''4114010''>happens</span> <span m=''4114580''>is</span>
  <span m=''4115240''>you</span> <span m=''4115380''>execute</span> <span m=''4115979''>this</span>
  <span m=''4116189''>in</span> <span m=''4116330''>fact</span> <span m=''4116850''>depth</span>
  <span m=''4117029''>research.</span> <span m=''4118180''>So</span> <span m=''4118319''>basically,</span>
  <span m=''4118850''>you''re</span> <span m=''4118990''>going</span> <span m=''4119149''>to</span>
  <span m=''4119740''>execute</span> <span m=''4120250''>foo</span> <span m=''4120590''>of</span>
  <span m=''4120940''>1</span> <span m=''4122060''>and</span> <span m=''4122279''>then</span>
  <span m=''4122420''>you''ll</span> <span m=''4122550''>return.</span> <span m=''4124620''>And</span>
  <span m=''4124790''>then</span> <span m=''4124950''>you''ll</span> <span m=''4125720''>increment</span>
  <span m=''4126220''>i</span> <span m=''4126590''>and you''ll</span> <span m=''4126880''>execute</span>
  <span m=''4127350''>foo</span> <span m=''4127750''>of</span> <span m=''4128229''>2,
  and you''ll</span> <span m=''4128569''>return.</span> <span m=''4129670''>At</span>
  <span m=''4129859''>no</span> <span m=''4130069''>time</span> <span m=''4130420''>are</span>
  <span m=''4130500''>you</span> <span m=''4130670''>using</span> <span m=''4131109''>more</span>
  <span m=''4131310''>than</span> <span m=''4131600''>in</span> <span m=''4131740''>this</span>
  <span m=''4131890''>case</span> <span m=''4132279''>two</span> <span m=''4132569''>stack</span>
  <span m=''4132970''>frames,</span> <span m=''4133340''>one</span> <span m=''4133630''>for</span>
  <span m=''4134439''>this</span> <span m=''4134910''>routine</span> <span m=''4135490''>here</span>
  <span m=''4135840''>and</span> <span m=''4135960''>one</span> <span m=''4136170''>for</span>
  <span m=''4136319''>foo</span> <span m=''4137850''>because</span> <span m=''4138029''>you</span>
  <span m=''4138109''>basically</span> <span m=''4138580''>keep</span> <span m=''4138770''>going</span>
  <span m=''4139000''>up.</span> <span m=''4139240''>You''re</span> <span m=''4139340''>using</span>
  <span m=''4139830''>your</span> <span m=''4140000''>stack</span> <span m=''4140410''>up</span>
  <span m=''4140510''>on</span> <span m=''4140660''>demand,</span> <span m=''4142399''>rather</span>
  <span m=''4142770''>than</span> <span m=''4142970''>creating</span> <span m=''4143430''>all</span>
  <span m=''4143689''>the</span> <span m=''4143770''>work</span> <span m=''4144050''>up</span>
  <span m=''4144200''>front</span> <span m=''4144950''>to</span> <span m=''4145060''>be</span>
  <span m=''4145189''>scheduled.</span> </p><p><span m=''4148090''>So the</span> <span
  m=''4148279''>work</span> <span m=''4148500''>stealing</span> <span m=''4148770''>scheduler</span>
  <span m=''4149120''>is</span> <span m=''4149279''>very</span> <span m=''4149550''>good</span>
  <span m=''4149720''>from</span> <span m=''4149840''>that</span> <span m=''4150050''>point</span>
  <span m=''4150270''>of view.</span> <span m=''4150720''>The</span> <span m=''4150850''>tricky</span>
  <span m=''4151270''>thing</span> <span m=''4151529''>for</span> <span m=''4151670''>people
  to</span> <span m=''4151930''>understand</span> <span m=''4152689''>is</span> <span
  m=''4153370''>that</span> <span m=''4153600''>if</span> <span m=''4153890''>executing</span>
  <span m=''4154470''>on</span> <span m=''4154580''>multiple</span> <span m=''4154979''>processors,</span>
  <span m=''4155670''>when</span> <span m=''4155819''>you</span> <span m=''4155979''>do</span>
  <span m=''4156149''>Cilk</span> <span m=''4156520''>spawn,</span> <span m=''4159310''>the</span>
  <span m=''4159420''>processor,</span> <span m=''4160130''>the</span> <span m=''4160250''>worker</span>
  <span m=''4160640''>that</span> <span m=''4160779''>you''re</span> <span m=''4160960''>running</span>
  <span m=''4161290''>on,</span> <span m=''4161569''>is</span> <span m=''4161779''>going</span>
  <span m=''4161890''>to</span> <span m=''4161950''>execute</span> <span m=''4162490''>foo</span>
  <span m=''4162830''>of</span> <span m=''4163150''>1.</span> <span m=''4165760''>The</span>
  <span m=''4165890''>next</span> <span m=''4166279''>statement--</span> <span m=''4166859''>which</span>
  <span m=''4167020''>would</span> <span m=''4167130''>basically</span> <span m=''4167580''>be</span>
  <span m=''4167729''>incrementing</span> <span m=''4168160''>the</span> <span m=''4168270''>counter</span>
  <span m=''4168700''>and</span> <span m=''4168800''>so</span> <span m=''4168990''>forth--</span>
  <span m=''4170720''>is</span> <span m=''4170910''>executed</span> <span m=''4171500''>by</span>
  <span m=''4171649''>whatever</span> <span m=''4172130''>processor</span> <span m=''4172680''>comes</span>
  <span m=''4172960''>in</span> <span m=''4173090''>and</span> <span m=''4173229''>steals</span>
  <span m=''4173910''>that</span> <span m=''4175229''>continuation.</span> <span m=''4180090''>So
  if</span> <span m=''4180149''>you</span> <span m=''4180250''>had</span> <span m=''4180439''>two</span>
  <span m=''4180689''>processors,</span> <span m=''4182160''>they''re</span> <span
  m=''4182340''>each</span> <span m=''4182609''>going</span> <span m=''4182700''>to</span>
  <span m=''4182790''>basically</span> <span m=''4183609''>be</span> <span m=''4183899''>executing.</span>
  <span m=''4184770''>The</span> <span m=''4184990''>first</span> <span m=''4185220''>processor</span>
  <span m=''4185800''>isn''t</span> <span m=''4186130''>the</span> <span m=''4186220''>one</span>
  <span m=''4186420''>that</span> <span m=''4186550''>excuse</span> <span m=''4187080''>everything</span>
  <span m=''4187540''>in</span> <span m=''4187620''>this</span> <span m=''4187859''>function.</span>
  <span m=''4188500''>This</span> <span m=''4188729''>function</span> <span m=''4189060''>has</span>
  <span m=''4189340''>its</span> <span m=''4189460''>execution</span> <span m=''4190109''>shared,</span>
  <span m=''4191120''>the</span> <span m=''4191210''>strands</span> <span m=''4191630''>are</span>
  <span m=''4191680''>going</span> <span m=''4191760''>to</span> <span m=''4191800''>be</span>
  <span m=''4191890''>shared</span> <span m=''4192819''>where</span> <span m=''4192950''>the</span>
  <span m=''4193040''>first</span> <span m=''4193350''>part</span> <span m=''4193540''>of</span>
  <span m=''4193630''>it</span> <span m=''4193680''>would</span> <span m=''4193779''>be</span>
  <span m=''4193910''>done</span> <span m=''4194120''>by</span> <span m=''4194240''>processor</span>
  <span m=''4194790''>one</span> <span m=''4195100''>and</span> <span m=''4195190''>the</span>
  <span m=''4195280''>latter</span> <span m=''4195610''>part</span> <span m=''4195810''>of
  it</span> <span m=''4195880''>would</span> <span m=''4196050''>be</span> <span m=''4196170''>done</span>
  <span m=''4196370''>by</span> <span m=''4196510''>processor</span> <span m=''4197100''>two.</span>
  <span m=''4198270''>And</span> <span m=''4198390''>then</span> <span m=''4198540''>when</span>
  <span m=''4198780''>processor</span> <span m=''4199270''>one</span> <span m=''4199480''>finishes</span>
  <span m=''4200000''>this</span> <span m=''4200190''>off,</span> <span m=''4200670''>it</span>
  <span m=''4200830''>might</span> <span m=''4201040''>go</span> <span m=''4201160''>back</span>
  <span m=''4201460''>and</span> <span m=''4201760''>steal</span> <span m=''4202180''>back</span>
  <span m=''4203590''>from</span> <span m=''4203840''>processor</span> <span m=''4204380''>two.</span>
  <span m=''4207150''>So</span> <span m=''4207700''>the</span> <span m=''4207970''>important</span>
  <span m=''4208240''>thing</span> <span m=''4208330''>there</span> <span m=''4208580''>is</span>
  <span m=''4208710''>it''s</span> <span m=''4208900''>generating</span> <span m=''4209490''>its</span>
  <span m=''4209650''>stack</span> <span m=''4210040''>needs</span> <span m=''4210600''>sort</span>
  <span m=''4210820''>of</span> <span m=''4211630''>on</span> <span m=''4211850''>demand</span>
  <span m=''4213700''>rather</span> <span m=''4214050''>than</span> <span m=''4214250''>all</span>
  <span m=''4214540''>up</span> <span m=''4214710''>front,</span> <span m=''4215790''>and</span>
  <span m=''4215990''>that</span> <span m=''4216240''>keeps</span> <span m=''4216580''>the</span>
  <span m=''4216710''>amount</span> <span m=''4217090''>of</span> <span m=''4217440''>stack</span>
  <span m=''4217780''>space</span> <span m=''4218650''>small</span> <span m=''4219410''>as</span>
  <span m=''4219630''>it</span> <span m=''4219720''>executes.</span> </p><p><span
  m=''4221250''>So</span> <span m=''4221400''>the</span> <span m=''4221480''>moral</span>
  <span m=''4221970''>is</span> <span m=''4222110''>it''s</span> <span m=''4222290''>better</span>
  <span m=''4222560''>to</span> <span m=''4222650''>steal</span> <span m=''4222990''>your</span>
  <span m=''4223160''>parents</span> <span m=''4223640''>from</span> <span m=''4223800''>their</span>
  <span m=''4223950''>children</span> <span m=''4225070''>than</span> <span m=''4225200''>stealing</span>
  <span m=''4225620''>children</span> <span m=''4226100''>from</span> <span m=''4226350''>their</span>
  <span m=''4226500''>parents.</span> <span m=''4230940''>So</span> <span m=''4231240''>that''s</span>
  <span m=''4231510''>the</span> <span m=''4231610''>advantage</span> <span m=''4232160''>of</span>
  <span m=''4232270''>doing</span> <span m=''4232520''>this</span> <span m=''4232960''>sort</span>
  <span m=''4233140''>of</span> <span m=''4233210''>parent</span> <span m=''4233710''>stealing,</span>
  <span m=''4233990''>because</span> <span m=''4234130''>you''re</span> <span m=''4234270''>always</span>
  <span m=''4234620''>doing</span> <span m=''4234930''>the</span> <span m=''4235030''>frame</span>
  <span m=''4235890''>which</span> <span m=''4236150''>is</span> <span m=''4236270''>an</span>
  <span m=''4236380''>ancestor</span> <span m=''4237060''>of</span> <span m=''4237150''>where</span>
  <span m=''4237320''>that</span> <span m=''4237590''>worker</span> <span m=''4238560''>is</span>
  <span m=''4238750''>working</span> <span m=''4240070''>and</span> <span m=''4240140''>that</span>
  <span m=''4240310''>means</span> <span m=''4240490''>resuming</span> <span m=''4241120''>a</span>
  <span m=''4241810''>function</span> <span m=''4242300''>right</span> <span m=''4242540''>in</span>
  <span m=''4242640''>the</span> <span m=''4242720''>middle</span> <span m=''4243820''>on</span>
  <span m=''4244020''>a</span> <span m=''4244050''>different</span> <span m=''4244380''>processor.</span>
  <span m=''4244920''>That''s</span> <span m=''4245110''>kind</span> <span m=''4245210''>of</span>
  <span m=''4245320''>the</span> <span m=''4245400''>magic</span> <span m=''4245840''>of</span>
  <span m=''4245910''>the</span> <span m=''4246010''>technologies</span> <span m=''4246330''>is</span>
  <span m=''4246650''>how</span> <span m=''4246820''>do</span> <span m=''4246900''>you</span>
  <span m=''4247110''>actually</span> <span m=''4247920''>move</span> <span m=''4248190''>a</span>
  <span m=''4248630''>stack</span> <span m=''4248950''>frame</span> <span m=''4249200''>from</span>
  <span m=''4249360''>one</span> <span m=''4249540''>place</span> <span m=''4249830''>to</span>
  <span m=''4249990''>another</span> <span m=''4250570''>and</span> <span m=''4250710''>resume</span>
  <span m=''4251090''>it</span> <span m=''4251180''>in</span> <span m=''4251320''>the</span>
  <span m=''4251400''>middle?</span> </p><p><span m=''4255560''>Let''s</span> <span
  m=''4255810''>finish</span> <span m=''4256120''>up</span> <span m=''4256270''>here</span>
  <span m=''4256410''>with</span> <span m=''4256510''>a</span> <span m=''4256610''>chess</span>
  <span m=''4256920''>lesson.</span> <span m=''4257640''>I</span> <span m=''4258080''>promised</span>
  <span m=''4258440''>a</span> <span m=''4258540''>chess</span> <span m=''4258990''>lesson,</span>
  <span m=''4259080''>so</span> <span m=''4259230''>we</span> <span m=''4259310''>might</span>
  <span m=''4259630''>as well do</span> <span m=''4259760''>some</span> <span m=''4260390''>fun</span>
  <span m=''4260640''>and</span> <span m=''4260780''>games.</span> <span m=''4262440''>We</span>
  <span m=''4262600''>have</span> <span m=''4262710''>a</span> <span m=''4262760''>lot</span>
  <span m=''4263000''>of</span> <span m=''4263070''>experience</span> <span m=''4263590''>at</span>
  <span m=''4263670''>MIT</span> <span m=''4264090''>with</span> <span m=''4264240''>chess</span>
  <span m=''4264510''>programs.</span> <span m=''4266160''>We''ve</span> <span m=''4267180''>had</span>
  <span m=''4271140''>a</span> <span m=''4271250''>lot</span> <span m=''4271470''>of</span>
  <span m=''4271530''>success,</span> <span m=''4273480''>probably</span> <span m=''4273790''>our</span>
  <span m=''4273920''>closest</span> <span m=''4274430''>one</span> <span m=''4274630''>was</span>
  <span m=''4274770''>Star</span> <span m=''4275140''>Socrates</span> <span m=''4275650''>2.0,</span>
  <span m=''4277010''>which</span> <span m=''4277320''>took</span> <span m=''4277520''>second</span>
  <span m=''4277890''>place</span> <span m=''4278410''>in</span> <span m=''4278660''>the</span>
  <span m=''4278770''>world</span> <span m=''4279010''>computer</span> <span m=''4279350''>chess</span>
  <span m=''4279830''>championship</span> <span m=''4281020''>running</span> <span
  m=''4281340''>on</span> <span m=''4281610''>an</span> <span m=''4281790''>1824</span>
  <span m=''4282990''>node</span> <span m=''4283420''>Intel</span> <span m=''4283850''>Paragon,</span>
  <span m=''4284740''>so a</span> <span m=''4284890''>big</span> <span m=''4285110''>supercomputer</span>
  <span m=''4287330''>running</span> <span m=''4287790''>with</span> <span m=''4287880''>a</span>
  <span m=''4288475''>Cilk scheduler.</span> <span m=''4288980''>We</span> <span m=''4289210''>actually</span>
  <span m=''4289630''>almost</span> <span m=''4290030''>won</span> <span m=''4290330''>that</span>
  <span m=''4290570''>competition,</span> <span m=''4292380''>and</span> <span m=''4293150''>it''s</span>
  <span m=''4293410''>a</span> <span m=''4293620''>sad</span> <span m=''4293990''>story</span>
  <span m=''4294340''>that</span> <span m=''4294490''>maybe</span> <span m=''4294660''>be</span>
  <span m=''4295140''>sometime</span> <span m=''4296020''>around</span> <span m=''4297630''>dinner</span>
  <span m=''4297920''>or</span> <span m=''4298000''>something</span> <span m=''4298360''>I</span>
  <span m=''4298450''>will</span> <span m=''4299260''>tell</span> <span m=''4299500''>you</span>
  <span m=''4299720''>the</span> <span m=''4299920''>sad</span> <span m=''4300260''>story</span>
  <span m=''4300630''>behind</span> <span m=''4301020''>it,</span> <span m=''4301130''>but</span>
  <span m=''4301240''>I''m</span> <span m=''4301320''>not</span> <span m=''4301460''>going</span>
  <span m=''4301540''>to</span> <span m=''4301630''>tell</span> <span m=''4301810''>you</span>
  <span m=''4302330''>why</span> <span m=''4302570''>we</span> <span m=''4302710''>didn''t</span>
  <span m=''4302940''>take</span> <span m=''4303170''>first</span> <span m=''4303510''>place.</span>
  <span m=''4305940''>And</span> <span m=''4306100''>we''ve</span> <span m=''4306200''>had</span>
  <span m=''4306330''>a</span> <span m=''4306460''>bunch</span> <span m=''4306730''>of</span>
  <span m=''4306840''>other</span> <span m=''4308160''>successes</span> <span m=''4308790''>over</span>
  <span m=''4308980''>the</span> <span m=''4309080''>years.</span> <span m=''4310030''>Right</span>
  <span m=''4310240''>now</span> <span m=''4310450''>our</span> <span m=''4310590''>chess</span>
  <span m=''4310910''>programming</span> <span m=''4311400''>is</span> <span m=''4311560''>dormant,</span>
  <span m=''4311940''>we''re</span> <span m=''4312040''>not</span> <span m=''4312330''>doing</span>
  <span m=''4312570''>that</span> <span m=''4312770''>in</span> <span m=''4312850''>my</span>
  <span m=''4313010''>group</span> <span m=''4313280''>anymore,</span> <span m=''4313680''>but</span>
  <span m=''4314950''>in</span> <span m=''4315070''>the</span> <span m=''4315160''>past,</span>
  <span m=''4315560''>we</span> <span m=''4315680''>had</span> <span m=''4315850''>some</span>
  <span m=''4315990''>very</span> <span m=''4316220''>strong</span> <span m=''4317110''>chess</span>
  <span m=''4317370''>playing</span> <span m=''4317620''>programs.</span> </p><p><span
  m=''4320580''>So</span> <span m=''4320780''>what</span> <span m=''4320990''>we</span>
  <span m=''4321120''>did</span> <span m=''4322220''>with</span> <span m=''4322840''>Star</span>
  <span m=''4323190''>Socrates,</span> <span m=''4325150''>which</span> <span m=''4325500''>is</span>
  <span m=''4325610''>one</span> <span m=''4325760''>of</span> <span m=''4325860''>our</span>
  <span m=''4325990''>programs,</span> <span m=''4327090''>was</span> <span m=''4327370''>we</span>
  <span m=''4327470''>wanted</span> <span m=''4327790''>to</span> <span m=''4327890''>understand</span>
  <span m=''4329840''>the</span> <span m=''4330000''>Cilk</span> <span m=''4330290''>scheduler.</span>
  <span m=''4331880''>And</span> <span m=''4332050''>so</span> <span m=''4332180''>what</span>
  <span m=''4332310''>we</span> <span m=''4332410''>did</span> <span m=''4332620''>is</span>
  <span m=''4332750''>we</span> <span m=''4332900''>ran</span> <span m=''4333210''>a</span>
  <span m=''4333260''>whole</span> <span m=''4333510''>bunch</span> <span m=''4333770''>of</span>
  <span m=''4333900''>different</span> <span m=''4334300''>positions</span> <span
  m=''4335070''>on</span> <span m=''4335260''>different</span> <span m=''4335580''>numbers</span>
  <span m=''4335900''>of</span> <span m=''4335980''>processors</span> <span m=''4338440''>which</span>
  <span m=''4338610''>ran</span> <span m=''4338860''>for</span> <span m=''4339000''>different</span>
  <span m=''4339320''>amounts</span> <span m=''4339670''>of</span> <span m=''4339760''>time.</span>
  <span m=''4341540''>We</span> <span m=''4341630''>wanted</span> <span m=''4341780''>to</span>
  <span m=''4341860''>plot</span> <span m=''4342180''>them</span> <span m=''4342340''>all</span>
  <span m=''4342890''>on</span> <span m=''4342990''>the</span> <span m=''4343090''>same</span>
  <span m=''4343430''>chart,</span> <span m=''4345190''>and</span> <span m=''4345280''>here''s</span>
  <span m=''4345540''>our</span> <span m=''4345640''>strategy</span> <span m=''4346250''>for</span>
  <span m=''4346410''>doing</span> <span m=''4346720''>it.</span> <span m=''4347340''>What</span>
  <span m=''4347620''>decided</span> <span m=''4348090''>to</span> <span m=''4348180''>do</span>
  <span m=''4348490''>was</span> <span m=''4349400''>do</span> <span m=''4349600''>a</span>
  <span m=''4349740''>standard</span> <span m=''4350340''>speedup</span> <span m=''4350890''>curve.</span>
  <span m=''4351230''>So a</span> <span m=''4351560''>standard</span> <span m=''4352000''>speedup</span>
  <span m=''4352450''>curve</span> <span m=''4352750''>says</span> <span m=''4353430''>let''s</span>
  <span m=''4353730''>plot</span> <span m=''4354130''>the</span> <span m=''4354200''>number</span>
  <span m=''4354430''>of</span> <span m=''4354500''>processors</span> <span m=''4355230''>along</span>
  <span m=''4355590''>this</span> <span m=''4355790''>axis</span> <span m=''4356640''>and</span>
  <span m=''4356770''>the</span> <span m=''4356840''>speed</span> <span m=''4357260''>up</span>
  <span m=''4357400''>along</span> <span m=''4357750''>that</span> <span m=''4357990''>axis.</span>
  <span m=''4360700''>But</span> <span m=''4361350''>in</span> <span m=''4361460''>order</span>
  <span m=''4361720''>to</span> <span m=''4361880''>fit</span> <span m=''4362050''>all</span>
  <span m=''4362260''>these</span> <span m=''4362530''>things</span> <span m=''4362810''>on</span>
  <span m=''4362950''>the</span> <span m=''4363210''>same</span> <span m=''4364040''>processor</span>
  <span m=''4364550''>curve,</span> <span m=''4364750''>what</span> <span m=''4364890''>we</span>
  <span m=''4364990''>did</span> <span m=''4365180''>was</span> <span m=''4365350''>we</span>
  <span m=''4365470''>normalize</span> <span m=''4366570''>the</span> <span m=''4366670''>speedup.</span>
  <span m=''4368110''>So</span> <span m=''4368280''>what''s</span> <span m=''4368430''>the</span>
  <span m=''4368590''>maximum</span> <span m=''4368875''>pot?</span> <span m=''4369710''>So</span>
  <span m=''4369880''>here''s</span> <span m=''4370150''>the</span> <span m=''4370220''>speedup.</span>
  <span m=''4370700''>If</span> <span m=''4370800''>you</span> <span m=''4370880''>look</span>
  <span m=''4371070''>the</span> <span m=''4371170''>numerator</span> <span m=''4371740''>here,</span>
  <span m=''4372380''>this</span> <span m=''4372530''>is</span> <span m=''4372690''>the</span>
  <span m=''4372770''>speedup,</span> <span m=''4373110''>T1</span> <span m=''4373570''>over</span>
  <span m=''4373820''>Tp.</span> <span m=''4374280''>What</span> <span m=''4374740''>we</span>
  <span m=''4375020''>did</span> <span m=''4375170''>is</span> <span m=''4375290''>we</span>
  <span m=''4375430''>normalized</span> <span m=''4376380''>by</span> <span m=''4376530''>the</span>
  <span m=''4376680''>parallelism.</span> <span m=''4378540''>So</span> <span m=''4378660''>we</span>
  <span m=''4378740''>said</span> <span m=''4378900''>what</span> <span m=''4379120''>fraction</span>
  <span m=''4380840''>of</span> <span m=''4381080''>perfect</span> <span m=''4381570''>speedup</span>
  <span m=''4382050''>can</span> <span m=''4382210''>we</span> <span m=''4382350''>get?</span>
  </p><p><span m=''4384360''>So</span> <span m=''4384560''>here</span> <span m=''4384800''>one</span>
  <span m=''4385260''>says</span> <span m=''4386200''>that</span> <span m=''4386380''>I</span>
  <span m=''4386490''>got</span> <span m=''4386880''>exactly</span> <span m=''4387690''>a</span>
  <span m=''4388520''>speedup,</span> <span m=''4392100''>this</span> <span m=''4392330''>is</span>
  <span m=''4392380''>the</span> <span m=''4392480''>maximum</span> <span m=''4393020''>possible</span>
  <span m=''4393500''>speed</span> <span m=''4393830''>up</span> <span m=''4393960''>that</span>
  <span m=''4394080''>I</span> <span m=''4394170''>can</span> <span m=''4394790''>get</span>
  <span m=''4394990''>because</span> <span m=''4395910''>the</span> <span m=''4396050''>maximum</span>
  <span m=''4396470''>possible</span> <span m=''4396860''>value</span> <span m=''4397180''>of
  T1</span> <span m=''4397530''>over</span> <span m=''4397730''>p</span> <span m=''4398050''>is</span>
  <span m=''4398370''>T1</span> <span m=''4398560''>over</span> <span m=''4398770''>T</span>
  <span m=''4398970''>infinity.</span> <span m=''4400190''>So</span> <span m=''4400370''>that''s</span>
  <span m=''4400600''>sort</span> <span m=''4400690''>of</span> <span m=''4400790''>the</span>
  <span m=''4400880''>maximum.</span> <span m=''4403400''>On</span> <span m=''4403640''>this</span>
  <span m=''4403880''>axis,</span> <span m=''4404330''>we</span> <span m=''4404440''>said</span>
  <span m=''4404600''>how</span> <span m=''4404740''>many</span> <span m=''4404920''>processors</span>
  <span m=''4405240''>are</span> <span m=''4405560''>you</span> <span m=''4405690''>running</span>
  <span m=''4405980''>on</span> <span m=''4406080''>it?</span> <span m=''4406250''>Well,</span>
  <span m=''4406430''>we</span> <span m=''4406550''>looked</span> <span m=''4406800''>at</span>
  <span m=''4406920''>that</span> <span m=''4407240''>relative</span> <span m=''4407760''>to</span>
  <span m=''4407890''>essentially</span> <span m=''4408430''>the</span> <span m=''4408530''>slackness.</span>
  <span m=''4409760''>So</span> <span m=''4409910''>notice</span> <span m=''4410200''>by</span>
  <span m=''4410330''>normalizing,</span> <span m=''4411150''>we</span> <span m=''4411290''>essentially</span>
  <span m=''4411700''>have</span> <span m=''4411930''>here</span> <span m=''4413730''>the</span>
  <span m=''4413930''>inverse</span> <span m=''4414390''>of</span> <span m=''4414460''>the</span>
  <span m=''4414550''>slackness.</span> <span m=''4415620''>So</span> <span m=''4415900''>1</span>
  <span m=''4416310''>here</span> <span m=''4416610''>says</span> <span m=''4417150''>that</span>
  <span m=''4417620''>I''m</span> <span m=''4417840''>running</span> <span m=''4418120''>on</span>
  <span m=''4418240''>exactly</span> <span m=''4418790''>the</span> <span m=''4418860''>same</span>
  <span m=''4419130''>number</span> <span m=''4419380''>of</span> <span m=''4419450''>processors</span>
  <span m=''4420560''>as</span> <span m=''4420770''>my</span> <span m=''4420910''>parallelism.</span>
  <span m=''4422360''>A</span> <span m=''4422480''>tenth</span> <span m=''4422760''>here</span>
  <span m=''4423020''>says</span> <span m=''4423420''>I''ve</span> <span m=''4423580''>got</span>
  <span m=''4423680''>a</span> <span m=''4423780''>slackness</span> <span m=''4424400''>of</span>
  <span m=''4424510''>10,</span> <span m=''4426630''>I''m</span> <span m=''4426730''>running</span>
  <span m=''4426950''>on</span> <span m=''4427060''>10</span> <span m=''4427400''>times</span>
  <span m=''4428240''>fewer</span> <span m=''4428610''>processors</span> <span m=''4429370''>then</span>
  <span m=''4429510''>parallelism.</span> <span m=''4431250''>Out</span> <span m=''4431480''>here,</span>
  <span m=''4431740''>I''m</span> <span m=''4431870''>saying</span> <span m=''4432520''>I</span>
  <span m=''4432630''>got</span> <span m=''4432840''>way</span> <span m=''4433050''>more</span>
  <span m=''4434210''>processors</span> <span m=''4434900''>than</span> <span m=''4435030''>I</span>
  <span m=''4435170''>have</span> <span m=''4435310''>parallelism.</span> <span m=''4436610''>So</span>
  <span m=''4436740''>I</span> <span m=''4436820''>plotted</span> <span m=''4437270''>all</span>
  <span m=''4437460''>the</span> <span m=''4437530''>points.</span> <span m=''4438200''>So</span>
  <span m=''4438660''>it</span> <span m=''4438850''>doesn''t</span> <span m=''4439090''>show</span>
  <span m=''4439300''>up</span> <span m=''4439420''>very</span> <span m=''4439600''>well</span>
  <span m=''4439820''>here,</span> <span m=''4439990''>but</span> <span m=''4440120''>all</span>
  <span m=''4440380''>those</span> <span m=''4440570''>green</span> <span m=''4441040''>points,</span>
  <span m=''4441470''>there</span> <span m=''4441580''>are a</span> <span m=''4441630''>lot</span>
  <span m=''4441920''>of</span> <span m=''4441980''>green</span> <span m=''4442310''>points</span>
  <span m=''4442600''>here,</span> <span m=''4443210''>that''s</span> <span m=''4443500''>our</span>
  <span m=''4443630''>performance,</span> <span m=''4445510''>measured</span> <span
  m=''4445900''>performance.</span> <span m=''4447200''>You</span> <span m=''4447330''>can</span>
  <span m=''4447430''>sort</span> <span m=''4447770''>of see</span> <span m=''4448110''>they''re</span>
  <span m=''4448370''>green</span> <span m=''4448720''>there,</span> <span m=''4449510''>not</span>
  <span m=''4449730''>the</span> <span m=''4449790''>best</span> <span m=''4450050''>color</span>
  <span m=''4450330''>for</span> <span m=''4450440''>this</span> <span m=''4450620''>projector.</span>
  <span m=''4453910''>So</span> <span m=''4454350''>we</span> <span m=''4454580''>plot</span>
  <span m=''4454920''>on</span> <span m=''4455190''>this</span> <span m=''4456660''>essentially</span>
  <span m=''4457050''>the</span> <span m=''4457160''>Work</span> <span m=''4457500''>Law</span>
  <span m=''4458050''>and</span> <span m=''4458190''>the</span> <span m=''4458250''>Span</span>
  <span m=''4458670''>Law.</span> <span m=''4460090''>So</span> <span m=''4460250''>this</span>
  <span m=''4460430''>is</span> <span m=''4460560''>the</span> <span m=''4460640''>Work</span>
  <span m=''4460950''>Law,</span> <span m=''4461210''>it says</span> <span m=''4461470''>linear</span>
  <span m=''4461780''>speedup,</span> <span m=''4462700''>and</span> <span m=''4462820''>this</span>
  <span m=''4462980''>is</span> <span m=''4463130''>the</span> <span m=''4463210''>Span</span>
  <span m=''4463630''>Law.</span> <span m=''4464560''>And</span> <span m=''4464710''>you</span>
  <span m=''4464830''>can</span> <span m=''4464980''>see</span> <span m=''4465950''>that</span>
  <span m=''4466170''>we''re</span> <span m=''4466350''>getting</span> <span m=''4466760''>very</span>
  <span m=''4467260''>close</span> <span m=''4467840''>to</span> <span m=''4467940''>perfect</span>
  <span m=''4468360''>linear</span> <span m=''4468710''>speedup</span> <span m=''4469880''>as</span>
  <span m=''4470060''>long</span> <span m=''4470470''>as</span> <span m=''4470640''>our</span>
  <span m=''4471650''>slackness</span> <span m=''4472560''>is</span> <span m=''4472840''>10</span>
  <span m=''4473170''>or</span> <span m=''4473330''>greater.</span> <span m=''4475600''>See</span>
  <span m=''4475870''>that?</span> <span m=''4476250''>It''s</span> <span m=''4476400''>hugging</span>
  <span m=''4476830''>that</span> <span m=''4477060''>curve</span> <span m=''4477360''>really</span>
  <span m=''4477630''>tightly.</span> </p><p><span m=''4478500''>As</span> <span m=''4478730''>we</span>
  <span m=''4478900''>approach</span> <span m=''4480450''>a</span> <span m=''4481800''>slackness</span>
  <span m=''4482460''>of</span> <span m=''4482570''>1,</span> <span m=''4485640''>you</span>
  <span m=''4485820''>can</span> <span m=''4485930''>see</span> <span m=''4486180''>that</span>
  <span m=''4488110''>it</span> <span m=''4488280''>starts</span> <span m=''4488570''>to</span>
  <span m=''4488650''>go</span> <span m=''4488910''>away</span> <span m=''4489300''>from</span>
  <span m=''4489510''>the</span> <span m=''4489580''>linear</span> <span m=''4489900''>speedup</span>
  <span m=''4490330''>curve.</span> <span m=''4493410''>So</span> <span m=''4493610''>for</span>
  <span m=''4493830''>this</span> <span m=''4494020''>program,</span> <span m=''4494620''>if</span>
  <span m=''4494750''>you</span> <span m=''4494870''>look,</span> <span m=''4495060''>it</span>
  <span m=''4495250''>says,</span> <span m=''4495500''>gee,</span> <span m=''4495680''>if</span>
  <span m=''4495810''>we</span> <span m=''4495940''>were</span> <span m=''4496060''>running</span>
  <span m=''4496370''>with</span> <span m=''4496580''>10</span> <span m=''4496910''>time,</span>
  <span m=''4497430''>slackness</span> <span m=''4498050''>of</span> <span m=''4498150''>10,</span>
  <span m=''4498440''>10</span> <span m=''4498680''>times</span> <span m=''4500340''>more</span>
  <span m=''4500570''>parallelism</span> <span m=''4501220''>than</span> <span m=''4501350''>processors,</span>
  <span m=''4502350''>we''re</span> <span m=''4502480''>getting</span> <span m=''4502760''>almost</span>
  <span m=''4503120''>perfect</span> <span m=''4503550''>linear</span> <span m=''4503820''>speedup</span>
  <span m=''4504270''>in</span> <span m=''4504350''>the</span> <span m=''4504440''>number
  of</span> <span m=''4504690''>processors</span> <span m=''4505015''>we''re</span>
  <span m=''4505340''>running</span> <span m=''4505680''>on</span> <span m=''4506050''>across</span>
  <span m=''4506450''>a</span> <span m=''4506510''>wide</span> <span m=''4506940''>range</span>
  <span m=''4507280''>of</span> <span m=''4507340''>number</span> <span m=''4507650''>of</span>
  <span m=''4507720''>processors,</span> <span m=''4508770''>wide</span> <span m=''4509070''>range</span>
  <span m=''4509380''>of</span> <span m=''4509440''>benchmarks</span> <span m=''4510170''>for</span>
  <span m=''4510300''>this</span> <span m=''4511060''>chess</span> <span m=''4511360''>program.</span>
  <span m=''4512410''>And</span> <span m=''4512540''>in</span> <span m=''4512660''>fact,</span>
  <span m=''4513000''>this</span> <span m=''4513300''>curve</span> <span m=''4514450''>is</span>
  <span m=''4514670''>the</span> <span m=''4514780''>curve.</span> <span m=''4515040''>This
  is</span> <span m=''4515220''>not</span> <span m=''4515440''>an</span> <span m=''4515550''>interpolation</span>
  <span m=''4516360''>here,</span> <span m=''4516550''>but</span> <span m=''4516700''>rather</span>
  <span m=''4517050''>it</span> <span m=''4517140''>is</span> <span m=''4517340''>just</span>
  <span m=''4517580''>the</span> <span m=''4517670''>greedy</span> <span m=''4517990''>scheduling</span>
  <span m=''4518440''>curve,</span> <span m=''4518520''>and</span> <span m=''4518900''>you</span>
  <span m=''4519280''>can</span> <span m=''4519390''>see</span> <span m=''4519570''>it</span>
  <span m=''4519660''>does</span> <span m=''4519840''>a</span> <span m=''4519900''>pretty</span>
  <span m=''4520180''>good</span> <span m=''4520360''>job</span> <span m=''4520770''>of</span>
  <span m=''4522610''>going</span> <span m=''4522880''>through</span> <span m=''4523210''>all</span>
  <span m=''4523410''>the</span> <span m=''4523490''>points</span> <span m=''4523870''>here.</span>
  <span m=''4524810''>Greedy</span> <span m=''4525145''>scheduling</span> <span m=''4525480''>does</span>
  <span m=''4525670''>a</span> <span m=''4525730''>pretty</span> <span m=''4525970''>good</span>
  <span m=''4526120''>job of</span> <span m=''4526460''>predicting</span> <span m=''4526860''>the</span>
  <span m=''4526950''>performance.</span> </p><p><span m=''4527850''>The</span> <span
  m=''4527990''>other</span> <span m=''4528140''>thing</span> <span m=''4528290''>you</span>
  <span m=''4528380''>should</span> <span m=''4528540''>notice</span> <span m=''4528900''>is</span>
  <span m=''4529070''>that</span> <span m=''4529280''>although</span> <span m=''4529600''>things</span>
  <span m=''4529920''>are</span> <span m=''4529980''>very</span> <span m=''4530360''>tight</span>
  <span m=''4530730''>down</span> <span m=''4531010''>here,</span> <span m=''4531840''>as</span>
  <span m=''4532030''>you</span> <span m=''4532140''>approach</span> <span m=''4532580''>up</span>
  <span m=''4532740''>here,</span> <span m=''4533060''>they</span> <span m=''4533250''>start</span>
  <span m=''4533550''>getting</span> <span m=''4533790''>more</span> <span m=''4534020''>spread.</span>
  <span m=''4535360''>And</span> <span m=''4535440''>the</span> <span m=''4535520''>reason</span>
  <span m=''4535820''>is</span> <span m=''4536000''>that</span> <span m=''4536120''>as</span>
  <span m=''4536410''>you</span> <span m=''4536550''>start</span> <span m=''4536920''>having</span>
  <span m=''4537310''>more</span> <span m=''4537710''>of</span> <span m=''4537810''>the</span>
  <span m=''4538270''>span</span> <span m=''4538830''>mattering</span> <span m=''4539420''>in</span>
  <span m=''4539650''>the</span> <span m=''4540210''>calculation,</span> <span m=''4541880''>that''s</span>
  <span m=''4542090''>where</span> <span m=''4542320''>all</span> <span m=''4542400''>the</span>
  <span m=''4542480''>synchronization,</span> <span m=''4543750''>communication,</span>
  <span m=''4545000''>all</span> <span m=''4545360''>the</span> <span m=''4545510''>overhead</span>
  <span m=''4546000''>of</span> <span m=''4546070''>actually</span> <span m=''4546400''>doing</span>
  <span m=''4547140''>the</span> <span m=''4547280''>mechanics</span> <span m=''4547830''>of</span>
  <span m=''4547940''>moving</span> <span m=''4548490''>a</span> <span m=''4549370''>frame</span>
  <span m=''4549750''>from</span> <span m=''4549940''>one</span> <span m=''4550160''>processor</span>
  <span m=''4550750''>to</span> <span m=''4550900''>another</span> <span m=''4551560''>take</span>
  <span m=''4551930''>into</span> <span m=''4552170''>account,</span> <span m=''4552530''>so</span>
  <span m=''4552660''>you</span> <span m=''4552730''>get</span> <span m=''4552890''>a</span>
  <span m=''4552970''>lot</span> <span m=''4553230''>more</span> <span m=''4553400''>spread</span>
  <span m=''4553850''>as</span> <span m=''4553980''>you</span> <span m=''4554100''>go</span>
  <span m=''4554320''>up</span> <span m=''4554480''>here.</span> </p><p><span m=''4556360''>So
  that''s</span> <span m=''4556640''>just</span> <span m=''4556840''>the</span> <span
  m=''4556930''>first</span> <span m=''4557450''>part</span> <span m=''4557820''>of</span>
  <span m=''4558050''>the</span> <span m=''4558140''>lesson.</span> <span m=''4558610''>The</span>
  <span m=''4558830''>first</span> <span m=''4559050''>part</span> <span m=''4559340''>was,</span>
  <span m=''4559650''>oh,</span> <span m=''4563430''>the</span> <span m=''4563590''>theory</span>
  <span m=''4563930''>works</span> <span m=''4564250''>out</span> <span m=''4564440''>in</span>
  <span m=''4564550''>practice</span> <span m=''4565560''>for</span> <span m=''4565690''>real</span>
  <span m=''4565950''>programs.</span> <span m=''4566800''>You</span> <span m=''4566920''>have</span>
  <span m=''4567050''>like</span> <span m=''4567270''>10</span> <span m=''4567500''>times</span>
  <span m=''4567900''>more</span> <span m=''4571440''>parallelisms</span> <span m=''4571950''>than</span>
  <span m=''4572100''>processors,</span> <span m=''4572930''>you''re</span> <span
  m=''4573090''>going</span> <span m=''4573200''>to</span> <span m=''4573270''>do</span>
  <span m=''4573370''>a</span> <span m=''4573440''>pretty</span> <span m=''4573720''>good</span>
  <span m=''4573930''>job</span> <span m=''4574460''>of</span> <span m=''4574600''>getting</span>
  <span m=''4574870''>linear</span> <span m=''4575180''>speedup.</span> <span m=''4576590''>So</span>
  <span m=''4576760''>that</span> <span m=''4577000''>says</span> <span m=''4577190''>you</span>
  <span m=''4577300''>guys</span> <span m=''4577470''>should</span> <span m=''4577620''>be</span>
  <span m=''4578330''>shooting</span> <span m=''4578740''>for</span> <span m=''4578870''>parallelisms</span>
  <span m=''4579620''>on</span> <span m=''4579810''>the</span> <span m=''4579910''>order</span>
  <span m=''4580270''>of</span> <span m=''4582840''>100</span> <span m=''4585060''>for</span>
  <span m=''4585190''>running</span> <span m=''4585450''>on</span> <span m=''4585550''>12</span>
  <span m=''4585870''>cores.</span> <span m=''4586660''>Somewhere</span> <span m=''4587000''>in</span>
  <span m=''4587060''>that</span> <span m=''4587280''>vicinity</span> <span m=''4588100''>you</span>
  <span m=''4588230''>should</span> <span m=''4588380''>be</span> <span m=''4588470''>doing</span>
  <span m=''4588700''>pretty</span> <span m=''4588920''>well</span> <span m=''4589520''>if</span>
  <span m=''4589610''>you''ve</span> <span m=''4589740''>got</span> <span m=''4589970''>parallelism</span>
  <span m=''4590440''>of</span> <span m=''4590510''>100</span> <span m=''4590920''>when</span>
  <span m=''4591070''>you</span> <span m=''4591150''>measure</span> <span m=''4591460''>it</span>
  <span m=''4591570''>for</span> <span m=''4591660''>your</span> <span m=''4591810''>codes.</span>
  <span m=''4593530''>So</span> <span m=''4594330''>we</span> <span m=''4594440''>normalize</span>
  <span m=''4594870''>by</span> <span m=''4594990''>the</span> <span m=''4595090''>parallel</span>
  <span m=''4595415''>there.</span> </p><p><span m=''4598290''>Now</span> <span m=''4598840''>the</span>
  <span m=''4598950''>real</span> <span m=''4599240''>lesson</span> <span m=''4599700''>though</span>
  <span m=''4600210''>was</span> <span m=''4601940''>understanding</span> <span m=''4602960''>how</span>
  <span m=''4603170''>to</span> <span m=''4603250''>use</span> <span m=''4603840''>things</span>
  <span m=''4604120''>like</span> <span m=''4604350''>work</span> <span m=''4604600''>and</span>
  <span m=''4604700''>span</span> <span m=''4605380''>to</span> <span m=''4605500''>make</span>
  <span m=''4605840''>decisions</span> <span m=''4606580''>in</span> <span m=''4606710''>the</span>
  <span m=''4606800''>design</span> <span m=''4607270''>of</span> <span m=''4607380''>our</span>
  <span m=''4607530''>program.</span> <span m=''4609730''>So</span> <span m=''4609890''>as</span>
  <span m=''4609980''>it</span> <span m=''4610110''>turned</span> <span m=''4610390''>out,</span>
  <span m=''4611310''>Socrates</span> <span m=''4612710''>for</span> <span m=''4612860''>this</span>
  <span m=''4613060''>particular</span> <span m=''4613550''>competition</span> <span
  m=''4614780''>was</span> <span m=''4615000''>to</span> <span m=''4615110''>run</span>
  <span m=''4615410''>on</span> <span m=''4615540''>a</span> <span m=''4615600''>512</span>
  <span m=''4616680''>processor</span> <span m=''4617420''>connection</span> <span
  m=''4617750''>machine</span> <span m=''4618780''>at</span> <span m=''4619310''>the</span>
  <span m=''4621030''>University</span> <span m=''4621650''>of</span> <span m=''4621730''>Illinois.</span>
  <span m=''4622680''>So</span> <span m=''4622830''>this</span> <span m=''4623020''>was</span>
  <span m=''4624520''>in</span> <span m=''4624690''>the</span> <span m=''4625670''>mid</span>
  <span m=''4625900''>in</span> <span m=''4626110''>the</span> <span m=''4626830''>early</span>
  <span m=''4627110''>1990''s.</span> <span m=''4628950''>It</span> <span m=''4629290''>was</span>
  <span m=''4629560''>one</span> <span m=''4629760''>of</span> <span m=''4629860''>the</span>
  <span m=''4630630''>most</span> <span m=''4630980''>powerful</span> <span m=''4631430''>machines</span>
  <span m=''4631860''>in</span> <span m=''4631910''>the</span> <span m=''4632000''>world,</span>
  <span m=''4632950''>and</span> <span m=''4633330''>this</span> <span m=''4633600''>thing</span>
  <span m=''4633800''>is</span> <span m=''4633920''>probably</span> <span m=''4634280''>more</span>
  <span m=''4634490''>powerful</span> <span m=''4636050''>today.</span> <span m=''4637270''>But</span>
  <span m=''4637420''>in</span> <span m=''4637520''>those</span> <span m=''4637800''>days,</span>
  <span m=''4638080''>it</span> <span m=''4638140''>was a</span> <span m=''4638450''>pretty</span>
  <span m=''4638930''>powerful</span> <span m=''4639360''>machine.</span> <span m=''4640150''>I
  don''t</span> <span m=''4640270''>know</span> <span m=''4640420''>whether</span>
  <span m=''4640610''>this</span> <span m=''4640820''>thing</span> <span m=''4640960''>is,</span>
  <span m=''4641070''>but</span> <span m=''4641200''>this</span> <span m=''4641380''>thing</span>
  <span m=''4641540''>probably</span> <span m=''4641890''>I''m</span> <span m=''4642000''>pretty</span>
  <span m=''4642210''>sure</span> <span m=''4643150''>is</span> <span m=''4643300''>more</span>
  <span m=''4643480''>powerful.</span> <span m=''4645610''>So</span> <span m=''4645760''>this</span>
  <span m=''4646490''>was</span> <span m=''4646640''>a</span> <span m=''4646690''>big</span>
  <span m=''4646940''>machine.</span> </p><p><span m=''4648820''>However</span> <span
  m=''4649300''>here</span> <span m=''4649540''>at</span> <span m=''4649610''>MIT,</span>
  <span m=''4650190''>we</span> <span m=''4650340''>didn''t</span> <span m=''4650520''>have</span>
  <span m=''4650800''>a</span> <span m=''4650870''>great</span> <span m=''4651150''>big</span>
  <span m=''4651300''>machine</span> <span m=''4651670''>like</span> <span m=''4651920''>that.</span>
  <span m=''4652950''>We</span> <span m=''4653180''>only</span> <span m=''4653390''>had</span>
  <span m=''4653570''>a</span> <span m=''4653620''>32</span> <span m=''4654270''>processor</span>
  <span m=''4654930''>CM5.</span> <span m=''4657800''>So</span> <span m=''4657970''>we
  were</span> <span m=''4658180''>developing</span> <span m=''4658900''>on</span>
  <span m=''4659060''>a</span> <span m=''4659130''>little</span> <span m=''4659400''>machine</span>
  <span m=''4660400''>expecting</span> <span m=''4660970''>to</span> <span m=''4661090''>run</span>
  <span m=''4661320''>on</span> <span m=''4661440''>a</span> <span m=''4661500''>big</span>
  <span m=''4661740''>machine.</span> <span m=''4665050''>So</span> <span m=''4665230''>one</span>
  <span m=''4665440''>of</span> <span m=''4665520''>the</span> <span m=''4665620''>developers</span>
  <span m=''4666310''>proposed</span> <span m=''4666860''>to</span> <span m=''4666950''>change</span>
  <span m=''4667380''>the</span> <span m=''4667510''>program</span> <span m=''4668040''>that</span>
  <span m=''4668200''>produced</span> <span m=''4668620''>a</span> <span m=''4668680''>speedup</span>
  <span m=''4669230''>of</span> <span m=''4669390''>over</span> <span m=''4669650''>20%</span>
  <span m=''4671430''>on</span> <span m=''4671610''>the</span> <span m=''4671720''>MIT</span>
  <span m=''4672270''>machine.</span> <span m=''4674310''>So</span> <span m=''4674450''>we</span>
  <span m=''4674540''>said,</span> <span m=''4674730''>oh</span> <span m=''4674830''>that''s</span>
  <span m=''4675070''>pretty</span> <span m=''4675270''>good,</span> <span m=''4676010''>25%</span>
  <span m=''4676800''>improvement.</span> <span m=''4677910''>But</span> <span m=''4678320''>we</span>
  <span m=''4678520''>did</span> <span m=''4678690''>a</span> <span m=''4678740''>back</span>
  <span m=''4679020''>of</span> <span m=''4679100''>the</span> <span m=''4679240''>envelope</span>
  <span m=''4679630''>calculation</span> <span m=''4680820''>and</span> <span m=''4680990''>rejected</span>
  <span m=''4681570''>that</span> <span m=''4681740''>improvement</span> <span m=''4683590''>because</span>
  <span m=''4683980''>we</span> <span m=''4684200''>were</span> <span m=''4684350''>able</span>
  <span m=''4684660''>to</span> <span m=''4684730''>use</span> <span m=''4685030''>work</span>
  <span m=''4685360''>and</span> <span m=''4685500''>span</span> <span m=''4686540''>to</span>
  <span m=''4686670''>predict</span> <span m=''4687450''>the</span> <span m=''4687560''>behavior</span>
  <span m=''4688890''>on</span> <span m=''4689910''>the</span> <span m=''4690080''>big</span>
  <span m=''4690360''>machine.</span> <span m=''4693180''>So</span> <span m=''4693360''>let''s</span>
  <span m=''4693600''>see</span> <span m=''4693840''>how</span> <span m=''4694080''>that</span>
  <span m=''4694430''>worked</span> <span m=''4694700''>out,</span> <span m=''4695240''>why</span>
  <span m=''4695430''>that</span> <span m=''4695590''>worked</span> <span m=''4695820''>out.</span>
  </p><p><span m=''4696670''>So</span> <span m=''4696950''>I''ve</span> <span m=''4697680''>fudged</span>
  <span m=''4698070''>these</span> <span m=''4698340''>numbers</span> <span m=''4698750''>so</span>
  <span m=''4699190''>that</span> <span m=''4699380''>they''re</span> <span m=''4699520''>easy</span>
  <span m=''4699830''>to</span> <span m=''4699920''>do</span> <span m=''4700080''>the</span>
  <span m=''4700180''>math</span> <span m=''4700550''>on</span> <span m=''4700730''>and</span>
  <span m=''4700830''>easy</span> <span m=''4701110''>to</span> <span m=''4701200''>understand.</span>
  <span m=''4702780''>The</span> <span m=''4703120''>real</span> <span m=''4703360''>numbers</span>
  <span m=''4703780''>actually</span> <span m=''4704160''>though</span> <span m=''4704380''>did</span>
  <span m=''4704690''>sort</span> <span m=''4705060''>out</span> <span m=''4705330''>very,</span>
  <span m=''4705600''>very</span> <span m=''4705830''>similar</span> <span m=''4706180''>to</span>
  <span m=''4706430''>what</span> <span m=''4706610''>I''m</span> <span m=''4707010''>saying,</span>
  <span m=''4707350''>just</span> <span m=''4708000''>they</span> <span m=''4708090''>weren''t</span>
  <span m=''4708340''>round</span> <span m=''4708610''>numbers</span> <span m=''4708950''>like</span>
  <span m=''4709140''>I''m</span> <span m=''4709200''>going</span> <span m=''4709280''>to</span>
  <span m=''4709320''>give</span> <span m=''4709520''>you.</span> <span m=''4710630''>So</span>
  <span m=''4710790''>the</span> <span m=''4710940''>original</span> <span m=''4711280''>program</span>
  <span m=''4712500''>ran</span> <span m=''4712880''>for</span> <span m=''4713040''>let''s</span>
  <span m=''4713270''>say</span> <span m=''4714050''>65</span> <span m=''4714610''>seconds</span>
  <span m=''4715020''>on</span> <span m=''4715140''>32</span> <span m=''4715485''>cores.</span>
  <span m=''4717560''>The</span> <span m=''4717640''>proposed</span> <span m=''4718170''>program</span>
  <span m=''4718600''>ran</span> <span m=''4718800''>for</span> <span m=''4718930''>40</span>
  <span m=''4719290''>seconds</span> <span m=''4719650''>on</span> <span m=''4719770''>32</span>
  <span m=''4720240''>cores.</span> <span m=''4721480''>Sounds</span> <span m=''4721780''>like</span>
  <span m=''4721960''>a</span> <span m=''4722000''>good</span> <span m=''4722200''>improvement</span>
  <span m=''4722730''>to</span> <span m=''4722820''>me.</span> <span m=''4723830''>Let''s</span>
  <span m=''4724770''>go</span> <span m=''4724970''>for</span> <span m=''4725130''>the</span>
  <span m=''4725270''>faster</span> <span m=''4725780''>program.</span> <span m=''4726790''>Well,</span>
  <span m=''4726990''>let''s</span> <span m=''4727210''>hold</span> <span m=''4727460''>your</span>
  <span m=''4727580''>horses.</span> <span m=''4728940''>Let''s</span> <span m=''4729200''>take</span>
  <span m=''4729390''>a</span> <span m=''4729460''>look</span> <span m=''4729870''>at</span>
  <span m=''4729980''>our</span> <span m=''4730130''>performance</span> <span m=''4730720''>model</span>
  <span m=''4732020''>based</span> <span m=''4732360''>on</span> <span m=''4732480''>greedy</span>
  <span m=''4732800''>scheduling.</span> <span m=''4734880''>That Tp</span> <span
  m=''4735380''>is</span> <span m=''4735690''>T1</span> <span m=''4735860''>over</span>
  <span m=''4736120''>p</span> <span m=''4736330''>plus</span> <span m=''4736790''>infinity.</span>
  <span m=''4737500''>What</span> <span m=''4737920''>component</span> <span m=''4738480''>we</span>
  <span m=''4738680''>really</span> <span m=''4738960''>need</span> <span m=''4739180''>to</span>
  <span m=''4739280''>understand</span> <span m=''4739900''>the</span> <span m=''4739970''>scale</span>
  <span m=''4740420''>this,</span> <span m=''4740860''>what</span> <span m=''4741180''>component</span>
  <span m=''4741860''>of</span> <span m=''4742070''>each</span> <span m=''4742250''>of</span>
  <span m=''4742340''>these</span> <span m=''4742840''>things</span> <span m=''4743220''>is</span>
  <span m=''4743480''>work</span> <span m=''4743830''>and</span> <span m=''4743960''>which</span>
  <span m=''4744160''>is</span> <span m=''4744250''>span?</span> <span m=''4745040''>Because</span>
  <span m=''4745230''>that''s</span> <span m=''4745500''>how</span> <span m=''4745670''>we''re</span>
  <span m=''4745780''>going</span> <span m=''4745880''>to</span> <span m=''4745920''>be</span>
  <span m=''4746060''>able</span> <span m=''4746190''>to</span> <span m=''4746250''>predict</span>
  <span m=''4747310''>what''s</span> <span m=''4747520''>going</span> <span m=''4747590''>to</span>
  <span m=''4747660''>happen</span> <span m=''4748020''>on</span> <span m=''4748110''>the</span>
  <span m=''4748200''>big</span> <span m=''4748450''>machine.</span> </p><p><span
  m=''4749930''>So</span> <span m=''4750160''>indeed,</span> <span m=''4751220''>this</span>
  <span m=''4751790''>original</span> <span m=''4752090''>program</span> <span m=''4752690''>had</span>
  <span m=''4752890''>a</span> <span m=''4753100''>work</span> <span m=''4753440''>of</span>
  <span m=''4754250''>2048</span> <span m=''4755360''>seconds</span> <span m=''4757470''>and</span>
  <span m=''4757560''>a</span> <span m=''4757650''>span</span> <span m=''4758090''>of</span>
  <span m=''4758200''>one</span> <span m=''4758440''>second.</span> <span m=''4759760''>Now</span>
  <span m=''4760370''>chess,</span> <span m=''4760750''>it</span> <span m=''4760850''>turns</span>
  <span m=''4761110''>out,</span> <span m=''4761260''>is</span> <span m=''4761380''>a</span>
  <span m=''4761450''>non-deterministic</span> <span m=''4763480''>type</span> <span
  m=''4763700''>of</span> <span m=''4763820''>program</span> <span m=''4764310''>where</span>
  <span m=''4764430''>you use</span> <span m=''4764660''>speculative</span> <span
  m=''4765390''>parallelism,</span> <span m=''4768490''>and</span> <span m=''4768670''>so</span>
  <span m=''4768850''>in</span> <span m=''4768910''>order</span> <span m=''4769160''>to</span>
  <span m=''4769200''>get</span> <span m=''4769460''>more</span> <span m=''4769650''>parallelism,</span>
  <span m=''4770250''>you</span> <span m=''4770380''>can</span> <span m=''4770510''>sacrifice</span>
  <span m=''4772205''>and</span> <span m=''4772650''>do</span> <span m=''4772800''>more</span>
  <span m=''4773080''>work</span> <span m=''4773580''>versus</span> <span m=''4773910''>less</span>
  <span m=''4774320''>work. So</span> <span m=''4774470''>this</span> <span m=''4774700''>one</span>
  <span m=''4776340''>over</span> <span m=''4776630''>here</span> <span m=''4776930''>that</span>
  <span m=''4777190''>we</span> <span m=''4777310''>improved</span> <span m=''4777670''>it</span>
  <span m=''4777810''>to</span> <span m=''4777980''>had</span> <span m=''4778230''>less</span>
  <span m=''4778600''>work</span> <span m=''4779250''>on</span> <span m=''4779430''>the</span>
  <span m=''4779510''>benchmark,</span> <span m=''4780570''>but</span> <span m=''4781000''>it</span>
  <span m=''4781160''>had</span> <span m=''4781320''>a</span> <span m=''4781400''>longer</span>
  <span m=''4782100''>span.</span> <span m=''4786280''>So</span> <span m=''4786440''>it
  had</span> <span m=''4786590''>less</span> <span m=''4786850''>work but a</span>
  <span m=''4787210''>longer</span> <span m=''4787670''>span.</span> <span m=''4788100''>So</span>
  <span m=''4788310''>when</span> <span m=''4788540''>we</span> <span m=''4788670''>actually</span>
  <span m=''4788960''>were</span> <span m=''4789110''>going</span> <span m=''4789250''>to</span>
  <span m=''4789310''>run</span> <span m=''4789630''>this,</span> <span m=''4792070''>well</span>
  <span m=''4792450''>first</span> <span m=''4792680''>of</span> <span m=''4792730''>all,</span>
  <span m=''4795000''>we</span> <span m=''4795340''>did</span> <span m=''4795580''>the</span>
  <span m=''4795670''>calculation</span> <span m=''4795995''>and it</span> <span m=''4796320''>actually</span>
  <span m=''4796640''>came</span> <span m=''4796870''>out</span> <span m=''4797050''>pretty</span>
  <span m=''4797270''>close.</span> <span m=''4797700''>I</span> <span m=''4797770''>was</span>
  <span m=''4798300''>kind</span> <span m=''4798460''>of</span> <span m=''4798520''>surprised</span>
  <span m=''4799000''>how</span> <span m=''4799140''>close</span> <span m=''4799430''>the</span>
  <span m=''4799520''>theory</span> <span m=''4799900''>matched.</span> <span m=''4800620''>We</span>
  <span m=''4800880''>actually</span> <span m=''4801220''>on</span> <span m=''4801360''>32</span>
  <span m=''4801840''>processors</span> <span m=''4802650''>when</span> <span m=''4802910''>you</span>
  <span m=''4803030''>do</span> <span m=''4803180''>the</span> <span m=''4803300''>work</span>
  <span m=''4803560''>spanned</span> <span m=''4803870''>calculation,</span> <span
  m=''4804450''>you</span> <span m=''4804500''>get</span> <span m=''4804680''>the</span>
  <span m=''4804820''>65</span> <span m=''4805510''>seconds</span> <span m=''4806290''>on
  a</span> <span m=''4806570''>32</span> <span m=''4808080''>processor</span> <span
  m=''4808920''>machine,</span> <span m=''4809760''>here</span> <span m=''4809890''>we</span>
  <span m=''4809990''>had</span> <span m=''4810150''>40</span> <span m=''4810460''>seconds.</span>
  </p><p><span m=''4812250''>But</span> <span m=''4812730''>now</span> <span m=''4812930''>what</span>
  <span m=''4813090''>happens</span> <span m=''4814680''>when</span> <span m=''4814850''>we</span>
  <span m=''4814970''>scale</span> <span m=''4815420''>this</span> <span m=''4816610''>to</span>
  <span m=''4817470''>the</span> <span m=''4817650''>big</span> <span m=''4817890''>machine?</span>
  <span m=''4820200''>Here</span> <span m=''4820430''>we</span> <span m=''4820540''>scaled</span>
  <span m=''4820950''>it</span> <span m=''4821040''>to</span> <span m=''4821130''>512</span>
  <span m=''4821430''>cores.</span> <span m=''4822200''>So</span> <span m=''4822310''>now</span>
  <span m=''4822620''>we</span> <span m=''4822740''>take</span> <span m=''4823010''>the</span>
  <span m=''4823100''>work</span> <span m=''4823830''>divided</span> <span m=''4824280''>by</span>
  <span m=''4824770''>the</span> <span m=''4824840''>number</span> <span m=''4825030''>of</span>
  <span m=''4825100''>processors,</span> <span m=''4825760''>512,</span> <span m=''4826330''>plus</span>
  <span m=''4826630''>1,</span> <span m=''4827460''>that''s</span> <span m=''4827740''>5</span>
  <span m=''4828020''>seconds</span> <span m=''4828480''>for</span> <span m=''4828590''>this.</span>
  <span m=''4829160''>Here</span> <span m=''4829360''>we</span> <span m=''4829480''>have</span>
  <span m=''4829620''>the</span> <span m=''4829720''>work</span> <span m=''4830670''>but</span>
  <span m=''4830790''>we</span> <span m=''4830910''>now</span> <span m=''4831120''>have
  a</span> <span m=''4831260''>much</span> <span m=''4831490''>larger</span> <span
  m=''4831820''>span.</span> <span m=''4833340''>So</span> <span m=''4833470''>we</span>
  <span m=''4833580''>have</span> <span m=''4833690''>two</span> <span m=''4833890''>seconds</span>
  <span m=''4834370''>of</span> <span m=''4834460''>work</span> <span m=''4835020''>for</span>
  <span m=''4835170''>processor,</span> <span m=''4835730''>but</span> <span m=''4836020''>now</span>
  <span m=''4836430''>eight</span> <span m=''4836790''>seconds</span> <span m=''4838270''>of</span>
  <span m=''4840140''>span</span> <span m=''4840990''>for a</span> <span m=''4841140''>total</span>
  <span m=''4841410''>of</span> <span m=''4841500''>10</span> <span m=''4841730''>seconds.</span>
  <span m=''4842130''>So</span> <span m=''4842270''>had</span> <span m=''4842520''>we</span>
  <span m=''4842660''>made</span> <span m=''4843040''>this</span> <span m=''4843580''>quote</span>
  <span m=''4843900''>&quot;improvement,&quot;</span> <span m=''4845280''>our</span>
  <span m=''4845450''>code</span> <span m=''4845750''>would</span> <span m=''4845920''>have</span>
  <span m=''4846100''>been</span> <span m=''4846880''>half</span> <span m=''4847390''>as</span>
  <span m=''4847680''>fast.</span> <span m=''4850910''>It</span> <span m=''4851030''>would</span>
  <span m=''4851290''>not</span> <span m=''4851560''>have</span> <span m=''4851730''>scaled.</span>
  </p><p><span m=''4855020''>And</span> <span m=''4855160''>so</span> <span m=''4855300''>the</span>
  <span m=''4855400''>point</span> <span m=''4855730''>is</span> <span m=''4856140''>that</span>
  <span m=''4858170''>work</span> <span m=''4858570''>and</span> <span m=''4858710''>span</span>
  <span m=''4859950''>typically</span> <span m=''4860490''>will</span> <span m=''4860690''>beat</span>
  <span m=''4861300''>running</span> <span m=''4861690''>times</span> <span m=''4862190''>for</span>
  <span m=''4862360''>predicting</span> <span m=''4862900''>scalability</span> <span
  m=''4863780''>of</span> <span m=''4863970''>performance.</span> <span m=''4865420''>So</span>
  <span m=''4865570''>you</span> <span m=''4865750''>can</span> <span m=''4865930''>measure
  a</span> <span m=''4866330''>particular</span> <span m=''4866760''>thing,</span>
  <span m=''4867010''>but</span> <span m=''4867160''>what</span> <span m=''4867320''>you</span>
  <span m=''4867440''>really</span> <span m=''4867680''>want</span> <span m=''4867870''>to</span>
  <span m=''4867930''>know</span> <span m=''4868180''>is</span> <span m=''4868460''>this</span>
  <span m=''4868700''>thing</span> <span m=''4869030''>this</span> <span m=''4869410''>going</span>
  <span m=''4869500''>to</span> <span m=''4869600''>scale</span> <span m=''4871010''>and</span>
  <span m=''4871160''>how</span> <span m=''4871390''>is</span> <span m=''4871520''>it</span>
  <span m=''4871600''>going</span> <span m=''4871680''>to</span> <span m=''4871770''>scale</span>
  <span m=''4872190''>into</span> <span m=''4872350''>the</span> <span m=''4872440''>future.</span>
  <span m=''4872860''>So</span> <span m=''4873030''>people</span> <span m=''4873640''>building</span>
  <span m=''4874120''>multicore</span> <span m=''4874740''>applications</span> <span
  m=''4875800''>today</span> <span m=''4876210''>want</span> <span m=''4876490''>to</span>
  <span m=''4876550''>know</span> <span m=''4876880''>that</span> <span m=''4877030''>they</span>
  <span m=''4877190''>coded</span> <span m=''4877540''>up.</span> <span m=''4877750''>They</span>
  <span m=''4877870''>don''t</span> <span m=''4878010''>want</span> <span m=''4878150''>to</span>
  <span m=''4878410''>be</span> <span m=''4878550''>told</span> <span m=''4878880''>in</span>
  <span m=''4878980''>two</span> <span m=''4879160''>years</span> <span m=''4879700''>that</span>
  <span m=''4879920''>they''ve</span> <span m=''4880070''>got</span> <span m=''4880220''>to</span>
  <span m=''4880450''>recode</span> <span m=''4880830''>it all</span> <span m=''4881420''>because</span>
  <span m=''4881750''>the</span> <span m=''4881850''>number</span> <span m=''4882110''>of</span>
  <span m=''4882190''>cores</span> <span m=''4882590''>doubled.</span> <span m=''4884300''>They</span>
  <span m=''4884470''>want</span> <span m=''4884680''>to</span> <span m=''4884800''>have</span>
  <span m=''4884930''>some</span> <span m=''4885190''>future-proof</span> <span m=''4886390''>notion</span>
  <span m=''4887040''>that</span> <span m=''4887160''>hey,</span> <span m=''4887370''>there''s</span>
  <span m=''4887550''>a</span> <span m=''4887600''>lot</span> <span m=''4887810''>of</span>
  <span m=''4887890''>parallelism</span> <span m=''4889030''>in</span> <span m=''4889170''>this</span>
  <span m=''4890860''>program.</span> </p><p><span m=''4893490''>So</span> <span m=''4893740''>work</span>
  <span m=''4894060''>and</span> <span m=''4894170''>span,</span> <span m=''4895300''>work</span>
  <span m=''4895520''>and</span> <span m=''4895630''>span,</span> <span m=''4897070''>eat</span>
  <span m=''4897300''>it,</span> <span m=''4897630''>drink</span> <span m=''4897950''>it,</span>
  <span m=''4898150''>sleep</span> <span m=''4898520''>it.</span> <span m=''4899560''>Work</span>
  <span m=''4899780''>and</span> <span m=''4899910''>span,</span> <span m=''4900640''>work</span>
  <span m=''4900900''>and</span> <span m=''4901040''>span,</span> <span m=''4902080''>work</span>
  <span m=''4902320''>and</span> <span m=''4902480''>span,</span> <span m=''4904400''>work</span>
  <span m=''4904720''>and</span> <span m=''4904840''>span,</span> <span m=''4905740''>work</span>
  <span m=''4905970''>and</span> <span m=''4906100''>span,</span> <span m=''4906910''>OK?</span>
  <span m=''4907210''>Work and span.</span> </p>'
uid: cadeec1b-155f-2ccc-3908-92ed1a70fcb0
---

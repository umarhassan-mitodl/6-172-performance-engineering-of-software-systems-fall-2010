---
about_this_resource_text: <p><strong>Description:</strong> Information about the final
  project, followed by a guest lecture covering fractal trees, which combine the strengths
  of B-trees and append-to-file. Analysis of search and insert in a simplified fractal
  tree.</p> <p><strong>Speaker:</strong> Bradley Kuszmaul</p>
content_type: resource
course_id: 6-172-performance-engineering-of-software-systems-fall-2010
embedded_media:
- id: Video-InternetArchive-MP4
  media_location: http://www.archive.org/download/MIT6.172F10/MIT6_172_F10_lec19_300k.mp4
  parent_uid: f0f7ede18e41a3c5bcab7153f90d3a69
  title: Video-Internet Archive-MP4
  type: Video
  uid: 7f3e6e729287bb57f7a29591967508be
- id: Video-iTunesU-MP4
  media_location: http://itunes.apple.com/us/itunes-u/lecture-19-how-tokudb-fractal/id481759887?i=109649112
  parent_uid: f0f7ede18e41a3c5bcab7153f90d3a69
  title: Video-iTunes U-MP4
  type: Video
  uid: 6f37db26fd679e5331bbfef883bbf7b2
- id: Video-YouTube-Stream
  media_location: 9Rb85cOXTKU
  parent_uid: f0f7ede18e41a3c5bcab7153f90d3a69
  title: Video-YouTube-Stream
  type: Video
  uid: 8060580c230d27e2437572447861061a
- id: Thumbnail-YouTube-JPG
  media_location: https://img.youtube.com/vi/9Rb85cOXTKU/default.jpg
  parent_uid: f0f7ede18e41a3c5bcab7153f90d3a69
  title: Thumbnail-YouTube-JPG
  type: Thumbnail
  uid: 2f82d96021cf7b595639279f9ad7a74e
- id: MIT6_172F10_lec19.pdf
  parent_uid: f0f7ede18e41a3c5bcab7153f90d3a69
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-172-performance-engineering-of-software-systems-fall-2010/video-lectures/lecture-19-how-tokudb-fractal-tree-indexes-work/MIT6_172F10_lec19.pdf
  title: MIT6_172F10_lec19.pdf
  type: null
  uid: c78d43f0ea22b72c3e54d499612acb86
- id: 3Play-3PlayYouTubeid-MP4
  media_location: 9Rb85cOXTKU
  parent_uid: f0f7ede18e41a3c5bcab7153f90d3a69
  title: 3Play-3Play YouTube id
  type: 3Play
  uid: ac3e670bcc1f2d5431f00cfb81509c2c
- id: 9Rb85cOXTKU.srt
  parent_uid: f0f7ede18e41a3c5bcab7153f90d3a69
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-172-performance-engineering-of-software-systems-fall-2010/video-lectures/lecture-19-how-tokudb-fractal-tree-indexes-work/9Rb85cOXTKU.srt
  title: 3play caption file
  type: null
  uid: 4b3005e9fb0965d5884d96c79c48249f
- id: 9Rb85cOXTKU.pdf
  parent_uid: f0f7ede18e41a3c5bcab7153f90d3a69
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-172-performance-engineering-of-software-systems-fall-2010/video-lectures/lecture-19-how-tokudb-fractal-tree-indexes-work/9Rb85cOXTKU.pdf
  title: 3play pdf file
  type: null
  uid: c670db96f6dd6f5b53b9da1cf975fb6d
- id: Caption-3Play YouTube id-SRT
  parent_uid: f0f7ede18e41a3c5bcab7153f90d3a69
  title: Caption-3Play YouTube id-SRT-English - US
  type: Caption
  uid: 7071d921d1fbad57abe84444e1043604
- id: Transcript-3Play YouTube id-PDF
  parent_uid: f0f7ede18e41a3c5bcab7153f90d3a69
  title: Transcript-3Play YouTube id-PDF-English - US
  type: Transcript
  uid: d9af39005c80a8551e091ef418a7394f
file: null
file_size: null
hide_download: true
hide_download_original: null
inline_embed_id: 6985284lecture19:howtokudbfractaltreeindexeswork7727323
layout: video
license: https://creativecommons.org/licenses/by-nc-sa/4.0/
order_index: 214
parent_uid: 24169d0487e846a39c316276f85b8cb5
related_resources_text: ''
short_url: lecture-19-how-tokudb-fractal-tree-indexes-work
technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-172-performance-engineering-of-software-systems-fall-2010/video-lectures/lecture-19-how-tokudb-fractal-tree-indexes-work
title: 'Lecture 19: How TokuDB Fractal Tree Indexes Work'
transcript: '<p><span m=''120''>The</span> <span m=''190''>following</span> <span
  m=''630''>content</span> <span m=''1230''>is</span> <span m=''1340''>provided</span>
  <span m=''1790''>under</span> <span m=''2070''>a</span> <span m=''2090''>Creative</span>
  <span m=''2500''>Commons</span> <span m=''2910''>license.</span> <span m=''3910''>Your</span>
  <span m=''4200''>support</span> <span m=''4700''>will</span> <span m=''4870''>help</span>
  <span m=''5100''>MIT</span> <span m=''5580''>OpenCourseWare</span> <span m=''6360''>continue</span>
  <span m=''6870''>to</span> <span m=''6950''>offer</span> <span m=''7380''>high-quality</span>
  <span m=''8119''>educational</span> <span m=''8740''>resources</span> <span m=''9390''>for</span>
  <span m=''9520''>free.</span> <span m=''10600''>To</span> <span m=''10730''>make</span>
  <span m=''10930''>a</span> <span m=''10980''>donation</span> <span m=''11620''>or</span>
  <span m=''11930''>view</span> <span m=''12340''>additional</span> <span m=''12800''>materials</span>
  <span m=''13340''>from</span> <span m=''13500''>hundreds</span> <span m=''13930''>of</span>
  <span m=''14040''>MIT</span> <span m=''14460''>courses,</span> <span m=''15460''>visit</span>
  <span m=''15790''>MIT</span> <span m=''16219''>OpenCourseWare</span> <span m=''17250''>at</span>
  <span m=''18130''>ocw.mit.edu.</span> </p><p><span m=''28664''>PROFESSOR:</span>
  <span m=''29160''>So</span> <span m=''29720''>a</span> <span m=''29900''>couple</span>
  <span m=''30080''>of</span> <span m=''30680''>things</span> <span m=''30970''>I</span>
  <span m=''31080''>want</span> <span m=''31200''>to</span> <span m=''31270''>say</span>
  <span m=''31490''>about</span> <span m=''32130''>the</span> <span m=''32320''>final</span>
  <span m=''32759''>project.</span> <span m=''36800''>You</span> <span m=''37060''>guys
  should</span> <span m=''37370''>start</span> <span m=''37660''>thinking</span> <span
  m=''37980''>about</span> <span m=''38270''>it.</span> <span m=''40700''>So of course,</span>
  <span m=''42260''>you</span> <span m=''42660''>guys</span> <span m=''42960''>should</span>
  <span m=''43240''>think</span> <span m=''43590''>about</span> <span m=''43770''>the</span>
  <span m=''43870''>teams</span> <span m=''44260''>first,</span> <span m=''44920''>and</span>
  <span m=''45990''>submit</span> <span m=''46520''>team</span> <span m=''46780''>information.</span>
  <span m=''47350''>Say who you''re</span> <span m=''47740''>going</span> <span m=''48065''>to
  team</span> <span m=''48390''>up</span> <span m=''48790''>with.</span> <span m=''49940''>By</span>
  <span m=''50320''>when?</span> <span m=''51040''>Team</span> <span m=''51190''>information,</span>
  <span m=''52260''>Josh,</span> <span m=''52760''>by when?</span> <span m=''53270''>Team</span>
  <span m=''53720''>information</span> <span m=''54340''>has</span> <span m=''54470''>to
  be in--</span> </p><p><span m=''54990''>AUDIENCE:</span> <span m=''55487''>By tomorrow.</span>
  </p><p><span m=''56481''>PROFESSOR:</span> <span m=''56980''>By</span> <span m=''57180''>tomorrow.</span>
  <span m=''57380''>OK,</span> <span m=''57580''>good.</span> <span m=''57790''>You</span>
  <span m=''57870''>should</span> <span m=''58020''>know</span> <span m=''58200''>your</span>
  <span m=''58370''>teams.</span> <span m=''58930''>Get</span> <span m=''59120''>them</span>
  <span m=''59270''>together,</span> <span m=''60770''>use</span> <span m=''61020''>the</span>
  <span m=''61090''>same</span> <span m=''61300''>mechanism</span> <span m=''61680''>that</span>
  <span m=''61820''>we</span> <span m=''61970''>used</span> <span m=''62200''>before</span>
  <span m=''62870''>to</span> <span m=''62950''>get</span> <span m=''63100''>the</span>
  <span m=''63190''>team</span> <span m=''63400''>information</span> <span m=''63850''>before.</span>
  <span m=''64420''>So</span> <span m=''64580''>we</span> <span m=''64750''>are</span>
  <span m=''64870''>going</span> <span m=''65140''>to</span> <span m=''65300''>add</span>
  <span m=''65630''>one</span> <span m=''65950''>small</span> <span m=''66340''>thing</span>
  <span m=''66540''>this</span> <span m=''66660''>year</span> <span m=''66910''>I</span>
  <span m=''67060''>think</span> <span m=''67210''>that</span> <span m=''67310''>would</span>
  <span m=''67520''>be</span> <span m=''67990''>useful.</span> <span m=''69720''>Once</span>
  <span m=''70080''>you</span> <span m=''70360''>have</span> <span m=''70670''>submitted</span>
  <span m=''71270''>your</span> <span m=''71390''>design documents,</span> <span m=''72040''>we</span>
  <span m=''72150''>are</span> <span m=''72220''>going</span> <span m=''72430''>to</span>
  <span m=''72500''>get</span> <span m=''73220''>a</span> <span m=''73350''>design</span>
  <span m=''73860''>review</span> <span m=''74160''>done</span> <span m=''74370''>by</span>
  <span m=''74490''>Masters.</span> <span m=''75370''>So</span> <span m=''75510''>what</span>
  <span m=''75660''>that</span> <span m=''75880''>means</span> <span m=''76110''>is</span>
  <span m=''76350''>next</span> <span m=''76900''>week</span> <span m=''78230''>we</span>
  <span m=''78310''>are</span> <span m=''78490''>going</span> <span m=''78620''>to</span>
  <span m=''78710''>schedule</span> <span m=''79130''>a</span> <span m=''79280''>design</span>
  <span m=''79670''>review</span> <span m=''80070''>with</span> <span m=''80160''>your</span>
  <span m=''80450''>Masters.</span> <span m=''81830''>And</span> <span m=''82920''>you</span>
  <span m=''83130''>should</span> <span m=''83400''>send</span> <span m=''84130''>mail</span>
  <span m=''84430''>to</span> <span m=''84620''>your</span> <span m=''84760''>Masters,</span>
  <span m=''85380''>hopefully</span> <span m=''89700''>in the</span> <span m=''90000''>middle</span>
  <span m=''90320''>of</span> <span m=''90540''>next</span> <span m=''90770''>week,</span>
  <span m=''91350''>to</span> <span m=''91830''>schedule</span> <span m=''92170''>a</span>
  <span m=''92250''>design review.</span> <span m=''92610''>The</span> <span m=''92820''>design
  review</span> <span m=''93340''>will</span> <span m=''93480''>happen</span> <span
  m=''94250''>the</span> <span m=''94410''>week</span> <span m=''94740''>after</span>
  <span m=''95050''>Thanksgiving.</span> </p><p><span m=''96150''>So</span> <span
  m=''96530''>you''ll</span> <span m=''96710''>submit</span> <span m=''97210''>your</span>
  <span m=''97650''>design</span> <span m=''97990''>doc</span> <span m=''98280''>next</span>
  <span m=''98590''>week,</span> <span m=''98860''>and</span> <span m=''98970''>then</span>
  <span m=''99270''>the week after</span> <span m=''99510''>Thanksgiving,</span> <span
  m=''100210''>you''ll</span> <span m=''100500''>schedule</span> <span m=''100690''>your</span>
  <span m=''100950''>design</span> <span m=''101160''>review.</span> <span m=''101930''>The</span>
  <span m=''102100''>earlier the</span> <span m=''102150''>better,</span> <span m=''102460''>because</span>
  <span m=''102760''>you</span> <span m=''102890''>can</span> <span m=''103040''>hopefully</span>
  <span m=''103400''>get</span> <span m=''103530''>some</span> <span m=''103680''>really</span>
  <span m=''103930''>good</span> <span m=''104140''>feedback</span> <span m=''104890''>before</span>
  <span m=''105220''>you</span> <span m=''105470''>go</span> <span m=''105660''>into</span>
  <span m=''105990''>implementation.</span> <span m=''107080''>So</span> <span m=''107780''>have</span>
  <span m=''108500''>an</span> <span m=''108570''>idea</span> <span m=''108850''>what</span>
  <span m=''109000''>you''re</span> <span m=''109150''>doing.</span> <span m=''109860''>Of</span>
  <span m=''110090''>course you''re</span> <span m=''110560''>write it up for</span>
  <span m=''110720''>your design</span> <span m=''111610''>document.</span> <span
  m=''112170''>And</span> <span m=''112380''>then</span> <span m=''112630''>go</span>
  <span m=''112860''>to your</span> <span m=''113090''>Masters</span> <span m=''113490''>and</span>
  <span m=''113580''>say,</span> <span m=''113680''>here''s</span> <span m=''113940''>what
  I''m</span> <span m=''114180''>planning</span> <span m=''114480''>to</span> <span
  m=''114580''>do.</span> <span m=''115080''>Get</span> <span m=''115230''>some</span>
  <span m=''115390''>good</span> <span m=''115580''>feedback,</span> <span m=''116090''>and</span>
  <span m=''116200''>hopefully</span> <span m=''116540''>it will</span> <span m=''116650''>help</span>
  <span m=''116940''>your</span> <span m=''117050''>life</span> <span m=''117420''>to
  do</span> <span m=''117840''>that.</span> </p><p><span m=''118100''>And</span> <span
  m=''118660''>then</span> <span m=''120890''>beforehand,</span> <span m=''122360''>performance</span>
  <span m=''123070''>only</span> <span m=''123330''>mattered</span> <span m=''123770''>for</span>
  <span m=''123890''>your</span> <span m=''124040''>grade.</span> <span m=''124470''>We</span>
  <span m=''124670''>did</span> <span m=''124980''>this</span> <span m=''125150''>absolute</span>
  <span m=''125520''>grading.</span> <span m=''126310''>This</span> <span m=''126530''>year,</span>
  <span m=''126760''>we</span> <span m=''126840''>are</span> <span m=''126970''>going
  to have</span> <span m=''127100''>actually</span> <span m=''127360''>an</span> <span
  m=''127620''>in-class</span> <span m=''128310''>competition</span> <span m=''130389''>on</span>
  <span m=''130699''>the</span> <span m=''130810''>final</span> <span m=''131160''>day</span>
  <span m=''131300''>of</span> <span m=''131450''>class,</span> <span m=''131730''>to</span>
  <span m=''131820''>figure</span> <span m=''132060''>out</span> <span m=''132350''>who</span>
  <span m=''132660''>has</span> <span m=''133050''>the</span> <span m=''133540''>fastest</span>
  <span m=''134150''>ray</span> <span m=''134450''>tracer</span> <span m=''135510''>in</span>
  <span m=''135640''>the</span> <span m=''135760''>class.</span> <span m=''137380''>And</span>
  <span m=''137740''>for</span> <span m=''137880''>that</span> <span m=''138090''>we</span>
  <span m=''138240''>will</span> <span m=''138520''>actually</span> <span m=''138700''>give</span>
  <span m=''139480''>[? you ?]</span> <span m=''140440''>a</span> <span m=''140840''>little</span>
  <span m=''141090''>but</span> <span m=''141210''>of</span> <span m=''141310''>a</span>
  <span m=''141540''>different</span> <span m=''142780''>[UNINTELLIGIBLE]</span> <span
  m=''143260''>than</span> <span m=''143450''>what I</span> <span m=''143670''>have</span>
  <span m=''143860''>given</span> <span m=''144150''>you.</span> <span m=''145250''>And</span>
  <span m=''145710''>so</span> <span m=''145910''>you</span> <span m=''146270''>don''t</span>
  <span m=''146580''>go</span> <span m=''146720''>too</span> <span m=''147090''>much</span>
  <span m=''147380''>into</span> <span m=''147640''>really</span> <span m=''147980''>hand</span>
  <span m=''148320''>coding</span> <span m=''148710''>to</span> <span m=''148770''>that</span>
  <span m=''148890''>teammate</span> <span m=''149240''>because</span> <span m=''149410''>that</span>
  <span m=''149570''>might</span> <span m=''149750''>not</span> <span m=''149920''>work.</span>
  </p><p><span m=''150560''>And</span> <span m=''151110''>so</span> <span m=''151240''>here''s</span>
  <span m=''151570''>something</span> <span m=''151910''>hot</span> <span m=''152410''>off
  the</span> <span m=''152530''>press.</span> <span m=''153570''>So</span> <span m=''154440''>for</span>
  <span m=''154760''>the</span> <span m=''154930''>winning</span> <span m=''155380''>team,</span>
  <span m=''156310''>there''s</span> <span m=''156710''>going</span> <span m=''156830''>to</span>
  <span m=''156950''>be</span> <span m=''157810''>an</span> <span m=''157880''>Akamai</span>
  <span m=''158120''>prize</span> <span m=''158730''>for</span> <span m=''158840''>the</span>
  <span m=''158960''>winning</span> <span m=''159250''>team.</span> <span m=''159910''>And</span>
  <span m=''160630''>this</span> <span m=''160810''>prize</span> <span m=''161070''>includes</span>
  <span m=''161700''>a</span> <span m=''161900''>celebration/demonstration</span>
  <span m=''162430''>at</span> <span m=''162750''>Akamai</span> <span m=''163500''>headquarters.</span>
  <span m=''164820''>You''re</span> <span m=''165030''>going</span> <span m=''165180''>to</span>
  <span m=''165260''>go visit there</span> <span m=''165580''>[UNINTELLIGIBLE]</span>
  <span m=''166680''>and</span> <span m=''166990''>perhaps</span> <span m=''167920''>show</span>
  <span m=''168140''>off</span> <span m=''168310''>to their</span> <span m=''168440''>engineers</span>
  <span m=''169160''>the</span> <span m=''169270''>cool</span> <span m=''169890''>ray</span>
  <span m=''170120''>tracer</span> <span m=''170360''>you</span> <span m=''170450''>did.</span>
  <span m=''171220''>And</span> <span m=''171450''>also</span> <span m=''173270''>every</span>
  <span m=''173900''>team</span> <span m=''174560''>member</span> <span m=''174870''>of</span>
  <span m=''174950''>the</span> <span m=''175010''>winning</span> <span m=''175305''>team</span>
  <span m=''176270''>is</span> <span m=''176760''>going</span> <span m=''176960''>to</span>
  <span m=''177040''>get the</span> <span m=''177280''>iPod</span> <span m=''177670''>Nano.</span>
  <span m=''179150''>Sorry,</span> <span m=''179480''>guys,</span> <span m=''179840''>last
  year</span> <span m=''180180''>it</span> <span m=''180310''>didn''t</span> <span
  m=''180490''>happen.</span> <span m=''181150''>First</span> <span m=''181480''>time.</span>
  <span m=''182480''>So</span> <span m=''183180''>there''s</span> <span m=''183450''>a</span>
  <span m=''183490''>lot</span> <span m=''183840''>at</span> <span m=''184030''>stake.</span>
  <span m=''185550''>So</span> <span m=''185720''>make</span> <span m=''185980''>sure</span>
  <span m=''186230''>your</span> <span m=''187600''>program</span> <span m=''188350''>is</span>
  <span m=''188500''>going</span> <span m=''188620''>to</span> <span m=''188740''>run</span>
  <span m=''189370''>as</span> <span m=''189690''>fast as</span> <span m=''190120''>you
  can.</span> </p><p><span m=''191120''>OK,</span> <span m=''191490''>with that,</span>
  <span m=''196810''>let''s get</span> <span m=''196980''>your slides</span> <span
  m=''197180''>on.</span> <span m=''199440''>So</span> <span m=''199650''>I''d</span>
  <span m=''199790''>like</span> <span m=''199970''>to</span> <span m=''200030''>introduce</span>
  <span m=''200630''>Bradley Kuszmaul.</span> <span m=''202660''>Bradley</span> <span
  m=''203190''>has</span> <span m=''203410''>been</span> <span m=''205390''>at</span>
  <span m=''205610''>MIT,</span> <span m=''206150''>in and</span> <span m=''206440''>out
  of</span> <span m=''206730''>MIT,</span> <span m=''206950''>for</span> <span m=''207090''>a</span>
  <span m=''207130''>long</span> <span m=''207430''>time</span> <span m=''207710''>doing</span>
  <span m=''207940''>lots</span> <span m=''208330''>of</span> <span m=''208480''>cool</span>
  <span m=''208800''>stuff</span> <span m=''210220''>with</span> <span m=''211340''>high-performance--</span>
  <span m=''212620''>yeah,</span> <span m=''212960''>make</span> <span m=''213450''>the</span>
  <span m=''213710''>screen</span> <span m=''214090''>bigger--</span> <span m=''214670''>high-performance</span>
  <span m=''216070''>computing.</span> <span m=''217660''>He</span> <span m=''217790''>has</span>
  <span m=''217970''>done</span> <span m=''218150''>some</span> <span m=''218660''>really</span>
  <span m=''218930''>interesting</span> <span m=''219310''>data</span> <span m=''219580''>structure</span>
  <span m=''219980''>work,</span> <span m=''221310''>performance</span> <span m=''221670''>optimization</span>
  <span m=''222360''>work,</span> <span m=''222650''>and</span> <span m=''222830''>stuff</span>
  <span m=''223050''>like</span> <span m=''223240''>that.</span> <span m=''223740''>And</span>
  <span m=''223960''>today</span> <span m=''224180''>he''s</span> <span m=''224360''>going</span>
  <span m=''224510''>to</span> <span m=''224550''>talk</span> <span m=''224870''>about</span>
  <span m=''225500''>an</span> <span m=''225880''>interesting</span> <span m=''226310''>data</span>
  <span m=''226600''>structure</span> <span m=''227350''>that</span> <span m=''227960''>goes</span>
  <span m=''228290''>all</span> <span m=''228470''>the</span> <span m=''228660''>way</span>
  <span m=''228960''>from</span> <span m=''229390''>theory</span> <span m=''229890''>into</span>
  <span m=''230200''>getting</span> <span m=''230970''>really,</span> <span m=''231720''>really</span>
  <span m=''231950''>high-performance.</span> <span m=''233130''>Thank</span> <span
  m=''233320''>you, Bradley.</span> <span m=''233580''>OK, you have</span> <span m=''233810''>the</span>
  <span m=''234110''>mic.</span> </p><p><span m=''235745''>BRADLEY KUSZMAUL:</span>
  <span m=''236180''>So</span> <span m=''237300''>I''m</span> <span m=''237630''>going</span>
  <span m=''237720''>to</span> <span m=''237770''>talk</span> <span m=''238060''>about</span>
  <span m=''240350''>a</span> <span m=''240720''>data</span> <span m=''240930''>structure</span>
  <span m=''241290''>called</span> <span m=''241510''>fractal</span> <span m=''241960''>trees,</span>
  <span m=''242420''>which</span> <span m=''242850''>in</span> <span m=''243080''>the</span>
  <span m=''243220''>academic</span> <span m=''243740''>world</span> <span m=''244000''>are</span>
  <span m=''244080''>called</span> <span m=''244330''>streaming</span> <span m=''244710''>B-trees.</span>
  <span m=''245860''>But</span> <span m=''246650''>the</span> <span m=''246760''>marketing</span>
  <span m=''247180''>people</span> <span m=''247410''>didn''t</span> <span m=''247650''>think</span>
  <span m=''247830''>very</span> <span m=''248030''>much</span> <span m=''248250''>of</span>
  <span m=''248310''>that,</span> <span m=''248690''>and</span> <span m=''248860''>so</span>
  <span m=''249180''>a</span> <span m=''249280''>lot</span> <span m=''249450''>of</span>
  <span m=''249490''>these</span> <span m=''249620''>slides</span> <span m=''250010''>are</span>
  <span m=''250080''>borrowed</span> <span m=''250560''>from</span> <span m=''251400''>a</span>
  <span m=''251530''>company</span> <span m=''251870''>that</span> <span m=''252000''>I''ve</span>
  <span m=''252070''>started.</span> <span m=''253270''>So</span> <span m=''253380''>rather</span>
  <span m=''253600''>than</span> <span m=''253710''>redo</span> <span m=''254060''>that,</span>
  <span m=''254310''>I''m</span> <span m=''254420''>just</span> <span m=''254640''>going</span>
  <span m=''254730''>to</span> <span m=''254780''>stick</span> <span m=''255040''>to</span>
  <span m=''255570''>the</span> <span m=''255710''>terminology</span> <span m=''256310''>&quot;fractal</span>
  <span m=''256720''>tree.&quot;</span> <span m=''258410''>I''m</span> <span m=''258620''>research</span>
  <span m=''259050''>faculty</span> <span m=''259420''>at</span> <span m=''259490''>MIT,</span>
  <span m=''260029''>and</span> <span m=''260140''>I''m</span> <span m=''260230''>a</span>
  <span m=''260310''>founder</span> <span m=''260680''>at</span> <span m=''260750''>Tokutek.</span>
  <span m=''261790''>And</span> <span m=''263250''>so</span> <span m=''263670''>that''s</span>
  <span m=''263920''>sort</span> <span m=''264150''>of</span> <span m=''264380''>who</span>
  <span m=''264630''>I</span> <span m=''264770''>am.</span> <span m=''264980''>I''ll</span>
  <span m=''265060''>do</span> <span m=''265190''>a</span> <span m=''265240''>little</span>
  <span m=''265380''>bit</span> <span m=''265560''>more</span> <span m=''265770''>introduction.</span>
  </p><p><span m=''266620''>So</span> <span m=''266880''>I</span> <span m=''267420''>have</span>
  <span m=''267540''>been</span> <span m=''267690''>around</span> <span m=''268000''>at</span>
  <span m=''268070''>MIT</span> <span m=''268430''>a</span> <span m=''268500''>long</span>
  <span m=''268740''>time.</span> <span m=''269060''>I</span> <span m=''269230''>have</span>
  <span m=''269410''>four</span> <span m=''269700''>MIT</span> <span m=''270100''>degrees.</span>
  <span m=''271150''>And</span> <span m=''271550''>I</span> <span m=''271730''>was</span>
  <span m=''272090''>one</span> <span m=''272280''>of</span> <span m=''272320''>the</span>
  <span m=''272430''>architects</span> <span m=''273280''>of</span> <span m=''273520''>the</span>
  <span m=''273650''>Connection</span> <span m=''274030''>Machine</span> <span m=''274340''>CM-5.</span>
  <span m=''275190''>And</span> <span m=''276690''>Charles</span> <span m=''277050''>was</span>
  <span m=''277450''>also</span> <span m=''278600''>one</span> <span m=''278750''>of</span>
  <span m=''278810''>the</span> <span m=''278920''>architects</span> <span m=''279320''>of</span>
  <span m=''279440''>that</span> <span m=''279570''>machine.</span> <span m=''280380''>So</span>
  <span m=''280580''>at</span> <span m=''280870''>the</span> <span m=''280940''>time,</span>
  <span m=''281220''>that</span> <span m=''281370''>was</span> <span m=''281500''>the</span>
  <span m=''281570''>fastest</span> <span m=''282100''>machine</span> <span m=''282370''>in</span>
  <span m=''282440''>the</span> <span m=''282520''>world,</span> <span m=''283380''>at</span>
  <span m=''283540''>least</span> <span m=''283760''>for</span> <span m=''283870''>some</span>
  <span m=''284120''>applications.</span> <span m=''285300''>And</span> <span m=''286440''>after</span>
  <span m=''288280''>getting</span> <span m=''288480''>my</span> <span m=''289230''>degrees</span>
  <span m=''289790''>and</span> <span m=''290040''>being</span> <span m=''290340''>an</span>
  <span m=''290380''>architect,</span> <span m=''290860''>I</span> <span m=''290950''>went</span>
  <span m=''291230''>and was</span> <span m=''291370''>a</span> <span m=''291420''>professor</span>
  <span m=''291910''>at</span> <span m=''291980''>Yale,</span> <span m=''292490''>and</span>
  <span m=''292700''>then</span> <span m=''293150''>later</span> <span m=''293520''>I</span>
  <span m=''293580''>was</span> <span m=''293830''>at</span> <span m=''293920''>Akamai.</span>
  <span m=''294990''>So</span> <span m=''295450''>I</span> <span m=''295590''>don''t</span>
  <span m=''295730''>know</span> <span m=''295810''>what</span> <span m=''296800''>an</span>
  <span m=''296940''>Akamai</span> <span m=''297360''>prize is</span> <span m=''297910''>beyond</span>
  <span m=''298040''>an</span> <span m=''298290''>iPod,</span> <span m=''298830''>but</span>
  <span m=''299080''>maybe</span> <span m=''299340''>it''s</span> <span m=''299490''>like</span>
  <span m=''299650''>all</span> <span m=''299810''>your</span> <span m=''299950''>content</span>
  <span m=''300410''>delivered</span> <span m=''300770''>free</span> <span m=''301030''>for</span>
  <span m=''301170''>a</span> <span m=''301210''>month</span> <span m=''301510''>or</span>
  <span m=''301610''>something.</span> <span m=''303990''>And</span> <span m=''304420''>I''m</span>
  <span m=''304520''>now</span> <span m=''304770''>research</span> <span m=''305230''>faculty</span>
  <span m=''305690''>in</span> <span m=''305760''>the</span> <span m=''305830''>SuperTech</span>
  <span m=''306570''>Group,</span> <span m=''307010''>working</span> <span m=''307250''>with</span>
  <span m=''307330''>Charles.</span> <span m=''308770''>And</span> <span m=''309065''>I''m
  a</span> <span m=''309360''>founder</span> <span m=''310350''>of</span> <span m=''310530''>Tokutek,</span>
  <span m=''310870''>which</span> <span m=''311050''>is</span> <span m=''311180''>commercializing</span>
  <span m=''311830''>some</span> <span m=''312010''>work</span> <span m=''312250''>we</span>
  <span m=''312360''>did.</span> </p><p><span m=''313130''>A</span> <span m=''313330''>couple</span>
  <span m=''313560''>years</span> <span m=''313810''>ago,</span> <span m=''315130''>I</span>
  <span m=''315630''>started</span> <span m=''316000''>collaborating</span> <span
  m=''316920''>with</span> <span m=''317200''>Michael</span> <span m=''317490''>Bender</span>
  <span m=''318080''>and</span> <span m=''318240''>Martin</span> <span m=''318510''>Farach-Colton</span>
  <span m=''319610''>on</span> <span m=''319960''>data</span> <span m=''320230''>structures</span>
  <span m=''320790''>for</span> <span m=''322660''>that</span> <span m=''323070''>are</span>
  <span m=''323350''>suited</span> <span m=''323780''>for</span> <span m=''324440''>storing</span>
  <span m=''324830''>data</span> <span m=''325110''>on</span> <span m=''325290''>disk.</span>
  <span m=''326260''>And</span> <span m=''326740''>we</span> <span m=''326880''>ended</span>
  <span m=''327080''>up</span> <span m=''327550''>a</span> <span m=''327610''>bit</span>
  <span m=''327770''>later</span> <span m=''328110''>starting</span> <span m=''328500''>a</span>
  <span m=''328560''>company</span> <span m=''329410''>to</span> <span m=''329530''>commercialize</span>
  <span m=''330120''>the</span> <span m=''330220''>research.</span> <span m=''330690''>And</span>
  <span m=''330790''>basically,</span> <span m=''331320''>I''ll</span> <span m=''331430''>tell</span>
  <span m=''331650''>you</span> <span m=''333180''>sort</span> <span m=''333350''>of</span>
  <span m=''333430''>what</span> <span m=''333600''>the</span> <span m=''333680''>background</span>
  <span m=''334330''>is,</span> <span m=''334620''>and</span> <span m=''335020''>actually</span>
  <span m=''335360''>go</span> <span m=''335550''>into</span> <span m=''335720''>some</span>
  <span m=''335900''>technical</span> <span m=''336670''>on the</span> <span m=''337310''>data</span>
  <span m=''337520''>structure.</span> </p><p><span m=''338390''>So</span> <span m=''339820''>I</span>
  <span m=''339960''>don''t</span> <span m=''340100''>know</span> <span m=''340490''>exactly</span>
  <span m=''341090''>what</span> <span m=''341270''>you''ve</span> <span m=''341340''>spent</span>
  <span m=''341620''>most</span> <span m=''341930''>of</span> <span m=''342000''>your</span>
  <span m=''342130''>time</span> <span m=''342470''>on,</span> <span m=''342620''>but
  a</span> <span m=''342780''>lot</span> <span m=''343050''>of</span> <span m=''343130''>high-performance</span>
  <span m=''344440''>work,</span> <span m=''344815''>especially in</span> <span m=''345190''>academia,</span>
  <span m=''345830''>focuses</span> <span m=''346530''>on</span> <span m=''347420''>the</span>
  <span m=''347880''>CPUs</span> <span m=''348700''>and</span> <span m=''348920''>using</span>
  <span m=''349190''>the</span> <span m=''349290''>CPUs</span> <span m=''349780''>efficiently,</span>
  <span m=''350630''>maybe</span> <span m=''350870''>getting</span> <span m=''351110''>lots</span>
  <span m=''351370''>of</span> <span m=''351460''>FLOPS</span> <span m=''351850''>or</span>
  <span m=''351950''>something.</span> <span m=''352780''>The</span> <span m=''353170''>Cilk</span>
  <span m=''353470''>work that</span> <span m=''353570''>Charles</span> <span m=''353940''>and</span>
  <span m=''354070''>I</span> <span m=''354160''>did,</span> <span m=''354540''>for</span>
  <span m=''354660''>example,</span> <span m=''355060''>is</span> <span m=''355730''>squarely</span>
  <span m=''356320''>in</span> <span m=''356420''>the</span> <span m=''356510''>category</span>
  <span m=''357100''>of</span> <span m=''357160''>how</span> <span m=''357310''>do</span>
  <span m=''357380''>you</span> <span m=''357480''>get</span> <span m=''357720''>more</span>
  <span m=''357940''>FLOPS,</span> <span m=''359180''>or</span> <span m=''360000''>more</span>
  <span m=''360830''>computrons</span> <span m=''361660''>out</span> <span m=''361830''>of</span>
  <span m=''361960''>a</span> <span m=''362530''>particular</span> <span m=''362910''>machine.</span>
  </p><p><span m=''363770''>But</span> <span m=''363920''>it</span> <span m=''363990''>turns</span>
  <span m=''364250''>out</span> <span m=''364370''>often</span> <span m=''364750''>I/O</span>
  <span m=''365510''>is a</span> <span m=''365560''>big</span> <span m=''365790''>bottleneck,</span>
  <span m=''366410''>and</span> <span m=''366750''>so</span> <span m=''367470''>you</span>
  <span m=''367940''>see</span> <span m=''368150''>systems</span> <span m=''368620''>that</span>
  <span m=''368740''>look</span> <span m=''368920''>a</span> <span m=''368970''>little</span>
  <span m=''369140''>bit</span> <span m=''369320''>like</span> <span m=''369540''>this.</span>
  <span m=''369850''>You</span> <span m=''369970''>have</span> <span m=''370750''>a</span>
  <span m=''370820''>whole</span> <span m=''371040''>bunch</span> <span m=''371230''>of</span>
  <span m=''371320''>sensors</span> <span m=''371840''>somewhere,</span> <span m=''372520''>and</span>
  <span m=''372650''>the</span> <span m=''372720''>sensors</span> <span m=''373250''>might</span>
  <span m=''373600''>be</span> <span m=''374500''>something</span> <span m=''374950''>like</span>
  <span m=''377810''>a</span> <span m=''378380''>bunch</span> <span m=''378600''>of</span>
  <span m=''380170''>telescopes</span> <span m=''380840''>in an</span> <span m=''380960''>astronomy</span>
  <span m=''381590''>system.</span> <span m=''382400''>They''re</span> <span m=''382540''>sending</span>
  <span m=''382970''>millions</span> <span m=''383400''>of</span> <span m=''383490''>data</span>
  <span m=''383730''>items</span> <span m=''384130''>per</span> <span m=''384280''>second,</span>
  <span m=''384750''>and</span> <span m=''384950''>they</span> <span m=''385100''>have</span>
  <span m=''385260''>to</span> <span m=''385350''>be</span> <span m=''385460''>stored.</span>
  <span m=''386100''>And</span> <span m=''386490''>disk</span> <span m=''386890''>is</span>
  <span m=''387030''>where</span> <span m=''387210''>you</span> <span m=''387270''>have</span>
  <span m=''387470''>to</span> <span m=''387570''>store</span> <span m=''388030''>large</span>
  <span m=''388360''>amounts</span> <span m=''388640''>of</span> <span m=''388730''>data,</span>
  <span m=''389010''>because</span> <span m=''389370''>disk</span> <span m=''389650''>is</span>
  <span m=''390470''>orders</span> <span m=''390850''>of</span> <span m=''390890''>magnitude</span>
  <span m=''392350''>per</span> <span m=''392490''>byte</span> <span m=''393240''>than</span>
  <span m=''393620''>other</span> <span m=''393830''>storage</span> <span m=''394160''>systems.</span>
  </p><p><span m=''395010''>And</span> <span m=''395220''>then</span> <span m=''395630''>you</span>
  <span m=''395760''>want</span> <span m=''395960''>to</span> <span m=''396010''>do</span>
  <span m=''396330''>queries</span> <span m=''396790''>on</span> <span m=''396950''>that</span>
  <span m=''397180''>data,</span> <span m=''397560''>and</span> <span m=''402430''>you</span>
  <span m=''402560''>want</span> <span m=''402690''>to</span> <span m=''402750''>look</span>
  <span m=''402950''>at</span> <span m=''403020''>the</span> <span m=''403100''>data</span>
  <span m=''403390''>that''s</span> <span m=''403610''>recent.</span> <span m=''404160''>So</span>
  <span m=''404330''>it''s</span> <span m=''404460''>not</span> <span m=''404720''>good</span>
  <span m=''404880''>enough</span> <span m=''405170''>just</span> <span m=''405380''>to</span>
  <span m=''405480''>look</span> <span m=''405650''>at</span> <span m=''405730''>yesterday''s</span>
  <span m=''406240''>data.</span> <span m=''406440''>You</span> <span m=''406590''>want</span>
  <span m=''406720''>to</span> <span m=''406770''>know</span> <span m=''406910''>what''s</span>
  <span m=''407140''>going</span> <span m=''407380''>on</span> <span m=''407570''>right</span>
  <span m=''407730''>now.</span> <span m=''408500''>If</span> <span m=''408610''>your</span>
  <span m=''408720''>sensor</span> <span m=''409170''>array is</span> <span m=''409500''>a</span>
  <span m=''409560''>bunch</span> <span m=''409740''>of</span> <span m=''409810''>telescopes,</span>
  <span m=''410790''>and</span> <span m=''410920''>a</span> <span m=''410970''>supernova</span>
  <span m=''411720''>starts</span> <span m=''412100''>happening,</span> <span m=''413060''>you</span>
  <span m=''413180''>want</span> <span m=''413320''>to</span> <span m=''413370''>be</span>
  <span m=''413490''>able</span> <span m=''413630''>to</span> <span m=''413680''>find</span>
  <span m=''413980''>out</span> <span m=''414160''>quickly</span> <span m=''414510''>what''s</span>
  <span m=''414760''>going</span> <span m=''415040''>on,</span> <span m=''415330''>so</span>
  <span m=''415470''>that you</span> <span m=''415640''>can</span> <span m=''415770''>broadcast</span>
  <span m=''416410''>the</span> <span m=''416460''>message</span> <span m=''416840''>to</span>
  <span m=''416900''>everybody</span> <span m=''417210''>in</span> <span m=''417290''>the</span>
  <span m=''417370''>world so</span> <span m=''417660''>they</span> <span m=''417770''>can</span>
  <span m=''417890''>all</span> <span m=''418030''>point</span> <span m=''418280''>their</span>
  <span m=''418840''>telescopes</span> <span m=''419450''>at the</span> <span m=''419540''>supernova</span>
  <span m=''420100''>while</span> <span m=''420310''>it''s</span> <span m=''420490''>fresh.</span>
  </p><p><span m=''422690''>So</span> <span m=''422900''>that''s</span> <span m=''423360''>the</span>
  <span m=''424350''>picture.</span> <span m=''425170''>Another</span> <span m=''425610''>example</span>
  <span m=''426030''>of</span> <span m=''426110''>a</span> <span m=''426170''>sensor</span>
  <span m=''426930''>system</span> <span m=''427390''>is</span> <span m=''427580''>the</span>
  <span m=''427680''>internet,</span> <span m=''428480''>where</span> <span m=''428730''>you</span>
  <span m=''428810''>have</span> <span m=''429050''>thousands</span> <span m=''429650''>or</span>
  <span m=''429710''>millions</span> <span m=''430110''>of</span> <span m=''430280''>people</span>
  <span m=''430460''>clicking</span> <span m=''430840''>away</span> <span m=''431940''>on</span>
  <span m=''432220''>Facebook,</span> <span m=''432800''>for</span> <span m=''432940''>example.</span>
  <span m=''433850''>You</span> <span m=''433990''>could</span> <span m=''434150''>view</span>
  <span m=''435360''>that</span> <span m=''435530''>collection</span> <span m=''435810''>of</span>
  <span m=''436090''>mice</span> <span m=''436370''>as,</span> <span m=''436650''>abstractly,</span>
  <span m=''437320''>a</span> <span m=''437380''>bunch</span> <span m=''437610''>of</span>
  <span m=''437680''>sensors.</span> <span m=''439580''>And</span> <span m=''439790''>so</span>
  <span m=''440340''>you</span> <span m=''440440''>see</span> <span m=''440630''>it
  in</span> <span m=''440760''>science.</span> <span m=''441240''>You</span> <span
  m=''441330''>see</span> <span m=''441490''>it</span> <span m=''441580''>in</span>
  <span m=''441810''>internet.</span> <span m=''442260''>There''s</span> <span m=''442410''>lots</span>
  <span m=''442680''>of</span> <span m=''442800''>applications.</span> <span m=''444340''>For</span>
  <span m=''444440''>example,</span> <span m=''445220''>another</span> <span m=''445660''>one</span>
  <span m=''445890''>would</span> <span m=''446030''>be</span> <span m=''446180''>that</span>
  <span m=''446340''>you''re</span> <span m=''446730''>looking</span> <span m=''447030''>for</span>
  <span m=''447220''>attacks</span> <span m=''448400''>on</span> <span m=''448590''>your</span>
  <span m=''449100''>internet</span> <span m=''449680''>infrastructure</span> <span
  m=''450380''>in</span> <span m=''450660''>a</span> <span m=''450830''>large</span>
  <span m=''452100''>corporation,</span> <span m=''452680''>or</span> <span m=''452770''>something.</span>
  </p><p><span m=''454370''>So</span> <span m=''455650''>trying</span> <span m=''455880''>to</span>
  <span m=''456000''>reduce</span> <span m=''456400''>this</span> <span m=''457820''>big</span>
  <span m=''458060''>sensor</span> <span m=''458840''>system</span> <span m=''459540''>to</span>
  <span m=''461080''>what</span> <span m=''461270''>is</span> <span m=''461840''>the</span>
  <span m=''463320''>fundamental</span> <span m=''463760''>problem,</span> <span m=''464650''>basically</span>
  <span m=''465300''>we</span> <span m=''465460''>need</span> <span m=''465630''>to</span>
  <span m=''465700''>index</span> <span m=''466190''>the</span> <span m=''466280''>data.</span>
  <span m=''466640''>So</span> <span m=''466820''>the</span> <span m=''466940''>data</span>
  <span m=''467250''>indexing</span> <span m=''467780''>problem</span> <span m=''468330''>is</span>
  <span m=''468630''>this.</span> <span m=''469550''>Data</span> <span m=''469960''>is</span>
  <span m=''470140''>arriving</span> <span m=''470820''>in</span> <span m=''471040''>one</span>
  <span m=''471330''>order,</span> <span m=''471970''>and</span> <span m=''472150''>you</span>
  <span m=''472250''>want</span> <span m=''472610''>to</span> <span m=''472980''>ask</span>
  <span m=''473340''>about</span> <span m=''473710''>it</span> <span m=''474280''>in</span>
  <span m=''474420''>another</span> <span m=''474750''>order.</span> <span m=''475440''>So</span>
  <span m=''475600''>typically</span> <span m=''476050''>data</span> <span m=''476300''>is</span>
  <span m=''476390''>arriving</span> <span m=''477920''>in</span> <span m=''478060''>the</span>
  <span m=''478160''>order</span> <span m=''478710''>by</span> <span m=''478970''>time.</span>
  <span m=''479970''>When an</span> <span m=''480090''>observation</span> <span m=''480940''>is</span>
  <span m=''481130''>made,</span> <span m=''482330''>the</span> <span m=''482470''>event</span>
  <span m=''482730''>is</span> <span m=''482850''>logged.</span> <span m=''483260''>When
  the</span> <span m=''483460''>next</span> <span m=''483660''>observation is</span>
  <span m=''484390''>made,</span> <span m=''484630''>the</span> <span m=''484750''>event</span>
  <span m=''485010''>is</span> <span m=''485130''>logged.</span> <span m=''485950''>And</span>
  <span m=''486120''>then</span> <span m=''486490''>you</span> <span m=''486610''>want</span>
  <span m=''486860''>to</span> <span m=''486930''>do a</span> <span m=''487140''>query.</span>
  <span m=''487820''>Tell</span> <span m=''488010''>me</span> <span m=''488210''>everything</span>
  <span m=''488700''>that''s</span> <span m=''488870''>happening</span> <span m=''489380''>in</span>
  <span m=''489590''>that</span> <span m=''489890''>particular</span> <span m=''491040''>area</span>
  <span m=''491430''>of</span> <span m=''491530''>the</span> <span m=''491620''>sky</span>
  <span m=''492350''>over</span> <span m=''492560''>the</span> <span m=''492820''>past</span>
  <span m=''493080''>month.</span> <span m=''494470''>So</span> <span m=''494690''>there''s</span>
  <span m=''495110''>a</span> <span m=''495190''>big</span> <span m=''495530''>transposition</span>
  <span m=''496520''>that</span> <span m=''496720''>has</span> <span m=''497000''>to</span>
  <span m=''497110''>be</span> <span m=''497220''>done</span> <span m=''497720''>for</span>
  <span m=''497840''>these</span> <span m=''498060''>queries,</span> <span m=''498520''>abstractly,</span>
  <span m=''499160''>is</span> <span m=''499270''>the</span> <span m=''499350''>data''s</span>
  <span m=''499600''>coming</span> <span m=''499890''>in in</span> <span m=''500090''>one</span>
  <span m=''500280''>order,</span> <span m=''501210''>and</span> <span m=''501470''>you</span>
  <span m=''501610''>want</span> <span m=''501920''>to</span> <span m=''501970''>sort</span>
  <span m=''502270''>it</span> <span m=''502400''>and</span> <span m=''502990''>get</span>
  <span m=''503120''>the</span> <span m=''503190''>data</span> <span m=''503490''>out
  in</span> <span m=''503660''>another</span> <span m=''504000''>order.</span> </p><p><span
  m=''508050''>So</span> <span m=''508240''>one</span> <span m=''509080''>solution</span>
  <span m=''509500''>to</span> <span m=''509540''>this</span> <span m=''509720''>problem</span>
  <span m=''510060''>that</span> <span m=''510170''>a</span> <span m=''510210''>lot</span>
  <span m=''510410''>of</span> <span m=''510460''>people</span> <span m=''510700''>use
  is</span> <span m=''510930''>simply</span> <span m=''511360''>to</span> <span m=''511450''>sort</span>
  <span m=''511700''>the</span> <span m=''511830''>data.</span> <span m=''512220''>The</span>
  <span m=''512270''>data</span> <span m=''512510''>comes</span> <span m=''512809''>in.</span>
  <span m=''513020''>Sort</span> <span m=''513340''>it.</span> <span m=''516860''>Then
  you</span> <span m=''516980''>can</span> <span m=''517220''>query</span> <span m=''517580''>it</span>
  <span m=''517720''>in</span> <span m=''517850''>the</span> <span m=''517950''>order</span>
  <span m=''518150''>that</span> <span m=''518250''>it</span> <span m=''518360''>makes</span>
  <span m=''518590''>sense.</span> <span m=''519380''>This</span> <span m=''519580''>is</span>
  <span m=''519730''>basically</span> <span m=''521400''>a</span> <span m=''521539''>simple-minded</span>
  <span m=''522440''>explanation</span> <span m=''523049''>of</span> <span m=''523150''>what</span>
  <span m=''523350''>a</span> <span m=''523409''>data</span> <span m=''523720''>warehouse</span>
  <span m=''524270''>is.</span> <span m=''525090''>A</span> <span m=''525170''>data</span>
  <span m=''525420''>warehouse</span> <span m=''525920''>is</span> <span m=''526050''>all</span>
  <span m=''526210''>this</span> <span m=''526370''>data</span> <span m=''526620''>comes</span>
  <span m=''526960''>in--</span> <span m=''527310''>Walmart</span> <span m=''527790''>runs</span>
  <span m=''528070''>one</span> <span m=''528230''>of</span> <span m=''528310''>these</span>
  <span m=''528580''>in</span> <span m=''528690''>Arkansas.</span> <span m=''529610''>All</span>
  <span m=''529990''>these</span> <span m=''530200''>events</span> <span m=''530610''>which</span>
  <span m=''530820''>are</span> <span m=''531430''>people</span> <span m=''531690''>scanning</span>
  <span m=''532530''>cans</span> <span m=''532860''>of</span> <span m=''532940''>soup</span>
  <span m=''533320''>on</span> <span m=''533520''>bar</span> <span m=''533820''>codes</span>
  <span m=''534150''>all</span> <span m=''534350''>over</span> <span m=''534520''>the</span>
  <span m=''534700''>country</span> <span m=''535170''>out</span> <span m=''535240''>in</span>
  <span m=''535460''>Walmart</span> <span m=''535930''>stores,</span> <span m=''536560''>all</span>
  <span m=''536750''>that</span> <span m=''536960''>data</span> <span m=''537330''>arrives</span>
  <span m=''538390''>in</span> <span m=''538660''>Arkansas,</span> <span m=''539270''>in</span>
  <span m=''539380''>one</span> <span m=''539620''>location.</span> <span m=''541060''>They</span>
  <span m=''541220''>sort</span> <span m=''541450''>the</span> <span m=''541690''>data</span>
  <span m=''541970''>overnight,</span> <span m=''542870''>and</span> <span m=''543040''>then</span>
  <span m=''543160''>the</span> <span m=''543230''>next</span> <span m=''543500''>morning</span>
  <span m=''543740''>they</span> <span m=''543870''>can</span> <span m=''544030''>answer</span>
  <span m=''544320''>questions</span> <span m=''544980''>like</span> <span m=''545890''>what''s</span>
  <span m=''546170''>the</span> <span m=''546250''>most</span> <span m=''546520''>popular</span>
  <span m=''546990''>food</span> <span m=''548170''>in</span> <span m=''548440''>the</span>
  <span m=''548730''>week</span> <span m=''549000''>before</span> <span m=''549500''>a</span>
  <span m=''549530''>hurricane</span> <span m=''550060''>strikes?</span> <span m=''552070''>Because</span>
  <span m=''552270''>this</span> <span m=''552460''>is</span> <span m=''552560''>the</span>
  <span m=''553020''>kind</span> <span m=''553210''>of</span> <span m=''553420''>request</span>
  <span m=''553880''>that</span> <span m=''554110''>Walmart</span> <span m=''554520''>might</span>
  <span m=''554690''>care</span> <span m=''554930''>about,</span> <span m=''555540''>because</span>
  <span m=''555830''>they</span> <span m=''555940''>get</span> <span m=''556120''>a</span>
  <span m=''556170''>forecast</span> <span m=''556440''>that a</span> <span m=''556710''>hurricane''s</span>
  <span m=''557230''>coming,</span> <span m=''557530''>and</span> <span m=''557590''>it</span>
  <span m=''557670''>turns</span> <span m=''557920''>out</span> <span m=''558050''>they</span>
  <span m=''558130''>need</span> <span m=''558300''>to</span> <span m=''558350''>ship</span>
  <span m=''558650''>beer</span> <span m=''558990''>and</span> <span m=''559110''>blueberry</span>
  <span m=''559530''>Pop-Tarts</span> <span m=''561840''>to</span> <span m=''561980''>the</span>
  <span m=''562070''>local</span> <span m=''562350''>stores,</span> <span m=''563500''>which</span>
  <span m=''563750''>are</span> <span m=''563790''>the</span> <span m=''563920''>things</span>
  <span m=''564190''>that</span> <span m=''564490''>basically</span> <span m=''564970''>you</span>
  <span m=''565040''>can</span> <span m=''565210''>eat even</span> <span m=''565670''>if</span>
  <span m=''565910''>power</span> <span m=''566220''>has</span> <span m=''566410''>failed.</span>
  </p><p><span m=''568780''>The</span> <span m=''568880''>problem</span> <span m=''569290''>with</span>
  <span m=''569430''>sorting</span> <span m=''570070''>is</span> <span m=''570330''>that</span>
  <span m=''570480''>you</span> <span m=''570550''>have</span> <span m=''570730''>to</span>
  <span m=''570830''>wait</span> <span m=''571080''>overnight.</span> <span m=''571880''>And</span>
  <span m=''573300''>for</span> <span m=''573350''>Walmart,</span> <span m=''573810''>that</span>
  <span m=''573990''>might</span> <span m=''574170''>actually</span> <span m=''574450''>be</span>
  <span m=''574580''>good</span> <span m=''574750''>enough.</span> <span m=''575100''>But</span>
  <span m=''575240''>if</span> <span m=''575370''>you''re</span> <span m=''575870''>the</span>
  <span m=''576010''>astronomer,</span> <span m=''576660''>that</span> <span m=''576890''>application</span>
  <span m=''577760''>is</span> <span m=''578250''>not</span> <span m=''578460''>so</span>
  <span m=''578590''>great.</span> <span m=''579430''>So</span> <span m=''579630''>this</span>
  <span m=''579820''>problem</span> <span m=''580230''>is</span> <span m=''580360''>called</span>
  <span m=''580970''>the</span> <span m=''581110''>indexing</span> <span m=''581570''>problem.</span>
  <span m=''582940''>We</span> <span m=''583190''>have</span> <span m=''583320''>to</span>
  <span m=''583420''>maintain</span> <span m=''583920''>indexes.</span> <span m=''585430''>And</span>
  <span m=''588690''>traditionally,</span> <span m=''589480''>the</span> <span m=''589600''>classical</span>
  <span m=''590090''>solution</span> <span m=''590470''>is</span> <span m=''590570''>to
  use</span> <span m=''590750''>a</span> <span m=''590790''>data structure</span>
  <span m=''591190''>called</span> <span m=''591490''>a</span> <span m=''591540''>B-tree.</span>
  <span m=''592040''>So</span> <span m=''592210''>do you</span> <span m=''592360''>all</span>
  <span m=''592550''>know</span> <span m=''592700''>what</span> <span m=''592890''>a</span>
  <span m=''593070''>B-tree is?</span> <span m=''595348''>[INAUDIBLE]</span> <span
  m=''595770''>data structures</span> <span m=''596020''>to</span> <span m=''596285''>algorithms?</span>
  <span m=''597120''>A</span> <span m=''597480''>B-tree</span> <span m=''597680''>is</span>
  <span m=''598340''>like</span> <span m=''598520''>a</span> <span m=''598580''>search</span>
  <span m=''598940''>tree,</span> <span m=''599220''>except</span> <span m=''599550''>it''s</span>
  <span m=''599680''>got</span> <span m=''599860''>some</span> <span m=''600000''>fan-out,</span>
  <span m=''600440''>and I''ll</span> <span m=''600540''>talk</span> <span m=''600810''>about</span>
  <span m=''601120''>it</span> <span m=''601240''>in a</span> <span m=''601300''>second.</span>
  <span m=''603030''>They</span> <span m=''603120''>show</span> <span m=''603390''>up</span>
  <span m=''603600''>in</span> <span m=''603820''>virtually</span> <span m=''604230''>all</span>
  <span m=''604480''>storage</span> <span m=''604940''>systems</span> <span m=''605410''>today,</span>
  <span m=''605840''>and</span> <span m=''606230''>they</span> <span m=''606700''>were</span>
  <span m=''606850''>invented</span> <span m=''607160''>about</span> <span m=''607480''>40</span>
  <span m=''607750''>years</span> <span m=''608050''>ago,</span> <span m=''608850''>and</span>
  <span m=''609710''>they</span> <span m=''609790''>show</span> <span m=''609970''>up</span>
  <span m=''610070''>in</span> <span m=''610160''>databases</span> <span m=''610890''>such</span>
  <span m=''611110''>as</span> <span m=''611230''>MyISAM</span> <span m=''612060''>or</span>
  <span m=''612240''>Oracle.</span> <span m=''613230''>They</span> <span m=''613330''>show</span>
  <span m=''613620''>up</span> <span m=''613770''>in</span> <span m=''613890''>file</span>
  <span m=''614180''>systems</span> <span m=''614710''>like</span> <span m=''614920''>XFS.</span>
  <span m=''616010''>You</span> <span m=''616140''>can</span> <span m=''616270''>think</span>
  <span m=''616490''>of</span> <span m=''616610''>what</span> <span m=''616840''>Unix</span>
  <span m=''617190''>file</span> <span m=''617430''>systems</span> <span m=''617900''>like</span>
  <span m=''618240''>EXT</span> <span m=''618710''>do</span> <span m=''619180''>as</span>
  <span m=''619390''>being</span> <span m=''619650''>a</span> <span m=''619710''>variation</span>
  <span m=''620280''>of</span> <span m=''620390''>a</span> <span m=''620450''>B-tree.</span>
  <span m=''620820''>Basically</span> <span m=''621300''>they''re</span> <span m=''621460''>everywhere.</span>
  </p><p><span m=''622630''>Mike</span> <span m=''622770''>might</span> <span m=''623030''>drew</span>
  <span m=''623200''>this</span> <span m=''623390''>picture</span> <span m=''624780''>of</span>
  <span m=''624910''>a</span> <span m=''624970''>B-tree.</span> <span m=''626380''>And</span>
  <span m=''628100''>I</span> <span m=''628170''>said,</span> <span m=''628410''>I</span>
  <span m=''628470''>don''t</span> <span m=''628680''>get</span> <span m=''628860''>it.</span>
  <span m=''631090''>He</span> <span m=''631160''>said,</span> <span m=''631290''>well,</span>
  <span m=''631870''>there''s</span> <span m=''632080''>a</span> <span m=''632140''>tree,</span>
  <span m=''632510''>and</span> <span m=''632610''>there''s</span> <span m=''632990''>bees.</span>
  <span m=''634540''>And I said, but</span> <span m=''634950''>those</span> <span
  m=''635190''>are</span> <span m=''635260''>wasps.</span> <span m=''636710''>So</span>
  <span m=''637270''>anyway--</span> </p><p><span m=''645670''>So</span> <span m=''645930''>a</span>
  <span m=''646160''>B-tree</span> <span m=''646340''>looks</span> <span m=''646530''>like</span>
  <span m=''646700''>this.</span> <span m=''647180''>It''s</span> <span m=''647320''>a</span>
  <span m=''647370''>search</span> <span m=''647750''>tree,</span> <span m=''648090''>so</span>
  <span m=''648240''>that</span> <span m=''648420''>means</span> <span m=''648620''>everything</span>
  <span m=''649920''>is</span> <span m=''650050''>organized.</span> <span m=''650660''>It''s</span>
  <span m=''651150''>got</span> <span m=''651310''>left</span> <span m=''651550''>children</span>
  <span m=''651840''>and</span> <span m=''652130''>right</span> <span m=''652360''>children,</span>
  <span m=''652740''>and</span> <span m=''652830''>there''s</span> <span m=''652990''>actually</span>
  <span m=''653280''>many</span> <span m=''653550''>children.</span> <span m=''654360''>And</span>
  <span m=''654520''>like</span> <span m=''654740''>any</span> <span m=''654980''>other</span>
  <span m=''655150''>search</span> <span m=''655470''>tree,</span> <span m=''655590''>all</span>
  <span m=''655750''>the</span> <span m=''655840''>things</span> <span m=''656130''>to</span>
  <span m=''656240''>the</span> <span m=''656340''>left</span> <span m=''656800''>are</span>
  <span m=''657210''>before</span> <span m=''657760''>all</span> <span m=''657900''>the</span>
  <span m=''657990''>things</span> <span m=''658300''>to</span> <span m=''658400''>the</span>
  <span m=''658510''>right.</span> <span m=''658820''>That''s</span> <span m=''659020''>sort</span>
  <span m=''659220''>of</span> <span m=''659290''>the</span> <span m=''659370''>property</span>
  <span m=''659830''>of</span> <span m=''659890''>trees</span> <span m=''660220''>that</span>
  <span m=''660270''>lets</span> <span m=''660470''>you</span> <span m=''660610''>do</span>
  <span m=''661260''>more</span> <span m=''661470''>than</span> <span m=''661610''>just</span>
  <span m=''661810''>a</span> <span m=''661840''>hash</span> <span m=''662180''>table.</span>
  <span m=''662470''>A hash</span> <span m=''662820''>table</span> <span m=''663050''>lets</span>
  <span m=''663250''>you</span> <span m=''663360''>do</span> <span m=''664050''>get</span>
  <span m=''664350''>and put.</span> <span m=''665850''>But</span> <span m=''666040''>a</span>
  <span m=''666380''>tree</span> <span m=''667530''>lets</span> <span m=''667780''>you</span>
  <span m=''667910''>do</span> <span m=''668100''>next.</span> <span m=''668930''>And</span>
  <span m=''669000''>that''s</span> <span m=''669250''>the</span> <span m=''669350''>key</span>
  <span m=''669640''>observation,</span> <span m=''670800''>why</span> <span m=''671010''>you</span>
  <span m=''671160''>need</span> <span m=''671870''>something</span> <span m=''672180''>like</span>
  <span m=''672330''>a</span> <span m=''672390''>tree</span> <span m=''672720''>instead</span>
  <span m=''672960''>of</span> <span m=''673040''>a hash</span> <span m=''673450''>table.</span>
  </p><p><span m=''673480''>A</span> <span m=''673980''>lot</span> <span m=''674210''>of</span>
  <span m=''674280''>database</span> <span m=''674780''>queries--</span> <span m=''675160''>if</span>
  <span m=''675230''>you</span> <span m=''675300''>go</span> <span m=''675470''>and</span>
  <span m=''675570''>click</span> <span m=''675800''>on</span> <span m=''675950''>Facebook</span>
  <span m=''677510''>on</span> <span m=''678180''>somebody''s</span> <span m=''678710''>page,</span>
  <span m=''680250''>there''s</span> <span m=''680490''>all</span> <span m=''680720''>these</span>
  <span m=''681230''>things</span> <span m=''681530''>that</span> <span m=''681910''>have</span>
  <span m=''682000''>been</span> <span m=''682140''>posted</span> <span m=''684280''>on</span>
  <span m=''684460''>somebody''s</span> <span m=''684860''>wall.</span> <span m=''685770''>And</span>
  <span m=''686650''>what</span> <span m=''686800''>they''ve</span> <span m=''686940''>done</span>
  <span m=''687150''>when they</span> <span m=''687370''>organized</span> <span m=''687820''>that</span>
  <span m=''688000''>data</span> <span m=''688290''>is</span> <span m=''688480''>that</span>
  <span m=''688610''>they''ve</span> <span m=''688950''>organized</span> <span m=''689510''>it</span>
  <span m=''689620''>so</span> <span m=''689820''>that</span> <span m=''690370''>each</span>
  <span m=''690600''>of</span> <span m=''690700''>those</span> <span m=''690930''>items</span>
  <span m=''691550''>is</span> <span m=''691690''>a</span> <span m=''691750''>row</span>
  <span m=''692080''>in</span> <span m=''692120''>the</span> <span m=''692190''>database,</span>
  <span m=''692800''>and</span> <span m=''692940''>they''re</span> <span m=''693050''>next</span>
  <span m=''693500''>to</span> <span m=''693680''>each</span> <span m=''693860''>other</span>
  <span m=''694130''>so</span> <span m=''694290''>that</span> <span m=''695190''>you</span>
  <span m=''695330''>fetch</span> <span m=''695630''>the</span> <span m=''695720''>first</span>
  <span m=''696020''>one,</span> <span m=''696190''>which</span> <span m=''696390''>is</span>
  <span m=''696510''>like</span> <span m=''696680''>the</span> <span m=''696760''>home</span>
  <span m=''697010''>page</span> <span m=''697320''>of</span> <span m=''697380''>the</span>
  <span m=''697470''>person,</span> <span m=''698350''>and</span> <span m=''698520''>then</span>
  <span m=''699300''>the</span> <span m=''699500''>next and next and</span> <span
  m=''699710''>next</span> <span m=''700050''>gives</span> <span m=''700250''>each</span>
  <span m=''700460''>of</span> <span m=''700540''>the</span> <span m=''700620''>messages</span>
  <span m=''701140''>that</span> <span m=''701240''>they</span> <span m=''701330''>want</span>
  <span m=''701460''>to</span> <span m=''701600''>display.</span> <span m=''702860''>And</span>
  <span m=''703460''>by</span> <span m=''703590''>making</span> <span m=''703950''>those</span>
  <span m=''704200''>things</span> <span m=''705450''>adjacent</span> <span m=''705860''>to</span>
  <span m=''705970''>each</span> <span m=''706130''>other,</span> <span m=''706350''>it</span>
  <span m=''706440''>means</span> <span m=''706650''>that</span> <span m=''706770''>they</span>
  <span m=''706860''>don''t</span> <span m=''707090''>incur</span> <span m=''707510''>a</span>
  <span m=''707750''>disk</span> <span m=''708020''>I/O</span> <span m=''708160''>every</span>
  <span m=''708430''>time.</span> <span m=''709630''>if</span> <span m=''710000''>it</span>
  <span m=''710050''>were</span> <span m=''710190''>just</span> <span m=''710370''>a</span>
  <span m=''710400''>hash</span> <span m=''710740''>table,</span> <span m=''710980''>you''d</span>
  <span m=''711140''>be</span> <span m=''711230''>having</span> <span m=''711520''>to</span>
  <span m=''711570''>look</span> <span m=''711740''>all</span> <span m=''711890''>over</span>
  <span m=''712010''>the</span> <span m=''712140''>place</span> <span m=''712430''>to</span>
  <span m=''712530''>find</span> <span m=''712780''>those</span> <span m=''712990''>things.</span>
  </p><p><span m=''714400''>So</span> <span m=''715260''>B-trees</span> <span m=''715750''>are</span>
  <span m=''715840''>really</span> <span m=''716220''>fast,</span> <span m=''716750''>if</span>
  <span m=''716830''>you</span> <span m=''716940''>have</span> <span m=''717110''>to</span>
  <span m=''717240''>do</span> <span m=''717410''>insertions</span> <span m=''718010''>sequentially.</span>
  <span m=''718740''>And</span> <span m=''718820''>the</span> <span m=''718910''>reason</span>
  <span m=''719270''>is</span> <span m=''720310''>you</span> <span m=''720800''>have</span>
  <span m=''720900''>a</span> <span m=''720950''>data</span> <span m=''721170''>structure</span>
  <span m=''721510''>that''s</span> <span m=''721720''>too</span> <span m=''721870''>big</span>
  <span m=''722100''>to</span> <span m=''722190''>fit</span> <span m=''722360''>in</span>
  <span m=''722470''>main</span> <span m=''722690''>memory.</span> <span m=''725350''>If</span>
  <span m=''725700''>the</span> <span m=''725770''>data</span> <span m=''725960''>structure</span>
  <span m=''726260''>fits</span> <span m=''726470''>in</span> <span m=''726580''>main</span>
  <span m=''726750''>memory,</span> <span m=''727030''>this</span> <span m=''727200''>is</span>
  <span m=''727350''>just</span> <span m=''727540''>the</span> <span m=''727620''>wrong</span>
  <span m=''727840''>data</span> <span m=''728070''>structure,</span> <span m=''728460''>right?</span>
  <span m=''729690''>If</span> <span m=''729830''>it fits</span> <span m=''730000''>in</span>
  <span m=''730090''>main</span> <span m=''730260''>memory,</span> <span m=''730540''>what</span>
  <span m=''730720''>should</span> <span m=''730880''>you</span> <span m=''731010''>use</span>
  <span m=''732870''>to</span> <span m=''733060''>solve</span> <span m=''733320''>this</span>
  <span m=''733500''>problem?</span> <span m=''736760''>Any</span> <span m=''736920''>ideas?</span>
  <span m=''739450''>What</span> <span m=''739790''>data</span> <span m=''740020''>structure</span>
  <span m=''740650''>is</span> <span m=''740820''>like</span> <span m=''741190''>a</span>
  <span m=''741320''>B-tree</span> <span m=''742000''>except</span> <span m=''742410''>it</span>
  <span m=''742570''>doesn''t</span> <span m=''742960''>have</span> <span m=''743410''>lots</span>
  <span m=''743730''>of</span> <span m=''743840''>fan-out?</span> <span m=''748241''>Does</span>
  <span m=''748730''>anybody</span> <span m=''749150''>know</span> <span m=''749290''>this</span>
  <span m=''749580''>stuff</span> <span m=''749870''>in this</span> <span m=''750327''>class?</span>
  <span m=''753530''>Do</span> <span m=''753670''>you</span> <span m=''753810''>people</span>
  <span m=''754080''>know</span> <span m=''754260''>data</span> <span m=''754450''>structures</span>
  <span m=''754860''>at</span> <span m=''754920''>all?</span> <span m=''756780''>Maybe</span>
  <span m=''757060''>I''m</span> <span m=''757220''>in</span> <span m=''757310''>the</span>
  <span m=''757360''>wrong</span> <span m=''757670''>place.</span> <span m=''758820''>Because</span>
  <span m=''759320''>it''s</span> <span m=''759520''>OK.</span> <span m=''761520''>Just</span>
  <span m=''761730''>a</span> <span m=''761780''>binary</span> <span m=''762240''>tree</span>
  <span m=''762420''>would</span> <span m=''762540''>be</span> <span m=''762660''>the</span>
  <span m=''762750''>data</span> <span m=''762940''>structure</span> <span m=''763310''>if</span>
  <span m=''763380''>you were</span> <span m=''763550''>doing</span> <span m=''763750''>this</span>
  <span m=''764170''>in</span> <span m=''764360''>memory,</span> <span m=''764880''>right?</span>
  <span m=''766070''>A</span> <span m=''766190''>binary</span> <span m=''766570''>tree</span>
  <span m=''766760''>would</span> <span m=''766880''>be</span> <span m=''767010''>fine.</span>
  <span m=''767520''>Or</span> <span m=''767660''>maybe</span> <span m=''768210''>you</span>
  <span m=''768330''>would</span> <span m=''768440''>try</span> <span m=''768610''>to</span>
  <span m=''768710''>minimize</span> <span m=''769220''>the</span> <span m=''769300''>number</span>
  <span m=''769600''>of</span> <span m=''770190''>cache misses</span> <span m=''770920''>or</span>
  <span m=''771020''>something.</span> </p><p><span m=''772810''>So</span> <span m=''773790''>for</span>
  <span m=''773930''>sequential</span> <span m=''774400''>inserts,</span> <span m=''775370''>if</span>
  <span m=''775530''>you''re</span> <span m=''775750''>inserting</span> <span m=''776030''>at</span>
  <span m=''776110''>the</span> <span m=''776240''>end,</span> <span m=''776640''>basically</span>
  <span m=''777130''>all</span> <span m=''777340''>the</span> <span m=''777480''>stuff</span>
  <span m=''777810''>down</span> <span m=''778100''>the</span> <span m=''778180''>right</span>
  <span m=''778510''>spine</span> <span m=''778830''>of</span> <span m=''778920''>the</span>
  <span m=''779010''>tree is</span> <span m=''779380''>in</span> <span m=''779510''>main</span>
  <span m=''779700''>memory,</span> <span m=''780060''>and an</span> <span m=''780160''>insertion</span>
  <span m=''780750''>just</span> <span m=''780990''>inserts and</span> <span m=''781420''>inserts.</span>
  <span m=''781870''>You</span> <span m=''782000''>have</span> <span m=''782130''>no</span>
  <span m=''782320''>disk I/Os,</span> <span m=''783100''>and</span> <span m=''783280''>basically</span>
  <span m=''783585''>it</span> <span m=''783890''>runs</span> <span m=''784150''>extremely</span>
  <span m=''784680''>fast.</span> <span m=''786310''>The</span> <span m=''786490''>disk</span>
  <span m=''786750''>I/O is</span> <span m=''787010''>sequential.</span> <span m=''788210''>You</span>
  <span m=''788360''>get</span> <span m=''789030''>basically</span> <span m=''789510''>performance</span>
  <span m=''790190''>that''s</span> <span m=''790400''>limited</span> <span m=''790870''>by</span>
  <span m=''791080''>the</span> <span m=''791710''>disk</span> <span m=''792110''>bandwidth,</span>
  <span m=''792850''>which</span> <span m=''793040''>is</span> <span m=''793190''>the</span>
  <span m=''793300''>rate</span> <span m=''793620''>at</span> <span m=''793710''>which</span>
  <span m=''793910''>the</span> <span m=''794020''>disk can</span> <span m=''794490''>write</span>
  <span m=''795270''>consecutive</span> <span m=''795850''>blocks.</span> <span m=''797980''>But</span>
  <span m=''798410''>B-trees</span> <span m=''799000''>are</span> <span m=''799090''>really</span>
  <span m=''799430''>slow</span> <span m=''799980''>if</span> <span m=''800080''>you''re</span>
  <span m=''800210''>doing</span> <span m=''800580''>insertions</span> <span m=''801270''>that</span>
  <span m=''801650''>look</span> <span m=''801900''>random.</span> <span m=''803260''>The</span>
  <span m=''803380''>database</span> <span m=''803790''>world</span> <span m=''804060''>calls</span>
  <span m=''804340''>those</span> <span m=''804530''>high-entropy.</span> <span m=''806260''>And</span>
  <span m=''806470''>so</span> <span m=''806620''>basically</span> <span m=''807070''>the</span>
  <span m=''807170''>idea is</span> <span m=''807600''>I</span> <span m=''807660''>pick</span>
  <span m=''808050''>some</span> <span m=''808310''>leaf</span> <span m=''808610''>at</span>
  <span m=''808720''>random,</span> <span m=''809220''>and</span> <span m=''809320''>then</span>
  <span m=''809430''>I</span> <span m=''809500''>have</span> <span m=''809720''>to</span>
  <span m=''809900''>bring</span> <span m=''810220''>it</span> <span m=''810290''>into</span>
  <span m=''810480''>main</span> <span m=''810730''>memory,</span> <span m=''811750''>put</span>
  <span m=''811950''>the</span> <span m=''812760''>new</span> <span m=''812900''>record</span>
  <span m=''813250''>in</span> <span m=''813400''>there,</span> <span m=''813690''>and</span>
  <span m=''813860''>then</span> <span m=''813990''>eventually</span> <span m=''814350''>write</span>
  <span m=''814580''>it</span> <span m=''814680''>back</span> <span m=''814940''>out.</span>
  <span m=''815610''>And</span> <span m=''815720''>because</span> <span m=''816320''>the</span>
  <span m=''816400''>data</span> <span m=''816630''>structure</span> <span m=''817190''>is</span>
  <span m=''817900''>spread</span> <span m=''818310''>all</span> <span m=''818460''>over</span>
  <span m=''818670''>disk,</span> <span m=''819730''>then</span> <span m=''819960''>each</span>
  <span m=''820160''>of</span> <span m=''820250''>those</span> <span m=''820450''>random</span>
  <span m=''820850''>blocks</span> <span m=''821210''>that</span> <span m=''821330''>I</span>
  <span m=''821420''>choose,</span> <span m=''822200''>when I</span> <span m=''822260''>bring</span>
  <span m=''822450''>it</span> <span m=''822530''>in,</span> <span m=''822710''>that''s</span>
  <span m=''822890''>a</span> <span m=''822990''>random</span> <span m=''823370''>disk</span>
  <span m=''823470''>I/O,</span> <span m=''823870''>which</span> <span m=''824020''>is</span>
  <span m=''824150''>very</span> <span m=''824380''>expensive.</span> </p><p><span
  m=''825920''>So</span> <span m=''826130''>here,</span> <span m=''827060''>for</span>
  <span m=''827170''>this</span> <span m=''827440''>workload,</span> <span m=''828110''>unlike</span>
  <span m=''828390''>the</span> <span m=''828480''>previous</span> <span m=''829170''>workload,</span>
  <span m=''829390''>the</span> <span m=''831460''>performance</span> <span m=''831900''>of</span>
  <span m=''831970''>the</span> <span m=''832050''>system</span> <span m=''832390''>is</span>
  <span m=''832530''>limited</span> <span m=''832920''>by</span> <span m=''833060''>how</span>
  <span m=''833270''>fast</span> <span m=''833640''>can</span> <span m=''833760''>you</span>
  <span m=''833850''>move</span> <span m=''834020''>the</span> <span m=''834660''>disk</span>
  <span m=''834970''>head</span> <span m=''835230''>around,</span> <span m=''835600''>rather</span>
  <span m=''835920''>than</span> <span m=''836450''>how</span> <span m=''836610''>fast</span>
  <span m=''837000''>can</span> <span m=''837140''>you</span> <span m=''837260''>write</span>
  <span m=''837570''>having</span> <span m=''837910''>placed</span> <span m=''838250''>the</span>
  <span m=''838330''>disk</span> <span m=''838630''>head.</span> <span m=''839280''>And</span>
  <span m=''840015''>you</span> <span m=''840890''>perhaps</span> <span m=''841710''>you</span>
  <span m=''841850''>can</span> <span m=''841960''>only,</span> <span m=''842220''>on</span>
  <span m=''842320''>a</span> <span m=''842390''>disk</span> <span m=''842640''>drive,</span>
  <span m=''843105''>do</span> <span m=''843570''>something</span> <span m=''843920''>like</span>
  <span m=''844100''>100</span> <span m=''845180''>disk</span> <span m=''845460''>head</span>
  <span m=''845710''>movements</span> <span m=''846870''>per</span> <span m=''847060''>second.</span>
  <span m=''848500''>And</span> <span m=''848730''>if</span> <span m=''848830''>you''re</span>
  <span m=''849130''>writing</span> <span m=''849510''>small</span> <span m=''850570''>records</span>
  <span m=''851380''>that</span> <span m=''851550''>are</span> <span m=''851680''>like</span>
  <span m=''852660''>100</span> <span m=''853010''>bytes</span> <span m=''853360''>or</span>
  <span m=''853480''>something,</span> <span m=''853860''>you</span> <span m=''853960''>might</span>
  <span m=''854280''>find</span> <span m=''854470''>yourself</span> <span m=''854850''>using</span>
  <span m=''855830''>a</span> <span m=''856180''>thousandth</span> <span m=''856530''>of</span>
  <span m=''856660''>a</span> <span m=''856720''>percent</span> <span m=''857590''>of</span>
  <span m=''857730''>the</span> <span m=''858080''>disk</span> <span m=''858330''>I/O,</span>
  <span m=''859020''>of</span> <span m=''859160''>the</span> <span m=''859250''>disk''s</span>
  <span m=''860500''>bandwidth</span> <span m=''860940''>performance.</span> <span
  m=''861970''>And</span> <span m=''862110''>so</span> <span m=''862720''>people</span>
  <span m=''863020''>hate</span> <span m=''863290''>that.</span> <span m=''863860''>They</span>
  <span m=''863950''>hate</span> <span m=''864210''>buying</span> <span m=''864470''>something</span>
  <span m=''864870''>and only</span> <span m=''865070''>being</span> <span m=''865300''>able</span>
  <span m=''865440''>to</span> <span m=''865490''>use a</span> <span m=''865690''>thousandth</span>
  <span m=''866250''>of</span> <span m=''866360''>a</span> <span m=''866420''>percent</span>
  <span m=''866850''>of</span> <span m=''866940''>its</span> <span m=''867070''>capacity.</span>
  <span m=''868670''>Right?</span> </p><p><span m=''874440''>New</span> <span m=''874710''>B-trees.</span>
  <span m=''875540''>Something''s</span> <span m=''875880''>wrong</span> <span m=''876100''>with</span>
  <span m=''876250''>that</span> <span m=''876500''>title.</span> <span m=''877080''>So</span>
  <span m=''877680''>B-trees</span> <span m=''878150''>are</span> <span m=''878230''>really</span>
  <span m=''878520''>fast</span> <span m=''878920''>in</span> <span m=''879010''>doing</span>
  <span m=''879540''>range</span> <span m=''880320''>queries,</span> <span m=''880810''>because</span>
  <span m=''881190''>basically</span> <span m=''881770''>once</span> <span m=''881990''>you''ve</span>
  <span m=''882200''>are</span> <span m=''882270''>brought</span> <span m=''882760''>a</span>
  <span m=''882800''>block</span> <span m=''883180''>in and</span> <span m=''883330''>you</span>
  <span m=''883440''>want</span> <span m=''883600''>to</span> <span m=''883760''>do</span>
  <span m=''883870''>the</span> <span m=''883990''>next</span> <span m=''884310''>item,</span>
  <span m=''885130''>chances</span> <span m=''885610''>are</span> <span m=''885800''>the</span>
  <span m=''885980''>next</span> <span m=''886170''>item''s</span> <span m=''886470''>also</span>
  <span m=''886800''>on</span> <span m=''886900''>the</span> <span m=''887000''>same</span>
  <span m=''887280''>page.</span> <span m=''887700''>So</span> <span m=''888440''>once</span>
  <span m=''888680''>in</span> <span m=''888720''>while</span> <span m=''888950''>you</span>
  <span m=''889070''>go</span> <span m=''889230''>over</span> <span m=''889410''>a</span>
  <span m=''889460''>page</span> <span m=''889750''>boundary,</span> <span m=''890180''>but</span>
  <span m=''890390''>mostly</span> <span m=''890850''>you</span> <span m=''890990''>just</span>
  <span m=''891380''>reading</span> <span m=''891750''>stuff</span> <span m=''891990''>very</span>
  <span m=''892280''>fast.</span> </p><p><span m=''893410''>Oh,</span> <span m=''893600''>I</span>
  <span m=''893690''>know</span> <span m=''893820''>what</span> <span m=''893950''>this</span>
  <span m=''894120''>is</span> <span m=''894230''>about.</span> <span m=''895050''>When</span>
  <span m=''895210''>a</span> <span m=''895310''>B-tree''s</span> <span m=''895770''>new
  and</span> <span m=''896140''>it''s</span> <span m=''896360''>been</span> <span
  m=''896520''>constructed</span> <span m=''897310''>sequentially,</span> <span m=''897960''>it''s</span>
  <span m=''898100''>also</span> <span m=''898350''>very</span> <span m=''898600''>fast.</span>
  <span m=''899350''>When</span> <span m=''899510''>it</span> <span m=''899600''>gets</span>
  <span m=''899920''>old,</span> <span m=''900300''>what</span> <span m=''900440''>happens</span>
  <span m=''900970''>is</span> <span m=''901510''>the</span> <span m=''901610''>blocks</span>
  <span m=''902030''>themselves</span> <span m=''902580''>get</span> <span m=''902760''>moved</span>
  <span m=''903000''>around</span> <span m=''903340''>on</span> <span m=''903480''>disk.</span>
  <span m=''903760''>They''re</span> <span m=''903880''>not</span> <span m=''904100''>next</span>
  <span m=''904320''>to</span> <span m=''904410''>each</span> <span m=''904570''>other.</span>
  <span m=''905280''>And</span> <span m=''905760''>this</span> <span m=''905940''>is</span>
  <span m=''905980''>a</span> <span m=''906040''>problem</span> <span m=''907460''>that</span>
  <span m=''907770''>people</span> <span m=''908070''>have spent</span> <span m=''908280''>a</span>
  <span m=''908310''>lot</span> <span m=''908530''>of</span> <span m=''908600''>time</span>
  <span m=''908840''>trying</span> <span m=''909000''>to</span> <span m=''909160''>solve,</span>
  <span m=''910200''>is</span> <span m=''910420''>that</span> <span m=''910670''>as</span>
  <span m=''910950''>B-trees</span> <span m=''911430''>get</span> <span m=''911600''>older,</span>
  <span m=''912250''>their</span> <span m=''912370''>performance</span> <span m=''912930''>degrades.</span>
  <span m=''914350''>This</span> <span m=''914710''>aging</span> <span m=''915160''>problem--</span>
  <span m=''916390''>I</span> <span m=''916440''>saw</span> <span m=''916660''>one</span>
  <span m=''916900''>report</span> <span m=''917400''>that</span> <span m=''917620''>suggested</span>
  <span m=''918380''>that</span> <span m=''918630''>something</span> <span m=''919120''>like</span>
  <span m=''920790''>2%</span> <span m=''922060''>of</span> <span m=''922620''>all</span>
  <span m=''922780''>the</span> <span m=''922940''>money</span> <span m=''923190''>spent</span>
  <span m=''923500''>by</span> <span m=''923620''>corporations</span> <span m=''924460''>on</span>
  <span m=''924690''>IT</span> <span m=''926180''>is</span> <span m=''926360''>spent</span>
  <span m=''927430''>dumping</span> <span m=''927930''>and</span> <span m=''928160''>reloading</span>
  <span m=''928690''>their</span> <span m=''928870''>B-trees</span> <span m=''929520''>to</span>
  <span m=''929630''>try</span> <span m=''929830''>to</span> <span m=''929950''>make</span>
  <span m=''930550''>this</span> <span m=''930730''>problem</span> <span m=''931010''>go</span>
  <span m=''931210''>away.</span> <span m=''932820''>So</span> <span m=''933360''>that''s</span>
  <span m=''933560''>a</span> <span m=''933610''>lot</span> <span m=''933860''>of</span>
  <span m=''933920''>money</span> <span m=''935960''>or</span> <span m=''936290''>pain</span>
  <span m=''936720''>or</span> <span m=''936820''>something.</span> </p><p><span m=''940890''>Well,</span>
  <span m=''941450''>B-trees</span> <span m=''943290''>are</span> <span m=''943430''>optimal</span>
  <span m=''944060''>for</span> <span m=''944740''>doing</span> <span m=''945290''>lookups.</span>
  <span m=''946880''>If</span> <span m=''947040''>you</span> <span m=''947560''>just</span>
  <span m=''947730''>want</span> <span m=''947800''>to</span> <span m=''947880''>look</span>
  <span m=''948060''>something</span> <span m=''948400''>up,</span> <span m=''948860''>there''s</span>
  <span m=''949050''>an</span> <span m=''949120''>old</span> <span m=''949370''>argument</span>
  <span m=''949850''>that</span> <span m=''950030''>says,</span> <span m=''950250''>gee,
  if</span> <span m=''950570''>going</span> <span m=''950690''>to</span> <span m=''950920''>have</span>
  <span m=''952300''>a</span> <span m=''952400''>tree</span> <span m=''952660''>structure,</span>
  <span m=''954570''>which</span> <span m=''954770''>is</span> <span m=''954950''>what</span>
  <span m=''955100''>you</span> <span m=''955220''>need</span> <span m=''955520''>in</span>
  <span m=''955620''>order</span> <span m=''955830''>to</span> <span m=''955930''>do</span>
  <span m=''956040''>next</span> <span m=''956430''>operations,</span> <span m=''957600''>then</span>
  <span m=''957750''>you''re</span> <span m=''957850''>going</span> <span m=''957970''>to</span>
  <span m=''958110''>have</span> <span m=''958250''>some</span> <span m=''958580''>path</span>
  <span m=''958930''>through</span> <span m=''959100''>the</span> <span m=''959220''>B-tree</span>
  <span m=''959750''>which</span> <span m=''960010''>is</span> <span m=''962040''>a</span>
  <span m=''962110''>certain</span> <span m=''962420''>depth,</span> <span m=''963100''>and</span>
  <span m=''963260''>you</span> <span m=''963370''>do it</span> <span m=''963730''>optimally</span>
  <span m=''964370''>by</span> <span m=''964580''>having</span> <span m=''964940''>the</span>
  <span m=''965030''>fan-out</span> <span m=''965510''>be</span> <span m=''965630''>the</span>
  <span m=''965720''>block</span> <span m=''966070''>size.</span> <span m=''967430''>And</span>
  <span m=''967600''>everything</span> <span m=''967920''>works.</span> <span m=''971520''>But</span>
  <span m=''971700''>that</span> <span m=''971900''>argument</span> <span m=''972400''>of</span>
  <span m=''972530''>optimality</span> <span m=''973340''>is</span> <span m=''973620''>not</span>
  <span m=''974030''>actually</span> <span m=''975420''>true</span> <span m=''975850''>for</span>
  <span m=''976080''>insertion</span> <span m=''976630''>workloads.</span> <span m=''977900''>And</span>
  <span m=''978040''>this</span> <span m=''978240''>is</span> <span m=''978680''>where</span>
  <span m=''979990''>the</span> <span m=''980100''>data</span> <span m=''980320''>structures</span>
  <span m=''980700''>work</span> <span m=''980960''>that</span> <span m=''981090''>I''ve</span>
  <span m=''981270''>done</span> <span m=''981990''>with</span> <span m=''982170''>Mike</span>
  <span m=''982680''>and</span> <span m=''982810''>Martin</span> <span m=''983690''>sort
  of</span> <span m=''984220''>gets</span> <span m=''984470''>to</span> <span m=''984540''>be</span>
  <span m=''984660''>an</span> <span m=''984720''>advantage.</span> </p><p><span m=''985440''>To</span>
  <span m=''985550''>see</span> <span m=''985920''>that</span> <span m=''986140''>B-trees</span>
  <span m=''986630''>aren''t</span> <span m=''986930''>optimal</span> <span m=''987440''>for</span>
  <span m=''987670''>insertions--</span> <span m=''988220''>here''s</span> <span m=''988420''>a</span>
  <span m=''988480''>data</span> <span m=''988710''>structure</span> <span m=''989450''>that''s</span>
  <span m=''989670''>really</span> <span m=''990020''>good</span> <span m=''990260''>at</span>
  <span m=''990350''>insertions.</span> <span m=''992340''>What</span> <span m=''992520''>is</span>
  <span m=''992660''>the data</span> <span m=''992940''>structure?</span> <span m=''993220''>I''m</span>
  <span m=''993310''>just</span> <span m=''993480''>going</span> <span m=''993660''>to</span>
  <span m=''993820''>append</span> <span m=''994080''>to</span> <span m=''994160''>the</span>
  <span m=''994290''>end</span> <span m=''994400''>of</span> <span m=''994450''>a</span>
  <span m=''994530''>file.</span> <span m=''996260''>Right?</span> <span m=''997920''>So</span>
  <span m=''998810''>it''s</span> <span m=''998980''>great.</span> <span m=''999390''>Basically,</span>
  <span m=''999645''>it</span> <span m=''999900''>doesn''t</span> <span m=''1000210''>matter</span>
  <span m=''1000470''>what</span> <span m=''1000680''>the</span> <span m=''1000770''>keys</span>
  <span m=''1001140''>are.</span> <span m=''1001820''>I</span> <span m=''1002570''>can</span>
  <span m=''1002740''>insert</span> <span m=''1003190''>data</span> <span m=''1003570''>into</span>
  <span m=''1003680''>this</span> <span m=''1003800''>data</span> <span m=''1004010''>structure</span>
  <span m=''1005070''>at</span> <span m=''1005330''>disk</span> <span m=''1005560''>bandwidth.</span>
  <span m=''1009010''>What''s</span> <span m=''1009250''>the</span> <span m=''1009330''>disadvantage</span>
  <span m=''1009980''>of</span> <span m=''1010050''>this</span> <span m=''1010220''>data</span>
  <span m=''1010420''>structure?</span> </p><p><span m=''1011468''>AUDIENCE:</span>
  <span m=''1011956''>Lookups?</span> </p><p><span m=''1013908''>BRADLEY KUSZMAUL:</span>
  <span m=''1014396''>Lookups.</span> <span m=''1014890''>So</span> <span m=''1015110''>what</span>
  <span m=''1015330''>is</span> <span m=''1015540''>the</span> <span m=''1015680''>disadvantage?</span>
  <span m=''1017530''>Lookups</span> <span m=''1018150''>aren''t so</span> <span m=''1018330''>good.</span>
  <span m=''1018790''>What</span> <span m=''1019630''>is</span> <span m=''1019740''>the</span>
  <span m=''1019840''>cost</span> <span m=''1020150''>of</span> <span m=''1020210''>doing</span>
  <span m=''1020420''>a</span> <span m=''1020500''>lookup?</span> </p><p><span m=''1021150''>AUDIENCE:</span>
  <span m=''1021612''>Order</span> <span m=''1022074''>N?</span> </p><p><span m=''1022536''>BRADLEY
  KUSZMAUL:</span> <span m=''1023000''>Order</span> <span m=''1023400''>n.</span>
  <span m=''1023940''>Yeah.</span> <span m=''1024740''>You</span> <span m=''1025040''>have</span>
  <span m=''1025339''>to</span> <span m=''1025460''>look</span> <span m=''1025640''>at</span>
  <span m=''1025710''>everything.</span> <span m=''1027730''>It</span> <span m=''1027869''>requires</span>
  <span m=''1028390''>a</span> <span m=''1028440''>scan</span> <span m=''1029339''>of</span>
  <span m=''1029460''>the</span> <span m=''1029579''>entire</span> <span m=''1029960''>table.</span>
  <span m=''1031560''>And</span> <span m=''1031710''>we''ll</span> <span m=''1031829''>get</span>
  <span m=''1031980''>into</span> <span m=''1032130''>what</span> <span m=''1032290''>the</span>
  <span m=''1032369''>cost</span> <span m=''1032750''>model</span> <span m=''1033069''>is</span>
  <span m=''1033190''>in</span> <span m=''1033290''>a</span> <span m=''1033329''>second.</span>
  <span m=''1033849''>But</span> <span m=''1034369''>basically,</span> <span m=''1034910''>you</span>
  <span m=''1035010''>have</span> <span m=''1035180''>to</span> <span m=''1035290''>look</span>
  <span m=''1035480''>at</span> <span m=''1035540''>everything.</span> <span m=''1036069''>So</span>
  <span m=''1038420''>it''s</span> <span m=''1038630''>order</span> <span m=''1038910''>n.</span>
  <span m=''1039250''>It</span> <span m=''1039690''>turns</span> <span m=''1039950''>out</span>
  <span m=''1040069''>the</span> <span m=''1040170''>number</span> <span m=''1040520''>of</span>
  <span m=''1040579''>blocks</span> <span m=''1041079''>you</span> <span m=''1041210''>have</span>
  <span m=''1041369''>to</span> <span m=''1041640''>read</span> <span m=''1042030''>in,</span>
  <span m=''1043400''>which</span> <span m=''1043579''>is</span> <span m=''1043710''>the</span>
  <span m=''1043800''>thing</span> <span m=''1043990''>you</span> <span m=''1044170''>care</span>
  <span m=''1044460''>about--</span> <span m=''1045319''>it''s</span> <span m=''1045510''>order</span>
  <span m=''1045810''>n</span> <span m=''1045970''>over</span> <span m=''1046160''>b.</span>
  <span m=''1047859''>So</span> <span m=''1048050''>we''ll</span> <span m=''1048140''>get</span>
  <span m=''1048270''>into</span> <span m=''1048400''>a</span> <span m=''1048450''>performance</span>
  <span m=''1048900''>model</span> <span m=''1049180''>in</span> <span m=''1049290''>just</span>
  <span m=''1049520''>a</span> <span m=''1049580''>second.</span> </p><p><span m=''1050480''>So</span>
  <span m=''1050730''>here</span> <span m=''1051300''>we are. We</span> <span m=''1051430''>have</span>
  <span m=''1052060''>two</span> <span m=''1052240''>data</span> <span m=''1052480''>structures--</span>
  <span m=''1052930''>a</span> <span m=''1053180''>B-tree,</span> <span m=''1053480''>which</span>
  <span m=''1053720''>is</span> <span m=''1054470''>not</span> <span m=''1054680''>so</span>
  <span m=''1054850''>great</span> <span m=''1055300''>at</span> <span m=''1055630''>insertions.</span>
  <span m=''1057140''>It''s</span> <span m=''1057270''>quite</span> <span m=''1057600''>good</span>
  <span m=''1057890''>at</span> <span m=''1058710''>point</span> <span m=''1058980''>queries</span>
  <span m=''1059460''>and</span> <span m=''1059750''>quite</span> <span m=''1060000''>good
  at</span> <span m=''1060210''>ranged</span> <span m=''1060540''>queries,</span>
  <span m=''1060920''>especially</span> <span m=''1061340''>when</span> <span m=''1061490''>it''s</span>
  <span m=''1061610''>young.</span> <span m=''1062530''>And</span> <span m=''1062680''>we</span>
  <span m=''1062750''>have</span> <span m=''1062830''>this</span> <span m=''1063000''>other</span>
  <span m=''1063170''>data</span> <span m=''1063390''>structure,</span> <span m=''1063740''>which</span>
  <span m=''1063940''>is</span> <span m=''1064070''>the</span> <span m=''1064210''>append</span>
  <span m=''1065130''>data</span> <span m=''1065380''>structure,</span> <span m=''1066280''>which</span>
  <span m=''1066570''>is</span> <span m=''1066720''>wonderful</span> <span m=''1067330''>for</span>
  <span m=''1067520''>insertions</span> <span m=''1068540''>and</span> <span m=''1068700''>really</span>
  <span m=''1069220''>bad</span> <span m=''1069570''>for</span> <span m=''1069740''>queries.</span>
  <span m=''1070880''>So</span> <span m=''1072721''>can</span> <span m=''1073120''>you</span>
  <span m=''1073210''>do</span> <span m=''1073350''>something</span> <span m=''1073770''>that''s</span>
  <span m=''1074010''>like</span> <span m=''1074530''>the</span> <span m=''1074620''>best</span>
  <span m=''1074910''>of</span> <span m=''1075010''>all</span> <span m=''1075180''>possible</span>
  <span m=''1075590''>worlds?</span> <span m=''1076670''>You</span> <span m=''1076820''>can</span>
  <span m=''1076910''>imagine</span> <span m=''1077320''>a</span> <span m=''1077370''>data</span>
  <span m=''1077580''>structure</span> <span m=''1077870''>that''s</span> <span m=''1078080''>the</span>
  <span m=''1078170''>worst</span> <span m=''1078510''>of</span> <span m=''1078610''>all</span>
  <span m=''1078740''>possible,</span> <span m=''1079800''>but</span> <span m=''1080040''>it</span>
  <span m=''1080190''>turns</span> <span m=''1080510''>out</span> <span m=''1080710''>that</span>
  <span m=''1080890''>there</span> <span m=''1081070''>are</span> <span m=''1081780''>data</span>
  <span m=''1082020''>structures</span> <span m=''1082570''>that</span> <span m=''1083190''>do</span>
  <span m=''1083690''>well</span> <span m=''1084400''>for</span> <span m=''1084670''>this.</span>
  <span m=''1085020''>And</span> <span m=''1085700''>I''ll</span> <span m=''1086290''>show</span>
  <span m=''1086580''>you</span> <span m=''1086680''>how</span> <span m=''1086860''>one</span>
  <span m=''1087050''>works</span> <span m=''1087620''>in</span> <span m=''1087990''>a</span>
  <span m=''1088040''>minute</span> </p><p><span m=''1089480''>So</span> <span m=''1089660''>to</span>
  <span m=''1090190''>explain</span> <span m=''1090570''>how</span> <span m=''1090730''>it</span>
  <span m=''1090810''>works</span> <span m=''1091220''>and to</span> <span m=''1091280''>do</span>
  <span m=''1091400''>the</span> <span m=''1091510''>analysis,</span> <span m=''1092030''>we</span>
  <span m=''1092150''>need</span> <span m=''1092350''>to</span> <span m=''1092520''>have</span>
  <span m=''1092690''>a</span> <span m=''1092910''>cost</span> <span m=''1093280''>model.</span>
  <span m=''1093830''>And we</span> <span m=''1093980''>got</span> <span m=''1094200''>into</span>
  <span m=''1094370''>this</span> <span m=''1094560''>just</span> <span m=''1094740''>a</span>
  <span m=''1094790''>minute</span> <span m=''1095070''>ago,</span> <span m=''1095290''>with</span>
  <span m=''1095620''>what</span> <span m=''1095830''>is</span> <span m=''1095960''>the</span>
  <span m=''1096060''>cost</span> <span m=''1096400''>model</span> <span m=''1096660''>for
  a</span> <span m=''1096880''>table</span> <span m=''1097210''>scan?</span> <span
  m=''1097870''>Is</span> <span m=''1098060''>it</span> <span m=''1098140''>order</span>
  <span m=''1098490''>N?</span> <span m=''1099530''>Well,</span> <span m=''1099760''>if</span>
  <span m=''1100280''>you''re</span> <span m=''1100380''>only</span> <span m=''1100610''>counting</span>
  <span m=''1101170''>the</span> <span m=''1101280''>number</span> <span m=''1101500''>of</span>
  <span m=''1101560''>CPU</span> <span m=''1102070''>cycles</span> <span m=''1102940''>that</span>
  <span m=''1103080''>you''re</span> <span m=''1103190''>using</span> <span m=''1103540''>up,</span>
  <span m=''1103690''>it''s</span> <span m=''1103830''>order</span> <span m=''1104130''>N,</span>
  <span m=''1104410''>because</span> <span m=''1104520''>you have</span> <span m=''1104620''>to</span>
  <span m=''1104740''>look</span> <span m=''1105040''>at</span> <span m=''1105120''>every</span>
  <span m=''1105630''>item.</span> <span m=''1106630''>But</span> <span m=''1106810''>if</span>
  <span m=''1106920''>what</span> <span m=''1107090''>you</span> <span m=''1107240''>really</span>
  <span m=''1107560''>care</span> <span m=''1107800''>about</span> <span m=''1108010''>is</span>
  <span m=''1108110''>the</span> <span m=''1108210''>number</span> <span m=''1108480''>of</span>
  <span m=''1108590''>disk</span> <span m=''1108910''>I/Os,</span> <span m=''1109780''>then</span>
  <span m=''1109950''>you</span> <span m=''1110040''>just</span> <span m=''1110220''>count</span>
  <span m=''1110440''>up</span> <span m=''1110550''>the</span> <span m=''1110640''>number</span>
  <span m=''1110900''>of</span> <span m=''1110950''>blocks.</span> <span m=''1111440''>And</span>
  <span m=''1111560''>so</span> <span m=''1111810''>in</span> <span m=''1112120''>that</span>
  <span m=''1112360''>model,</span> <span m=''1113380''>the</span> <span m=''1113530''>cost</span>
  <span m=''1113960''>is</span> <span m=''1114100''>order</span> <span m=''1114410''>N</span>
  <span m=''1114580''>over</span> <span m=''1114790''>B.</span> <span m=''1115360''>And</span>
  <span m=''1115510''>that''s</span> <span m=''1115820''>the</span> <span m=''1115920''>model</span>
  <span m=''1116510''>that</span> <span m=''1116650''>we''re</span> <span m=''1116780''>going</span>
  <span m=''1116860''>to</span> <span m=''1116930''>use</span> <span m=''1117280''>to</span>
  <span m=''1118350''>do</span> <span m=''1118480''>this</span> <span m=''1118650''>analysis.</span>
  </p><p><span m=''1119230''>So</span> <span m=''1119370''>in</span> <span m=''1119440''>this</span>
  <span m=''1119650''>model,</span> <span m=''1120450''>we</span> <span m=''1120600''>aren''t</span>
  <span m=''1120800''>going</span> <span m=''1120890''>to</span> <span m=''1120990''>care</span>
  <span m=''1121340''>about</span> <span m=''1121580''>CPU</span> <span m=''1122060''>cost.</span>
  <span m=''1123030''>We</span> <span m=''1123270''>are</span> <span m=''1123440''>going</span>
  <span m=''1123560''>to</span> <span m=''1123610''>care</span> <span m=''1123860''>about</span>
  <span m=''1124080''>disk</span> <span m=''1124290''>I/O.</span> <span m=''1124900''>And
  that''s</span> <span m=''1125140''>a</span> <span m=''1125190''>pretty</span> <span
  m=''1125470''>good</span> <span m=''1125940''>place</span> <span m=''1126220''>to</span>
  <span m=''1126350''>design</span> <span m=''1126725''>in</span> <span m=''1127290''>if</span>
  <span m=''1127390''>you''re</span> <span m=''1127580''>an</span> <span m=''1127670''>engineer,</span>
  <span m=''1128160''>because</span> <span m=''1128510''>right</span> <span m=''1128770''>now</span>
  <span m=''1129620''>the</span> <span m=''1130090''>number</span> <span m=''1130380''>of</span>
  <span m=''1130440''>CPU</span> <span m=''1131150''>cycles</span> <span m=''1131650''>that</span>
  <span m=''1131780''>you</span> <span m=''1131910''>get</span> <span m=''1132270''>for</span>
  <span m=''1132430''>a dollar</span> <span m=''1133090''>is</span> <span m=''1133310''>going</span>
  <span m=''1133620''>up.</span> <span m=''1134620''>It''s</span> <span m=''1134870''>been</span>
  <span m=''1135060''>going</span> <span m=''1135340''>up.</span> <span m=''1135480''>It''s</span>
  <span m=''1135640''>continuing</span> <span m=''1136210''>to</span> <span m=''1136320''>go</span>
  <span m=''1136500''>up.</span> <span m=''1137330''>You have</span> <span m=''1137585''>to</span>
  <span m=''1137840''>write</span> <span m=''1138100''>parallel</span> <span m=''1138490''>programs</span>
  <span m=''1139010''>today</span> <span m=''1139300''>to</span> <span m=''1139610''>get</span>
  <span m=''1139850''>that,</span> <span m=''1140140''>but</span> <span m=''1140770''>you</span>
  <span m=''1140860''>get</span> <span m=''1141040''>a</span> <span m=''1141110''>lot</span>
  <span m=''1141350''>of</span> <span m=''1142640''>cycles</span> <span m=''1144520''>in</span>
  <span m=''1144640''>a</span> <span m=''1144905''>$100</span> <span m=''1145170''>package.</span>
  <span m=''1146650''>But</span> <span m=''1146800''>the</span> <span m=''1146880''>number</span>
  <span m=''1147540''>of</span> <span m=''1147980''>disk</span> <span m=''1148300''>I/Os</span>
  <span m=''1148770''>that</span> <span m=''1148890''>you''re</span> <span m=''1149010''>getting</span>
  <span m=''1149840''>is</span> <span m=''1150000''>essentially</span> <span m=''1150440''>unchanged.</span>
  <span m=''1150885''>It''s</span> <span m=''1151330''>maybe</span> <span m=''1151760''>improved</span>
  <span m=''1152120''>by</span> <span m=''1152330''>a factor</span> <span m=''1152760''>of</span>
  <span m=''1152850''>two</span> <span m=''1153150''>in</span> <span m=''1153250''>40</span>
  <span m=''1153540''>years.</span> <span m=''1154520''>So</span> <span m=''1156060''>that''s</span>
  <span m=''1157030''>the</span> <span m=''1157120''>one</span> <span m=''1157280''>to</span>
  <span m=''1157360''>optimize</span> <span m=''1157980''>for,</span> <span m=''1158200''>is</span>
  <span m=''1158290''>the</span> <span m=''1158370''>one</span> <span m=''1158560''>that''s</span>
  <span m=''1158800''>not</span> <span m=''1159030''>changing.</span> <span m=''1159960''>And</span>
  <span m=''1160570''>use</span> <span m=''1160810''>all</span> <span m=''1160930''>those</span>
  <span m=''1161060''>CPU</span> <span m=''1161550''>cycles,</span> <span m=''1161960''>if</span>
  <span m=''1162050''>you</span> <span m=''1162160''>can,</span> <span m=''1162500''>to
  do</span> <span m=''1162610''>something.</span> </p><p><span m=''1162890''>So</span>
  <span m=''1163050''>the</span> <span m=''1163180''>model</span> <span m=''1163530''>here</span>
  <span m=''1163800''>is</span> <span m=''1163900''>that</span> <span m=''1164020''>we''re</span>
  <span m=''1164140''>going</span> <span m=''1164260''>to</span> <span m=''1164560''>have</span>
  <span m=''1165310''>a</span> <span m=''1165430''>memory</span> <span m=''1166880''>and</span>
  <span m=''1167030''>a</span> <span m=''1167100''>disk.</span> <span m=''1167950''>And</span>
  <span m=''1168090''>you</span> <span m=''1168200''>could</span> <span m=''1168380''>use</span>
  <span m=''1168660''>this,</span> <span m=''1170890''>and</span> <span m=''1171730''>there''s</span>
  <span m=''1172140''>some</span> <span m=''1172360''>block</span> <span m=''1172710''>size,</span>
  <span m=''1173030''>B,</span> <span m=''1173340''>which</span> <span m=''1174190''>we</span>
  <span m=''1174650''>may</span> <span m=''1174890''>or</span> <span m=''1174970''>may</span>
  <span m=''1175110''>not</span> <span m=''1175380''>know</span> <span m=''1175520''>what</span>
  <span m=''1175700''>it</span> <span m=''1175820''>is.</span> <span m=''1176100''>And</span>
  <span m=''1176190''>it''s</span> <span m=''1176310''>actually</span> <span m=''1176580''>quite</span>
  <span m=''1176880''>tricky</span> <span m=''1177790''>on</span> <span m=''1177970''>real</span>
  <span m=''1178230''>disk</span> <span m=''1178540''>systems</span> <span m=''1178940''>to</span>
  <span m=''1179020''>figure</span> <span m=''1179340''>out</span> <span m=''1180140''>what</span>
  <span m=''1180340''>the</span> <span m=''1180420''>right</span> <span m=''1180660''>block</span>
  <span m=''1180970''>size</span> <span m=''1181290''>is.</span> <span m=''1182510''>It''s</span>
  <span m=''1182690''>not</span> <span m=''1182920''>500</span> <span m=''1183390''>bytes,</span>
  <span m=''1186160''>because</span> <span m=''1186850''>that''s</span> <span m=''1187480''>not</span>
  <span m=''1187670''>going</span> <span m=''1187770''>to</span> <span m=''1187810''>be</span>
  <span m=''1187980''>a good</span> <span m=''1188100''>block</span> <span m=''1188430''>size.</span>
  <span m=''1189090''>It</span> <span m=''1189180''>might</span> <span m=''1189360''>be</span>
  <span m=''1189470''>more</span> <span m=''1189650''>like</span> <span m=''1189820''>a</span>
  <span m=''1189890''>megabyte.</span> <span m=''1191550''>And</span> <span m=''1191740''>when</span>
  <span m=''1191900''>we</span> <span m=''1192010''>move</span> <span m=''1192240''>stuff</span>
  <span m=''1192520''>back</span> <span m=''1192780''>and</span> <span m=''1192880''>forth,</span>
  <span m=''1193340''>we''re</span> <span m=''1193470''>going</span> <span m=''1193590''>to</span>
  <span m=''1193650''>move</span> <span m=''1193880''>a</span> <span m=''1193950''>block</span>
  <span m=''1194360''>at</span> <span m=''1194430''>a</span> <span m=''1194510''>time.</span>
  <span m=''1194940''>We''re</span> <span m=''1195010''>going</span> <span m=''1195150''>to</span>
  <span m=''1195540''>bring</span> <span m=''1195830''>in a</span> <span m=''1195890''>whole</span>
  <span m=''1196070''>block</span> <span m=''1196400''>from</span> <span m=''1196540''>disk,</span>
  <span m=''1197120''>and</span> <span m=''1197270''>when</span> <span m=''1197430''>we</span>
  <span m=''1197600''>have</span> <span m=''1197790''>to</span> <span m=''1197920''>write</span>
  <span m=''1198150''>a</span> <span m=''1198190''>block</span> <span m=''1198530''>out,</span>
  <span m=''1198730''>we</span> <span m=''1198860''>write</span> <span m=''1199440''>the</span>
  <span m=''1199550''>whole</span> <span m=''1199750''>block</span> <span m=''1200080''>out.</span>
  <span m=''1200710''>So</span> <span m=''1200880''>we''re</span> <span m=''1200970''>just</span>
  <span m=''1201140''>going</span> <span m=''1201240''>to</span> <span m=''1201320''>count</span>
  <span m=''1201630''>that up.</span> </p><p><span m=''1201970''>There''s</span> <span
  m=''1202130''>two</span> <span m=''1202330''>parameters.</span> <span m=''1203000''>There''s</span>
  <span m=''1203170''>the</span> <span m=''1203240''>block</span> <span m=''1203590''>size,</span>
  <span m=''1203950''>B,</span> <span m=''1204670''>and</span> <span m=''1204990''>the</span>
  <span m=''1205210''>memory</span> <span m=''1205650''>size,</span> <span m=''1206100''>M.</span>
  <span m=''1207880''>So</span> <span m=''1208630''>if the</span> <span m=''1208790''>memory</span>
  <span m=''1209260''>is</span> <span m=''1209450''>as</span> <span m=''1209660''>big</span>
  <span m=''1209870''>as</span> <span m=''1209960''>the</span> <span m=''1210090''>entire</span>
  <span m=''1210470''>disk,</span> <span m=''1210850''>then</span> <span m=''1211030''>the</span>
  <span m=''1211120''>problem</span> <span m=''1211480''>goes</span> <span m=''1211690''>away,</span>
  <span m=''1212060''>and if</span> <span m=''1212260''>the</span> <span m=''1212585''>memory''s</span>
  <span m=''1213390''>way</span> <span m=''1213650''>too</span> <span m=''1213840''>small--</span>
  <span m=''1214150''>like</span> <span m=''1214310''>you</span> <span m=''1214400''>can</span>
  <span m=''1214500''>only</span> <span m=''1214700''>have</span> <span m=''1214890''>one</span>
  <span m=''1215170''>block--</span> <span m=''1215850''>then</span> <span m=''1216120''>it''s</span>
  <span m=''1216820''>very</span> <span m=''1217050''>difficult</span> <span m=''1217410''>to</span>
  <span m=''1217480''>get</span> <span m=''1217620''>anything</span> <span m=''1217980''>done.</span>
  <span m=''1218620''>So</span> <span m=''1219270''>you</span> <span m=''1219380''>need</span>
  <span m=''1219510''>to</span> <span m=''1219560''>be</span> <span m=''1219670''>able</span>
  <span m=''1219800''>to</span> <span m=''1219850''>hold</span> <span m=''1220150''>several</span>
  <span m=''1220540''>blocks</span> <span m=''1220940''>worth</span> <span m=''1221170''>of</span>
  <span m=''1221780''>storage.</span> </p><p><span m=''1222620''>The</span> <span
  m=''1222740''>memory is</span> <span m=''1223200''>treated</span> <span m=''1223610''>as</span>
  <span m=''1223730''>a</span> <span m=''1223850''>cache</span> <span m=''1224380''>for</span>
  <span m=''1224530''>disk.</span> <span m=''1225200''>So</span> <span m=''1226110''>once</span>
  <span m=''1226320''>we''ve</span> <span m=''1226450''>brought</span> <span m=''1226730''>a</span>
  <span m=''1226780''>block</span> <span m=''1227120''>in,</span> <span m=''1227270''>we</span>
  <span m=''1227410''>can</span> <span m=''1227590''>keep</span> <span m=''1227790''>using</span>
  <span m=''1228170''>it</span> <span m=''1228270''>for</span> <span m=''1228360''>a</span>
  <span m=''1228430''>while</span> <span m=''1228770''>until</span> <span m=''1228990''>we</span>
  <span m=''1229070''>get</span> <span m=''1229260''>rid</span> <span m=''1229440''>of</span>
  <span m=''1229560''>it.</span> <span m=''1230290''>So</span> <span m=''1230480''>have</span>
  <span m=''1230540''>you</span> <span m=''1230630''>guys</span> <span m=''1230880''>done</span>
  <span m=''1231060''>any</span> <span m=''1231230''>cache-oblivious</span> <span
  m=''1232450''>data</span> <span m=''1232650''>structures?</span> <span m=''1233210''>OK.</span>
  <span m=''1233990''>So</span> <span m=''1234110''>you''ve</span> <span m=''1234270''>seen</span>
  <span m=''1234500''>this</span> <span m=''1234670''>model.</span> <span m=''1237130''>So</span>
  <span m=''1237300''>the</span> <span m=''1237390''>game</span> <span m=''1237640''>here</span>
  <span m=''1237890''>is</span> <span m=''1237990''>to</span> <span m=''1238090''>minimize</span>
  <span m=''1238520''>the</span> <span m=''1238590''>number</span> <span m=''1238840''>of</span>
  <span m=''1238900''>clock</span> <span m=''1239170''>cycles</span> <span m=''1239560''>and</span>
  <span m=''1239630''>not</span> <span m=''1239800''>worrying</span> <span m=''1240130''>about</span>
  <span m=''1240300''>the</span> <span m=''1240360''>CPU</span> <span m=''1240780''>cycles.</span>
  <span m=''1241640''>So</span> <span m=''1241770''>here''s</span> <span m=''1242000''>the</span>
  <span m=''1242100''>theoretical</span> <span m=''1242550''>results.</span> <span
  m=''1244300''>We''ll</span> <span m=''1244430''>start</span> <span m=''1244750''>with</span>
  <span m=''1245040''>a</span> <span m=''1245140''>B-tree.</span> <span m=''1245660''>So</span>
  <span m=''1245850''>a</span> <span m=''1245910''>B-tree</span> <span m=''1246680''>which</span>
  <span m=''1246900''>has</span> <span m=''1247120''>a</span> <span m=''1247150''>block</span>
  <span m=''1247480''>size</span> <span m=''1247970''>b--</span> <span m=''1248480''>and</span>
  <span m=''1248570''>here</span> <span m=''1248820''>I''m</span> <span m=''1248890''>going</span>
  <span m=''1249020''>to</span> <span m=''1249110''>assume</span> <span m=''1249500''>that</span>
  <span m=''1250210''>the</span> <span m=''1250340''>things</span> <span m=''1250710''>you''re</span>
  <span m=''1250840''>storing</span> <span m=''1251270''>are</span> <span m=''1251360''>unit</span>
  <span m=''1251740''>sized.</span> <span m=''1252490''>Because</span> <span m=''1252770''>you</span>
  <span m=''1252870''>can</span> <span m=''1252980''>do</span> <span m=''1253090''>the</span>
  <span m=''1253210''>analysis,</span> <span m=''1253770''>but</span> <span m=''1253880''>it</span>
  <span m=''1253950''>gets</span> <span m=''1254110''>more</span> <span m=''1254800''>complicated.</span>
  <span m=''1255680''>So</span> <span m=''1255840''>the</span> <span m=''1255930''>cost</span>
  <span m=''1256340''>of</span> <span m=''1256960''>a</span> <span m=''1257310''>lookup,</span>
  <span m=''1257780''>which</span> <span m=''1257970''>is</span> <span m=''1258100''>the</span>
  <span m=''1258190''>upper</span> <span m=''1260810''>right</span> <span m=''1261140''>side,</span>
  <span m=''1262330''>is</span> <span m=''1262540''>log</span> <span m=''1262930''>N</span>
  <span m=''1263260''>over</span> <span m=''1263740''>log</span> <span m=''1264080''>B.</span>
  <span m=''1265410''>That''s</span> <span m=''1265650''>the</span> <span m=''1265750''>same</span>
  <span m=''1266220''>as--</span> <span m=''1273040''>you</span> <span m=''1273150''>may</span>
  <span m=''1273290''>not</span> <span m=''1273550''>be</span> <span m=''1274920''>used</span>
  <span m=''1275250''>to</span> <span m=''1275660''>manipulating</span> <span m=''1276350''>these,</span>
  <span m=''1276620''>but</span> <span m=''1277260''>usually</span> <span m=''1277690''>people</span>
  <span m=''1277960''>write</span> <span m=''1278170''>this</span> <span m=''1278360''>as</span>
  <span m=''1278500''>log</span> <span m=''1278770''>base</span> <span m=''1279090''>B</span>
  <span m=''1279870''>of</span> <span m=''1280050''>N.</span> <span m=''1280540''>But
  that''s</span> <span m=''1280800''>the</span> <span m=''1280900''>same</span> <span
  m=''1281460''>as</span> <span m=''1281800''>log</span> <span m=''1282160''>N</span>
  <span m=''1283480''>over</span> <span m=''1285290''>log</span> <span m=''1285610''>B.</span>
  <span m=''1285950''>And</span> <span m=''1286080''>I''m</span> <span m=''1286150''>going</span>
  <span m=''1286240''>to</span> <span m=''1286340''>write</span> <span m=''1286570''>it</span>
  <span m=''1286720''>this</span> <span m=''1286920''>way,</span> <span m=''1287170''>because</span>
  <span m=''1287490''>then</span> <span m=''1287640''>it''s</span> <span m=''1287760''>easier</span>
  <span m=''1288040''>to</span> <span m=''1288110''>compare</span> <span m=''1288470''>things.</span>
  </p><p><span m=''1290380''>So</span> <span m=''1290710''>if</span> <span m=''1290810''>B</span>
  <span m=''1291180''>is</span> <span m=''1292460''>1,000</span> <span m=''1293070''>or</span>
  <span m=''1293150''>something,</span> <span m=''1294300''>then</span> <span m=''1295010''>basically</span>
  <span m=''1295650''>instead</span> <span m=''1295960''>of</span> <span m=''1296090''>paying--</span>
  <span m=''1300590''>just</span> <span m=''1300800''>as</span> <span m=''1300910''>an</span>
  <span m=''1301000''>example,</span> <span m=''1301305''>if</span> <span m=''1301610''>N</span>
  <span m=''1301850''>is,</span> <span m=''1302070''>say,</span> <span m=''1302965''>2</span>
  <span m=''1303290''>to</span> <span m=''1303390''>the</span> <span m=''1303640''>40th--</span>
  <span m=''1306490''>let''s</span> <span m=''1307150''>these</span> <span m=''1307470''>all
  to</span> <span m=''1307800''>lg''s</span> <span m=''1308430''>because</span> <span
  m=''1308590''>it</span> <span m=''1308670''>basically</span> <span m=''1309090''>doesn''t</span>
  <span m=''1309460''>matter.</span> <span m=''1310290''>So</span> <span m=''1310450''>it''s</span>
  <span m=''1310690''>40</span> <span m=''1311200''>over</span> <span m=''1311870''>log</span>
  <span m=''1312210''>base</span> <span m=''1312470''>B,</span> <span m=''1312740''>and</span>
  <span m=''1312990''>if B</span> <span m=''1313250''>is,</span> <span m=''1314210''>say,</span>
  <span m=''1314410''>2</span> <span m=''1314630''>to</span> <span m=''1314730''>the</span>
  <span m=''1314880''>10th,</span> <span m=''1318270''>then</span> <span m=''1318530''>that</span>
  <span m=''1318790''>means</span> <span m=''1319260''>that</span> <span m=''1320330''>if</span>
  <span m=''1320470''>you</span> <span m=''1320840''>have</span> <span m=''1321530''>a</span>
  <span m=''1321610''>trillion</span> <span m=''1321950''>items</span> <span m=''1322580''>and</span>
  <span m=''1322710''>you</span> <span m=''1322850''>have</span> <span m=''1322970''>a</span>
  <span m=''1323100''>fan-out</span> <span m=''1323710''>of</span> <span m=''1324040''>1,000,</span>
  <span m=''1324670''>it</span> <span m=''1324840''>takes</span> <span m=''1325120''>you</span>
  <span m=''1325310''>at</span> <span m=''1325410''>most</span> <span m=''1325960''>four</span>
  <span m=''1326230''>disk</span> <span m=''1326780''>I/Os</span> <span m=''1327830''>to</span>
  <span m=''1328070''>find</span> <span m=''1328440''>any</span> <span m=''1328600''>particular</span>
  <span m=''1329090''>item.</span> </p><p><span m=''1331880''>An</span> <span m=''1332030''>insertion</span>
  <span m=''1332490''>cost</span> <span m=''1332810''>is</span> <span m=''1332900''>the</span>
  <span m=''1332980''>same,</span> <span m=''1333300''>because</span> <span m=''1333630''>to</span>
  <span m=''1333730''>do</span> <span m=''1333860''>an</span> <span m=''1333960''>insertion,</span>
  <span m=''1335490''>we</span> <span m=''1335590''>have</span> <span m=''1335690''>to</span>
  <span m=''1335800''>find</span> <span m=''1336080''>the</span> <span m=''1336180''>leaf</span>
  <span m=''1336600''>that</span> <span m=''1336750''>the</span> <span m=''1336840''>item</span>
  <span m=''1337200''>should</span> <span m=''1337430''>have</span> <span m=''1337550''>been</span>
  <span m=''1337800''>in,</span> <span m=''1338680''>and</span> <span m=''1338820''>then</span>
  <span m=''1338930''>put</span> <span m=''1339130''>it</span> <span m=''1339240''>there.</span>
  <span m=''1342350''>So</span> <span m=''1342510''>the</span> <span m=''1342650''>append</span>
  <span m=''1342970''>log--</span> <span m=''1343460''>well,</span> <span m=''1344140''>what''s</span>
  <span m=''1344400''>the</span> <span m=''1344500''>cost</span> <span m=''1344810''>of</span>
  <span m=''1344890''>insertion?</span> <span m=''1346370''>Well,</span> <span m=''1346910''>we''re</span>
  <span m=''1347270''>appending</span> <span m=''1347710''>away,</span> <span m=''1348100''>right?</span>
  <span m=''1349130''>And</span> <span m=''1349260''>once</span> <span m=''1349600''>every</span>
  <span m=''1350580''>B</span> <span m=''1350930''>items,</span> <span m=''1351420''>we</span>
  <span m=''1351650''>actually</span> <span m=''1351920''>have</span> <span m=''1352030''>to</span>
  <span m=''1352120''>do</span> <span m=''1352260''>a</span> <span m=''1352340''>disk</span>
  <span m=''1352630''>I/O.</span> <span m=''1352950''>So</span> <span m=''1353110''>the</span>
  <span m=''1353230''>cost</span> <span m=''1354240''>of</span> <span m=''1354420''>an</span>
  <span m=''1354530''>insertion</span> <span m=''1355350''>in</span> <span m=''1355480''>the</span>
  <span m=''1355660''>append</span> <span m=''1355870''>log</span> <span m=''1356530''>isn''t</span>
  <span m=''1356860''>0.</span> <span m=''1358120''>It''s</span> <span m=''1358310''>one</span>
  <span m=''1358713''>Bth</span> <span m=''1359780''>of</span> <span m=''1359900''>a</span>
  <span m=''1359950''>block</span> <span m=''1360310''>I/O</span> <span m=''1360940''>per</span>
  <span m=''1361340''>object.</span> <span m=''1362590''>And</span> <span m=''1362790''>the</span>
  <span m=''1362860''>point</span> <span m=''1363210''>query</span> <span m=''1363490''>cost</span>
  <span m=''1363860''>looks</span> <span m=''1364040''>really</span> <span m=''1364320''>bad.</span>
  <span m=''1364640''>It''s</span> <span m=''1364890''>N</span> <span m=''1365080''>over</span>
  <span m=''1365290''>B,</span> <span m=''1366050''>which we</span> <span m=''1366210''>already</span>
  <span m=''1366440''>discussed.</span> </p><p><span m=''1367970''>So</span> <span
  m=''1368210''>the</span> <span m=''1368300''>fractal</span> <span m=''1368740''>tree</span>
  <span m=''1369490''>has</span> <span m=''1369950''>this</span> <span m=''1370160''>kind</span>
  <span m=''1370360''>of</span> <span m=''1370580''>performance.</span> <span m=''1371760''>It''s</span>
  <span m=''1372740''>log</span> <span m=''1373170''>N</span> <span m=''1373540''>over--</span>
  <span m=''1374750''>it''s</span> <span m=''1374960''>not</span> <span m=''1375220''>B,</span>
  <span m=''1377110''>which</span> <span m=''1377360''>would</span> <span m=''1377480''>be</span>
  <span m=''1377610''>really</span> <span m=''1377890''>great.</span> <span m=''1378370''>It''s</span>
  <span m=''1378980''>something</span> <span m=''1379370''>smaller.</span> <span m=''1381150''>It''s</span>
  <span m=''1381530''>maybe</span> <span m=''1381770''>square</span> <span m=''1382120''>root</span>
  <span m=''1382270''>of</span> <span m=''1382350''>B</span> <span m=''1384280''>for</span>
  <span m=''1384590''>the</span> <span m=''1384730''>insertion</span> <span m=''1385200''>cost.</span>
  <span m=''1386450''>And</span> <span m=''1386800''>the</span> <span m=''1387090''>lookup</span>
  <span m=''1387510''>cost</span> <span m=''1387960''>is</span> <span m=''1389150''>log
  N</span> <span m=''1389680''>over</span> <span m=''1389950''>something,</span> <span
  m=''1390830''>which</span> <span m=''1391030''>I''m</span> <span m=''1391110''>going</span>
  <span m=''1391280''>to</span> <span m=''1391600''>just</span> <span m=''1393160''>hide.</span>
  <span m=''1393630''>Let''s</span> <span m=''1394100''>set</span> <span m=''1394480''>epsilon</span>
  <span m=''1394930''>to</span> <span m=''1395430''>1/2</span> <span m=''1396930''>and</span>
  <span m=''1397990''>work</span> <span m=''1398220''>out</span> <span m=''1398400''>what</span>
  <span m=''1398570''>that</span> <span m=''1398760''>is.</span> <span m=''1400750''>Because</span>
  <span m=''1400910''>epsilon</span> <span m=''1401360''>1/2</span> <span m=''1401590''>is</span>
  <span m=''1401730''>a</span> <span m=''1402030''>good</span> <span m=''1402310''>engineering</span>
  <span m=''1402760''>point.</span> <span m=''1403700''>So</span> <span m=''1404110''>the</span>
  <span m=''1404360''>insertion</span> <span m=''1404970''>cost</span> <span m=''1405340''>is</span>
  <span m=''1406290''>log</span> <span m=''1406660''>N</span> <span m=''1407710''>over</span>
  <span m=''1408790''>B</span> <span m=''1409100''>to</span> <span m=''1409190''>the</span>
  <span m=''1409300''>1/2,</span> <span m=''1410930''>which</span> <span m=''1411100''>is</span>
  <span m=''1412810''>log</span> <span m=''1413160''>N</span> <span m=''1413860''>over</span>
  <span m=''1414400''>root</span> <span m=''1414660''>B.</span> <span m=''1418420''>And</span>
  <span m=''1418600''>the</span> <span m=''1418730''>other</span> <span m=''1418880''>one,</span>
  <span m=''1419430''>the</span> <span m=''1419560''>lookup</span> <span m=''1419940''>cost--</span>
  <span m=''1425540''>there''s all</span> <span m=''1426630''>big 0''s</span> <span
  m=''1426910''>around</span> <span m=''1427180''>here,</span> <span m=''1427370''>but</span>
  <span m=''1427480''>I''m</span> <span m=''1427550''>not going</span> <span m=''1427730''>to</span>
  <span m=''1427780''>draw</span> <span m=''1427960''>those</span> <span m=''1428220''>again--</span>
  <span m=''1428600''>over</span> <span m=''1429210''>1/2--</span> <span m=''1429800''>so</span>
  <span m=''1429920''>I''m going to</span> <span m=''1430300''>maybe</span> <span
  m=''1430570''>ignore</span> <span m=''1430880''>that--</span> <span m=''1431540''>of</span>
  <span m=''1433080''>the</span> <span m=''1433160''>log</span> <span m=''1434990''>of</span>
  <span m=''1435180''>the</span> <span m=''1435270''>square</span> <span m=''1435680''>root</span>
  <span m=''1436820''>of</span> <span m=''1436990''>B.</span> <span m=''1441180''>Did</span>
  <span m=''1441280''>I do</span> <span m=''1441390''>that</span> <span m=''1441560''>right?</span>
  <span m=''1442370''>B</span> <span m=''1442540''>to</span> <span m=''1442620''>the</span>
  <span m=''1442720''>1</span> <span m=''1442920''>minus</span> <span m=''1443220''>1/2.</span>
  <span m=''1445700''>Put</span> <span m=''1445880''>the</span> <span m=''1445970''>1/2</span>
  <span m=''1446390''>back</span> <span m=''1446610''>in</span> <span m=''1446740''>to</span>
  <span m=''1446810''>make</span> <span m=''1446970''>you</span> <span m=''1447040''>happy.</span>
  <span m=''1448180''>So</span> <span m=''1448470''>big-O</span> <span m=''1449000''>of
  that--</span> <span m=''1450670''>well,</span> <span m=''1450980''>what''s</span>
  <span m=''1451260''>log</span> <span m=''1451610''>of</span> <span m=''1451890''>root
  B?</span> </p><p><span m=''1456850''>AUDIENCE:</span> <span m=''1457350''>[INAUDIBLE]</span>
  </p><p><span m=''1458350''>BRADLEY KUSZMAUL:</span> <span m=''1458850''>I</span>
  <span m=''1458940''>can''t</span> <span m=''1459190''>quite</span> <span m=''1459460''>hear</span>
  <span m=''1459670''>you,</span> <span m=''1459780''>but</span> <span m=''1459910''>I</span>
  <span m=''1459970''>know</span> <span m=''1460130''>the</span> <span m=''1460280''>answer.</span>
  <span m=''1463020''>I</span> <span m=''1463150''>can</span> <span m=''1463610''>just</span>
  <span m=''1463800''>say</span> <span m=''1463940''>that''s</span> <span m=''1464160''>the</span>
  <span m=''1464230''>same</span> <span m=''1464490''>as</span> <span m=''1464600''>log</span>
  <span m=''1464910''>B,</span> <span m=''1465320''>when</span> <span m=''1465480''>I''m</span>
  <span m=''1465560''>doing</span> <span m=''1465810''>big</span> <span m=''1466020''>0''s</span>
  <span m=''1466640''>Get</span> <span m=''1466870''>rid</span> <span m=''1466890''>of
  the</span> <span m=''1467090''>halves.</span> <span m=''1467640''>So it''s</span>
  <span m=''1467970''>log</span> <span m=''1468350''>N</span> <span m=''1468530''>over</span>
  <span m=''1468760''>log</span> <span m=''1469030''>B.</span> <span m=''1472220''>So</span>
  <span m=''1472730''>if</span> <span m=''1472860''>you</span> <span m=''1473010''>sort</span>
  <span m=''1473240''>of</span> <span m=''1473310''>choose</span> <span m=''1473570''>block</span>
  <span m=''1473890''>sizes,</span> <span m=''1476240''>if</span> <span m=''1476370''>you</span>
  <span m=''1476470''>set</span> <span m=''1477160''>this</span> <span m=''1477440''>parameter</span>
  <span m=''1478070''>to</span> <span m=''1478200''>be</span> <span m=''1478460''>something</span>
  <span m=''1479530''>where</span> <span m=''1479670''>you''re</span> <span m=''1479740''>doing</span>
  <span m=''1479940''>something</span> <span m=''1480240''>with the</span> <span m=''1480340''>square</span>
  <span m=''1480750''>root,</span> <span m=''1481440''>you</span> <span m=''1481580''>end</span>
  <span m=''1481720''>up</span> <span m=''1481840''>having</span> <span m=''1482190''>lookups</span>
  <span m=''1483140''>that</span> <span m=''1483370''>cost,</span> <span m=''1484470''>asymptotically</span>
  <span m=''1485220''>the</span> <span m=''1485320''>same</span> <span m=''1485840''>as</span>
  <span m=''1486050''>for</span> <span m=''1486210''>a</span> <span m=''1486260''>B-tree.</span>
  <span m=''1488450''>But there</span> <span m=''1488730''>are these</span> <span
  m=''1488980''>constants</span> <span m=''1489510''>in</span> <span m=''1489610''>there.</span>
  <span m=''1489780''>There''s</span> <span m=''1490180''>a</span> <span m=''1490230''>factor</span>
  <span m=''1490600''>of 4 or</span> <span m=''1491020''>something</span> <span m=''1491370''>that
  I''ve</span> <span m=''1491590''>glossed</span> <span m=''1492000''>over.</span>
  <span m=''1493900''>But</span> <span m=''1494225''>asymptotically,</span> <span
  m=''1495190''>it''s</span> <span m=''1495420''>the</span> <span m=''1495500''>same.</span>
  </p><p><span m=''1496160''>And</span> <span m=''1497340''>insertions</span> <span
  m=''1497830''>have</span> <span m=''1498030''>this</span> <span m=''1498210''>much</span>
  <span m=''1498540''>better</span> <span m=''1498740''>performance.</span> <span
  m=''1499290''>What</span> <span m=''1499490''>if</span> <span m=''1500270''>B</span>
  <span m=''1500640''>was</span> <span m=''1501960''>1,000?</span> <span m=''1503360''>Then</span>
  <span m=''1503550''>we''re</span> <span m=''1503700''>dividing</span> <span m=''1504170''>by</span>
  <span m=''1504390''>30</span> <span m=''1504870''>here.</span> <span m=''1505090''>But</span>
  <span m=''1505310''>B</span> <span m=''1505940''>isn''t</span> <span m=''1506250''>really</span>
  <span m=''1506500''>1,000.</span> <span m=''1507140''>B''s</span> <span m=''1507470''>more</span>
  <span m=''1507620''>like</span> <span m=''1508350''>a</span> <span m=''1508440''>million</span>
  <span m=''1508930''>in</span> <span m=''1509050''>a</span> <span m=''1509100''>modern</span>
  <span m=''1509490''>system.</span> <span m=''1509900''>So</span> <span m=''1510050''>you</span>
  <span m=''1510620''>actually</span> <span m=''1510940''>get</span> <span m=''1511100''>to</span>
  <span m=''1511220''>divide</span> <span m=''1511750''>by</span> <span m=''1512520''>something</span>
  <span m=''1512870''>like</span> <span m=''1513050''>1,000</span> <span m=''1513640''>here.</span>
  <span m=''1514940''>And</span> <span m=''1515040''>that''s</span> <span m=''1515300''>a</span>
  <span m=''1515360''>huge</span> <span m=''1515750''>advantage,</span> <span m=''1516240''>to</span>
  <span m=''1516340''>basically</span> <span m=''1516760''>make</span> <span m=''1516960''>insertions</span>
  <span m=''1518610''>asymptotically</span> <span m=''1519450''>be</span> <span m=''1519610''>1,000</span>
  <span m=''1520050''>times</span> <span m=''1520330''>faster,</span> <span m=''1521930''>whatever</span>
  <span m=''1522180''>that</span> <span m=''1522390''>means.</span> <span m=''1525670''>When</span>
  <span m=''1525830''>you</span> <span m=''1525950''>actually</span> <span m=''1526190''>work</span>
  <span m=''1526450''>out</span> <span m=''1526590''>the</span> <span m=''1526670''>constants,</span>
  <span m=''1527200''>perhaps</span> <span m=''1527550''>it''s</span> <span m=''1527660''>a</span>
  <span m=''1527720''>factor</span> <span m=''1528120''>of</span> <span m=''1528170''>100,</span>
  <span m=''1529210''>is</span> <span m=''1529410''>what</span> <span m=''1529580''>we</span>
  <span m=''1529700''>see</span> <span m=''1530020''>in</span> <span m=''1530130''>practice.</span>
  <span m=''1532120''>So</span> <span m=''1535500''>this is</span> <span m=''1535610''>basically</span>
  <span m=''1536090''>working</span> <span m=''1536520''>out</span> <span m=''1537000''>those</span>
  <span m=''1537290''>details.</span> </p><p><span m=''1539070''>So</span> <span m=''1539210''>here''s</span>
  <span m=''1539490''>an</span> <span m=''1539570''>example.</span> <span m=''1540160''>Here</span>
  <span m=''1540300''>is</span> <span m=''1540400''>a</span> <span m=''1540460''>data</span>
  <span m=''1540670''>structure</span> <span m=''1541010''>that</span> <span m=''1541140''>can</span>
  <span m=''1541290''>achieve</span> <span m=''1541660''>this</span> <span m=''1541830''>kind</span>
  <span m=''1542000''>of</span> <span m=''1542060''>performance.</span> <span m=''1544380''>It''s</span>
  <span m=''1544540''>a</span> <span m=''1544580''>simple</span> <span m=''1545160''>version</span>
  <span m=''1545620''>of</span> <span m=''1545860''>a</span> <span m=''1546040''>streaming</span>
  <span m=''1546470''>B-tree</span> <span m=''1546940''>or</span> <span m=''1547020''>a</span>
  <span m=''1547060''>fractal</span> <span m=''1547460''>tree.</span> <span m=''1548200''>And</span>
  <span m=''1548580''>what</span> <span m=''1548770''>this</span> <span m=''1548970''>data</span>
  <span m=''1549170''>structure</span> <span m=''1549610''>is--</span> <span m=''1550180''>so</span>
  <span m=''1550390''>first</span> <span m=''1550620''>of</span> <span m=''1550680''>all,</span>
  <span m=''1551310''>we''re</span> <span m=''1552080''>kind</span> <span m=''1552260''>of</span>
  <span m=''1552340''>going</span> <span m=''1552520''>to</span> <span m=''1553020''>switch</span>
  <span m=''1553400''>modes</span> <span m=''1553880''>from</span> <span m=''1555340''>marketoid,</span>
  <span m=''1556560''>or</span> <span m=''1557010''>at</span> <span m=''1557150''>least</span>
  <span m=''1557600''>explaining</span> <span m=''1558070''>what</span> <span m=''1558190''>it''s</span>
  <span m=''1558330''>good</span> <span m=''1558480''>for,</span> <span m=''1558770''>to
  talking</span> <span m=''1559080''>about</span> <span m=''1559280''>what</span>
  <span m=''1559470''>a</span> <span m=''1559520''>data</span> <span m=''1559750''>structure</span>
  <span m=''1560170''>is</span> <span m=''1560280''>that</span> <span m=''1560370''>actually</span>
  <span m=''1560640''>solves</span> <span m=''1560990''>the</span> <span m=''1561060''>problem.</span>
  <span m=''1562070''>So</span> <span m=''1562670''>any</span> <span m=''1562830''>questions</span>
  <span m=''1563270''>before</span> <span m=''1563500''>we</span> <span m=''1563600''>dive</span>
  <span m=''1563840''>down</span> <span m=''1564030''>that</span> <span m=''1564200''>path?</span>
  <span m=''1564500''>OK.</span> <span m=''1565640''>So</span> <span m=''1565860''>if</span>
  <span m=''1565930''>there</span> <span m=''1566120''>are</span> <span m=''1566200''>any</span>
  <span m=''1566340''>questions,</span> <span m=''1566800''>stop me.</span> <span
  m=''1567210''>Because</span> <span m=''1567990''>I</span> <span m=''1568290''>like</span>
  <span m=''1568490''>to</span> <span m=''1569560''>race</span> <span m=''1569760''>through</span>
  <span m=''1569920''>this</span> <span m=''1570010''>stuff</span> <span m=''1570900''>if</span>
  <span m=''1571070''>possible.</span> </p><p><span m=''1572700''>So</span> <span
  m=''1573570''>the</span> <span m=''1573680''>deal</span> <span m=''1574310''>here</span>
  <span m=''1574620''>is</span> <span m=''1574760''>that</span> <span m=''1574870''>you''re</span>
  <span m=''1574990''>going</span> <span m=''1575100''>to</span> <span m=''1575220''>have</span>
  <span m=''1575340''>log N</span> <span m=''1575890''>arrays,</span> <span m=''1576500''>and</span>
  <span m=''1576740''>each</span> <span m=''1576990''>one</span> <span m=''1577500''>is</span>
  <span m=''1578230''>a</span> <span m=''1578370''>power</span> <span m=''1578710''>of</span>
  <span m=''1578820''>two</span> <span m=''1579060''>in</span> <span m=''1579180''>size.</span>
  <span m=''1580230''>And</span> <span m=''1580390''>you''re</span> <span m=''1580510''>going</span>
  <span m=''1580650''>to</span> <span m=''1580760''>have</span> <span m=''1580860''>one</span>
  <span m=''1581120''>for</span> <span m=''1581260''>each</span> <span m=''1581470''>power
  of</span> <span m=''1581810''>2.</span> <span m=''1581920''>So</span> <span m=''1582080''>there''s</span>
  <span m=''1582260''>going</span> <span m=''1582340''>to</span> <span m=''1582420''>be</span>
  <span m=''1582500''>one</span> <span m=''1582830''>array</span> <span m=''1583130''>of</span>
  <span m=''1583200''>size</span> <span m=''1583500''>1,</span> <span m=''1584690''>one</span>
  <span m=''1584860''>of</span> <span m=''1584930''>size</span> <span m=''1585230''>2,</span>
  <span m=''1585690''>one</span> <span m=''1585920''>of</span> <span m=''1586080''>size</span>
  <span m=''1586230''>4 and</span> <span m=''1586690''>8</span> <span m=''1587150''>and</span>
  <span m=''1587610''>16,</span> <span m=''1588270''>all</span> <span m=''1588540''>the</span>
  <span m=''1588610''>way</span> <span m=''1588840''>up</span> <span m=''1588970''>to</span>
  <span m=''1589980''>a</span> <span m=''1590250''>trillion,</span> <span m=''1591620''>2</span>
  <span m=''1591930''>to</span> <span m=''1592010''>the</span> <span m=''1592110''>40th.</span>
  <span m=''1595130''>The</span> <span m=''1595230''>second</span> <span m=''1595780''>invariant</span>
  <span m=''1596180''>of</span> <span m=''1596300''>this</span> <span m=''1596420''>data</span>
  <span m=''1596610''>structure</span> <span m=''1597020''>is</span> <span m=''1597180''>each</span>
  <span m=''1597410''>array</span> <span m=''1597920''>is</span> <span m=''1598070''>either</span>
  <span m=''1598360''>completely</span> <span m=''1598880''>full</span> <span m=''1599420''>or</span>
  <span m=''1599600''>completely</span> <span m=''1600120''>empty.</span> <span m=''1602660''>And</span>
  <span m=''1603060''>the</span> <span m=''1603150''>third</span> <span m=''1603500''>one</span>
  <span m=''1603780''>is</span> <span m=''1603940''>that</span> <span m=''1604100''>each</span>
  <span m=''1604460''>array</span> <span m=''1604725''>is</span> <span m=''1604990''>sorted.</span>
  </p><p><span m=''1609780''>So</span> <span m=''1610450''>I''ll</span> <span m=''1610945''>do</span>
  <span m=''1612430''>an</span> <span m=''1612490''>example</span> <span m=''1612990''>here.</span>
  <span m=''1613390''>If</span> <span m=''1613550''>I</span> <span m=''1613640''>have</span>
  <span m=''1613830''>four</span> <span m=''1614100''>elements</span> <span m=''1614540''>in</span>
  <span m=''1614630''>the</span> <span m=''1614810''>array,</span> <span m=''1617164''>and</span>
  <span m=''1617600''>these</span> <span m=''1617780''>are</span> <span m=''1617810''>the</span>
  <span m=''1617920''>numbers,</span> <span m=''1618550''>there''s</span> <span m=''1618710''>only</span>
  <span m=''1618950''>one</span> <span m=''1619270''>way</span> <span m=''1619480''>for</span>
  <span m=''1619630''>me</span> <span m=''1619780''>to</span> <span m=''1619860''>put</span>
  <span m=''1620080''>those</span> <span m=''1620320''>in</span> <span m=''1620500''>that</span>
  <span m=''1620670''>satisfy</span> <span m=''1621220''>all</span> <span m=''1621390''>those</span>
  <span m=''1621580''>requirements.</span> <span m=''1623160''>Because</span> <span
  m=''1623460''>there''s</span> <span m=''1623670''>four</span> <span m=''1623960''>items,</span>
  <span m=''1624810''>it</span> <span m=''1624920''>has</span> <span m=''1625160''>to</span>
  <span m=''1625250''>go</span> <span m=''1625440''>into</span> <span m=''1625560''>the</span>
  <span m=''1625720''>array of</span> <span m=''1626020''>size</span> <span m=''1626380''>four.</span>
  <span m=''1626660''>It has</span> <span m=''1626800''>to</span> <span m=''1626890''>fill</span>
  <span m=''1627180''>it</span> <span m=''1627260''>up.</span> <span m=''1627480''>I</span>
  <span m=''1627530''>can''t</span> <span m=''1627870''>have</span> <span m=''1628030''>any</span>
  <span m=''1628260''>other</span> <span m=''1628650''>way</span> <span m=''1628830''>of</span>
  <span m=''1628910''>doing</span> <span m=''1629130''>that.</span> <span m=''1629670''>And</span>
  <span m=''1629870''>within</span> <span m=''1630160''>that</span> <span m=''1630420''>array</span>
  <span m=''1630680''>of</span> <span m=''1630790''>size</span> <span m=''1631170''>four,</span>
  <span m=''1631440''>they</span> <span m=''1631580''>have</span> <span m=''1631720''>to</span>
  <span m=''1631810''>be</span> <span m=''1631920''>sorted.</span> <span m=''1632900''>So</span>
  <span m=''1633320''>those</span> <span m=''1633630''>four</span> <span m=''1633830''>elements</span>
  <span m=''1634480''>uniquely</span> <span m=''1634990''>go</span> <span m=''1635250''>there,</span>
  <span m=''1635580''>and</span> <span m=''1635670''>that''s</span> <span m=''1636330''>the</span>
  <span m=''1636430''>end</span> <span m=''1636570''>of</span> <span m=''1636610''>the</span>
  <span m=''1636680''>story</span> <span m=''1637040''>for</span> <span m=''1637160''>where</span>
  <span m=''1637380''>four</span> <span m=''1637700''>elements</span> <span m=''1638110''>go.</span>
  </p><p><span m=''1641210''>If</span> <span m=''1641370''>there''s</span> <span m=''1641590''>10</span>
  <span m=''1641820''>elements,</span> <span m=''1643380''>you get a</span> <span
  m=''1643560''>little</span> <span m=''1643850''>freedom,</span> <span m=''1644260''>because,</span>
  <span m=''1644710''>well,</span> <span m=''1644930''>we</span> <span m=''1645020''>have</span>
  <span m=''1645170''>to</span> <span m=''1645270''>fill</span> <span m=''1645450''>up</span>
  <span m=''1645580''>the</span> <span m=''1645670''>2</span> <span m=''1645930''>array
  and</span> <span m=''1646420''>we</span> <span m=''1646520''>have</span> <span m=''1646630''>to</span>
  <span m=''1646730''>fill</span> <span m=''1646890''>up</span> <span m=''1647000''>the</span>
  <span m=''1647150''>8 array,</span> <span m=''1648270''>because</span> <span m=''1648450''>there''s</span>
  <span m=''1648580''>only</span> <span m=''1648800''>one</span> <span m=''1649020''>way</span>
  <span m=''1649270''>to</span> <span m=''1649350''>write</span> <span m=''1649730''>in</span>
  <span m=''1649880''>binary</span> <span m=''1651110''>10,</span> <span m=''1651620''>which</span>
  <span m=''1651800''>is</span> <span m=''1652620''>0101.</span> <span m=''1654820''>But</span>
  <span m=''1655030''>we</span> <span m=''1655130''>get</span> <span m=''1655200''>a</span>
  <span m=''1655260''>little</span> <span m=''1655440''>choice.</span> <span m=''1655870''>It</span>
  <span m=''1655960''>turns</span> <span m=''1656240''>out</span> <span m=''1656490''>that</span>
  <span m=''1657170''>the</span> <span m=''1657370''>bottom</span> <span m=''1657780''>array</span>
  <span m=''1657980''>has</span> <span m=''1658180''>to</span> <span m=''1658270''>be</span>
  <span m=''1658380''>sorted</span> <span m=''1658690''>and</span> <span m=''1658820''>the</span>
  <span m=''1659070''>top array,</span> <span m=''1660600''>the</span> <span m=''1660870''>array</span>
  <span m=''1661220''>containing</span> <span m=''1661540''>5</span> <span m=''1661850''>and</span>
  <span m=''1661950''>10</span> <span m=''1662170''>has</span> <span m=''1662300''>to</span>
  <span m=''1662370''>be</span> <span m=''1662450''>sorted.</span> <span m=''1662810''>But</span>
  <span m=''1663460''>we</span> <span m=''1664590''>could</span> <span m=''1664690''>have</span>
  <span m=''1664760''>put</span> <span m=''1664920''>the</span> <span m=''1664990''>five</span>
  <span m=''1665450''>down</span> <span m=''1665710''>here</span> <span m=''1666010''>and,</span>
  <span m=''1666110''>say,</span> <span m=''1666430''>swapped</span> <span m=''1666850''>the</span>
  <span m=''1666930''>5</span> <span m=''1667260''>and</span> <span m=''1667340''>the</span>
  <span m=''1667420''>6,</span> <span m=''1667840''>and</span> <span m=''1668170''>that</span>
  <span m=''1668390''>would''ve</span> <span m=''1668550''>been</span> <span m=''1668700''>a</span>
  <span m=''1668750''>perfectly</span> <span m=''1669210''>valid</span> <span m=''1669570''>data</span>
  <span m=''1669790''>structure</span> <span m=''1670560''>for</span> <span m=''1670710''>this</span>
  <span m=''1670840''>set</span> <span m=''1671110''>of</span> <span m=''1671190''>data</span>
  <span m=''1671440''>as</span> <span m=''1671630''>well.</span> <span m=''1672800''>So</span>
  <span m=''1672970''>we get</span> <span m=''1673080''>a</span> <span m=''1673120''>little</span>
  <span m=''1673260''>bit</span> <span m=''1673370''>of</span> <span m=''1673440''>freedom.</span>
  <span m=''1675080''>OK?</span> <span m=''1677180''>So</span> <span m=''1677310''>that''s</span>
  <span m=''1678050''>the</span> <span m=''1678140''>basic</span> <span m=''1678530''>data</span>
  <span m=''1678770''>structure.</span> </p><p><span m=''1679310''>So</span> <span
  m=''1679400''>now</span> <span m=''1679600''>what</span> <span m=''1679720''>do</span>
  <span m=''1679760''>we</span> <span m=''1679920''>do?</span> <span m=''1680910''>How</span>
  <span m=''1681050''>do</span> <span m=''1681110''>you</span> <span m=''1681220''>search</span>
  <span m=''1681560''>this</span> <span m=''1681770''>data</span> <span m=''1681980''>structure?</span>
  <span m=''1682360''>Well,</span> <span m=''1683680''>the</span> <span m=''1683820''>idea</span>
  <span m=''1684500''>is</span> <span m=''1685010''>just</span> <span m=''1685310''>to</span>
  <span m=''1685390''>perform</span> <span m=''1685800''>a</span> <span m=''1685890''>binary</span>
  <span m=''1686410''>search</span> <span m=''1686780''>in</span> <span m=''1686890''>each</span>
  <span m=''1687130''>of</span> <span m=''1687220''>the</span> <span m=''1687360''>arrays.</span>
  <span m=''1693060''>The</span> <span m=''1693310''>advantage</span> <span m=''1693760''>of</span>
  <span m=''1693830''>this</span> <span m=''1694080''>is</span> <span m=''1694190''>it</span>
  <span m=''1694290''>works,</span> <span m=''1694790''>and</span> <span m=''1694880''>it''s</span>
  <span m=''1695030''>a</span> <span m=''1695080''>lot</span> <span m=''1695340''>faster</span>
  <span m=''1695660''>than</span> <span m=''1695800''>a</span> <span m=''1695870''>table</span>
  <span m=''1696180''>scan.</span> <span m=''1697750''>The</span> <span m=''1697840''>disadvantage</span>
  <span m=''1698760''>is it''s</span> <span m=''1699210''>actually</span> <span m=''1699590''>quite</span>
  <span m=''1700000''>a</span> <span m=''1700060''>bit</span> <span m=''1700270''>slower</span>
  <span m=''1700670''>than</span> <span m=''1700810''>a</span> <span m=''1700870''>B-tree,</span>
  <span m=''1702300''>because</span> <span m=''1703240''>if</span> <span m=''1703350''>you</span>
  <span m=''1703450''>do</span> <span m=''1703600''>the</span> <span m=''1704980''>analysis</span>
  <span m=''1705560''>here,</span> <span m=''1705790''>which</span> <span m=''1706280''>in
  this</span> <span m=''1706480''>class,</span> <span m=''1706920''>you probably--</span>
  <span m=''1707150''>you''ve</span> <span m=''1707310''>done</span> <span m=''1707520''>things</span>
  <span m=''1707750''>like</span> <span m=''1707940''>master</span> <span m=''1708290''>theorem</span>
  <span m=''1708680''>and</span> <span m=''1708770''>stuff,</span> <span m=''1709090''>right?</span>
  <span m=''1709740''>So</span> <span m=''1711490''>you know what</span> <span m=''1711730''>the</span>
  <span m=''1711820''>cost</span> <span m=''1712190''>of</span> <span m=''1712290''>doing</span>
  <span m=''1712630''>the</span> <span m=''1713090''>search</span> <span m=''1713390''>in</span>
  <span m=''1713480''>the</span> <span m=''1713550''>biggest</span> <span m=''1713930''>array</span>
  <span m=''1714280''>is,</span> <span m=''1714540''>right?</span> <span m=''1715440''>How</span>
  <span m=''1715610''>many</span> <span m=''1715780''>disk I/Os</span> <span m=''1716135''>is</span>
  <span m=''1716490''>that</span> <span m=''1716680''>in</span> <span m=''1716750''>the</span>
  <span m=''1716850''>worst</span> <span m=''1717120''>case?</span> </p><p><span m=''1718552''>AUDIENCE:</span>
  <span m=''1719043''>Log N.</span> </p><p><span m=''1720025''>BRADLEY KUSZMAUL:</span>
  <span m=''1720520''>It''s log</span> <span m=''1720890''>N.</span> <span m=''1723560''>It''s</span>
  <span m=''1723750''>going</span> <span m=''1723830''>to</span> <span m=''1723900''>be</span>
  <span m=''1724130''>log</span> <span m=''1724490''>base</span> <span m=''1724820''>2</span>
  <span m=''1725040''>of</span> <span m=''1725170''>N,</span> <span m=''1727140''>plus</span>
  <span m=''1727600''>or</span> <span m=''1727660''>minus</span> <span m=''1728000''>a</span>
  <span m=''1728060''>little</span> <span m=''1728320''>bit.</span> <span m=''1728740''>Just</span>
  <span m=''1728970''>ignore</span> <span m=''1729310''>all</span> <span m=''1729410''>that</span>
  <span m=''1729620''>stuff.</span> <span m=''1731720''>I''ll</span> <span m=''1732050''>just</span>
  <span m=''1732250''>do</span> <span m=''1732420''>L-O-G.</span> <span m=''1733990''>So</span>
  <span m=''1734320''>what''s</span> <span m=''1734630''>the</span> <span m=''1734800''>size</span>
  <span m=''1735230''>of</span> <span m=''1735330''>doing</span> <span m=''1735580''>the</span>
  <span m=''1735670''>second-biggest</span> <span m=''1736400''>array?</span> <span
  m=''1736810''>What''s</span> <span m=''1737050''>the</span> <span m=''1737130''>cost</span>
  <span m=''1737460''>of</span> <span m=''1737510''>searching</span> <span m=''1737800''>the</span>
  <span m=''1737890''>second-biggest</span> <span m=''1738560''>array?</span> <span
  m=''1742010''>It''s</span> <span m=''1742110''>half</span> <span m=''1742590''>as
  big,</span> <span m=''1744360''>so</span> <span m=''1744810''>it''s</span> <span
  m=''1746070''>log of</span> <span m=''1746450''>N</span> <span m=''1749000''>over</span>
  <span m=''1749200''>2,</span> <span m=''1749590''>right?</span> <span m=''1750930''>I</span>
  <span m=''1751400''>can''t</span> <span m=''1751640''>write.</span> <span m=''1754640''>So</span>
  <span m=''1754780''>this</span> <span m=''1754960''>is</span> <span m=''1755090''>log</span>
  <span m=''1755470''>N.</span> <span m=''1757560''>This</span> <span m=''1757790''>is</span>
  <span m=''1758090''>equal</span> <span m=''1758410''>to</span> <span m=''1758530''>log</span>
  <span m=''1759630''>of</span> <span m=''1759850''>N</span> <span m=''1761080''>minus</span>
  <span m=''1761440''>1.</span> <span m=''1763590''>What''s</span> <span m=''1763830''>the</span>
  <span m=''1764060''>next</span> <span m=''1764350''>array?</span> <span m=''1766010''>What''s</span>
  <span m=''1766130''>the</span> <span m=''1766250''>cost</span> <span m=''1766470''>of</span>
  <span m=''1766550''>searching</span> <span m=''1766850''>the</span> <span m=''1767040''>next</span>
  <span m=''1767220''>biggest</span> <span m=''1767540''>array?</span> <span m=''1772150''>Log</span>
  <span m=''1772450''>of</span> <span m=''1772670''>N minus</span> <span m=''1773280''>2--</span>
  <span m=''1778570''>you</span> <span m=''1779120''>add</span> <span m=''1779380''>that</span>
  <span m=''1779610''>up,</span> <span m=''1780010''>and</span> <span m=''1780230''>what''s</span>
  <span m=''1780390''>the</span> <span m=''1780550''>sum?</span> <span m=''1782700''>We
  don''t</span> <span m=''1783060''>even</span> <span m=''1783270''>need</span> <span
  m=''1783440''>recurrences</span> <span m=''1784000''>for</span> <span m=''1784100''>this.</span>
  <span m=''1784640''>We could</span> <span m=''1784770''>have</span> <span m=''1784840''>done</span>
  <span m=''1784990''>it</span> <span m=''1785070''>that</span> <span m=''1785260''>way,</span>
  <span m=''1785803''>but</span> <span m=''1786510''>what''s</span> <span m=''1786640''>the</span>
  <span m=''1786770''>sum?</span> <span m=''1787200''>When we</span> <span m=''1787460''>finally</span>
  <span m=''1787920''>get</span> <span m=''1788170''>down</span> <span m=''1788370''>to</span>
  <span m=''1788490''>1,</span> <span m=''1789330''>and</span> <span m=''1789570''>you</span>
  <span m=''1789670''>search</span> <span m=''1789920''>the</span> <span m=''1790010''>bottom</span>
  <span m=''1790310''>array,</span> <span m=''1790590''>you</span> <span m=''1790670''>have</span>
  <span m=''1790800''>to</span> <span m=''1790890''>do</span> <span m=''1791780''>one</span>
  <span m=''1792100''>disk</span> <span m=''1792190''>I/O</span> <span m=''1792540''>in</span>
  <span m=''1792630''>the</span> <span m=''1792700''>worst</span> <span m=''1792960''>case.</span>
  <span m=''1794150''>So</span> <span m=''1794300''>this</span> <span m=''1794530''>is</span>
  <span m=''1794690''>an</span> <span m=''1794870''>arithmetic</span> <span m=''1795420''>sequence,</span>
  <span m=''1795890''>right?</span> <span m=''1798380''>So</span> <span m=''1798520''>what''s</span>
  <span m=''1798690''>the</span> <span m=''1798810''>answer?</span> <span m=''1799610''>Big-O.</span>
  <span m=''1801580''>I''m</span> <span m=''1801730''>not even</span> <span m=''1801890''>going
  to</span> <span m=''1802070''>ask</span> <span m=''1802420''>for</span> <span m=''1802540''>the--</span>
  <span m=''1804680''>pardon?</span> </p><p><span m=''1805160''>AUDIENCE:</span> <span
  m=''1805340''>Log squared?</span> </p><p><span m=''1805805''>BRADLEY KUSZMAUL:</span>
  <span m=''1806270''>Yes,</span> <span m=''1806620''>it''s</span> <span m=''1806740''>log</span>
  <span m=''1807050''>squared,</span> <span m=''1807770''>which</span> <span m=''1807960''>is</span>
  <span m=''1808430''>right</span> <span m=''1808710''>there</span> <span m=''1808920''>in
  green.</span> <span m=''1811720''>So</span> <span m=''1812260''>basically,</span>
  <span m=''1812930''>this</span> <span m=''1813170''>thing</span> <span m=''1813320''>is</span>
  <span m=''1813410''>really</span> <span m=''1813810''>expensive.</span> <span m=''1814230''>Log</span>
  <span m=''1814580''>squared</span> <span m=''1815610''>N, when</span> <span m=''1817620''>we
  were</span> <span m=''1817810''>trying</span> <span m=''1818030''>to</span> <span
  m=''1818120''>match</span> <span m=''1818370''>a</span> <span m=''1818430''>B-tree,</span>
  <span m=''1818900''>which</span> <span m=''1819060''>is</span> <span m=''1819190''>log</span>
  <span m=''1819630''>N</span> <span m=''1819830''>over</span> <span m=''1820140''>log</span>
  <span m=''1820410''>B.</span> <span m=''1821130''>So</span> <span m=''1821350''>not</span>
  <span m=''1821580''>only</span> <span m=''1821870''>is</span> <span m=''1822040''>it</span>
  <span m=''1822200''>not</span> <span m=''1822710''>log</span> <span m=''1823010''>base</span>
  <span m=''1823470''>B,</span> <span m=''1823920''>it''s</span> <span m=''1824080''>log</span>
  <span m=''1824310''>base</span> <span m=''1824680''>2</span> <span m=''1824910''>or</span>
  <span m=''1825020''>something.</span> <span m=''1826260''>But</span> <span m=''1826460''>it''s</span>
  <span m=''1826680''>squaring</span> <span m=''1827220''>it.</span> <span m=''1828380''>So</span>
  <span m=''1828550''>if</span> <span m=''1828610''>you</span> <span m=''1828690''>think</span>
  <span m=''1828900''>of</span> <span m=''1828980''>having</span> <span m=''1829270''>a</span>
  <span m=''1829290''>million</span> <span m=''1829730''>items</span> <span m=''1831210''>in</span>
  <span m=''1831350''>your</span> <span m=''1831470''>data</span> <span m=''1831710''>structure,</span>
  <span m=''1833280''>even a</span> <span m=''1833490''>relatively</span> <span m=''1834020''>small</span>
  <span m=''1834390''>one,</span> <span m=''1835210''>log</span> <span m=''1835480''>base</span>
  <span m=''1835750''>1</span> <span m=''1835800''>million</span> <span m=''1836230''>is</span>
  <span m=''1836470''>20.</span> <span m=''1837720''>If you</span> <span m=''1837820''>square</span>
  <span m=''1838220''>that,</span> <span m=''1838560''>that''s</span> <span m=''1839400''>400.</span>
  <span m=''1840092''>Maybe you get to</span> <span m=''1840440''>divide</span> <span
  m=''1840750''>by</span> <span m=''1840900''>2.</span> <span m=''1841660''>It''s</span>
  <span m=''1841870''>hundreds</span> <span m=''1842380''>of</span> <span m=''1842460''>disk
  I/Os</span> <span m=''1843080''>just</span> <span m=''1843320''>to do</span> <span
  m=''1843450''>a</span> <span m=''1843520''>look</span> <span m=''1843730''>up,</span>
  <span m=''1844340''>instead</span> <span m=''1844600''>of</span> <span m=''1844680''>four.</span>
  <span m=''1846250''>So</span> <span m=''1846390''>this</span> <span m=''1846630''>is</span>
  <span m=''1846770''>just</span> <span m=''1847020''>sucking</span> <span m=''1847880''>at</span>
  <span m=''1847980''>this</span> <span m=''1848170''>point.</span> </p><p><span m=''1849440''>So
  let''s</span> <span m=''1849940''>put</span> <span m=''1850080''>that</span> <span
  m=''1850230''>aside</span> <span m=''1850690''>and</span> <span m=''1851720''>see</span>
  <span m=''1851910''>if</span> <span m=''1852000''>we</span> <span m=''1852080''>can</span>
  <span m=''1852200''>do</span> <span m=''1852330''>insertion,</span> <span m=''1853740''>since</span>
  <span m=''1853970''>we</span> <span m=''1854270''>are</span> <span m=''1854400''>doing</span>
  <span m=''1854600''>so</span> <span m=''1854780''>badly</span> <span m=''1855250''>at</span>
  <span m=''1855880''>[? logging. ?]</span> <span m=''1856510''>So</span> <span m=''1858500''>to</span>
  <span m=''1858770''>make</span> <span m=''1858990''>this</span> <span m=''1859180''>easier</span>
  <span m=''1859510''>to</span> <span m=''1859560''>think</span> <span m=''1859760''>about,</span>
  <span m=''1860070''>I''m going</span> <span m=''1860170''>to</span> <span m=''1860210''>add</span>
  <span m=''1860400''>another</span> <span m=''1861520''>set of</span> <span m=''1861790''>temporary</span>
  <span m=''1862360''>arrays.</span> <span m=''1862750''>So I''m</span> <span m=''1862850''>actually</span>
  <span m=''1863050''>going</span> <span m=''1863130''>to</span> <span m=''1863180''>have</span>
  <span m=''1863340''>two</span> <span m=''1863540''>arrays</span> <span m=''1863940''>of</span>
  <span m=''1864030''>each</span> <span m=''1864260''>size.</span> <span m=''1865270''>And</span>
  <span m=''1865670''>the</span> <span m=''1865790''>idea</span> <span m=''1866220''>is</span>
  <span m=''1866340''>at</span> <span m=''1866430''>the</span> <span m=''1866510''>beginning</span>
  <span m=''1866950''>of</span> <span m=''1867060''>each</span> <span m=''1867300''>step,</span>
  <span m=''1868270''>after</span> <span m=''1868490''>doing</span> <span m=''1868720''>an</span>
  <span m=''1868810''>insertion,</span> <span m=''1869790''>all</span> <span m=''1869950''>the</span>
  <span m=''1870100''>temporary</span> <span m=''1870500''>arrays</span> <span m=''1870900''>are</span>
  <span m=''1871010''>empty.</span> <span m=''1872000''>I''m</span> <span m=''1872130''>only</span>
  <span m=''1872280''>going</span> <span m=''1872400''>to</span> <span m=''1872560''>have</span>
  <span m=''1872800''>arrays</span> <span m=''1873970''>on</span> <span m=''1874070''>the</span>
  <span m=''1874160''>left</span> <span m=''1874420''>side</span> <span m=''1874750''>that
  are</span> <span m=''1874810''>going</span> <span m=''1874940''>to</span> <span
  m=''1875020''>have</span> <span m=''1875290''>data</span> <span m=''1875550''>in
  them.</span> <span m=''1877670''>So</span> <span m=''1877900''>to</span> <span m=''1878010''>insert</span>
  <span m=''1878520''>15</span> <span m=''1879010''>into</span> <span m=''1879170''>this</span>
  <span m=''1879350''>data</span> <span m=''1879530''>structure,</span> <span m=''1879930''>there''s
  only</span> <span m=''1880100''>one</span> <span m=''1880290''>place</span> <span
  m=''1880520''>to</span> <span m=''1880620''>put</span> <span m=''1880850''>it.</span>
  <span m=''1881230''>I</span> <span m=''1881320''>put</span> <span m=''1881530''>it</span>
  <span m=''1881650''>in</span> <span m=''1882070''>the</span> <span m=''1882220''>one</span>
  <span m=''1882440''>array,</span> <span m=''1883240''>if</span> <span m=''1883740''>I''m</span>
  <span m=''1883880''>trying</span> <span m=''1884090''>to</span> <span m=''1884290''>be</span>
  <span m=''1884460''>lazy</span> <span m=''1884920''>about</span> <span m=''1885110''>how</span>
  <span m=''1885220''>much</span> <span m=''1885400''>work</span> <span m=''1885690''>I</span>
  <span m=''1885750''>want</span> <span m=''1885970''>to</span> <span m=''1886030''>do.</span>
  <span m=''1886170''>And</span> <span m=''1886270''>it</span> <span m=''1886330''>turns</span>
  <span m=''1886560''>out,</span> <span m=''1886690''>this</span> <span m=''1886880''>is</span>
  <span m=''1887680''>exactly</span> <span m=''1888100''>what</span> <span m=''1888240''>you</span>
  <span m=''1888330''>want</span> <span m=''1888470''>to</span> <span m=''1888520''>do.</span>
  <span m=''1889780''>You</span> <span m=''1889880''>have an</span> <span m=''1890340''>an</span>
  <span m=''1890450''>empty</span> <span m=''1890710''>one</span> <span m=''1890920''>array,</span>
  <span m=''1890990''>a</span> <span m=''1891320''>new</span> <span m=''1891520''>element</span>
  <span m=''1891850''>comes</span> <span m=''1892070''>in,</span> <span m=''1892210''>just</span>
  <span m=''1892430''>put</span> <span m=''1892600''>it</span> <span m=''1892700''>in</span>
  <span m=''1892840''>there.</span> </p><p><span m=''1896010''>Now</span> <span m=''1896160''>I</span>
  <span m=''1896230''>want</span> <span m=''1896540''>to</span> <span m=''1896590''>insert</span>
  <span m=''1896800''>a</span> <span m=''1896860''>7.</span> <span m=''1897520''>There''s</span>
  <span m=''1897730''>no</span> <span m=''1897860''>place</span> <span m=''1898150''>in</span>
  <span m=''1898240''>the</span> <span m=''1898320''>one</span> <span m=''1898530''>array,</span>
  <span m=''1898850''>so</span> <span m=''1898950''>I''m</span> <span m=''1899040''>going</span>
  <span m=''1899150''>to</span> <span m=''1899190''>put</span> <span m=''1899370''>it</span>
  <span m=''1899450''>in</span> <span m=''1899590''>the</span> <span m=''1899890''>one</span>
  <span m=''1900090''>array</span> <span m=''1900380''>over</span> <span m=''1900680''>on</span>
  <span m=''1900760''>the</span> <span m=''1900850''>temp</span> <span m=''1901160''>side.</span>
  <span m=''1902870''>And</span> <span m=''1903080''>then</span> <span m=''1903270''>I''m</span>
  <span m=''1903360''>going</span> <span m=''1903510''>to</span> <span m=''1903570''>merge</span>
  <span m=''1903880''>the</span> <span m=''1903990''>two</span> <span m=''1904150''>one</span>
  <span m=''1904320''>arrays</span> <span m=''1904860''>to</span> <span m=''1904970''>make</span>
  <span m=''1905180''>a</span> <span m=''1905270''>two</span> <span m=''1905450''>array.</span>
  <span m=''1907790''>So</span> <span m=''1908080''>the</span> <span m=''1908190''>15</span>
  <span m=''1908870''>and</span> <span m=''1908950''>the</span> <span m=''1909030''>7</span>
  <span m=''1909450''>become</span> <span m=''1909900''>7</span> <span m=''1910200''>and</span>
  <span m=''1910320''>15</span> <span m=''1910840''>here.</span> <span m=''1912310''>I</span>
  <span m=''1912390''>couldn''t</span> <span m=''1912680''>put</span> <span m=''1912870''>it</span>
  <span m=''1912980''>there</span> <span m=''1913210''>because</span> <span m=''1913450''>that</span>
  <span m=''1913630''>array</span> <span m=''1913890''>already</span> <span m=''1914360''>was</span>
  <span m=''1914620''>full.</span> <span m=''1915010''>And</span> <span m=''1915130''>then</span>
  <span m=''1915240''>I</span> <span m=''1915530''>merge</span> <span m=''1915840''>those</span>
  <span m=''1916170''>two</span> <span m=''1917250''>to</span> <span m=''1917370''>make</span>
  <span m=''1917830''>a</span> <span m=''1917930''>new</span> <span m=''1918080''>four</span>
  <span m=''1918630''>array.</span> <span m=''1921110''>So</span> <span m=''1921290''>this</span>
  <span m=''1921540''>is</span> <span m=''1921700''>the</span> <span m=''1921770''>final</span>
  <span m=''1922380''>result</span> <span m=''1922800''>after</span> <span m=''1923140''>inserting</span>
  <span m=''1924520''>those</span> <span m=''1924770''>two</span> <span m=''1924970''>items.</span>
  <span m=''1926332''>Does</span> <span m=''1926780''>that</span> <span m=''1926900''>make</span>
  <span m=''1927070''>sense?</span> <span m=''1930440''>It''s</span> <span m=''1930910''>not</span>
  <span m=''1931120''>a hard</span> <span m=''1931400''>data</span> <span m=''1931630''>structure.</span>
  </p><p><span m=''1933300''>So</span> <span m=''1934680''>one</span> <span m=''1934900''>insertion</span>
  <span m=''1935440''>can</span> <span m=''1935620''>cause</span> <span m=''1935940''>a</span>
  <span m=''1936000''>whole</span> <span m=''1936190''>bunch</span> <span m=''1936420''>of</span>
  <span m=''1936480''>merges.</span> <span m=''1936900''>Here</span> <span m=''1937050''>we</span>
  <span m=''1937190''>have</span> <span m=''1938110''>sort</span> <span m=''1938270''>of</span>
  <span m=''1938420''>an</span> <span m=''1938530''>animation.</span> <span m=''1939200''>So</span>
  <span m=''1940120''>here</span> <span m=''1940340''>I''ve</span> <span m=''1940450''>laid</span>
  <span m=''1940720''>out</span> <span m=''1940940''>the</span> <span m=''1941030''>one</span>
  <span m=''1941260''>array</span> <span m=''1942670''>across</span> <span m=''1942940''>the</span>
  <span m=''1943200''>top,</span> <span m=''1943810''>and</span> <span m=''1943980''>then</span>
  <span m=''1944100''>the</span> <span m=''1944190''>temporary</span> <span m=''1944455''>array</span>
  <span m=''1944910''>just</span> <span m=''1945140''>under</span> <span m=''1945610''>it,</span>
  <span m=''1945890''>and</span> <span m=''1946030''>then</span> <span m=''1946450''>going</span>
  <span m=''1946740''>down,</span> <span m=''1947130''>we</span> <span m=''1947200''>have</span>
  <span m=''1947330''>a</span> <span m=''1947370''>sequence</span> <span m=''1947850''>of</span>
  <span m=''1947920''>steps</span> <span m=''1948880''>for</span> <span m=''1949080''>the</span>
  <span m=''1949210''>data</span> <span m=''1949410''>structure</span> <span m=''1949820''>over</span>
  <span m=''1950010''>time.</span> <span m=''1950930''>So</span> <span m=''1951110''>we</span>
  <span m=''1951220''>have</span> <span m=''1951970''>the</span> <span m=''1952080''>whole</span>
  <span m=''1952330''>arrays.</span> <span m=''1953170''>We</span> <span m=''1953330''>have</span>
  <span m=''1953570''>one</span> <span m=''1953870''>and</span> <span m=''1953960''>the</span>
  <span m=''1954050''>two</span> <span m=''1954340''>and</span> <span m=''1954400''>the</span>
  <span m=''1954480''>four</span> <span m=''1954910''>and the eight</span> <span m=''1955120''>array</span>
  <span m=''1955180''>are</span> <span m=''1955600''>all full,</span> <span m=''1956530''>and</span>
  <span m=''1956680''>we</span> <span m=''1956780''>insert</span> <span m=''1957050''>one</span>
  <span m=''1957310''>more</span> <span m=''1957570''>item,</span> <span m=''1957910''>which</span>
  <span m=''1958100''>causes</span> <span m=''1958510''>a</span> <span m=''1958570''>big</span>
  <span m=''1958820''>carry.</span> <span m=''1959720''>So the</span> <span m=''1959830''>one</span>
  <span m=''1960140''>creates</span> <span m=''1960470''>a</span> <span m=''1960540''>two,</span>
  <span m=''1960970''>the</span> <span m=''1961120''>two</span> <span m=''1961290''>twos</span>
  <span m=''1961630''>create</span> <span m=''1961950''>two</span> <span m=''1962090''>fours,</span>
  <span m=''1963330''>the</span> <span m=''1963450''>two</span> <span m=''1963610''>fours</span>
  <span m=''1964200''>and</span> <span m=''1964330''>the</span> <span m=''1964670''>eight</span>
  <span m=''1964980''>create two</span> <span m=''1965180''>eights,</span> <span m=''1966040''>and</span>
  <span m=''1966210''>so</span> <span m=''1966400''>forth.</span> </p><p><span m=''1966660''>So</span>
  <span m=''1967030''>here</span> <span m=''1967200''>you</span> <span m=''1967350''>are.</span>
  <span m=''1967550''>You''re</span> <span m=''1967730''>running.</span> <span m=''1969190''>You''ve</span>
  <span m=''1970260''>built</span> <span m=''1970470''>up</span> <span m=''1970560''>a</span>
  <span m=''1970940''>terabyte</span> <span m=''1971140''>of</span> <span m=''1971240''>data.</span>
  <span m=''1972310''>Your</span> <span m=''1972410''>insert</span> <span m=''1972680''>one</span>
  <span m=''1972900''>more</span> <span m=''1973140''>item,</span> <span m=''1973430''>and</span>
  <span m=''1973530''>now</span> <span m=''1973640''>you</span> <span m=''1973740''>have</span>
  <span m=''1973830''>to</span> <span m=''1973970''>rewrite</span> <span m=''1974520''>all</span>
  <span m=''1974770''>of</span> <span m=''1974890''>disk.</span> <span m=''1976380''>So</span>
  <span m=''1976950''>that</span> <span m=''1977160''>also</span> <span m=''1977520''>sounds</span>
  <span m=''1977930''>a</span> <span m=''1978040''>little</span> <span m=''1978410''>unappealing.</span>
  <span m=''1979860''>But</span> <span m=''1981860''>we''ll</span> <span m=''1982310''>build</span>
  <span m=''1982660''>on</span> <span m=''1982780''>this</span> <span m=''1982960''>to</span>
  <span m=''1983050''>make</span> <span m=''1983210''>a</span> <span m=''1983240''>data</span>
  <span m=''1983450''>structure</span> <span m=''1983750''>that</span> <span m=''1983880''>actually</span>
  <span m=''1984170''>works.</span> </p><p><span m=''1985620''>So</span> <span m=''1985780''>first</span>
  <span m=''1986100''>let''s</span> <span m=''1986290''>analyze</span> <span m=''1986810''>what</span>
  <span m=''1986950''>the</span> <span m=''1987100''>average</span> <span m=''1987610''>cost</span>
  <span m=''1988440''>for</span> <span m=''1988540''>this</span> <span m=''1988760''>data</span>
  <span m=''1988980''>structure</span> <span m=''1989360''>is.</span> <span m=''1990210''>I''ve</span>
  <span m=''1990270''>just</span> <span m=''1990470''>sort</span> <span m=''1990630''>of</span>
  <span m=''1990710''>explained</span> <span m=''1991150''>why--</span> <span m=''1991550''>there</span>
  <span m=''1992050''>are</span> <span m=''1992190''>some</span> <span m=''1992480''>really</span>
  <span m=''1992860''>bad</span> <span m=''1993210''>cases</span> <span m=''1993620''>where</span>
  <span m=''1993790''>you''re</span> <span m=''1993900''>doing</span> <span m=''1994110''>an</span>
  <span m=''1994210''>insertion</span> <span m=''1994535''>and</span> <span m=''1995150''>it''s</span>
  <span m=''1995380''>expensive.</span> <span m=''1996010''>But</span> <span m=''1996880''>on</span>
  <span m=''1997030''>average,</span> <span m=''1997430''>it</span> <span m=''1997520''>turns</span>
  <span m=''1997740''>out</span> <span m=''1997840''>it''s</span> <span m=''1997970''>really</span>
  <span m=''1998250''>good.</span> <span m=''1999040''>And</span> <span m=''1999210''>the</span>
  <span m=''1999320''>reason</span> <span m=''2000280''>is</span> <span m=''2000510''>that</span>
  <span m=''2000840''>merging</span> <span m=''2001950''>of</span> <span m=''2002120''>sorted</span>
  <span m=''2002480''>arrays</span> <span m=''2003400''>is</span> <span m=''2003610''>really</span>
  <span m=''2004050''>I/O</span> <span m=''2004430''>efficient,</span> <span m=''2005950''>because</span>
  <span m=''2006260''>the</span> <span m=''2006350''>merge</span> <span m=''2007280''>is</span>
  <span m=''2007430''>essentially</span> <span m=''2008270''>operating</span> <span
  m=''2008840''>on</span> <span m=''2009170''>that</span> <span m=''2009430''>append</span>
  <span m=''2009860''>data</span> <span m=''2010090''>structure.</span> <span m=''2010480''>We''re</span>
  <span m=''2010790''>reading</span> <span m=''2011100''>two</span> <span m=''2011320''>append</span>
  <span m=''2011690''>data</span> <span m=''2011850''>structures</span> <span m=''2013070''>and</span>
  <span m=''2013270''>then</span> <span m=''2013390''>writing</span> <span m=''2013710''>the</span>
  <span m=''2013870''>answer</span> <span m=''2014380''>into</span> <span m=''2014610''>another</span>
  <span m=''2014920''>append</span> <span m=''2015210''>data</span> <span m=''2015390''>structure.</span>
  <span m=''2015790''>And</span> <span m=''2016710''>that does</span> <span m=''2016910''>hardly</span>
  <span m=''2017280''>any</span> <span m=''2017530''>I/O.</span> </p><p><span m=''2019870''>So</span>
  <span m=''2020220''>if</span> <span m=''2020310''>you</span> <span m=''2020480''>have</span>
  <span m=''2020640''>two</span> <span m=''2020930''>arrays</span> <span m=''2021360''>of</span>
  <span m=''2021440''>size</span> <span m=''2021850''>X,</span> <span m=''2023430''>the</span>
  <span m=''2023540''>cost</span> <span m=''2024240''>to</span> <span m=''2024380''>merge</span>
  <span m=''2024780''>them</span> <span m=''2024960''>is</span> <span m=''2025060''>you</span>
  <span m=''2025150''>have</span> <span m=''2025250''>to</span> <span m=''2025380''>read</span>
  <span m=''2025640''>the</span> <span m=''2025730''>two</span> <span m=''2025920''>arrays</span>
  <span m=''2026840''>and you</span> <span m=''2026920''>have</span> <span m=''2027000''>to</span>
  <span m=''2027110''>write</span> <span m=''2027320''>the</span> <span m=''2027410''>new
  array.</span> <span m=''2028070''>And</span> <span m=''2028510''>you</span> <span
  m=''2028940''>add</span> <span m=''2029150''>it</span> <span m=''2029250''>all</span>
  <span m=''2029450''>up,</span> <span m=''2029810''>and that''s</span> <span m=''2030190''>order</span>
  <span m=''2030590''>X</span> <span m=''2030860''>over</span> <span m=''2031170''>B</span>
  <span m=''2032260''>I/Os.</span> <span m=''2034070''>Maybe</span> <span m=''2034300''>it''s</span>
  <span m=''2034830''>4x</span> <span m=''2035040''>over</span> <span m=''2035270''>b</span>
  <span m=''2035500''>or</span> <span m=''2035580''>something.</span> <span m=''2035950''>But</span>
  <span m=''2036990''>big-O</span> <span m=''2037380''>of</span> <span m=''2037490''>X</span>
  <span m=''2037680''>over</span> <span m=''2037900''>B.</span> <span m=''2038800''>So
  the</span> <span m=''2038880''>merge</span> <span m=''2039180''>is</span> <span
  m=''2039260''>efficient.</span> <span m=''2040210''>The</span> <span m=''2040330''>cost</span>
  <span m=''2040960''>per</span> <span m=''2041640''>element</span> <span m=''2042510''>for</span>
  <span m=''2042640''>the</span> <span m=''2042750''>merge</span> <span m=''2043190''>is</span>
  <span m=''2043510''>1</span> <span m=''2043730''>over</span> <span m=''2043950''>B,</span>
  <span m=''2044260''>because</span> <span m=''2045770''>order</span> <span m=''2046100''>X</span>
  <span m=''2046390''>elements</span> <span m=''2046830''>were</span> <span m=''2047010''>merged</span>
  <span m=''2047590''>when</span> <span m=''2047800''>we</span> <span m=''2047910''>did</span>
  <span m=''2048110''>that.</span> <span m=''2048420''>And we</span> <span m=''2048580''>get</span>
  <span m=''2048690''>to</span> <span m=''2048780''>spread</span> <span m=''2049159''>the</span>
  <span m=''2049250''>cost.</span> <span m=''2050210''>Sure,</span> <span m=''2050960''>we</span>
  <span m=''2051340''>had</span> <span m=''2051449''>to</span> <span m=''2051530''>rewrite</span>
  <span m=''2052190''>a</span> <span m=''2052270''>trillion</span> <span m=''2052739''>items</span>
  <span m=''2053300''>when</span> <span m=''2054154''>we</span> <span m=''2054409''>filled</span>
  <span m=''2054650''>up</span> <span m=''2054780''>our</span> <span m=''2054889''>disk,</span>
  <span m=''2056010''>but</span> <span m=''2057530''>actually,</span> <span m=''2058810''>when</span>
  <span m=''2058929''>you</span> <span m=''2059020''>divide</span> <span m=''2059370''>that</span>
  <span m=''2059550''>out</span> <span m=''2059770''>over</span> <span m=''2059940''>the</span>
  <span m=''2060100''>trillion</span> <span m=''2060449''>items,</span> <span m=''2060780''>it''s</span>
  <span m=''2060929''>not</span> <span m=''2061130''>that</span> <span m=''2061330''>much</span>
  <span m=''2061540''>cost</span> <span m=''2061980''>per</span> <span m=''2062250''>item.</span>
  <span m=''2063409''>And</span> <span m=''2064719''>so</span> <span m=''2065820''>the</span>
  <span m=''2065929''>cost</span> <span m=''2067010''>for</span> <span m=''2067280''>each</span>
  <span m=''2067500''>item</span> <span m=''2067860''>of</span> <span m=''2067949''>that</span>
  <span m=''2068290''>big</span> <span m=''2068530''>operation</span> <span m=''2069159''>is</span>
  <span m=''2069440''>only</span> <span m=''2069659''>1</span> <span m=''2069889''>over</span>
  <span m=''2070070''>B</span> <span m=''2070850''>disk</span> <span m=''2071090''>I/Os.</span>
  <span m=''2071900''>And</span> <span m=''2072159''>each</span> <span m=''2072370''>item</span>
  <span m=''2072650''>only</span> <span m=''2072889''>has</span> <span m=''2073100''>to</span>
  <span m=''2073199''>be</span> <span m=''2073350''>rewritten</span> <span m=''2074090''>log</span>
  <span m=''2074449''>N</span> <span m=''2074590''>times.</span> </p><p><span m=''2076030''>So</span>
  <span m=''2076239''>the</span> <span m=''2076380''>total</span> <span m=''2078489''>average</span>
  <span m=''2078929''>cost</span> <span m=''2079370''>for an</span> <span m=''2079520''>insertion</span>
  <span m=''2080150''>of</span> <span m=''2080320''>one</span> <span m=''2080520''>element</span>
  <span m=''2080940''>is</span> <span m=''2081130''>log N</span> <span m=''2081679''>over</span>
  <span m=''2081889''>B,</span> <span m=''2082960''>which</span> <span m=''2083190''>is</span>
  <span m=''2083310''>actually</span> <span m=''2084310''>better</span> <span m=''2084659''>than</span>
  <span m=''2085760''>what</span> <span m=''2085929''>I</span> <span m=''2086010''>promised</span>
  <span m=''2086530''>here.</span> <span m=''2086900''>But</span> <span m=''2087000''>this</span>
  <span m=''2087150''>data</span> <span m=''2087350''>structure''s</span> <span m=''2087730''>going</span>
  <span m=''2087860''>to</span> <span m=''2087909''>be</span> <span m=''2088010''>worse</span>
  <span m=''2088210''>somewhere</span> <span m=''2088719''>else.</span> <span m=''2088940''>So</span>
  <span m=''2089790''>this</span> <span m=''2089980''>is a</span> <span m=''2090090''>simplified</span>
  <span m=''2090620''>version.</span> <span m=''2091530''>I''ll</span> <span m=''2091659''>get</span>
  <span m=''2091850''>to</span> <span m=''2091949''>within--</span> <span m=''2093179''>ignoring</span>
  <span m=''2093670''>epsilons and</span> <span m=''2094400''>things,</span> <span
  m=''2094650''>it''ll</span> <span m=''2094780''>be</span> <span m=''2094860''>good</span>
  <span m=''2095040''>enough.</span> <span m=''2096120''>So</span> <span m=''2096379''>does</span>
  <span m=''2096639''>that</span> <span m=''2096800''>analysis</span> <span m=''2097280''>makes</span>
  <span m=''2097500''>sense?</span> <span m=''2099280''>It''s</span> <span m=''2099570''>not</span>
  <span m=''2099740''>hard</span> <span m=''2100020''>analysis,</span> <span m=''2100710''>so</span>
  <span m=''2101990''>if</span> <span m=''2102150''>it</span> <span m=''2102240''>doesn''t</span>
  <span m=''2102500''>make</span> <span m=''2102690''>sense,</span> <span m=''2102950''>it''s</span>
  <span m=''2103310''>not</span> <span m=''2103760''>because</span> <span m=''2104370''>of</span>
  <span m=''2104500''>you.</span> <span m=''2104840''>It''s</span> <span m=''2104980''>got</span>
  <span m=''2105120''>to be</span> <span m=''2105160''>because</span> <span m=''2105600''>I</span>
  <span m=''2105780''>didn''t</span> <span m=''2106260''>explain</span> <span m=''2106700''>it,</span>
  <span m=''2106830''>because</span> <span m=''2107080''>it''s</span> <span m=''2107880''>too</span>
  <span m=''2108070''>easy</span> <span m=''2108420''>to</span> <span m=''2109890''>not</span>
  <span m=''2110100''>understand.</span> </p><p><span m=''2115910''>So</span> <span
  m=''2117910''>if</span> <span m=''2118240''>you''re</span> <span m=''2118340''>going</span>
  <span m=''2118470''>to</span> <span m=''2118540''>build</span> <span m=''2118800''>something</span>
  <span m=''2119070''>like</span> <span m=''2119260''>this,</span> <span m=''2119450''>you</span>
  <span m=''2119570''>can''t</span> <span m=''2119800''>just</span> <span m=''2119920''>say,</span>
  <span m=''2120110''>oh,</span> <span m=''2120250''>well,</span> <span m=''2120970''>your</span>
  <span m=''2121110''>database</span> <span m=''2121570''>is</span> <span m=''2121730''>great</span>
  <span m=''2122060''>except</span> <span m=''2123650''>once</span> <span m=''2123940''>every</span>
  <span m=''2124170''>couple</span> <span m=''2124470''>days</span> <span m=''2125330''>it</span>
  <span m=''2125940''>hangs</span> <span m=''2126450''>for</span> <span m=''2126560''>an</span>
  <span m=''2126660''>hour</span> <span m=''2127570''>while</span> <span m=''2127780''>we</span>
  <span m=''2128270''>resort</span> <span m=''2129100''>everything.</span> <span m=''2130030''>So</span>
  <span m=''2130480''>the</span> <span m=''2130580''>fix</span> <span m=''2130900''>of</span>
  <span m=''2131120''>this</span> <span m=''2131340''>is</span> <span m=''2131650''>that</span>
  <span m=''2131960''>we''re</span> <span m=''2132080''>going</span> <span m=''2132190''>to</span>
  <span m=''2132230''>get</span> <span m=''2132420''>rid</span> <span m=''2132580''>of</span>
  <span m=''2132630''>the</span> <span m=''2132700''>worst</span> <span m=''2133020''>case.</span>
  <span m=''2133800''>And</span> <span m=''2133970''>the idea</span> <span m=''2134360''>is,</span>
  <span m=''2134710''>well,</span> <span m=''2134890''>let''s</span> <span m=''2135190''>just
  have</span> <span m=''2135400''>a</span> <span m=''2135450''>separate</span> <span
  m=''2135860''>thread</span> <span m=''2136310''>that does</span> <span m=''2136550''>the</span>
  <span m=''2137030''>merging</span> <span m=''2137450''>of</span> <span m=''2137570''>the</span>
  <span m=''2137730''>arrays.</span> <span m=''2138510''>So</span> <span m=''2138720''>we</span>
  <span m=''2138880''>insert</span> <span m=''2139250''>something</span> <span m=''2139590''>into</span>
  <span m=''2139800''>a</span> <span m=''2139870''>temporary</span> <span m=''2140350''>array</span>
  <span m=''2140840''>and</span> <span m=''2140950''>just</span> <span m=''2141140''>return</span>
  <span m=''2141500''>immediately.</span> <span m=''2142780''>And</span> <span m=''2142950''>as</span>
  <span m=''2143090''>long</span> <span m=''2143490''>as</span> <span m=''2143840''>the</span>
  <span m=''2144660''>merge</span> <span m=''2145430''>thread</span> <span m=''2147280''>gets</span>
  <span m=''2147470''>to</span> <span m=''2147580''>do</span> <span m=''2147790''>at</span>
  <span m=''2147860''>least</span> <span m=''2148270''>log</span> <span m=''2148640''>N</span>
  <span m=''2149570''>moves</span> <span m=''2150330''>every</span> <span m=''2150530''>time</span>
  <span m=''2150750''>we</span> <span m=''2150930''>insert</span> <span m=''2151300''>something,</span>
  <span m=''2151960''>it</span> <span m=''2152100''>can</span> <span m=''2152270''>keep</span>
  <span m=''2152540''>up.</span> </p><p><span m=''2153830''>You</span> <span m=''2153910''>could</span>
  <span m=''2154040''>actually</span> <span m=''2154370''>do</span> <span m=''2154500''>a</span>
  <span m=''2154550''>very</span> <span m=''2154800''>careful</span> <span m=''2155660''>dance,</span>
  <span m=''2156400''>where</span> <span m=''2156600''>I</span> <span m=''2156650''>insert</span>
  <span m=''2157190''>something,</span> <span m=''2157630''>and</span> <span m=''2157850''>part</span>
  <span m=''2158090''>of</span> <span m=''2158150''>the</span> <span m=''2158230''>insertion</span>
  <span m=''2158710''>is</span> <span m=''2158820''>I</span> <span m=''2158900''>have</span>
  <span m=''2159040''>to</span> <span m=''2159150''>move</span> <span m=''2159400''>something</span>
  <span m=''2159780''>from</span> <span m=''2159900''>this</span> <span m=''2160090''>array
  and</span> <span m=''2160570''>something</span> <span m=''2160860''>from</span>
  <span m=''2160990''>this</span> <span m=''2161190''>array</span> <span m=''2161500''>and</span>
  <span m=''2161600''>something</span> <span m=''2161880''>from</span> <span m=''2162010''>this</span>
  <span m=''2162200''>array,</span> <span m=''2162990''>and</span> <span m=''2163330''>I</span>
  <span m=''2163430''>can</span> <span m=''2163600''>keep</span> <span m=''2163770''>everything</span>
  <span m=''2164170''>up</span> <span m=''2164290''>to</span> <span m=''2164400''>date</span>
  <span m=''2164850''>that</span> <span m=''2165080''>way.</span> <span m=''2165590''>So</span>
  <span m=''2165740''>it''s</span> <span m=''2166150''>not</span> <span m=''2166460''>very</span>
  <span m=''2166710''>hard</span> <span m=''2167890''>to</span> <span m=''2168000''>de-amortize</span>
  <span m=''2168920''>this</span> <span m=''2169030''>algorithm--</span> <span m=''2169660''>that</span>
  <span m=''2169830''>is,</span> <span m=''2170010''>to</span> <span m=''2170120''>turn</span>
  <span m=''2170360''>the</span> <span m=''2170470''>algorithm</span> <span m=''2171020''>from</span>
  <span m=''2171330''>a</span> <span m=''2172850''>good</span> <span m=''2173580''>average-case</span>
  <span m=''2174400''>behavior</span> <span m=''2175000''>to</span> <span m=''2175220''>good</span>
  <span m=''2175510''>worst-case</span> <span m=''2176140''>behavior.</span> <span
  m=''2176840''>The</span> <span m=''2176940''>worst-case</span> <span m=''2177490''>behavior</span>
  <span m=''2177890''>just</span> <span m=''2178100''>becomes</span> <span m=''2178990''>that</span>
  <span m=''2179140''>it</span> <span m=''2179190''>has</span> <span m=''2179430''>to</span>
  <span m=''2179550''>do</span> <span m=''2181660''>log N</span> <span m=''2182330''>work</span>
  <span m=''2182680''>for</span> <span m=''2183390''>an</span> <span m=''2183500''>insertion,</span>
  <span m=''2184772''>which</span> <span m=''2185180''>isn''t</span> <span m=''2185410''>so</span>
  <span m=''2185550''>bad.</span> <span m=''2188450''>Does that</span> <span m=''2188590''>make</span>
  <span m=''2188760''>sense?</span> <span m=''2190660''>Yeah.</span> </p><p><span
  m=''2191968''>AUDIENCE:</span> <span m=''2192452''>Does that</span> <span m=''2192936''>work</span>
  <span m=''2193420''>if these are</span> <span m=''2193904''>[INAUDIBLE]</span> <span
  m=''2194388''>items</span> <span m=''2194872''>[INAUDIBLE]?</span> <span m=''2195840''>What</span>
  <span m=''2196324''>if</span> <span m=''2196808''>somebody</span> <span m=''2197292''>wants</span>
  <span m=''2197776''>[INAUDIBLE]?</span> </p><p><span m=''2200680''>BRADLEY KUSZMAUL:</span>
  <span m=''2201170''>Ah.</span> <span m=''2201430''>Well,</span> <span m=''2201690''>OK,</span>
  <span m=''2201910''>so</span> <span m=''2202030''>the</span> <span m=''2202120''>question--</span>
  <span m=''2204070''>let</span> <span m=''2204150''>me</span> <span m=''2204250''>repeat</span>
  <span m=''2204570''>it</span> <span m=''2204650''>and</span> <span m=''2204840''>see</span>
  <span m=''2205020''>if--</span> <span m=''2205480''>so</span> <span m=''2205690''>you''re</span>
  <span m=''2205900''>in</span> <span m=''2205980''>the</span> <span m=''2206060''>middle</span>
  <span m=''2206340''>of</span> <span m=''2206770''>doing</span> <span m=''2207010''>these</span>
  <span m=''2207190''>merges</span> <span m=''2208580''>and</span> <span m=''2209340''>you</span>
  <span m=''2209440''>have</span> <span m=''2209530''>a</span> <span m=''2209580''>background</span>
  <span m=''2210050''>thread</span> <span m=''2210310''>doing</span> <span m=''2210550''>that,</span>
  <span m=''2210810''>say,</span> <span m=''2211020''>and</span> <span m=''2211130''>somebody</span>
  <span m=''2211430''>comes</span> <span m=''2211690''>along</span> <span m=''2212410''>and</span>
  <span m=''2212520''>wants</span> <span m=''2212750''>to</span> <span m=''2212850''>do</span>
  <span m=''2212970''>a</span> <span m=''2213040''>query.</span> </p><p><span m=''2213480''>AUDIENCE:</span>
  <span m=''2213917''>Yeah.</span> <span m=''2214354''>[INAUDIBLE]</span> </p><p><span
  m=''2215230''>BRADLEY KUSZMAUL: So</span> <span m=''2215520''>the</span> <span m=''2215610''>trick</span>
  <span m=''2215850''>to</span> <span m=''2215950''>there</span> <span m=''2216290''>is</span>
  <span m=''2216420''>that</span> <span m=''2216560''>you</span> <span m=''2216720''>put</span>
  <span m=''2216930''>a</span> <span m=''2216980''>bit</span> <span m=''2217220''>on</span>
  <span m=''2217370''>the</span> <span m=''2217530''>array</span> <span m=''2217790''>that</span>
  <span m=''2217890''>says,</span> <span m=''2218140''>the</span> <span m=''2218230''>new</span>
  <span m=''2218420''>arrays</span> <span m=''2218810''>is not</span> <span m=''2219070''>ready</span>
  <span m=''2219310''>to</span> <span m=''2219410''>query.</span> <span m=''2220050''>Keep</span>
  <span m=''2220250''>using</span> <span m=''2220500''>the</span> <span m=''2220610''>old</span>
  <span m=''2220800''>arrays,</span> <span m=''2221220''>which</span> <span m=''2221380''>are</span>
  <span m=''2221450''>still</span> <span m=''2221730''>there.</span> <span m=''2223670''>Just</span>
  <span m=''2223820''>don''t</span> <span m=''2224070''>destroy</span> <span m=''2224480''>the</span>
  <span m=''2224620''>old</span> <span m=''2224780''>ones</span> <span m=''2225050''>until</span>
  <span m=''2225270''>the</span> <span m=''2225360''>new</span> <span m=''2225500''>one''s</span>
  <span m=''2225750''>ready.</span> <span m=''2227980''>So</span> <span m=''2228530''>basically</span>
  <span m=''2229000''>you</span> <span m=''2229090''>have</span> <span m=''2229300''>these</span>
  <span m=''2229490''>two</span> <span m=''2231080''>megabyte-sized</span> <span m=''2231980''>things.</span>
  <span m=''2232250''>You''re</span> <span m=''2232340''>trying</span> <span m=''2232530''>to</span>
  <span m=''2232580''>make</span> <span m=''2232730''>a</span> <span m=''2232810''>two</span>
  <span m=''2232970''>megabyte-sized</span> <span m=''2233790''>one.</span> <span
  m=''2234430''>You</span> <span m=''2234560''>leave</span> <span m=''2234810''>the</span>
  <span m=''2235220''>one-megabyte</span> <span m=''2235890''>ones</span> <span m=''2236190''>lying</span>
  <span m=''2236490''>around</span> <span m=''2236920''>for</span> <span m=''2237160''>a</span>
  <span m=''2237220''>while</span> <span m=''2238520''>while</span> <span m=''2238800''>you''re</span>
  <span m=''2239330''>incrementally</span> <span m=''2239930''>moving</span> <span
  m=''2240350''>things</span> <span m=''2240670''>down.</span> <span m=''2241650''>And</span>
  <span m=''2241920''>then</span> <span m=''2242280''>suddenly,</span> <span m=''2242880''>when</span>
  <span m=''2243100''>the</span> <span m=''2243230''>big</span> <span m=''2243500''>ones</span>
  <span m=''2243770''>done,</span> <span m=''2244070''>you</span> <span m=''2244560''>flip</span>
  <span m=''2244740''>the</span> <span m=''2244820''>bits,</span> <span m=''2245560''>so</span>
  <span m=''2245860''>in</span> <span m=''2246730''>order</span> <span m=''2246990''>one</span>
  <span m=''2247190''>operations,</span> <span m=''2247800''>you</span> <span m=''2247920''>can
  say,</span> <span m=''2248300''>no,</span> <span m=''2248460''>those</span> <span
  m=''2248740''>two</span> <span m=''2248850''>are</span> <span m=''2248940''>no</span>
  <span m=''2249100''>longer</span> <span m=''2249420''>valid,</span> <span m=''2249770''>and</span>
  <span m=''2249860''>this</span> <span m=''2250020''>one''s</span> <span m=''2250240''>valid.</span>
  <span m=''2250960''>So</span> <span m=''2251220''>queries</span> <span m=''2251510''>should</span>
  <span m=''2251710''>use</span> <span m=''2251900''>this</span> <span m=''2252080''>one</span>
  <span m=''2252240''>instead</span> <span m=''2252500''>of</span> <span m=''2252580''>those.</span>
  <span m=''2254130''>So</span> <span m=''2254280''>that''s</span> <span m=''2254540''>basically</span>
  <span m=''2255980''>the</span> <span m=''2256090''>kind</span> <span m=''2256340''>of</span>
  <span m=''2256420''>trick you</span> <span m=''2256750''>might</span> <span m=''2257000''>do.</span>
  <span m=''2258400''>Or</span> <span m=''2258760''>you</span> <span m=''2259300''>would</span>
  <span m=''2259460''>just</span> <span m=''2259650''>search</span> <span m=''2259960''>the</span>
  <span m=''2260050''>partially</span> <span m=''2260450''>constructed</span> <span
  m=''2260910''>arrays,</span> <span m=''2261360''>if</span> <span m=''2261450''>you</span>
  <span m=''2261580''>have</span> <span m=''2261740''>locks.</span> <span m=''2262005''>There''s</span>
  <span m=''2262270''>lots</span> <span m=''2262560''>of</span> <span m=''2262640''>ways</span>
  <span m=''2262880''>to</span> <span m=''2262990''>do</span> <span m=''2263180''>it.</span>
  </p><p><span m=''2267440''>So</span> <span m=''2267870''>that''s</span> <span m=''2268060''>a</span>
  <span m=''2268110''>pretty</span> <span m=''2268300''>good</span> <span m=''2268450''>question.</span>
  <span m=''2268890''>Yes.</span> <span m=''2270830''>That''s</span> <span m=''2271050''>one</span>
  <span m=''2271300''>that</span> <span m=''2271880''>we had</span> <span m=''2272070''>to
  think</span> <span m=''2272360''>about</span> <span m=''2272660''>a little.</span>
  <span m=''2273380''>So</span> <span m=''2273500''>it</span> <span m=''2273590''>sounds</span>
  <span m=''2273900''>glib,</span> <span m=''2273950''>but it''s</span> <span m=''2274230''>like,</span>
  <span m=''2275100''>how</span> <span m=''2275250''>do</span> <span m=''2275350''>we</span>
  <span m=''2275450''>do this?</span> <span m=''2276940''>Any</span> <span m=''2277130''>other</span>
  <span m=''2277250''>questions?</span> <span m=''2279850''>OK.</span> </p><p><span
  m=''2281750''>So</span> <span m=''2284620''>now</span> <span m=''2284820''>we''ve</span>
  <span m=''2284920''>got</span> <span m=''2285040''>to</span> <span m=''2285130''>do</span>
  <span m=''2285290''>something</span> <span m=''2285640''>about</span> <span m=''2285880''>the</span>
  <span m=''2285960''>search,</span> <span m=''2286340''>because</span> <span m=''2286590''>the</span>
  <span m=''2286680''>search</span> <span m=''2287060''>is</span> <span m=''2287230''>really</span>
  <span m=''2287670''>bad.</span> <span m=''2288620''>Well,</span> <span m=''2289010''>it''s</span>
  <span m=''2289170''>not</span> <span m=''2289310''>as</span> <span m=''2289430''>bad</span>
  <span m=''2289690''>as</span> <span m=''2289820''>the</span> <span m=''2289960''>insertion</span>
  <span m=''2290700''>worst-case</span> <span m=''2291160''>thing.</span> <span m=''2292380''>I''m</span>
  <span m=''2292510''>going</span> <span m=''2292580''>to</span> <span m=''2292640''>show</span>
  <span m=''2292800''>you</span> <span m=''2292910''>how</span> <span m=''2293050''>to</span>
  <span m=''2293150''>shave</span> <span m=''2293510''>off</span> <span m=''2293720''>a</span>
  <span m=''2293790''>factor</span> <span m=''2294230''>of</span> <span m=''2294330''>log</span>
  <span m=''2294790''>N, and</span> <span m=''2295210''>I</span> <span m=''2295280''>don''t</span>
  <span m=''2295590''>think</span> <span m=''2295770''>I''m</span> <span m=''2295850''>going</span>
  <span m=''2295930''>to</span> <span m=''2296010''>show</span> <span m=''2296260''>you</span>
  <span m=''2296370''>how</span> <span m=''2296570''>to</span> <span m=''2296670''>shave</span>
  <span m=''2297010''>off</span> <span m=''2297240''>the</span> <span m=''2297840''>factor</span>
  <span m=''2298200''>of</span> <span m=''2298290''>1</span> <span m=''2298470''>over</span>
  <span m=''2298670''>log</span> <span m=''2298930''>B.</span> <span m=''2300330''>so</span>
  <span m=''2300520''>we''ll</span> <span m=''2300620''>just</span> <span m=''2300790''>get</span>
  <span m=''2300910''>it</span> <span m=''2301000''>down</span> <span m=''2301180''>to</span>
  <span m=''2301260''>log</span> <span m=''2302010''>N</span> <span m=''2302290''>instead</span>
  <span m=''2302560''>of</span> <span m=''2302650''>log</span> <span m=''2302940''>squared</span>
  <span m=''2303350''>N.</span> <span m=''2305320''>Because</span> <span m=''2305470''>if</span>
  <span m=''2305570''>I</span> <span m=''2305650''>actually</span> <span m=''2305900''>want</span>
  <span m=''2306110''>to</span> <span m=''2306150''>get</span> <span m=''2306340''>it</span>
  <span m=''2306480''>down,</span> <span m=''2306940''>then</span> <span m=''2307060''>I</span>
  <span m=''2307120''>have</span> <span m=''2307270''>to</span> <span m=''2307370''>give</span>
  <span m=''2307600''>up--</span> <span m=''2308330''>remember,</span> <span m=''2308620''>the</span>
  <span m=''2308740''>performance</span> <span m=''2309320''>that</span> <span m=''2309440''>I</span>
  <span m=''2309610''>had</span> <span m=''2309770''>was</span> <span m=''2309970''>log</span>
  <span m=''2310410''>of</span> <span m=''2310520''>N</span> <span m=''2310680''>over</span>
  <span m=''2310900''>B.</span> <span m=''2311250''>If</span> <span m=''2311410''>I</span>
  <span m=''2311470''>actually</span> <span m=''2311700''>want</span> <span m=''2311880''>to</span>
  <span m=''2311930''>get</span> <span m=''2312130''>rid</span> <span m=''2313310''>of</span>
  <span m=''2313400''>things,</span> <span m=''2313630''>I</span> <span m=''2313720''>have</span>
  <span m=''2313850''>to</span> <span m=''2313960''>do</span> <span m=''2314070''>something</span>
  <span m=''2314410''>else.</span> <span m=''2314650''>There''s</span> <span m=''2314810''>a</span>
  <span m=''2314860''>lower-bound</span> <span m=''2315400''>argument.</span> </p><p><span
  m=''2317250''>So</span> <span m=''2317950''>the</span> <span m=''2318070''>idea</span>
  <span m=''2318430''>here</span> <span m=''2318820''>is</span> <span m=''2319330''>we''re</span>
  <span m=''2319560''>searching--</span> <span m=''2321850''>I''m</span> <span m=''2321930''>going
  to</span> <span m=''2327110''>flip</span> <span m=''2327730''>those.</span> <span
  m=''2330490''>We''ve</span> <span m=''2330650''>got</span> <span m=''2330840''>these</span>
  <span m=''2331050''>arrays</span> <span m=''2331580''>of</span> <span m=''2331680''>various</span>
  <span m=''2332090''>sizes.</span> <span m=''2336100''>And</span> <span m=''2336380''>I''ve</span>
  <span m=''2336520''>just</span> <span m=''2336785''>done a</span> <span m=''2337050''>binary</span>
  <span m=''2337470''>search</span> <span m=''2337790''>on</span> <span m=''2337930''>here</span>
  <span m=''2338330''>and</span> <span m=''2338510''>then</span> <span m=''2338630''>here</span>
  <span m=''2339020''>and</span> <span m=''2339170''>then</span> <span m=''2339280''>here,</span>
  <span m=''2339650''>and</span> <span m=''2339720''>I</span> <span m=''2339790''>found</span>
  <span m=''2340050''>out</span> <span m=''2340770''>the</span> <span m=''2340850''>thing</span>
  <span m=''2341070''>I''m</span> <span m=''2341180''>looking</span> <span m=''2341460''>for</span>
  <span m=''2341750''>wasn''t</span> <span m=''2342110''>here</span> <span m=''2342450''>and</span>
  <span m=''2342530''>it</span> <span m=''2342590''>wasn''t</span> <span m=''2342920''>here</span>
  <span m=''2343230''>and</span> <span m=''2343270''>it</span> <span m=''2343520''>wasn''t</span>
  <span m=''2343600''>here.</span> <span m=''2344020''>That''s</span> <span m=''2344170''>where</span>
  <span m=''2344300''>it</span> <span m=''2344340''>would</span> <span m=''2344600''>have
  been,</span> <span m=''2346110''>if</span> <span m=''2346440''>it</span> <span m=''2346550''>had</span>
  <span m=''2346760''>been</span> <span m=''2346920''>there.</span> <span m=''2347800''>It
  should</span> <span m=''2348010''>have</span> <span m=''2348150''>been</span> <span
  m=''2348290''>there</span> <span m=''2348520''>but</span> <span m=''2348640''>it</span>
  <span m=''2348690''>wasn''t.</span> <span m=''2349730''>It</span> <span m=''2349810''>should</span>
  <span m=''2350000''>have</span> <span m=''2350070''>been</span> <span m=''2350190''>here</span>
  <span m=''2350510''>but</span> <span m=''2350660''>it</span> <span m=''2350750''>wasn''t.</span>
  <span m=''2352000''>And</span> <span m=''2352130''>then</span> <span m=''2352260''>I''m</span>
  <span m=''2352350''>going</span> <span m=''2352470''>to</span> <span m=''2352520''>start</span>
  <span m=''2352850''>searching</span> <span m=''2353200''>in</span> <span m=''2353270''>this</span>
  <span m=''2353470''>array.</span> <span m=''2354910''>And</span> <span m=''2355100''>the</span>
  <span m=''2355220''>intuition</span> <span m=''2355760''>you</span> <span m=''2355870''>might</span>
  <span m=''2356130''>have</span> <span m=''2356520''>is</span> <span m=''2356710''>that,</span>
  <span m=''2358190''>gee,</span> <span m=''2358580''>it''s</span> <span m=''2358680''>kind</span>
  <span m=''2358850''>of</span> <span m=''2358930''>wasteful</span> <span m=''2359450''>to</span>
  <span m=''2359510''>start</span> <span m=''2359770''>a</span> <span m=''2359810''>whole</span>
  <span m=''2360140''>new</span> <span m=''2360300''>search</span> <span m=''2360650''>on</span>
  <span m=''2360740''>this</span> <span m=''2360950''>array</span> <span m=''2361630''>when</span>
  <span m=''2361890''>we</span> <span m=''2362010''>already</span> <span m=''2362340''>knew</span>
  <span m=''2362500''>where</span> <span m=''2362800''>it</span> <span m=''2362850''>wasn''t</span>
  <span m=''2363300''>in</span> <span m=''2363380''>this</span> <span m=''2363570''>array.</span>
  <span m=''2366370''>Right?</span> </p><p><span m=''2367630''>So</span> <span m=''2367810''>for</span>
  <span m=''2367960''>example,</span> <span m=''2368740''>if</span> <span m=''2369050''>the</span>
  <span m=''2369140''>data</span> <span m=''2369450''>were</span> <span m=''2369630''>uniformly</span>
  <span m=''2370810''>randomly</span> <span m=''2371320''>distributed,</span> <span
  m=''2372470''>and</span> <span m=''2373100''>the</span> <span m=''2373190''>thing</span>
  <span m=''2373660''>was,</span> <span m=''2373720''>say,</span> <span m=''2374380''>1/3</span>
  <span m=''2374860''>of</span> <span m=''2374940''>the</span> <span m=''2375010''>array</span>
  <span m=''2375270''>here,</span> <span m=''2375480''>I</span> <span m=''2375520''>might</span>
  <span m=''2376500''>gain</span> <span m=''2376790''>some</span> <span m=''2376960''>advantage</span>
  <span m=''2377350''>by</span> <span m=''2378500''>searching</span> <span m=''2378900''>at</span>
  <span m=''2378980''>the</span> <span m=''2379230''>1/3</span> <span m=''2379470''>point</span>
  <span m=''2380440''>over</span> <span m=''2380620''>here</span> <span m=''2380820''>to</span>
  <span m=''2380890''>see</span> <span m=''2381080''>if</span> <span m=''2381180''>it''s</span>
  <span m=''2381350''>there.</span> <span m=''2382770''>Now,</span> <span m=''2383770''>that''s</span>
  <span m=''2384020''>kind</span> <span m=''2384150''>of</span> <span m=''2384230''>an</span>
  <span m=''2384320''>intuition.</span> <span m=''2385180''>I</span> <span m=''2385330''>don''t</span>
  <span m=''2385430''>know</span> <span m=''2385550''>how</span> <span m=''2385650''>to</span>
  <span m=''2385740''>make</span> <span m=''2385940''>that</span> <span m=''2386210''>work.</span>
  <span m=''2386610''>But</span> <span m=''2386740''>I</span> <span m=''2386840''>do</span>
  <span m=''2387050''>know</span> <span m=''2387170''>how</span> <span m=''2387280''>to</span>
  <span m=''2387390''>make</span> <span m=''2387620''>something</span> <span m=''2387960''>work.</span>
  <span m=''2390290''>But</span> <span m=''2390470''>the</span> <span m=''2390560''>intuition</span>
  <span m=''2391030''>is,</span> <span m=''2391160''>having</span> <span m=''2391510''>done</span>
  <span m=''2391780''>some</span> <span m=''2392070''>search</span> <span m=''2392450''>here,</span>
  <span m=''2393020''>I</span> <span m=''2393620''>should</span> <span m=''2393960''>in</span>
  <span m=''2394070''>principal</span> <span m=''2394530''>have</span> <span m=''2394720''>information</span>
  <span m=''2395290''>about</span> <span m=''2395570''>where</span> <span m=''2396200''>to</span>
  <span m=''2396850''>limit</span> <span m=''2397150''>the</span> <span m=''2397230''>search</span>
  <span m=''2397520''>so</span> <span m=''2397600''>that I</span> <span m=''2397640''>don''t</span>
  <span m=''2397770''>have</span> <span m=''2397860''>to</span> <span m=''2397960''>search</span>
  <span m=''2398250''>the</span> <span m=''2398350''>whole</span> <span m=''2398680''>thing</span>
  <span m=''2400410''>on</span> <span m=''2400520''>the</span> <span m=''2400750''>next</span>
  <span m=''2401040''>array.</span> <span m=''2403770''>OK?</span> </p><p><span m=''2404120''>And
  here''s</span> <span m=''2405280''>basically</span> <span m=''2405750''>what</span>
  <span m=''2405930''>you</span> <span m=''2406040''>do,</span> <span m=''2407170''>is</span>
  <span m=''2407610''>every</span> <span m=''2407960''>element,</span> <span m=''2408610''>you</span>
  <span m=''2408750''>get</span> <span m=''2408920''>a</span> <span m=''2408960''>forward</span>
  <span m=''2409420''>pointer</span> <span m=''2409990''>to</span> <span m=''2410120''>where</span>
  <span m=''2410360''>that</span> <span m=''2410580''>element</span> <span m=''2410960''>would</span>
  <span m=''2411200''>go</span> <span m=''2411500''>in</span> <span m=''2411650''>the</span>
  <span m=''2411730''>next</span> <span m=''2412000''>array.</span> <span m=''2413430''>So</span>
  <span m=''2413690''>for</span> <span m=''2413840''>example,</span> <span m=''2414630''>you</span>
  <span m=''2414710''>have</span> <span m=''2414920''>something</span> <span m=''2415250''>here</span>
  <span m=''2415570''>and</span> <span m=''2415650''>something</span> <span m=''2415960''>here,</span>
  <span m=''2416270''>which</span> <span m=''2416450''>are</span> <span m=''2416500''>the</span>
  <span m=''2416630''>two</span> <span m=''2416830''>things</span> <span m=''2417250''>that</span>
  <span m=''2417930''>are</span> <span m=''2418180''>less</span> <span m=''2418500''>than</span>
  <span m=''2418770''>and</span> <span m=''2418920''>greater</span> <span m=''2419300''>than</span>
  <span m=''2420040''>the</span> <span m=''2420140''>thing</span> <span m=''2420290''>you''re</span>
  <span m=''2420440''>looking</span> <span m=''2420740''>for.</span> <span m=''2421620''>And</span>
  <span m=''2421810''>it</span> <span m=''2421980''>says,</span> <span m=''2423630''>oh,</span>
  <span m=''2423870''>those</span> <span m=''2424120''>should</span> <span m=''2424330''>have</span>
  <span m=''2424460''>gone</span> <span m=''2424700''>here</span> <span m=''2426220''>in</span>
  <span m=''2426330''>the</span> <span m=''2426480''>next</span> <span m=''2426630''>array.</span>
  <span m=''2427850''>So</span> <span m=''2428020''>if</span> <span m=''2428100''>you</span>
  <span m=''2428200''>maintain</span> <span m=''2428740''>that</span> <span m=''2430140''>information,</span>
  <span m=''2432060''>it''s</span> <span m=''2432260''>almost</span> <span m=''2432730''>enough.</span>
  <span m=''2434150''>But</span> <span m=''2435500''>let''s</span> <span m=''2436040''>gloss</span>
  <span m=''2436460''>over</span> <span m=''2436690''>the</span> <span m=''2436940''>almost</span>
  <span m=''2437240''>part.</span> <span m=''2437950''>If</span> <span m=''2438960''>those</span>
  <span m=''2439230''>two</span> <span m=''2440020''>destinations</span> <span m=''2440820''>of</span>
  <span m=''2440900''>those</span> <span m=''2441080''>two</span> <span m=''2441190''>pointers</span>
  <span m=''2441530''>are</span> <span m=''2441620''>close</span> <span m=''2441910''>together,</span>
  <span m=''2443230''>then</span> <span m=''2444250''>you''ve</span> <span m=''2444400''>saved</span>
  <span m=''2444760''>a</span> <span m=''2444820''>lot</span> <span m=''2445150''>of</span>
  <span m=''2445240''>search</span> <span m=''2445880''>in</span> <span m=''2445980''>the</span>
  <span m=''2446140''>next</span> <span m=''2446300''>array.</span> <span m=''2449840''>Does
  anybody</span> <span m=''2450110''>see</span> <span m=''2450300''>a</span> <span
  m=''2450350''>bug</span> <span m=''2450620''>in this?</span> <span m=''2451660''>There</span>
  <span m=''2451860''>is</span> <span m=''2451970''>one.</span> <span m=''2452805''>The</span>
  <span m=''2453290''>almost</span> <span m=''2453890''>part.</span> <span m=''2455450''>You</span>
  <span m=''2455530''>don''t</span> <span m=''2455970''>have</span> <span m=''2456200''>to</span>
  <span m=''2456290''>see</span> <span m=''2456490''>it,</span> <span m=''2456590''>because</span>
  <span m=''2457060''>I''ve</span> <span m=''2457160''>been</span> <span m=''2457300''>thinking</span>
  <span m=''2457590''>about</span> <span m=''2457830''>this</span> <span m=''2458000''>a</span>
  <span m=''2458060''>lot.</span> </p><p><span m=''2461740''>The</span> <span m=''2461840''>problem</span>
  <span m=''2462250''>is,</span> <span m=''2462380''>what</span> <span m=''2462600''>if</span>
  <span m=''2462760''>all</span> <span m=''2463120''>of</span> <span m=''2463290''>these</span>
  <span m=''2463780''>items</span> <span m=''2464470''>are</span> <span m=''2464630''>less</span>
  <span m=''2465030''>than</span> <span m=''2465170''>all</span> <span m=''2465460''>of</span>
  <span m=''2465600''>these</span> <span m=''2465860''>items,</span> <span m=''2466200''>for</span>
  <span m=''2466330''>example?</span> <span m=''2468718''>In</span> <span m=''2469190''>which</span>
  <span m=''2469420''>case,</span> <span m=''2469620''>these</span> <span m=''2469810''>pointers</span>
  <span m=''2470250''>all</span> <span m=''2470420''>point</span> <span m=''2470750''>down</span>
  <span m=''2471060''>to</span> <span m=''2473170''>the</span> <span m=''2473240''>beginning,</span>
  <span m=''2474500''>and</span> <span m=''2474610''>we''ve</span> <span m=''2474740''>got</span>
  <span m=''2474990''>nothing.</span> <span m=''2476220''>That''s</span> <span m=''2476700''>a</span>
  <span m=''2476760''>case</span> <span m=''2477010''>where</span> <span m=''2477110''>this</span>
  <span m=''2477230''>fails.</span> <span m=''2477530''>And</span> <span m=''2477630''>that''s</span>
  <span m=''2478450''>allowed,</span> <span m=''2478890''>right?</span> <span m=''2479870''>In</span>
  <span m=''2479960''>particular,</span> <span m=''2480460''>if</span> <span m=''2480600''>we</span>
  <span m=''2480700''>were</span> <span m=''2480870''>inserting</span> <span m=''2481340''>things--</span>
  <span m=''2483330''>yeah.</span> </p><p><span m=''2484070''>AUDIENCE:</span> <span
  m=''2484540''>Then we</span> <span m=''2485010''>know the</span> <span m=''2485480''>element</span>
  <span m=''2485950''>is in the</span> <span m=''2486420''>biggest</span> <span m=''2486890''>array,</span>
  <span m=''2487360''>because</span> <span m=''2487830''>the element was</span> <span
  m=''2488300''>supposed</span> <span m=''2488770''>to go between</span> <span m=''2489240''>the</span>
  <span m=''2489710''>two.</span> </p><p><span m=''2490650''>BRADLEY KUSZMAUL:</span>
  <span m=''2491120''>Ah,</span> <span m=''2491480''>but</span> <span m=''2491710''>in
  this</span> <span m=''2491930''>array,</span> <span m=''2492260''>we</span> <span
  m=''2492390''>found</span> <span m=''2492690''>out</span> <span m=''2492930''>that</span>
  <span m=''2493060''>it''s</span> <span m=''2494440''>above</span> <span m=''2495140''>the</span>
  <span m=''2495240''>last</span> <span m=''2495570''>element,</span> <span m=''2496390''>when</span>
  <span m=''2496520''>we</span> <span m=''2496620''>did</span> <span m=''2496780''>our</span>
  <span m=''2496890''>search,</span> <span m=''2497320''>right?</span> <span m=''2497700''>That''s</span>
  <span m=''2497890''>one</span> <span m=''2498050''>of</span> <span m=''2498100''>the</span>
  <span m=''2498170''>possible</span> <span m=''2498600''>ways--</span> <span m=''2499660''>the</span>
  <span m=''2499770''>worst-case</span> <span m=''2500290''>behavior</span> <span
  m=''2500810''>is</span> <span m=''2500970''>we''ve</span> <span m=''2501290''>got</span>
  <span m=''2501500''>something</span> <span m=''2501850''>where</span> <span m=''2501990''>this</span>
  <span m=''2502250''>array</span> <span m=''2502740''>is</span> <span m=''2503020''>less</span>
  <span m=''2503290''>than</span> <span m=''2503430''>this</span> <span m=''2503640''>array.</span>
  <span m=''2503870''>We''re</span> <span m=''2504030''>looking</span> <span m=''2504270''>for</span>
  <span m=''2504380''>that</span> <span m=''2504600''>item.</span> <span m=''2504890''>So</span>
  <span m=''2505040''>we</span> <span m=''2505140''>do</span> <span m=''2505250''>a</span>
  <span m=''2505290''>binary</span> <span m=''2505630''>search</span> <span m=''2505930''>and</span>
  <span m=''2506030''>find</span> <span m=''2506230''>out,</span> <span m=''2507350''>it''s</span>
  <span m=''2507550''>over</span> <span m=''2507760''>here.</span> <span m=''2509030''>And</span>
  <span m=''2509220''>it</span> <span m=''2509280''>doesn''t</span> <span m=''2509530''>help</span>
  <span m=''2509710''>to</span> <span m=''2509800''>special</span> <span m=''2510220''>case</span>
  <span m=''2510630''>this</span> <span m=''2510870''>or</span> <span m=''2510950''>something,</span>
  <span m=''2511220''>because</span> <span m=''2511370''>they</span> <span m=''2511470''>could</span>
  <span m=''2511620''>be</span> <span m=''2511750''>all</span> <span m=''2512020''>to
  the</span> <span m=''2512080''>right</span> <span m=''2512530''>or they</span> <span
  m=''2512650''>could</span> <span m=''2512830''>be</span> <span m=''2513620''>all</span>
  <span m=''2513840''>bunched</span> <span m=''2514190''>up</span> <span m=''2514360''>in</span>
  <span m=''2514490''>funny</span> <span m=''2514770''>ways.</span> <span m=''2515190''>There''s</span>
  <span m=''2515380''>lots</span> <span m=''2515650''>of</span> <span m=''2515700''>screwy</span>
  <span m=''2516150''>ways</span> <span m=''2516500''>that</span> <span m=''2516610''>this</span>
  <span m=''2516780''>could</span> <span m=''2516910''>go</span> <span m=''2517070''>wrong.</span>
  <span m=''2518930''>But</span> <span m=''2519330''>the</span> <span m=''2519460''>simple</span>
  <span m=''2519880''>version,</span> <span m=''2520670''>it''s</span> <span m=''2520850''>easy</span>
  <span m=''2521110''>to</span> <span m=''2521170''>come</span> <span m=''2521370''>up</span>
  <span m=''2521470''>with</span> <span m=''2521620''>an</span> <span m=''2521710''>example,</span>
  <span m=''2522130''>which</span> <span m=''2522280''>is</span> <span m=''2522370''>everything''s</span>
  <span m=''2522680''>to</span> <span m=''2522820''>the</span> <span m=''2522900''>left.</span>
  <span m=''2523580''>Yeah.</span> </p><p><span m=''2524416''>AUDIENCE:</span> <span
  m=''2524902''>Can you</span> <span m=''2525388''>still</span> <span m=''2525874''>save
  time</span> <span m=''2526846''>by,</span> <span m=''2528304''>when</span> <span
  m=''2528790''>you</span> <span m=''2529276''>do</span> <span m=''2529762''>the</span>
  <span m=''2530248''>binary</span> <span m=''2530734''>search</span> <span m=''2531220''>on
  the smallest array--</span> <span m=''2531706''>but I guess you''d</span> <span
  m=''2532192''>want</span> <span m=''2532678''>[INAUDIBLE]</span> <span m=''2533650''>search.</span>
  <span m=''2534136''>It will help</span> <span m=''2534622''>reduced</span> <span
  m=''2535108''>cost</span> <span m=''2535594''>which gives you the next one and</span>
  <span m=''2536080''>so on?</span> </p><p><span m=''2538315''>BRADLEY KUSZMAUL:</span>
  <span m=''2538590''>Yeah.</span> <span m=''2539370''>So</span> <span m=''2539500''>there</span>
  <span m=''2539660''>is</span> <span m=''2539860''>a</span> <span m=''2539930''>way</span>
  <span m=''2540130''>to</span> <span m=''2540210''>fix</span> <span m=''2540500''>it</span>
  <span m=''2540610''>so</span> <span m=''2540750''>that</span> <span m=''2541230''>the</span>
  <span m=''2541340''>pointers</span> <span m=''2542710''>in</span> <span m=''2542860''>the</span>
  <span m=''2542950''>smaller</span> <span m=''2543530''>array</span> <span m=''2544540''>do</span>
  <span m=''2545650''>help</span> <span m=''2545910''>you</span> <span m=''2546030''>reduce</span>
  <span m=''2546380''>the</span> <span m=''2546480''>cost</span> <span m=''2546830''>in</span>
  <span m=''2546900''>the</span> <span m=''2547060''>next</span> <span m=''2547210''>array.</span>
  <span m=''2548010''>And</span> <span m=''2548170''>that</span> <span m=''2548390''>is</span>
  <span m=''2548600''>to</span> <span m=''2548730''>seed</span> <span m=''2550160''>the</span>
  <span m=''2550240''>smaller</span> <span m=''2550660''>array</span> <span m=''2551040''>with</span>
  <span m=''2551270''>some</span> <span m=''2551480''>values</span> <span m=''2552050''>from</span>
  <span m=''2552200''>the</span> <span m=''2552360''>next</span> <span m=''2552520''>array.</span>
  <span m=''2552850''>Like,</span> <span m=''2553050''>suppose</span> <span m=''2553330''>I</span>
  <span m=''2553370''>put</span> <span m=''2553570''>in</span> <span m=''2553670''>every</span>
  <span m=''2553910''>20th</span> <span m=''2554420''>item,</span> <span m=''2554870''>and</span>
  <span m=''2555180''>I</span> <span m=''2555290''>stuck</span> <span m=''2555580''>it</span>
  <span m=''2555660''>in</span> <span m=''2555760''>that</span> <span m=''2555970''>array</span>
  <span m=''2556550''>with</span> <span m=''2556690''>a</span> <span m=''2556730''>bit</span>
  <span m=''2556920''>on</span> <span m=''2557060''>it that says,</span> <span m=''2557410''>oh,
  this</span> <span m=''2557600''>is</span> <span m=''2557720''>a</span> <span m=''2557790''>repeat,</span>
  <span m=''2558340''>it''s</span> <span m=''2558460''>going</span> <span m=''2558570''>to</span>
  <span m=''2558610''>be</span> <span m=''2558720''>repeated</span> <span m=''2559150''>again.</span>
  <span m=''2561100''>So</span> <span m=''2561270''>then</span> <span m=''2561400''>I</span>
  <span m=''2561450''>could</span> <span m=''2561640''>guarantee</span> <span m=''2562860''>that</span>
  <span m=''2563520''>there''s</span> <span m=''2563820''>these</span> <span m=''2564040''>dummies</span>
  <span m=''2564410''>that</span> <span m=''2564550''>I</span> <span m=''2564630''>throw</span>
  <span m=''2564920''>in</span> <span m=''2565040''>here,</span> <span m=''2565310''>which</span>
  <span m=''2565660''>are</span> <span m=''2566660''>evenly</span> <span m=''2567090''>spaced,</span>
  <span m=''2569700''>plus</span> <span m=''2570050''>whatever</span> <span m=''2570510''>else</span>
  <span m=''2570710''>is</span> <span m=''2570860''>in</span> <span m=''2570970''>there.</span>
  <span m=''2571150''>So</span> <span m=''2572090''>put</span> <span m=''2572210''>the</span>
  <span m=''2572340''>other</span> <span m=''2572490''>things</span> <span m=''2572760''>in</span>
  <span m=''2572890''>there,</span> <span m=''2573150''>and</span> <span m=''2573820''>they</span>
  <span m=''2573990''>have</span> <span m=''2574150''>forward</span> <span m=''2574430''>pointers</span>
  <span m=''2574860''>too.</span> <span m=''2575900''>And</span> <span m=''2576120''>now</span>
  <span m=''2576560''>I''m</span> <span m=''2577050''>guaranteed</span> <span m=''2577860''>that</span>
  <span m=''2578610''>the</span> <span m=''2578730''>distance</span> <span m=''2579370''>between</span>
  <span m=''2579780''>two</span> <span m=''2582310''>adjacent</span> <span m=''2582790''>items</span>
  <span m=''2583170''>is</span> <span m=''2583330''>guaranteed</span> <span m=''2583950''>to</span>
  <span m=''2584040''>be</span> <span m=''2584960''>a</span> <span m=''2585060''>constant.</span>
  </p><p><span m=''2587292''>Does</span> <span m=''2587700''>that</span> <span m=''2587840''>make</span>
  <span m=''2588040''>sense?</span> <span m=''2590430''>The</span> <span m=''2590550''>trick</span>
  <span m=''2590850''>is</span> <span m=''2591230''>to</span> <span m=''2593370''>make</span>
  <span m=''2593560''>it</span> <span m=''2593690''>so</span> <span m=''2593830''>that</span>
  <span m=''2594050''>having</span> <span m=''2594480''>found</span> <span m=''2595410''>two</span>
  <span m=''2595620''>adjacent</span> <span m=''2596040''>items</span> <span m=''2596400''>that</span>
  <span m=''2596540''>the</span> <span m=''2596620''>thing</span> <span m=''2596810''>you</span>
  <span m=''2596960''>want--</span> <span m=''2597820''>then</span> <span m=''2598060''>on
  the</span> <span m=''2598150''>next</span> <span m=''2598380''>array,</span> <span
  m=''2599820''>the</span> <span m=''2599930''>image</span> <span m=''2600220''>of</span>
  <span m=''2600290''>those</span> <span m=''2600510''>two</span> <span m=''2600710''>items</span>
  <span m=''2601410''>is</span> <span m=''2601570''>separated</span> <span m=''2602110''>by</span>
  <span m=''2602290''>at</span> <span m=''2602400''>most</span> <span m=''2602640''>20</span>
  <span m=''2603000''>items.</span> <span m=''2605100''>And</span> <span m=''2605240''>so</span>
  <span m=''2605720''>that</span> <span m=''2605930''>gets</span> <span m=''2606100''>you</span>
  <span m=''2606220''>down</span> <span m=''2606570''>to</span> <span m=''2606800''>only</span>
  <span m=''2608130''>log</span> <span m=''2608880''>of</span> <span m=''2609010''>N</span>
  <span m=''2609200''>instead</span> <span m=''2609490''>of</span> <span m=''2609580''>log</span>
  <span m=''2609890''>squared</span> <span m=''2610270''>of</span> <span m=''2610370''>n,</span>
  <span m=''2610700''>because</span> <span m=''2611510''>you''re</span> <span m=''2611780''>searching</span>
  <span m=''2612180''>constant</span> <span m=''2612570''>items</span> <span m=''2613190''>in</span>
  <span m=''2613280''>this</span> <span m=''2613500''>array,</span> <span m=''2614170''>and</span>
  <span m=''2614300''>there''s</span> <span m=''2614440''>only</span> <span m=''2614660''>log
  N</span> <span m=''2615270''>arrays.</span> <span m=''2618280''>Yeah.</span> </p><p><span
  m=''2619110''>AUDIENCE:</span> <span m=''2619580''>Doesn''t that</span> <span m=''2620050''>slow
  down</span> <span m=''2620520''>the merging</span> <span m=''2620990''>of the</span>
  <span m=''2621470''>rays?</span> </p><p><span m=''2622601''>BRADLEY KUSZMAUL:</span>
  <span m=''2622980''>Not</span> <span m=''2623330''>asymptotically.</span> <span
  m=''2625720''>Because</span> <span m=''2625940''>asymptotically,</span> <span m=''2626940''>what</span>
  <span m=''2627130''>this</span> <span m=''2627360''>means--</span> <span m=''2628390''>if</span>
  <span m=''2628550''>I''m</span> <span m=''2628660''>going</span> <span m=''2628810''>to</span>
  <span m=''2628870''>build</span> <span m=''2629140''>that</span> <span m=''2629340''>array,</span>
  <span m=''2630000''>so</span> <span m=''2630160''>I''m</span> <span m=''2630310''>going</span>
  <span m=''2630550''>to</span> <span m=''2630610''>merge</span> <span m=''2630860''>two</span>
  <span m=''2631070''>arrays</span> <span m=''2631360''>to</span> <span m=''2631460''>make</span>
  <span m=''2631640''>this</span> <span m=''2631840''>array,</span> <span m=''2632340''>I</span>
  <span m=''2632480''>have</span> <span m=''2632620''>to</span> <span m=''2632720''>do</span>
  <span m=''2632820''>an</span> <span m=''2632920''>additional</span> <span m=''2633350''>scan</span>
  <span m=''2633750''>of</span> <span m=''2633840''>this</span> <span m=''2634090''>other</span>
  <span m=''2634370''>array</span> <span m=''2634760''>as</span> <span m=''2634960''>I''m</span>
  <span m=''2635090''>constructing</span> <span m=''2635550''>this</span> <span m=''2635720''>one.</span>
  <span m=''2635890''>So</span> <span m=''2636660''>the</span> <span m=''2636790''>picture</span>
  <span m=''2637130''>is</span> <span m=''2637240''>I</span> <span m=''2637340''>have</span>
  <span m=''2637520''>two</span> <span m=''2637780''>arrays,</span> <span m=''2639182''>and</span>
  <span m=''2639590''>I''m</span> <span m=''2639750''>trying</span> <span m=''2639990''>to</span>
  <span m=''2640080''>merge</span> <span m=''2640370''>them</span> <span m=''2640540''>into</span>
  <span m=''2641380''>this</span> <span m=''2641610''>array.</span> <span m=''2642390''>And</span>
  <span m=''2642580''>I''m</span> <span m=''2642680''>trying</span> <span m=''2642920''>to</span>
  <span m=''2643010''>also</span> <span m=''2645980''>insert</span> <span m=''2646580''>these</span>
  <span m=''2646820''>dummy</span> <span m=''2647130''>forward</span> <span m=''2647490''>pointers</span>
  <span m=''2648230''>from</span> <span m=''2648410''>the</span> <span m=''2648580''>next</span>
  <span m=''2648750''>array,</span> <span m=''2649640''>which</span> <span m=''2649860''>is</span>
  <span m=''2649950''>only</span> <span m=''2650150''>twice</span> <span m=''2650480''>as</span>
  <span m=''2650600''>big.</span> <span m=''2651770''>So</span> <span m=''2652100''>the</span>
  <span m=''2652210''>big 0''s</span> <span m=''2652450''>are,</span> <span m=''2653770''>if</span>
  <span m=''2654100''>it''s</span> <span m=''2654300''>X,</span> <span m=''2654690''>instead</span>
  <span m=''2654980''>of</span> <span m=''2655100''>it</span> <span m=''2655200''>being</span>
  <span m=''2655550''>1, 2, 3, 4X,</span> <span m=''2657285''>it''s</span> <span m=''2657610''>8X.</span>
  </p><p><span m=''2658550''>So</span> <span m=''2658720''>it''s</span> <span m=''2658830''>only</span>
  <span m=''2659060''>a</span> <span m=''2659120''>constant.</span> <span m=''2663320''>So</span>
  <span m=''2663480''>basically,</span> <span m=''2664010''>I</span> <span m=''2664080''>can</span>
  <span m=''2664300''>read</span> <span m=''2664600''>all</span> <span m=''2665030''>three</span>
  <span m=''2665410''>of</span> <span m=''2665510''>these.</span> <span m=''2665960''>I</span>
  <span m=''2666040''>can</span> <span m=''2666200''>read</span> <span m=''2666560''>an</span>
  <span m=''2667290''>array</span> <span m=''2667600''>and the</span> <span m=''2667700''>next</span>
  <span m=''2667990''>one</span> <span m=''2668560''>and</span> <span m=''2669030''>the</span>
  <span m=''2669100''>next</span> <span m=''2669460''>array,</span> <span m=''2669660''>which</span>
  <span m=''2669820''>is</span> <span m=''2669900''>twice</span> <span m=''2670220''>as</span>
  <span m=''2670340''>big,</span> <span m=''2670580''>and</span> <span m=''2670670''>the</span>
  <span m=''2670740''>next</span> <span m=''2670990''>array</span> <span m=''2671170''>which</span>
  <span m=''2671340''>is</span> <span m=''2671460''>four</span> <span m=''2671660''>times</span>
  <span m=''2671930''>as</span> <span m=''2672030''>big.</span> <span m=''2672740''>It</span>
  <span m=''2672800''>all</span> <span m=''2673070''>adds</span> <span m=''2673310''>up</span>
  <span m=''2673440''>to</span> <span m=''2674070''>8</span> <span m=''2674360''>times</span>
  <span m=''2674840''>the</span> <span m=''2675010''>size</span> <span m=''2675320''>of</span>
  <span m=''2675370''>the</span> <span m=''2675480''>original</span> <span m=''2675840''>array.</span>
  <span m=''2676510''>So</span> <span m=''2676720''>at</span> <span m=''2676770''>least</span>
  <span m=''2677190''>the asymptotics</span> <span m=''2677700''>aren''t</span> <span
  m=''2677870''>messed</span> <span m=''2678170''>up.</span> <span m=''2678330''>Maybe</span>
  <span m=''2678560''>the</span> <span m=''2678670''>engineer</span> <span m=''2679000''>in</span>
  <span m=''2679330''>you</span> <span m=''2679480''>goes,</span> <span m=''2679770''>bleh,</span>
  <span m=''2680130''>I have to</span> <span m=''2680490''>read</span> <span m=''2680700''>the</span>
  <span m=''2680770''>data</span> <span m=''2681020''>eight</span> <span m=''2681250''>times.</span>
  </p><p><span m=''2682200''>But</span> <span m=''2684260''>remember,</span> <span
  m=''2685070''>the</span> <span m=''2685240''>game</span> <span m=''2685560''>here</span>
  <span m=''2685790''>is</span> <span m=''2685910''>not</span> <span m=''2686230''>to</span>
  <span m=''2686310''>get</span> <span m=''2686490''>100%</span> <span m=''2687300''>of</span>
  <span m=''2687430''>the</span> <span m=''2687520''>disk''s</span> <span m=''2688320''>insertion</span>
  <span m=''2688880''>capacity.</span> <span m=''2690690''>That''s</span> <span m=''2691000''>not</span>
  <span m=''2691380''>the</span> <span m=''2691450''>game,</span> <span m=''2692950''>going</span>
  <span m=''2693160''>back</span> <span m=''2693470''>to</span> <span m=''2693880''>the</span>
  <span m=''2694490''>marketing</span> <span m=''2695200''>perspective.</span> <span
  m=''2696100''>The</span> <span m=''2696210''>competition</span> <span m=''2696910''>is</span>
  <span m=''2697050''>only</span> <span m=''2697290''>getting</span> <span m=''2697680''>0.001%</span>
  <span m=''2700470''>of</span> <span m=''2700590''>the</span> <span m=''2700690''>disk''s</span>
  <span m=''2701310''>capacity.</span> <span m=''2704700''>That''s</span> <span m=''2705230''>what</span>
  <span m=''2705440''>a</span> <span m=''2705640''>B-tree</span> <span m=''2705880''>gets</span>
  <span m=''2706140''>in</span> <span m=''2706230''>the</span> <span m=''2706320''>worst</span>
  <span m=''2706630''>case.</span> <span m=''2707640''>And</span> <span m=''2707780''>so</span>
  <span m=''2708480''>we</span> <span m=''2708670''>don''t</span> <span m=''2708880''>have</span>
  <span m=''2709090''>to</span> <span m=''2709180''>get</span> <span m=''2709320''>100%</span>
  <span m=''2710560''>to</span> <span m=''2710680''>be</span> <span m=''2711150''>three</span>
  <span m=''2711400''>orders</span> <span m=''2711680''>of</span> <span m=''2711730''>magnitude</span>
  <span m=''2712280''>better,</span> <span m=''2713010''>which</span> <span m=''2713570''>is</span>
  <span m=''2713880''>where</span> <span m=''2714040''>we</span> <span m=''2714190''>are.</span>
  <span m=''2715680''>So</span> <span m=''2715940''>it</span> <span m=''2716050''>turns</span>
  <span m=''2716310''>out</span> <span m=''2716680''>that</span> <span m=''2716950''>for</span>
  <span m=''2717030''>this</span> <span m=''2717210''>kind</span> <span m=''2717370''>of</span>
  <span m=''2718080''>thing,</span> <span m=''2718320''>we</span> <span m=''2718450''>end</span>
  <span m=''2718550''>up</span> <span m=''2718650''>getting</span> <span m=''2719210''>1%</span>
  <span m=''2720140''>of</span> <span m=''2720260''>the</span> <span m=''2720360''>disk''s</span>
  <span m=''2720990''>capacity,</span> <span m=''2722080''>and</span> <span m=''2722930''>everybody''s</span>
  <span m=''2723370''>jumping</span> <span m=''2723710''>around</span> <span m=''2723960''>saying</span>
  <span m=''2724120''>that''s</span> <span m=''2724420''>great,</span> <span m=''2725410''>because</span>
  <span m=''2725740''>it''s</span> <span m=''2725880''>1,000</span> <span m=''2726310''>times</span>
  <span m=''2726550''>faster.</span> </p><p><span m=''2730630''>And</span> <span m=''2732650''>why</span>
  <span m=''2732900''>do</span> <span m=''2733000''>we</span> <span m=''2733130''>only</span>
  <span m=''2733320''>get</span> <span m=''2733480''>1%?</span> <span m=''2734070''>Well,</span>
  <span m=''2734450''>there''s</span> <span m=''2734590''>a</span> <span m=''2734650''>factor</span>
  <span m=''2735200''>of</span> <span m=''2735280''>two</span> <span m=''2735590''>here</span>
  <span m=''2736160''>and</span> <span m=''2737900''>there''s</span> <span m=''2738080''>a</span>
  <span m=''2738180''>log</span> <span m=''2738600''>N</span> <span m=''2738890''>over</span>
  <span m=''2739100''>there,</span> <span m=''2739550''>and</span> <span m=''2739880''>you</span>
  <span m=''2740000''>divide</span> <span m=''2740360''>all</span> <span m=''2740500''>that,</span>
  <span m=''2740990''>and</span> <span m=''2744220''>it''s</span> <span m=''2744390''>a</span>
  <span m=''2744460''>constant</span> <span m=''2746050''>challenge,</span> <span
  m=''2746580''>because</span> <span m=''2746830''>the</span> <span m=''2746930''>engineers</span>
  <span m=''2747810''>at</span> <span m=''2748080''>Tokutek</span> <span m=''2749700''>always</span>
  <span m=''2750100''>are</span> <span m=''2750190''>having</span> <span m=''2750470''>ideas</span>
  <span m=''2750830''>for</span> <span m=''2750940''>how</span> <span m=''2751080''>to</span>
  <span m=''2751190''>make</span> <span m=''2751370''>it</span> <span m=''2751480''>faster.</span>
  <span m=''2753310''>And</span> <span m=''2753860''>right</span> <span m=''2754100''>now,</span>
  <span m=''2754530''>making</span> <span m=''2755210''>this</span> <span m=''2755640''>data</span>
  <span m=''2755820''>structure</span> <span m=''2756150''>faster</span> <span m=''2756690''>is</span>
  <span m=''2756900''>not</span> <span m=''2757260''>the</span> <span m=''2757340''>thing</span>
  <span m=''2757590''>that''s</span> <span m=''2757780''>going</span> <span m=''2757890''>to</span>
  <span m=''2757990''>make</span> <span m=''2758190''>people</span> <span m=''2758460''>buy</span>
  <span m=''2758720''>it.</span> <span m=''2759330''>Because</span> <span m=''2759490''>it''s</span>
  <span m=''2759650''>already</span> <span m=''2759990''>1,000</span> <span m=''2760460''>times</span>
  <span m=''2760740''>faster</span> <span m=''2761130''>than</span> <span m=''2761290''>the</span>
  <span m=''2761390''>competition.</span> <span m=''2762780''>What''s</span> <span
  m=''2762950''>going</span> <span m=''2763060''>to</span> <span m=''2763120''>make</span>
  <span m=''2763280''>it</span> <span m=''2763390''>faster</span> <span m=''2763820''>is</span>
  <span m=''2763900''>some</span> <span m=''2765280''>other</span> <span m=''2765490''>thing</span>
  <span m=''2765680''>that</span> <span m=''2765830''>adds</span> <span m=''2766140''>features</span>
  <span m=''2766520''>that</span> <span m=''2766630''>make</span> <span m=''2766790''>it</span>
  <span m=''2766880''>so</span> <span m=''2766970''>it''s</span> <span m=''2767090''>easy</span>
  <span m=''2767360''>to</span> <span m=''2767430''>use.</span> <span m=''2768180''>So</span>
  <span m=''2768320''>I</span> <span m=''2768650''>keep</span> <span m=''2768840''>having</span>
  <span m=''2769100''>to--</span> <span m=''2769980''>no,</span> <span m=''2770330''>you</span>
  <span m=''2771110''>really</span> <span m=''2771390''>need</span> <span m=''2771590''>to</span>
  <span m=''2771750''>work</span> <span m=''2772060''>on</span> <span m=''2772610''>making</span>
  <span m=''2772960''>it</span> <span m=''2773120''>so</span> <span m=''2773230''>that</span>
  <span m=''2773370''>we</span> <span m=''2773490''>can</span> <span m=''2773630''>do</span>
  <span m=''2773760''>backups,</span> <span m=''2776250''>or something.</span> </p><p><span
  m=''2777370''>It</span> <span m=''2777850''>turns</span> <span m=''2778100''>out,</span>
  <span m=''2779260''>if</span> <span m=''2779430''>you''re</span> <span m=''2779540''>selling</span>
  <span m=''2779870''>a</span> <span m=''2779920''>database,</span> <span m=''2780480''>you</span>
  <span m=''2780580''>need</span> <span m=''2780820''>to</span> <span m=''2780870''>do</span>
  <span m=''2781030''>more</span> <span m=''2781310''>than</span> <span m=''2781480''>just</span>
  <span m=''2781720''>queries</span> <span m=''2781990''>and</span> <span m=''2782260''>insertions.</span>
  <span m=''2782930''>You</span> <span m=''2783020''>need</span> <span m=''2783180''>to</span>
  <span m=''2783250''>be</span> <span m=''2783410''>able</span> <span m=''2783590''>to
  do</span> <span m=''2783700''>backups.</span> <span m=''2784290''>You</span> <span
  m=''2784370''>need to</span> <span m=''2784450''>be</span> <span m=''2784600''>able</span>
  <span m=''2785100''>to</span> <span m=''2785220''>recover</span> <span m=''2785620''>from</span>
  <span m=''2785800''>a</span> <span m=''2785870''>crash.</span> <span m=''2786360''>You</span>
  <span m=''2786460''>need</span> <span m=''2786640''>to</span> <span m=''2786710''>be</span>
  <span m=''2786910''>able</span> <span m=''2787800''>to</span> <span m=''2788920''>cope</span>
  <span m=''2789220''>with</span> <span m=''2790850''>the</span> <span m=''2790960''>problem</span>
  <span m=''2791480''>of</span> <span m=''2793250''>some</span> <span m=''2793540''>particularly</span>
  <span m=''2794660''>heavy</span> <span m=''2795030''>query</span> <span m=''2795490''>that''s</span>
  <span m=''2795750''>going</span> <span m=''2795980''>and</span> <span m=''2796080''>starving</span>
  <span m=''2796610''>all</span> <span m=''2796820''>the</span> <span m=''2796990''>other</span>
  <span m=''2797160''>queries</span> <span m=''2797570''>from</span> <span m=''2797720''>getting</span>
  <span m=''2797950''>their</span> <span m=''2798080''>work</span> <span m=''2798370''>done.</span>
  <span m=''2799300''>All</span> <span m=''2799570''>those</span> <span m=''2799800''>problems</span>
  <span m=''2800680''>turn</span> <span m=''2800870''>out to</span> <span m=''2800940''>be</span>
  <span m=''2801100''>the</span> <span m=''2801200''>problems</span> <span m=''2801660''>that,</span>
  <span m=''2802250''>if</span> <span m=''2802380''>you</span> <span m=''2802460''>do</span>
  <span m=''2802650''>any</span> <span m=''2802870''>of</span> <span m=''2802930''>them</span>
  <span m=''2803090''>badly,</span> <span m=''2803500''>people</span> <span m=''2803770''>won''t</span>
  <span m=''2804010''>buy</span> <span m=''2804210''>you.</span> <span m=''2804460''>And</span>
  <span m=''2805960''>so</span> <span m=''2807210''>I</span> <span m=''2807360''>suspect</span>
  <span m=''2807800''>that</span> <span m=''2807910''>there''s</span> <span m=''2808080''>another</span>
  <span m=''2808340''>factor</span> <span m=''2808730''>of</span> <span m=''2808800''>10</span>
  <span m=''2809510''>to</span> <span m=''2809610''>be</span> <span m=''2809710''>gotten</span>
  <span m=''2812470''>over</span> <span m=''2812700''>this</span> <span m=''2812980''>data</span>
  <span m=''2813190''>structure,</span> <span m=''2813650''>if</span> <span m=''2813750''>you</span>
  <span m=''2813850''>were</span> <span m=''2814060''>to</span> <span m=''2814350''>sit</span>
  <span m=''2814650''>down</span> <span m=''2815060''>and</span> <span m=''2815160''>try</span>
  <span m=''2815330''>to</span> <span m=''2815410''>say,</span> <span m=''2815550''>how</span>
  <span m=''2815820''>could</span> <span m=''2815980''>I</span> <span m=''2816030''>make</span>
  <span m=''2816260''>it</span> <span m=''2816370''>be</span> <span m=''2816500''>the</span>
  <span m=''2816590''>fastest</span> <span m=''2817090''>possible</span> <span m=''2817540''>thing.</span>
  <span m=''2818510''>And</span> <span m=''2818750''>someday,</span> <span m=''2820120''>that</span>
  <span m=''2820310''>work</span> <span m=''2820560''>will</span> <span m=''2820630''>have</span>
  <span m=''2820780''>to</span> <span m=''2820870''>be</span> <span m=''2820970''>done,</span>
  <span m=''2821270''>because</span> <span m=''2822020''>the</span> <span m=''2822110''>competition</span>
  <span m=''2822690''>will</span> <span m=''2823010''>have</span> <span m=''2823290''>it</span>
  <span m=''2823400''>and we</span> <span m=''2823660''>won''t.</span> </p><p><span
  m=''2827370''>So</span> <span m=''2828010''>let''s</span> <span m=''2828220''>see.</span>
  <span m=''2829270''>I</span> <span m=''2829380''>mentioned</span> <span m=''2829760''>some</span>
  <span m=''2829920''>of</span> <span m=''2829960''>these</span> <span m=''2830040''>just</span>
  <span m=''2830305''>now.</span> <span m=''2830570''>So</span> <span m=''2830650''>some</span>
  <span m=''2830820''>of</span> <span m=''2830880''>the</span> <span m=''2830970''>things</span>
  <span m=''2831200''>you</span> <span m=''2831280''>have</span> <span m=''2831420''>to</span>
  <span m=''2831520''>do</span> <span m=''2833170''>in</span> <span m=''2833310''>order</span>
  <span m=''2833440''>to</span> <span m=''2833650''>have</span> <span m=''2833860''>an</span>
  <span m=''2834010''>industrial</span> <span m=''2834550''>strength</span> <span
  m=''2835320''>dictionary</span> <span m=''2836530''>are</span> <span m=''2836720''>you</span>
  <span m=''2836820''>need</span> <span m=''2836980''>to</span> <span m=''2837070''>cope</span>
  <span m=''2837390''>with</span> <span m=''2837630''>variable-size</span> <span m=''2838460''>rows.</span>
  <span m=''2840240''>Now</span> <span m=''2840400''>we</span> <span m=''2840540''>assumed</span>
  <span m=''2840830''>for</span> <span m=''2840950''>the</span> <span m=''2841030''>analysis</span>
  <span m=''2841650''>that</span> <span m=''2841760''>the</span> <span m=''2841860''>rows</span>
  <span m=''2842150''>were</span> <span m=''2842320''>all</span> <span m=''2842440''>unit</span>
  <span m=''2842800''>size.</span> <span m=''2843240''>In</span> <span m=''2843330''>fact,</span>
  <span m=''2844020''>database</span> <span m=''2844520''>rows</span> <span m=''2844850''>vary</span>
  <span m=''2845140''>in</span> <span m=''2845230''>size.</span> <span m=''2845630''>And</span>
  <span m=''2845710''>some</span> <span m=''2845920''>of</span> <span m=''2846000''>them</span>
  <span m=''2846150''>are</span> <span m=''2846250''>huge.</span> <span m=''2846670''>Some</span>
  <span m=''2846910''>of</span> <span m=''2846990''>them</span> <span m=''2847160''>are</span>
  <span m=''2847640''>megabytes.</span> <span m=''2848550''>Or</span> <span m=''2849240''>sometimes</span>
  <span m=''2849610''>people</span> <span m=''2849830''>do</span> <span m=''2849960''>things</span>
  <span m=''2850220''>like</span> <span m=''2850360''>they</span> <span m=''2850470''>put</span>
  <span m=''2850660''>satellite</span> <span m=''2851140''>images</span> <span m=''2851670''>into</span>
  <span m=''2851900''>databases.</span> <span m=''2853280''>So</span> <span m=''2853510''>they</span>
  <span m=''2853640''>end</span> <span m=''2853940''>up</span> <span m=''2854030''>having</span>
  <span m=''2854320''>very</span> <span m=''2854600''>large</span> <span m=''2854960''>rows.</span>
  </p><p><span m=''2856310''>You</span> <span m=''2856400''>have</span> <span m=''2856520''>to</span>
  <span m=''2856610''>do</span> <span m=''2856750''>deletions</span> <span m=''2857460''>as</span>
  <span m=''2857600''>well</span> <span m=''2857820''>as</span> <span m=''2857930''>insertions.</span>
  <span m=''2861000''>And it</span> <span m=''2861150''>turns</span> <span m=''2861390''>out</span>
  <span m=''2861540''>we</span> <span m=''2861630''>can</span> <span m=''2861760''>do</span>
  <span m=''2861850''>deletions</span> <span m=''2862440''>just</span> <span m=''2862710''>as</span>
  <span m=''2862820''>fast</span> <span m=''2863140''>as</span> <span m=''2863220''>insertions.</span>
  <span m=''2865060''>And</span> <span m=''2865300''>the</span> <span m=''2865410''>idea</span>
  <span m=''2865740''>there</span> <span m=''2866270''>is</span> <span m=''2866560''>basically,</span>
  <span m=''2866990''>if</span> <span m=''2867110''>you</span> <span m=''2867190''>want</span>
  <span m=''2867320''>to</span> <span m=''2867360''>do</span> <span m=''2867720''>a</span>
  <span m=''2867840''>delete,</span> <span m=''2868220''>you</span> <span m=''2868300''>just</span>
  <span m=''2869800''>you</span> <span m=''2871770''>insert</span> <span m=''2872120''>the</span>
  <span m=''2872200''>thing</span> <span m=''2872470''>with</span> <span m=''2872600''>a</span>
  <span m=''2872640''>bit</span> <span m=''2872900''>on</span> <span m=''2873080''>it</span>
  <span m=''2873310''>that says,</span> <span m=''2873540''>hey,</span> <span m=''2873660''>this</span>
  <span m=''2873850''>is</span> <span m=''2873940''>really</span> <span m=''2874230''>a</span>
  <span m=''2874280''>deletion.</span> <span m=''2875240''>And</span> <span m=''2875410''>then,</span>
  <span m=''2876100''>whatever</span> <span m=''2876410''>you</span> <span m=''2876510''>get</span>
  <span m=''2876660''>a</span> <span m=''2876740''>chance,</span> <span m=''2877180''>when</span>
  <span m=''2877320''>you''re</span> <span m=''2877400''>doing</span> <span m=''2877510''>a
  merge,</span> <span m=''2878110''>if</span> <span m=''2878210''>you</span> <span
  m=''2878300''>find</span> <span m=''2878600''>something</span> <span m=''2878850''>that</span>
  <span m=''2878960''>has</span> <span m=''2879160''>the</span> <span m=''2879230''>same</span>
  <span m=''2879530''>value,</span> <span m=''2881390''>you</span> <span m=''2881490''>just</span>
  <span m=''2881690''>annihilate</span> <span m=''2882020''>it.</span> <span m=''2883210''>And</span>
  <span m=''2886150''>the</span> <span m=''2886270''>delete</span> <span m=''2886580''>has</span>
  <span m=''2886730''>to</span> <span m=''2886830''>keep</span> <span m=''2887010''>going</span>
  <span m=''2887250''>down,</span> <span m=''2887510''>because there</span> <span
  m=''2887700''>might</span> <span m=''2887890''>be</span> <span m=''2887960''>more</span>
  <span m=''2888200''>copies</span> <span m=''2888660''>of</span> <span m=''2888770''>it</span>
  <span m=''2889310''>further</span> <span m=''2889640''>down</span> <span m=''2890340''>that</span>
  <span m=''2890520''>were</span> <span m=''2890660''>shadowed.</span> <span m=''2891600''>And</span>
  <span m=''2891780''>eventually,</span> <span m=''2893590''>when</span> <span m=''2893850''>you</span>
  <span m=''2893940''>finally</span> <span m=''2894220''>do</span> <span m=''2894320''>the</span>
  <span m=''2894440''>last</span> <span m=''2894760''>merge,</span> <span m=''2895480''>that</span>
  <span m=''2895930''>tombstone</span> <span m=''2896780''>goes</span> <span m=''2897020''>away.</span>
  </p><p><span m=''2899320''>You</span> <span m=''2899420''>have</span> <span m=''2899510''>to</span>
  <span m=''2899590''>do</span> <span m=''2899690''>transactions</span> <span m=''2900560''>and</span>
  <span m=''2900650''>logging.</span> <span m=''2901460''>You</span> <span m=''2901590''>have
  to</span> <span m=''2901760''>do</span> <span m=''2901920''>crash</span> <span m=''2902300''>recovery.</span>
  <span m=''2903610''>And</span> <span m=''2904030''>it''s</span> <span m=''2904210''>a</span>
  <span m=''2904240''>big</span> <span m=''2904510''>pain</span> <span m=''2904760''>to</span>
  <span m=''2904820''>get</span> <span m=''2904990''>that</span> <span m=''2905220''>right,</span>
  <span m=''2905660''>and</span> <span m=''2905880''>a</span> <span m=''2905940''>lot</span>
  <span m=''2906150''>of</span> <span m=''2906230''>companies</span> <span m=''2906750''>have</span>
  <span m=''2907020''>foundered</span> <span m=''2907510''>when</span> <span m=''2907780''>they</span>
  <span m=''2908660''>tried</span> <span m=''2908850''>to</span> <span m=''2909230''>move</span>
  <span m=''2909540''>from</span> <span m=''2909780''>one</span> <span m=''2909980''>mode</span>
  <span m=''2910210''>to</span> <span m=''2910290''>the</span> <span m=''2910520''>other.</span>
  <span m=''2911320''>How</span> <span m=''2911610''>many</span> <span m=''2911870''>of</span>
  <span m=''2911930''>you</span> <span m=''2912140''>have</span> <span m=''2912350''>experienced</span>
  <span m=''2913040''>the</span> <span m=''2913120''>phenomena</span> <span m=''2913650''>that</span>
  <span m=''2913850''>your</span> <span m=''2913990''>file</span> <span m=''2914330''>system</span>
  <span m=''2914940''>didn''t</span> <span m=''2915310''>come</span> <span m=''2915490''>back</span>
  <span m=''2915830''>properly</span> <span m=''2916360''>after</span> <span m=''2916690''>a</span>
  <span m=''2916720''>crash?</span> <span m=''2920410''>You see</span> <span m=''2920620''>the</span>
  <span m=''2920720''>difference</span> <span m=''2921120''>in</span> <span m=''2921270''>age</span>
  <span m=''2921650''>here.</span> <span m=''2922050''>They''re all</span> <span m=''2922180''>using</span>
  <span m=''2923580''>file</span> <span m=''2923980''>systems</span> <span m=''2924130''>that</span>
  <span m=''2924290''>have</span> <span m=''2924440''>transactional</span> <span m=''2926530''>logging</span>
  <span m=''2926970''>underneath</span> <span m=''2927270''>them.</span> <span m=''2928490''>When''s</span>
  <span m=''2928850''>the</span> <span m=''2928940''>last</span> <span m=''2929240''>time</span>
  <span m=''2929370''>it</span> <span m=''2929490''>happened?</span> </p><p><span
  m=''2930714''>AUDIENCE:</span> <span m=''2931091''>Tuesday.</span> </p><p><span
  m=''2931470''>BRADLEY KUSZMAUL: Tuesday.</span> <span m=''2933430''>So</span> <span
  m=''2934140''>the</span> <span m=''2934310''>difference</span> <span m=''2934620''>is</span>
  <span m=''2935000''>you''re</span> <span m=''2935180''>paying</span> <span m=''2935460''>attention</span>
  <span m=''2936070''>and</span> <span m=''2936532''>they''re</span> <span m=''2936994''>not,</span>
  <span m=''2937456''>right?</span> </p><p><span m=''2939304''>AUDIENCE:</span> <span
  m=''2939770''>[INAUDIBLE]</span> <span m=''2940180''>disk</span> <span m=''2940590''>failure.</span>
  </p><p><span m=''2941235''>BRADLEY KUSZMAUL:</span> <span m=''2941540''>Disk failure.</span>
  <span m=''2942660''>That''s</span> <span m=''2942880''>a</span> <span m=''2942930''>different</span>
  <span m=''2943390''>problem.</span> </p><p><span m=''2943920''>AUDIENCE:</span>
  <span m=''2944368''>Cacheing is</span> <span m=''2944816''>not</span> <span m=''2945264''>[?
  finalized. ?]</span> </p><p><span m=''2946160''>BRADLEY KUSZMAUL:</span> <span m=''2946610''>Yeah.</span>
  <span m=''2947360''>You</span> <span m=''2947550''>say</span> <span m=''2948160''>everybody''s</span>
  <span m=''2948560''>running</span> <span m=''2948860''>with</span> <span m=''2949230''>their</span>
  <span m=''2949480''>disk cache</span> <span m=''2949820''>turned on.</span> <span
  m=''2951520''>And</span> <span m=''2952150''>on</span> <span m=''2952320''>some</span>
  <span m=''2952480''>file</span> <span m=''2952710''>systems,</span> <span m=''2953080''>that''s</span>
  <span m=''2953280''>a</span> <span m=''2953330''>bad</span> <span m=''2953590''>idea.</span>
  <span m=''2954150''>So</span> <span m=''2955200''>we''re</span> <span m=''2955350''>still</span>
  <span m=''2955700''>suffering</span> <span m=''2956550''>that</span> <span m=''2956850''>it''s</span>
  <span m=''2957050''>been</span> <span m=''2957270''>difficult</span> <span m=''2957870''>to</span>
  <span m=''2957960''>switch</span> <span m=''2958520''>from</span> <span m=''2959300''>the</span>
  <span m=''2959580''>original</span> <span m=''2959990''>Unix</span> <span m=''2960320''>file</span>
  <span m=''2960550''>system,</span> <span m=''2960930''>which</span> <span m=''2961120''>is</span>
  <span m=''2962060''>30</span> <span m=''2962330''>years</span> <span m=''2962610''>old</span>
  <span m=''2963840''>and</span> <span m=''2964190''>wasn''t</span> <span m=''2964610''>designed</span>
  <span m=''2965180''>to</span> <span m=''2965380''>recover</span> <span m=''2965900''>from</span>
  <span m=''2966110''>crash.</span> <span m=''2966490''>You</span> <span m=''2966690''>have</span>
  <span m=''2966955''>to run</span> <span m=''2967220''>fsck,</span> <span m=''2969470''>and</span>
  <span m=''2969660''>it</span> <span m=''2969730''>doesn''t</span> <span m=''2969970''>always</span>
  <span m=''2970240''>work.</span> <span m=''2970870''>We</span> <span m=''2971030''>still</span>
  <span m=''2971510''>have</span> <span m=''2971680''>file</span> <span m=''2971940''>systems</span>
  <span m=''2972360''>that</span> <span m=''2972490''>don''t</span> <span m=''2972660''>recover</span>
  <span m=''2973040''>from</span> <span m=''2973230''>crashes.</span> <span m=''2973800''>So</span>
  <span m=''2974060''>you</span> <span m=''2974190''>can</span> <span m=''2974510''>see</span>
  <span m=''2974730''>why</span> <span m=''2975380''>that</span> <span m=''2975740''>could</span>
  <span m=''2975850''>be</span> <span m=''2975960''>difficult.</span> <span m=''2980540''>It</span>
  <span m=''2980660''>turns</span> <span m=''2980910''>out</span> <span m=''2981100''>that</span>
  <span m=''2981300''>one</span> <span m=''2981600''>common</span> <span m=''2981960''>use</span>
  <span m=''2982220''>case</span> <span m=''2982800''>is that the</span> <span m=''2982870''>data</span>
  <span m=''2983160''>is</span> <span m=''2983450''>coming</span> <span m=''2983790''>in</span>
  <span m=''2983870''>sequentially,</span> <span m=''2984245''>and</span> <span m=''2984620''>this</span>
  <span m=''2984840''>data</span> <span m=''2985050''>structure</span> <span m=''2985440''>just</span>
  <span m=''2987140''>sucks</span> <span m=''2987580''>compared</span> <span m=''2987970''>to</span>
  <span m=''2988120''>a</span> <span m=''2988180''>B-tree</span> <span m=''2989020''>in</span>
  <span m=''2989130''>the</span> <span m=''2989210''>case</span> <span m=''2989590''>where</span>
  <span m=''2990450''>you''re</span> <span m=''2990610''>inserting</span> <span m=''2991060''>things</span>
  <span m=''2991520''>and</span> <span m=''2991630''>the</span> <span m=''2991700''>data</span>
  <span m=''2991940''>actually</span> <span m=''2992290''>is</span> <span m=''2992640''>already</span>
  <span m=''2992970''>sorted</span> <span m=''2993390''>as</span> <span m=''2993530''>it''s</span>
  <span m=''2993660''>inserted.</span> <span m=''2994110''>Because</span> <span m=''2994330''>this</span>
  <span m=''2994480''>is</span> <span m=''2994560''>moving</span> <span m=''2994890''>things</span>
  <span m=''2995140''>all</span> <span m=''2995310''>around</span> <span m=''2995700''>and</span>
  <span m=''2995770''>moving things</span> <span m=''2996220''>all</span> <span m=''2996350''>around.</span>
  <span m=''2996710''>And it''s</span> <span m=''2996830''>like,</span> <span m=''2997500''>why</span>
  <span m=''2997710''>didn''t</span> <span m=''2997880''>you</span> <span m=''2998480''>just</span>
  <span m=''2998700''>notice</span> <span m=''2999050''>that it''s</span> <span m=''2999330''>sorted</span>
  <span m=''2999580''>and</span> <span m=''2999850''>put</span> <span m=''3000080''>it</span>
  <span m=''3000170''>in?</span> </p><p><span m=''3002000''>You</span> <span m=''3002110''>have</span>
  <span m=''3002200''>to</span> <span m=''3002280''>get</span> <span m=''3002940''>rid</span>
  <span m=''3003160''>of</span> <span m=''3004190''>the</span> <span m=''3004320''>log</span>
  <span m=''3004810''>base</span> <span m=''3005200''>B</span> <span m=''3005530''>to</span>
  <span m=''3005590''>get</span> <span m=''3005760''>it</span> <span m=''3005850''>down</span>
  <span m=''3006030''>to</span> <span m=''3006120''>log</span> <span m=''3006470''>base</span>
  <span m=''3006790''>B</span> <span m=''3007050''>of</span> <span m=''3007110''>N</span>
  <span m=''3007330''>instead</span> <span m=''3007600''>of</span> <span m=''3007670''>log</span>
  <span m=''3007930''>base</span> <span m=''3008190''>2</span> <span m=''3008400''>of</span>
  <span m=''3008540''>N</span> <span m=''3009660''>for</span> <span m=''3009830''>search</span>
  <span m=''3010150''>costs.</span> <span m=''3010620''>Because</span> <span m=''3011070''>people</span>
  <span m=''3011490''>in</span> <span m=''3011580''>fact</span> <span m=''3011870''>do</span>
  <span m=''3012000''>a</span> <span m=''3012070''>lot</span> <span m=''3012300''>more</span>
  <span m=''3012720''>searches</span> <span m=''3013340''>than--</span> <span m=''3016060''>if</span>
  <span m=''3016220''>you</span> <span m=''3016310''>have</span> <span m=''3016430''>to</span>
  <span m=''3016550''>choose</span> <span m=''3017030''>which</span> <span m=''3017230''>to</span>
  <span m=''3017320''>do</span> <span m=''3017450''>better,</span> <span m=''3017730''>you</span>
  <span m=''3017860''>want</span> <span m=''3018090''>to</span> <span m=''3018200''>generally</span>
  <span m=''3018570''>do</span> <span m=''3018700''>searches</span> <span m=''3019170''>better.</span>
  <span m=''3020260''>And</span> <span m=''3020690''>compression</span> <span m=''3021210''>turns</span>
  <span m=''3021440''>out</span> <span m=''3021550''>to</span> <span m=''3021610''>be</span>
  <span m=''3021970''>important.</span> <span m=''3022550''>I</span> <span m=''3022860''>had</span>
  <span m=''3023140''>one</span> <span m=''3026520''>customer</span> <span m=''3027070''>who</span>
  <span m=''3027860''>had</span> <span m=''3028530''>a</span> <span m=''3028650''>database</span>
  <span m=''3029250''>which</span> <span m=''3029450''>was</span> <span m=''3029690''>300</span>
  <span m=''3030680''>gigabytes.</span> <span m=''3031720''>He has</span> <span m=''3031910''>a</span>
  <span m=''3033320''>whole</span> <span m=''3033490''>bunch</span> <span m=''3033690''>of</span>
  <span m=''3033760''>servers,</span> <span m=''3034220''>and on</span> <span m=''3034460''>each</span>
  <span m=''3034610''>server,</span> <span m=''3034910''>he had</span> <span m=''3035070''>a</span>
  <span m=''3035120''>300</span> <span m=''3035490''>gigabyte</span> <span m=''3035930''>database.</span>
  <span m=''3037260''>And</span> <span m=''3039180''>with</span> <span m=''3039380''>us,</span>
  <span m=''3039610''>it</span> <span m=''3039700''>was</span> <span m=''3039830''>70</span>
  <span m=''3040210''>gigabytes,</span> <span m=''3040780''>because</span> <span m=''3041040''>we</span>
  <span m=''3041170''>compress.</span> </p><p><span m=''3042780''>And</span> <span
  m=''3042890''>we just</span> <span m=''3043060''>do</span> <span m=''3043260''>simple</span>
  <span m=''3043620''>compression</span> <span m=''3044310''>of,</span> <span m=''3044580''>basically,</span>
  <span m=''3045380''>large</span> <span m=''3045760''>blocks.</span> <span m=''3046200''>When</span>
  <span m=''3046350''>we</span> <span m=''3046450''>do</span> <span m=''3046620''>I/Os,</span>
  <span m=''3047060''>we</span> <span m=''3047170''>do</span> <span m=''3047800''>I/Os</span>
  <span m=''3048220''>of</span> <span m=''3048310''>like</span> <span m=''3048510''>a</span>
  <span m=''3048580''>megabyte.</span> <span m=''3051480''>So</span> <span m=''3051710''>when</span>
  <span m=''3051880''>we</span> <span m=''3051980''>take</span> <span m=''3052210''>one</span>
  <span m=''3052360''>of</span> <span m=''3052410''>those</span> <span m=''3052590''>megabytes,</span>
  <span m=''3053620''>we</span> <span m=''3053810''>compress</span> <span m=''3054270''>it.</span>
  <span m=''3054460''>And</span> <span m=''3055260''>it''s</span> <span m=''3055380''>a</span>
  <span m=''3055430''>big</span> <span m=''3055740''>advantage</span> <span m=''3056200''>to</span>
  <span m=''3056310''>compress</span> <span m=''3056690''>a</span> <span m=''3056760''>megabyte</span>
  <span m=''3057310''>at</span> <span m=''3057410''>a</span> <span m=''3057490''>time,</span>
  <span m=''3057790''>instead</span> <span m=''3058060''>of</span> <span m=''3058360''>what--</span>
  <span m=''3059020''>a</span> <span m=''3059110''>lot</span> <span m=''3059270''>of</span>
  <span m=''3059330''>B-trees,</span> <span m=''3059820''>they</span> <span m=''3059980''>have</span>
  <span m=''3060130''>maybe</span> <span m=''3060380''>16</span> <span m=''3060880''>kilobytes.</span>
  <span m=''3062440''>And</span> <span m=''3063200''>gzip</span> <span m=''3063620''>hardly</span>
  <span m=''3063930''>gets</span> <span m=''3064120''>a</span> <span m=''3064180''>chance</span>
  <span m=''3064500''>to</span> <span m=''3064600''>get</span> <span m=''3064750''>anywhere</span>
  <span m=''3065180''>when</span> <span m=''3065330''>you</span> <span m=''3065430''>only</span>
  <span m=''3065580''>have</span> <span m=''3065740''>16</span> <span m=''3066580''>kilobytes.</span>
  <span m=''3067700''>And</span> <span m=''3068060''>it</span> <span m=''3068170''>gets</span>
  <span m=''3068340''>down</span> <span m=''3068510''>to</span> <span m=''3068590''>12</span>
  <span m=''3068980''>kilobytes.</span> <span m=''3069960''>But</span> <span m=''3070160''>if</span>
  <span m=''3070240''>you</span> <span m=''3070350''>have</span> <span m=''3070460''>a</span>
  <span m=''3070520''>megabyte</span> <span m=''3071010''>to</span> <span m=''3071100''>work</span>
  <span m=''3071340''>with</span> <span m=''3071500''>and you</span> <span m=''3071710''>compress</span>
  <span m=''3072140''>it,</span> <span m=''3073000''>particularly</span> <span m=''3073600''>if
  it''s</span> <span m=''3073750''>sorted--</span> <span m=''3074610''>so</span> <span
  m=''3074930''>this</span> <span m=''3075190''>is</span> <span m=''3075250''>a</span>
  <span m=''3075310''>megabyte</span> <span m=''3075800''>of</span> <span m=''3075880''>data</span>
  <span m=''3076150''>that''s</span> <span m=''3076380''>sorted,</span> <span m=''3077060''>so</span>
  <span m=''3077410''>compression</span> <span m=''3077940''>works</span> <span m=''3078180''>pretty</span>
  <span m=''3078360''>well</span> <span m=''3078640''>on</span> <span m=''3078790''>sorted</span>
  <span m=''3079100''>data.</span> <span m=''3079650''>So</span> <span m=''3080260''>you</span>
  <span m=''3080430''>get</span> <span m=''3080590''>factors</span> <span m=''3081010''>of</span>
  <span m=''3081090''>5</span> <span m=''3081490''>or</span> <span m=''3081570''>10</span>
  <span m=''3081820''>or</span> <span m=''3081920''>something.</span> </p><p><span
  m=''3082900''>And</span> <span m=''3084070''>so</span> <span m=''3084270''>we</span>
  <span m=''3084390''>asked</span> <span m=''3084630''>him</span> <span m=''3084770''>to</span>
  <span m=''3084870''>dump</span> <span m=''3085190''>the</span> <span m=''3085290''>data</span>
  <span m=''3085630''>without</span> <span m=''3086020''>the</span> <span m=''3086120''>indexes,</span>
  <span m=''3086950''>so</span> <span m=''3087710''>just</span> <span m=''3087970''>the</span>
  <span m=''3088040''>primary</span> <span m=''3088540''>table</span> <span m=''3088870''>with</span>
  <span m=''3089000''>no</span> <span m=''3089200''>indexes,</span> <span m=''3090000''>and</span>
  <span m=''3090090''>then</span> <span m=''3090190''>run</span> <span m=''3090380''>that</span>
  <span m=''3090680''>through</span> <span m=''3091440''>gzip.</span> <span m=''3091780''>And</span>
  <span m=''3091970''>it</span> <span m=''3092140''>was</span> <span m=''3092340''>50</span>
  <span m=''3092630''>gigabytes.</span> <span m=''3093210''>So</span> <span m=''3094130''>the</span>
  <span m=''3094240''>smallest</span> <span m=''3094740''>he</span> <span m=''3094850''>could</span>
  <span m=''3094980''>store</span> <span m=''3095310''>the</span> <span m=''3095410''>raw</span>
  <span m=''3095670''>data</span> <span m=''3096000''>was</span> <span m=''3096160''>50</span>
  <span m=''3096450''>gigabytes,</span> <span m=''3096930''>and</span> <span m=''3097000''>we</span>
  <span m=''3097100''>were</span> <span m=''3097210''>giving him</span> <span m=''3097480''>a</span>
  <span m=''3097600''>useful</span> <span m=''3097940''>database</span> <span m=''3098480''>that</span>
  <span m=''3098590''>was</span> <span m=''3098750''>70</span> <span m=''3099140''>gigabytes</span>
  <span m=''3099700''>that</span> <span m=''3099780''>had</span> <span m=''3100070''>a</span>
  <span m=''3100180''>bunch</span> <span m=''3100390''>of</span> <span m=''3100460''>indexes.</span>
  <span m=''3101370''>So</span> <span m=''3101520''>he</span> <span m=''3101640''>was</span>
  <span m=''3101810''>like,</span> <span m=''3102090''>yeah.</span> </p><p><span m=''3105150''>And</span>
  <span m=''3105460''>you</span> <span m=''3105540''>have</span> <span m=''3105690''>to</span>
  <span m=''3105820''>deal</span> <span m=''3106040''>with</span> <span m=''3106180''>multithreading</span>
  <span m=''3106970''>and</span> <span m=''3107040''>lots</span> <span m=''3107270''>of</span>
  <span m=''3107360''>clients</span> <span m=''3107770''>and</span> <span m=''3107880''>stuff.</span>
  </p><p><span m=''3108560''>So</span> <span m=''3108720''>here''s</span> <span m=''3110340''>an</span>
  <span m=''3110440''>example.</span> <span m=''3110990''>We</span> <span m=''3111100''>worked</span>
  <span m=''3111410''>with</span> <span m=''3111620''>Mark</span> <span m=''3111860''>Callahan,</span>
  <span m=''3112390''>who</span> <span m=''3112520''>was</span> <span m=''3112700''>at</span>
  <span m=''3112800''>Google</span> <span m=''3113190''>at</span> <span m=''3113270''>the</span>
  <span m=''3113350''>time--</span> <span m=''3113620''>he''s</span> <span m=''3113780''>now</span>
  <span m=''3113980''>at</span> <span m=''3114020''>Facebook--</span> <span m=''3115140''>on</span>
  <span m=''3115270''>trying</span> <span m=''3115440''>to</span> <span m=''3115600''>come</span>
  <span m=''3115830''>up</span> <span m=''3115930''>with</span> <span m=''3116050''>some</span>
  <span m=''3116230''>benchmarks,</span> <span m=''3116790''>because</span> <span
  m=''3116960''>none</span> <span m=''3117140''>of</span> <span m=''3117190''>the</span>
  <span m=''3117300''>benchmarks</span> <span m=''3117890''>out</span> <span m=''3118080''>in</span>
  <span m=''3118140''>the</span> <span m=''3118210''>world</span> <span m=''3121100''>do</span>
  <span m=''3121320''>a</span> <span m=''3121450''>good</span> <span m=''3121740''>job</span>
  <span m=''3122560''>of</span> <span m=''3123650''>measuring</span> <span m=''3124620''>this</span>
  <span m=''3124920''>insertion</span> <span m=''3125400''>performance</span> <span
  m=''3125980''>problem.</span> <span m=''3126820''>So</span> <span m=''3127080''>iiBench</span>
  <span m=''3127970''>is an</span> <span m=''3128220''>insertion</span> <span m=''3128810''>benchmark.</span>
  <span m=''3129860''>And</span> <span m=''3130060''>basically</span> <span m=''3130520''>what</span>
  <span m=''3130720''>it</span> <span m=''3130860''>does</span> <span m=''3131380''>is</span>
  <span m=''3131850''>it</span> <span m=''3132770''>sets</span> <span m=''3133050''>up</span>
  <span m=''3133140''>a</span> <span m=''3133230''>database</span> <span m=''3133900''>with</span>
  <span m=''3134170''>three</span> <span m=''3134500''>indexes,</span> <span m=''3135690''>and</span>
  <span m=''3136300''>the</span> <span m=''3136430''>indexes</span> <span m=''3136820''>are</span>
  <span m=''3136900''>random.</span> <span m=''3138210''>So</span> <span m=''3138520''>it''s</span>
  <span m=''3138710''>actually</span> <span m=''3139160''>harder</span> <span m=''3139590''>than</span>
  <span m=''3139740''>real</span> <span m=''3140060''>workloads.</span> <span m=''3141290''>This</span>
  <span m=''3141550''>workload,</span> <span m=''3142100''>you</span> <span m=''3142190''>basically</span>
  <span m=''3142630''>have</span> <span m=''3142800''>a</span> <span m=''3142870''>row</span>
  <span m=''3143350''>and</span> <span m=''3143520''>then</span> <span m=''3143660''>you</span>
  <span m=''3143790''>create</span> <span m=''3144040''>a</span> <span m=''3144090''>random</span>
  <span m=''3144480''>key</span> <span m=''3144850''>to</span> <span m=''3144930''>point</span>
  <span m=''3145190''>into</span> <span m=''3145390''>that</span> <span m=''3145650''>from</span>
  <span m=''3146930''>three</span> <span m=''3147190''>different</span> <span m=''3147480''>places.</span>
  <span m=''3148230''>Real</span> <span m=''3148550''>databases,</span> <span m=''3149310''>it</span>
  <span m=''3149430''>turns</span> <span m=''3149810''>out,</span> <span m=''3150480''>probably</span>
  <span m=''3150840''>have</span> <span m=''3151030''>more</span> <span m=''3151290''>of</span>
  <span m=''3151460''>a</span> <span m=''3151620''>Zipfian</span> <span m=''3152000''>distribution.</span>
  <span m=''3152620''>Have</span> <span m=''3153820''>you</span> <span m=''3153950''>talked</span>
  <span m=''3154230''>at</span> <span m=''3154340''>all</span> <span m=''3154580''>about</span>
  <span m=''3154870''>Zipfian</span> <span m=''3155250''>distributions</span> <span
  m=''3155940''>of</span> <span m=''3156140''>data?</span> </p><p><span m=''3156660''>So</span>
  <span m=''3156810''>this</span> <span m=''3156960''>is</span> <span m=''3157020''>sort</span>
  <span m=''3157190''>of</span> <span m=''3157270''>an</span> <span m=''3157360''>interesting</span>
  <span m=''3157710''>thing.</span> <span m=''3157850''>If</span> <span m=''3157950''>you''re</span>
  <span m=''3162050''>dealing</span> <span m=''3162390''>with</span> <span m=''3162590''>real-world</span>
  <span m=''3163590''>caches,</span> <span m=''3168040''>you</span> <span m=''3168120''>should</span>
  <span m=''3169810''>know</span> <span m=''3170190''>that</span> <span m=''3170330''>data</span>
  <span m=''3170870''>ain''t</span> <span m=''3171170''>uniformly</span> <span m=''3171870''>randomly</span>
  <span m=''3172330''>distributed.</span> <span m=''3174310''>That''s</span> <span
  m=''3174600''>a</span> <span m=''3174710''>poor</span> <span m=''3175050''>model.</span>
  <span m=''3175970''>So</span> <span m=''3176330''>in</span> <span m=''3176450''>particular,</span>
  <span m=''3176950''>suppose</span> <span m=''3177370''>I</span> <span m=''3177460''>have</span>
  <span m=''3178080''>memory</span> <span m=''3179630''>and</span> <span m=''3179880''>disk,</span>
  <span m=''3182800''>and</span> <span m=''3182940''>this</span> <span m=''3183150''>is</span>
  <span m=''3183290''>10%</span> <span m=''3184940''>of</span> <span m=''3185520''>the</span>
  <span m=''3185620''>disk.</span> <span m=''3186410''>Very</span> <span m=''3186620''>simple</span>
  <span m=''3186950''>situation.</span> <span m=''3187800''>Very</span> <span m=''3188120''>common</span>
  <span m=''3189160''>ratio.</span> <span m=''3189660''>You''ll</span> <span m=''3189840''>see,</span>
  <span m=''3191250''>this</span> <span m=''3191420''>is</span> <span m=''3191540''>how</span>
  <span m=''3191720''>Facebook</span> <span m=''3192190''>sets</span> <span m=''3192420''>up</span>
  <span m=''3192550''>their</span> <span m=''3192690''>databases.</span> <span m=''3195550''>They''ll</span>
  <span m=''3195690''>have</span> <span m=''3195860''>a</span> <span m=''3196020''>300-gigabyte</span>
  <span m=''3196840''>database</span> <span m=''3197630''>and</span> <span m=''3197750''>30</span>
  <span m=''3198000''>gigs</span> <span m=''3198280''>of</span> <span m=''3198400''>RAM.</span>
  <span m=''3199810''>If</span> <span m=''3200110''>the</span> <span m=''3201740''>queries</span>
  <span m=''3202170''>that</span> <span m=''3202280''>you</span> <span m=''3202380''>wanted</span>
  <span m=''3202560''>to</span> <span m=''3202620''>do</span> <span m=''3202990''>were</span>
  <span m=''3203300''>random,</span> <span m=''3205190''>it</span> <span m=''3205360''>wouldn''t</span>
  <span m=''3205710''>matter</span> <span m=''3205960''>what</span> <span m=''3206210''>data</span>
  <span m=''3206430''>structure</span> <span m=''3207290''>you were</span> <span m=''3207420''>using.</span>
  <span m=''3207790''>Let''s</span> <span m=''3207940''>suppose</span> <span m=''3208410''>that</span>
  <span m=''3209510''>God</span> <span m=''3210060''>tells</span> <span m=''3210380''>you</span>
  <span m=''3210530''>where</span> <span m=''3210800''>it</span> <span m=''3210860''>is</span>
  <span m=''3211000''>on</span> <span m=''3211100''>disk,</span> <span m=''3211420''>so</span>
  <span m=''3211520''>you</span> <span m=''3211590''>don''t</span> <span m=''3211720''>have</span>
  <span m=''3211810''>to</span> <span m=''3211910''>find</span> <span m=''3212350''>it.</span>
  <span m=''3212430''>You</span> <span m=''3212530''>just</span> <span m=''3212740''>have</span>
  <span m=''3212850''>to</span> <span m=''3212960''>move</span> <span m=''3213190''>the</span>
  <span m=''3213270''>disk</span> <span m=''3213600''>head</span> <span m=''3213720''>and</span>
  <span m=''3213850''>move</span> <span m=''3214110''>it.</span> </p><p><span m=''3214680''>If</span>
  <span m=''3214830''>they''re</span> <span m=''3214940''>random,</span> <span m=''3215370''>then</span>
  <span m=''3215550''>basically,</span> <span m=''3216770''>no</span> <span m=''3216850''>matter</span>
  <span m=''3217100''>what</span> <span m=''3217310''>you''ve</span> <span m=''3217510''>done,</span>
  <span m=''3219090''>90%</span> <span m=''3220280''>of</span> <span m=''3220440''>the</span>
  <span m=''3220570''>queries</span> <span m=''3220940''>you</span> <span m=''3221040''>have</span>
  <span m=''3221150''>to</span> <span m=''3221240''>do</span> <span m=''3221400''>are</span>
  <span m=''3221510''>going</span> <span m=''3221660''>to</span> <span m=''3221720''>do</span>
  <span m=''3221870''>a</span> <span m=''3221940''>random</span> <span m=''3222360''>disk</span>
  <span m=''3222600''>I/O.</span> <span m=''3224170''>10%</span> <span m=''3224690''>are
  going to</span> <span m=''3224870''>already</span> <span m=''3225190''>be</span>
  <span m=''3225360''>there,</span> <span m=''3225500''>because</span> <span m=''3225670''>you</span>
  <span m=''3225760''>got</span> <span m=''3225930''>lucky.</span> <span m=''3228090''>So</span>
  <span m=''3228870''>that</span> <span m=''3229070''>is</span> <span m=''3229240''>not</span>
  <span m=''3229530''>reflecting</span> <span m=''3230050''>what''s</span> <span m=''3230280''>going</span>
  <span m=''3230570''>on</span> <span m=''3231520''>on</span> <span m=''3231780''>any</span>
  <span m=''3231980''>workload</span> <span m=''3232420''>that</span> <span m=''3232540''>I</span>
  <span m=''3232620''>know.</span> <span m=''3233350''>What</span> <span m=''3233530''>they''ll</span>
  <span m=''3233690''>see</span> <span m=''3233920''>is</span> <span m=''3234080''>more</span>
  <span m=''3234380''>like</span> <span m=''3235010''>99%</span> <span m=''3235910''>of</span>
  <span m=''3236090''>the</span> <span m=''3236170''>queries</span> <span m=''3236610''>hit</span>
  <span m=''3236840''>here,</span> <span m=''3237570''>and</span> <span m=''3237970''>1%</span>
  <span m=''3238370''>go</span> <span m=''3238550''>out</span> <span m=''3238730''>here,</span>
  <span m=''3239110''>or</span> <span m=''3239240''>maybe</span> <span m=''3239510''>95%</span>
  <span m=''3240440''>here</span> <span m=''3240720''>and</span> <span m=''3241230''>5%</span>
  <span m=''3241810''>go</span> <span m=''3242060''>out</span> <span m=''3242350''>there.</span>
  </p><p><span m=''3243150''>And</span> <span m=''3243280''>it</span> <span m=''3243380''>turns</span>
  <span m=''3243690''>out</span> <span m=''3243940''>that,</span> <span m=''3244240''>that</span>
  <span m=''3244520''>for</span> <span m=''3244620''>a</span> <span m=''3244720''>lot</span>
  <span m=''3245020''>of</span> <span m=''3245120''>things,</span> <span m=''3245930''>there</span>
  <span m=''3246220''>is</span> <span m=''3246540''>a</span> <span m=''3247500''>model</span>
  <span m=''3248010''>of</span> <span m=''3248090''>what''s</span> <span m=''3248340''>going</span>
  <span m=''3248540''>on</span> <span m=''3248710''>called</span> <span m=''3249190''>a</span>
  <span m=''3249480''>Zipfian</span> <span m=''3249790''>distribution.</span> <span
  m=''3250710''>This</span> <span m=''3250870''>would</span> <span m=''3251020''>a</span>
  <span m=''3251180''>random</span> <span m=''3251700''>uniform</span> <span m=''3252170''>distribution.</span>
  <span m=''3252525''>It''s</span> <span m=''3252880''>like</span> <span m=''3253060''>every</span>
  <span m=''3253430''>item</span> <span m=''3253780''>has</span> <span m=''3254130''>equal</span>
  <span m=''3254420''>probability</span> <span m=''3255060''>of</span> <span m=''3255120''>being</span>
  <span m=''3255410''>chosen</span> <span m=''3255860''>for</span> <span m=''3256030''>a</span>
  <span m=''3256080''>query.</span> <span m=''3257460''>It</span> <span m=''3257580''>turns</span>
  <span m=''3257850''>out</span> <span m=''3258080''>that</span> <span m=''3259340''>for</span>
  <span m=''3259790''>things</span> <span m=''3260110''>like</span> <span m=''3261490''>what''s</span>
  <span m=''3262820''>the</span> <span m=''3262920''>popularity</span> <span m=''3263700''>of</span>
  <span m=''3263810''>web</span> <span m=''3264080''>pages,</span> <span m=''3264930''>or</span>
  <span m=''3266660''>if</span> <span m=''3266990''>you</span> <span m=''3267150''>have</span>
  <span m=''3268150''>a</span> <span m=''3268550''>library,</span> <span m=''3269530''>what''s</span>
  <span m=''3269760''>the</span> <span m=''3269850''>frequency</span> <span m=''3270590''>at</span>
  <span m=''3270720''>which</span> <span m=''3270910''>words</span> <span m=''3271420''>appear</span>
  <span m=''3271900''>in</span> <span m=''3271990''>the</span> <span m=''3272090''>library--</span>
  <span m=''3272610''>so</span> <span m=''3273010''>words</span> <span m=''3273290''>like</span>
  <span m=''3274330''>&quot;the&quot;</span> <span m=''3274720''>appear</span> <span
  m=''3275000''>frequently,</span> <span m=''3276170''>and</span> <span m=''3276270''>words</span>
  <span m=''3276640''>like</span> <span m=''3276880''>&quot;polymorphic&quot;</span>
  <span m=''3278580''>are</span> <span m=''3278800''>less</span> <span m=''3279170''>frequent.</span>
  <span m=''3279940''>So</span> <span m=''3280830''>Zipf</span> <span m=''3282290''>came</span>
  <span m=''3282500''>up</span> <span m=''3282630''>with</span> <span m=''3282800''>this</span>
  <span m=''3282970''>model,</span> <span m=''3283480''>and</span> <span m=''3283940''>there''s</span>
  <span m=''3284110''>a</span> <span m=''3284170''>simple</span> <span m=''3284520''>version</span>
  <span m=''3284870''>of</span> <span m=''3284990''>the</span> <span m=''3285050''>model,</span>
  <span m=''3285790''>which</span> <span m=''3286000''>says</span> <span m=''3286640''>that</span>
  <span m=''3286810''>the</span> <span m=''3286910''>most</span> <span m=''3287180''>popular</span>
  <span m=''3287650''>word</span> <span m=''3288780''>has</span> <span m=''3290150''>probability</span>
  <span m=''3290920''>proportional</span> <span m=''3291620''>to</span> <span m=''3291700''>1.</span>
  <span m=''3292040''>It''s</span> <span m=''3292240''>not</span> <span m=''3292390''>going</span>
  <span m=''3292490''>to</span> <span m=''3292540''>be</span> <span m=''3292670''>1.</span>
  <span m=''3292990''>It''s</span> <span m=''3293120''>going</span> <span m=''3293190''>to</span>
  <span m=''3293260''>be</span> <span m=''3293360''>proportional</span> <span m=''3293910''>to</span>
  <span m=''3293970''>1.</span> <span m=''3294970''>The</span> <span m=''3295070''>second</span>
  <span m=''3295460''>most</span> <span m=''3295800''>popular</span> <span m=''3296260''>word</span>
  <span m=''3296670''>is</span> <span m=''3296800''>going</span> <span m=''3296910''>to</span>
  <span m=''3297610''>have</span> <span m=''3297810''>1/2.</span> <span m=''3298330''>The</span>
  <span m=''3298400''>third</span> <span m=''3299870''>most</span> <span m=''3300080''>popular</span>
  <span m=''3300470''>word</span> <span m=''3301130''>is</span> <span m=''3301290''>1/3.</span>
  <span m=''3302580''>And</span> <span m=''3302840''>the</span> <span m=''3302920''>fourth</span>
  <span m=''3303260''>most</span> <span m=''3303490''>popular</span> <span m=''3303830''>word</span>
  <span m=''3304080''>is</span> <span m=''3304160''>1/4</span> <span m=''3305270''>the</span>
  <span m=''3305390''>probability</span> <span m=''3306060''>of</span> <span m=''3306160''>the</span>
  <span m=''3306230''>first</span> <span m=''3306540''>word,</span> <span m=''3306790''>and</span>
  <span m=''3306940''>so</span> <span m=''3307090''>forth.</span> </p><p><span m=''3309240''>So</span>
  <span m=''3309370''>if</span> <span m=''3309430''>you</span> <span m=''3309550''>plot</span>
  <span m=''3309890''>this</span> <span m=''3310970''>distribution,</span> <span m=''3312720''>it</span>
  <span m=''3313010''>kind of</span> <span m=''3313140''>looks like</span> <span m=''3313380''>this,</span>
  <span m=''3313700''>right?</span> <span m=''3314440''>It''s</span> <span m=''3314610''>like</span>
  <span m=''3314830''>1</span> <span m=''3315000''>over</span> <span m=''3315220''>x.</span>
  <span m=''3317590''>And</span> <span m=''3318070''>what</span> <span m=''3318610''>would</span>
  <span m=''3318920''>you</span> <span m=''3319070''>tell</span> <span m=''3319330''>me</span>
  <span m=''3319600''>if</span> <span m=''3319750''>I</span> <span m=''3319840''>told</span>
  <span m=''3320130''>you</span> <span m=''3320310''>that</span> <span m=''3320470''>I</span>
  <span m=''3320580''>had</span> <span m=''3320780''>an</span> <span m=''3320930''>infinite</span>
  <span m=''3321940''>universe</span> <span m=''3322510''>of</span> <span m=''3322660''>objects</span>
  <span m=''3323440''>that</span> <span m=''3323600''>had</span> <span m=''3324310''>a</span>
  <span m=''3324400''>probability</span> <span m=''3325040''>distribution</span> <span
  m=''3326630''>like</span> <span m=''3326910''>this.</span> <span m=''3329690''>Does
  that</span> <span m=''3330160''>seem</span> <span m=''3330420''>plausible?</span>
  <span m=''3332740''>Why?</span> <span m=''3333300''>You''re</span> <span m=''3333420''>saying</span>
  <span m=''3333630''>no.</span> </p><p><span m=''3334796''>AUDIENCE:</span> <span
  m=''3335272''>[INAUDIBLE PHRASE]</span> <span m=''3340508''>try adding</span> <span
  m=''3340984''>them all together.</span> </p><p><span m=''3341460''>BRADLEY KUSZMAUL:</span>
  <span m=''3341950''>If</span> <span m=''3342340''>you</span> <span m=''3342500''>add</span>
  <span m=''3342740''>them all</span> <span m=''3342900''>together,</span> <span m=''3343360''>it</span>
  <span m=''3343450''>doesn''t</span> <span m=''3343730''>converge.</span> <span m=''3345520''>So</span>
  <span m=''3345740''>it''s</span> <span m=''3346040''>a</span> <span m=''3346090''>heavy-tailed</span>
  <span m=''3346810''>distribution.</span> </p><p><span m=''3348140''>So</span> <span
  m=''3348400''>it</span> <span m=''3348480''>turns</span> <span m=''3348830''>out</span>
  <span m=''3349040''>that</span> <span m=''3350740''>if</span> <span m=''3350880''>you</span>
  <span m=''3350990''>sum</span> <span m=''3351340''>up</span> <span m=''3351550''>these</span>
  <span m=''3352950''>up</span> <span m=''3353110''>to</span> <span m=''3353220''>1,</span>
  <span m=''3354206''>the</span> <span m=''3354700''>sum</span> <span m=''3355430''>from</span>
  <span m=''3355900''>1</span> <span m=''3356280''>to</span> <span m=''3356540''>n</span>
  <span m=''3359660''>of</span> <span m=''3360070''>1 over i,</span> <span m=''3361180''>it''s</span>
  <span m=''3362010''>the</span> <span m=''3362660''>nth</span> <span m=''3362960''>harmonic</span>
  <span m=''3363500''>number.</span> <span m=''3365540''>And</span> <span m=''3365720''>that</span>
  <span m=''3365970''>grows</span> <span m=''3366440''>over</span> <span m=''3366660''>time.</span>
  <span m=''3367030''>It''s</span> <span m=''3367190''>basically</span> <span m=''3367760''>like</span>
  <span m=''3368120''>the</span> <span m=''3368210''>integral</span> <span m=''3368640''>under</span>
  <span m=''3368810''>this</span> <span m=''3369040''>curve,</span> <span m=''3369870''>from</span>
  <span m=''3372950''>1</span> <span m=''3373210''>to</span> <span m=''3373630''>n.</span>
  <span m=''3374410''>It''s</span> <span m=''3374690''>close</span> <span m=''3375000''>to</span>
  <span m=''3375120''>that.</span> <span m=''3375910''>And</span> <span m=''3375990''>what</span>
  <span m=''3376170''>is</span> <span m=''3376290''>the</span> <span m=''3376360''>integral</span>
  <span m=''3376720''>of</span> <span m=''3376810''>that?</span> <span m=''3380900''>It''s</span>
  <span m=''3381040''>like</span> <span m=''3381230''>something you</span> <span m=''3381560''>learned</span>
  <span m=''3382260''>seven</span> <span m=''3382580''>years</span> <span m=''3382840''>ago,</span>
  <span m=''3383090''>and now</span> <span m=''3383250''>you''ve</span> <span m=''3383380''>forgotten,</span>
  <span m=''3383930''>right?</span> <span m=''3384535''>You</span> <span m=''3384970''>learned</span>
  <span m=''3385340''>it when</span> <span m=''3385540''>you</span> <span m=''3385670''>were</span>
  <span m=''3385860''>sophomores</span> <span m=''3386510''>in</span> <span m=''3386590''>high</span>
  <span m=''3386770''>school,</span> <span m=''3387080''>or</span> <span m=''3387160''>something.</span>
  <span m=''3388510''>So</span> <span m=''3388790''>it''s</span> <span m=''3388910''>approximately</span>
  <span m=''3391150''>log</span> <span m=''3391650''>of</span> <span m=''3391750''>n.</span>
  <span m=''3393770''>It''s</span> <span m=''3393920''>actually</span> <span m=''3394200''>like</span>
  <span m=''3394430''>log</span> <span m=''3394750''>of</span> <span m=''3394860''>n</span>
  <span m=''3396430''>plus</span> <span m=''3397420''>0.57,</span> <span m=''3398850''>is</span>
  <span m=''3398960''>a</span> <span m=''3399000''>very</span> <span m=''3399250''>good</span>
  <span m=''3399410''>approximation</span> <span m=''3400190''>for</span> <span m=''3400300''>the</span>
  <span m=''3400440''>nth</span> <span m=''3400620''>harmonic</span> <span m=''3401060''>number.</span>
  </p><p><span m=''3401630''>When you''re</span> <span m=''3401870''>doing</span>
  <span m=''3402030''>this</span> <span m=''3402190''>kind</span> <span m=''3402320''>of</span>
  <span m=''3402390''>analysis,</span> <span m=''3402970''>boy, it depresses</span>
  <span m=''3403800''>people,</span> <span m=''3404260''>because</span> <span m=''3404520''>you
  say,</span> <span m=''3404850''>oh,</span> <span m=''3405090''>that''s</span> <span
  m=''3405475''>H</span> <span m=''3405860''>of</span> <span m=''3405950''>n,</span>
  <span m=''3406210''>and</span> <span m=''3406690''>if</span> <span m=''3406790''>you</span>
  <span m=''3406890''>have</span> <span m=''3407000''>a</span> <span m=''3407050''>million</span>
  <span m=''3407430''>items</span> <span m=''3407970''>in</span> <span m=''3408080''>your</span>
  <span m=''3408190''>database,</span> <span m=''3409250''>then</span> <span m=''3409930''>the</span>
  <span m=''3410020''>sum</span> <span m=''3410290''>of</span> <span m=''3410380''>all</span>
  <span m=''3410510''>those</span> <span m=''3410740''>things</span> <span m=''3411000''>is</span>
  <span m=''3411160''>H</span> <span m=''3411430''>of</span> <span m=''3411590''>1</span>
  <span m=''3411660''>million,</span> <span m=''3412160''>and what''s</span> <span
  m=''3412380''>H</span> <span m=''3412570''>of</span> <span m=''3412650''>1</span>
  <span m=''3412730''>million?</span> <span m=''3413540''>Well,</span> <span m=''3414190''>the</span>
  <span m=''3414290''>log</span> <span m=''3414690''>base</span> <span m=''3415020''>2</span>
  <span m=''3415240''>of</span> <span m=''3415340''>1</span> <span m=''3415390''>million,</span>
  <span m=''3415750''>I</span> <span m=''3415820''>know</span> <span m=''3416010''>that,</span>
  <span m=''3416660''>because</span> <span m=''3416930''>I''m</span> <span m=''3417150''>a</span>
  <span m=''3417200''>computer</span> <span m=''3417550''>scientist.</span> <span
  m=''3418520''>So</span> <span m=''3418670''>it''s</span> <span m=''3418760''>going</span>
  <span m=''3418870''>to</span> <span m=''3418910''>be</span> <span m=''3418990''>like</span>
  <span m=''3419180''>20,</span> <span m=''3419710''>and</span> <span m=''3419800''>because</span>
  <span m=''3420030''>we''re</span> <span m=''3420130''>doing</span> <span m=''3420300''>log</span>
  <span m=''3420560''>base</span> <span m=''3420950''>e</span> <span m=''3421540''>in</span>
  <span m=''3421740''>that</span> <span m=''3421930''>formula,</span> <span m=''3423320''>maybe</span>
  <span m=''3423530''>it''s</span> <span m=''3423700''>15</span> <span m=''3424140''>or</span>
  <span m=''3424240''>something.</span> <span m=''3425370''>So</span> <span m=''3426950''>if</span>
  <span m=''3427030''>you</span> <span m=''3427130''>have</span> <span m=''3427240''>1</span>
  <span m=''3427300''>million</span> <span m=''3427690''>items,</span> <span m=''3429190''>then</span>
  <span m=''3429490''>the</span> <span m=''3429570''>most</span> <span m=''3429790''>popular</span>
  <span m=''3430220''>item</span> <span m=''3430550''>is</span> <span m=''3430690''>going</span>
  <span m=''3430830''>to--</span> <span m=''3431000''>you</span> <span m=''3431240''>have</span>
  <span m=''3431370''>to</span> <span m=''3431460''>divide</span> <span m=''3431930''>by</span>
  <span m=''3432150''>H</span> <span m=''3432400''>of n</span> <span m=''3432720''>here.</span>
  </p><p><span m=''3433620''>So the</span> <span m=''3433780''>most</span> <span m=''3433940''>popular</span>
  <span m=''3434620''>item</span> <span m=''3434910''>is</span> <span m=''3435030''>going</span>
  <span m=''3435140''>to</span> <span m=''3435250''>appear</span> <span m=''3435540''>1/15</span>
  <span m=''3436260''>of</span> <span m=''3436360''>the</span> <span m=''3436470''>time.</span>
  <span m=''3437360''>And</span> <span m=''3437480''>the</span> <span m=''3437570''>next</span>
  <span m=''3437890''>most</span> <span m=''3438130''>popular</span> <span m=''3438590''>item
  is</span> <span m=''3438970''>going</span> <span m=''3439130''>to appear--</span>
  <span m=''3442260''>emergency</span> <span m=''3442720''>backup</span> <span m=''3443130''>chalk.</span>
  <span m=''3446800''>Somebody''s</span> <span m=''3447220''>been</span> <span m=''3447570''>burning</span>
  <span m=''3447890''>both</span> <span m=''3448110''>ends</span> <span m=''3448290''>of</span>
  <span m=''3448350''>this</span> <span m=''3448550''>chalk.</span> <span m=''3450530''>1/30</span>
  <span m=''3451060''>of</span> <span m=''3451170''>the</span> <span m=''3451270''>time,</span>
  <span m=''3452190''>and</span> <span m=''3452390''>1/45</span> <span m=''3453020''>of</span>
  <span m=''3453120''>the</span> <span m=''3453210''>time,</span> <span m=''3453900''>and</span>
  <span m=''3454120''>those</span> <span m=''3454450''>add</span> <span m=''3454670''>up.</span>
  <span m=''3454810''>When</span> <span m=''3454940''>you</span> <span m=''3455030''>go</span>
  <span m=''3455220''>up</span> <span m=''3455420''>to</span> <span m=''3455910''>1</span>
  <span m=''3456200''>over</span> <span m=''3457010''>1</span> <span m=''3457110''>million--</span>
  <span m=''3461610''>another</span> <span m=''3461890''>zero</span> <span m=''3462170''>in</span>
  <span m=''3462270''>there--</span> <span m=''3463250''>times</span> <span m=''3463620''>15,</span>
  <span m=''3465010''>that</span> <span m=''3465420''>finite</span> <span m=''3465810''>series</span>
  <span m=''3466180''>will add</span> <span m=''3466460''>up</span> <span m=''3466570''>to</span>
  <span m=''3466680''>1,</span> <span m=''3469060''>approximately.</span> <span m=''3470060''>Except</span>
  <span m=''3471090''>to</span> <span m=''3471170''>the</span> <span m=''3471250''>extent</span>
  <span m=''3471560''>that</span> <span m=''3471660''>I''ve</span> <span m=''3471770''>approximated.</span>
  </p><p><span m=''3473150''>So</span> <span m=''3473310''>this</span> <span m=''3473520''>is</span>
  <span m=''3473630''>what''s</span> <span m=''3473840''>going</span> <span m=''3474040''>on.</span>
  <span m=''3475080''>So</span> <span m=''3475290''>the</span> <span m=''3475400''>most</span>
  <span m=''3475690''>popular</span> <span m=''3476660''>Facebook</span> <span m=''3479020''>page--</span>
  <span m=''3481270''>they</span> <span m=''3481370''>might</span> <span m=''3481580''>have</span>
  <span m=''3481760''>1</span> <span m=''3482130''>billion</span> <span m=''3482980''>pages,</span>
  <span m=''3483660''>so</span> <span m=''3484200''>how</span> <span m=''3484350''>does</span>
  <span m=''3484500''>that</span> <span m=''3484690''>change</span> <span m=''3485050''>things?</span>
  <span m=''3485320''>Well,</span> <span m=''3485560''>that</span> <span m=''3485700''>means</span>
  <span m=''3485890''>the</span> <span m=''3485980''>most</span> <span m=''3486230''>popular</span>
  <span m=''3486650''>one</span> <span m=''3487290''>has a</span> <span m=''3487490''>probability</span>
  <span m=''3488120''>1</span> <span m=''3488360''>in</span> <span m=''3488470''>20,</span>
  <span m=''3489360''>and</span> <span m=''3489720''>the</span> <span m=''3489870''>second</span>
  <span m=''3490190''>most</span> <span m=''3490420''>is</span> <span m=''3490540''>1</span>
  <span m=''3490750''>in</span> <span m=''3490840''>40.</span> <span m=''3491860''>And</span>
  <span m=''3492070''>this</span> <span m=''3492270''>explains</span> <span m=''3492780''>why</span>
  <span m=''3493190''>cache</span> <span m=''3493650''>works</span> <span m=''3494390''>for</span>
  <span m=''3494540''>this</span> <span m=''3494750''>kind</span> <span m=''3494920''>of</span>
  <span m=''3495010''>workload.</span> <span m=''3495820''>Nobody</span> <span m=''3496310''>really</span>
  <span m=''3496650''>knows</span> <span m=''3497020''>why</span> <span m=''3498710''>Facebook</span>
  <span m=''3499150''>pages</span> <span m=''3499720''>and</span> <span m=''3499960''>words</span>
  <span m=''3500270''>in</span> <span m=''3500370''>libraries</span> <span m=''3501060''>and</span>
  <span m=''3501140''>everything</span> <span m=''3501530''>else</span> <span m=''3501750''>have</span>
  <span m=''3502620''>this</span> <span m=''3503430''>distribution,</span> <span m=''3504932''>which</span>
  <span m=''3505300''>is</span> <span m=''3505440''>named</span> <span m=''3505700''>after</span>
  <span m=''3508160''>a</span> <span m=''3508250''>guy named</span> <span m=''3508610''>Zipf.</span>
  <span m=''3511660''>But</span> <span m=''3511960''>they</span> <span m=''3512080''>do.</span>
  <span m=''3512510''>Everything</span> <span m=''3512890''>has</span> <span m=''3513110''>this</span>
  <span m=''3513270''>property.</span> <span m=''3513740''>And</span> <span m=''3513920''>so</span>
  <span m=''3514100''>you</span> <span m=''3514250''>can sort of</span> <span m=''3514670''>predict</span>
  <span m=''3514980''>what''s</span> <span m=''3515170''>happening.</span> </p><p><span
  m=''3516000''>So</span> <span m=''3516750''>iiBench</span> <span m=''3517490''>should</span>
  <span m=''3517780''>have</span> <span m=''3517960''>a</span> <span m=''3518110''>Zipfian</span>
  <span m=''3518400''>distribution</span> <span m=''3518920''>and</span> <span m=''3519010''>it</span>
  <span m=''3519120''>doesn''t.</span> <span m=''3519470''>So</span> <span m=''3519570''>this</span>
  <span m=''3519790''>is</span> <span m=''3519920''>painting</span> <span m=''3520300''>a</span>
  <span m=''3520370''>worse</span> <span m=''3520730''>picture.</span> <span m=''3521590''>Or
  a</span> <span m=''3521790''>better</span> <span m=''3522090''>picture.</span> <span
  m=''3522450''>It''s</span> <span m=''3522800''>making</span> <span m=''3523130''>us</span>
  <span m=''3523300''>look</span> <span m=''3523490''>better</span> <span m=''3523770''>than</span>
  <span m=''3524400''>we</span> <span m=''3524510''>really</span> <span m=''3524830''>are,</span>
  <span m=''3525410''>because</span> <span m=''3525610''>the</span> <span m=''3525690''>real</span>
  <span m=''3526000''>world</span> <span m=''3526760''>is</span> <span m=''3526910''>going</span>
  <span m=''3527030''>to</span> <span m=''3527190''>have</span> <span m=''3527360''>more</span>
  <span m=''3528420''>hits</span> <span m=''3529160''>on</span> <span m=''3529380''>the</span>
  <span m=''3529450''>stuff</span> <span m=''3529840''>that''s</span> <span m=''3530050''>in</span>
  <span m=''3530260''>memory</span> <span m=''3530710''>for</span> <span m=''3530940''>a</span>
  <span m=''3530990''>B-tree</span> <span m=''3532410''>than</span> <span m=''3532580''>this</span>
  <span m=''3532800''>model,</span> <span m=''3533450''>where</span> <span m=''3533700''>basically</span>
  <span m=''3534250''>you''re</span> <span m=''3534330''>completely</span> <span m=''3534730''>hosed</span>
  <span m=''3535140''>all</span> <span m=''3535300''>the</span> <span m=''3535380''>time</span>
  <span m=''3535740''>because</span> <span m=''3536240''>it''s</span> <span m=''3536400''>random.</span>
  <span m=''3537720''>So</span> <span m=''3537910''>this</span> <span m=''3538100''>is</span>
  <span m=''3538210''>an</span> <span m=''3538300''>example</span> <span m=''3539340''>in</span>
  <span m=''3539480''>the</span> <span m=''3539570''>category</span> <span m=''3540040''>of</span>
  <span m=''3540100''>how</span> <span m=''3540290''>to</span> <span m=''3540480''>lie</span>
  <span m=''3540790''>with</span> <span m=''3540960''>statistics.</span> <span m=''3542090''>And</span>
  <span m=''3542260''>it''s</span> <span m=''3542580''>a</span> <span m=''3542630''>pretty</span>
  <span m=''3542870''>sophisticated</span> <span m=''3543600''>lie.</span> <span m=''3545650''>If</span>
  <span m=''3546040''>you''re</span> <span m=''3546220''>going to</span> <span m=''3546450''>lie,</span>
  <span m=''3546700''>be</span> <span m=''3546890''>sophisticated.</span> </p><p><span
  m=''3551340''>So</span> <span m=''3551680''>these</span> <span m=''3551880''>measurements</span>
  <span m=''3552340''>were</span> <span m=''3552430''>taken</span> <span m=''3552830''>in</span>
  <span m=''3552930''>the</span> <span m=''3553050''>top</span> <span m=''3553360''>graph.</span>
  <span m=''3554050''>Up</span> <span m=''3554620''>is</span> <span m=''3554790''>good.</span>
  <span m=''3555440''>It''s</span> <span m=''3555600''>how</span> <span m=''3555760''>many</span>
  <span m=''3555920''>rows</span> <span m=''3556240''>per</span> <span m=''3556360''>second</span>
  <span m=''3556680''>we</span> <span m=''3556810''>could</span> <span m=''3556950''>insert.</span>
  <span m=''3557930''>And</span> <span m=''3558500''>this</span> <span m=''3558740''>axis</span>
  <span m=''3559850''>is</span> <span m=''3560080''>how</span> <span m=''3560220''>many</span>
  <span m=''3560390''>rows</span> <span m=''3560690''>have been</span> <span m=''3560790''>inserted</span>
  <span m=''3561320''>so</span> <span m=''3561530''>far.</span> <span m=''3562800''>And</span>
  <span m=''3562970''>the</span> <span m=''3563040''>green</span> <span m=''3563600''>one</span>
  <span m=''3564290''>is</span> <span m=''3564730''>a</span> <span m=''3564830''>B-tree.</span>
  <span m=''3567200''>According</span> <span m=''3567490''>to</span> <span m=''3567780''>Mark</span>
  <span m=''3568290''>Callahan,</span> <span m=''3568840''>who''s</span> <span m=''3569330''>essentially
  a</span> <span m=''3569750''>disinterested</span> <span m=''3570410''>observer,</span>
  <span m=''3571270''>it''s</span> <span m=''3571480''>the</span> <span m=''3571580''>best</span>
  <span m=''3572260''>implementation</span> <span m=''3573000''>of</span> <span m=''3573080''>a</span>
  <span m=''3573140''>B-tree</span> <span m=''3573590''>ever.</span> <span m=''3576130''>And</span>
  <span m=''3576980''>you</span> <span m=''3577140''>can sort</span> <span m=''3577340''>of</span>
  <span m=''3577400''>see</span> <span m=''3577540''>what</span> <span m=''3577690''>happens,</span>
  <span m=''3578100''>is</span> <span m=''3578290''>that as</span> <span m=''3578430''>you</span>
  <span m=''3578630''>insert</span> <span m=''3578840''>stuff,</span> <span m=''3579500''>the</span>
  <span m=''3579610''>system</span> <span m=''3579950''>falls</span> <span m=''3580340''>out</span>
  <span m=''3580470''>of</span> <span m=''3580530''>main</span> <span m=''3580790''>memory,</span>
  <span m=''3581260''>and</span> <span m=''3581370''>the</span> <span m=''3581450''>performance</span>
  <span m=''3581880''>was</span> <span m=''3582020''>really</span> <span m=''3582310''>good</span>
  <span m=''3582510''>at</span> <span m=''3582590''>the</span> <span m=''3582650''>beginning--</span>
  <span m=''3583020''>40,000</span> <span m=''3583740''>per</span> <span m=''3583890''>second--</span>
  <span m=''3584290''>and</span> <span m=''3584400''>then</span> <span m=''3584550''>boom,</span>
  <span m=''3585020''>you''re</span> <span m=''3585140''>down</span> <span m=''3585340''>to</span>
  <span m=''3585420''>200</span> <span m=''3585920''>down</span> <span m=''3586150''>here</span>
  <span m=''3586320''>at</span> <span m=''3586420''>the</span> <span m=''3586540''>end,</span>
  <span m=''3586840''>by</span> <span m=''3586990''>the</span> <span m=''3587090''>time</span>
  <span m=''3587280''>you''ve</span> <span m=''3587410''>inserted</span> <span m=''3587810''>a</span>
  <span m=''3587850''>billion</span> <span m=''3588230''>rows.</span> </p><p><span
  m=''3589170''>Whereas,</span> <span m=''3589870''>for</span> <span m=''3590360''>the</span>
  <span m=''3590610''>fractal</span> <span m=''3591020''>tree,</span> <span m=''3592750''>you</span>
  <span m=''3592940''>can sort</span> <span m=''3593070''>of</span> <span m=''3593200''>see</span>
  <span m=''3593550''>this</span> <span m=''3593760''>noise.</span> <span m=''3594250''>That''s</span>
  <span m=''3594490''>because</span> <span m=''3595830''>some</span> <span m=''3596070''>insertions</span>
  <span m=''3596560''>are</span> <span m=''3596670''>a little</span> <span m=''3596870''>cheaper</span>
  <span m=''3597230''>than</span> <span m=''3597390''>other</span> <span m=''3597640''>insertions.</span>
  <span m=''3599690''>Every</span> <span m=''3599920''>other</span> <span m=''3600100''>insertion''s</span>
  <span m=''3600560''>completely</span> <span m=''3601120''>free,</span> <span m=''3601510''>right?</span>
  <span m=''3601760''>You</span> <span m=''3601830''>had</span> <span m=''3601950''>a</span>
  <span m=''3602070''>free</span> <span m=''3602310''>spot.</span> <span m=''3602630''>You</span>
  <span m=''3602680''>just</span> <span m=''3602860''>put</span> <span m=''3603030''>it</span>
  <span m=''3603130''>in.</span> <span m=''3607610''>One</span> <span m=''3607940''>out</span>
  <span m=''3608030''>of</span> <span m=''3608110''>four</span> <span m=''3608350''>insertions,</span>
  <span m=''3609520''>the</span> <span m=''3609630''>ones</span> <span m=''3609820''>that</span>
  <span m=''3609910''>weren''t</span> <span m=''3610110''>free,</span> <span m=''3610440''>half</span>
  <span m=''3610680''>of</span> <span m=''3610790''>them</span> <span m=''3610910''>only</span>
  <span m=''3611100''>had</span> <span m=''3611240''>to</span> <span m=''3611300''>do</span>
  <span m=''3611830''>a</span> <span m=''3611930''>little</span> <span m=''3612200''>operation</span>
  <span m=''3612760''>in</span> <span m=''3612860''>memory.</span> <span m=''3613260''>So</span>
  <span m=''3613620''>you</span> <span m=''3613770''>see</span> <span m=''3613970''>this</span>
  <span m=''3614130''>high</span> <span m=''3614320''>frequency</span> <span m=''3614870''>noise,</span>
  <span m=''3615813''>because</span> <span m=''3616580''>some</span> <span m=''3616820''>things</span>
  <span m=''3617020''>are</span> <span m=''3617100''>cheaper</span> <span m=''3617410''>than</span>
  <span m=''3617570''>others.</span> <span m=''3618540''>And</span> <span m=''3619390''>that''s</span>
  <span m=''3620150''>like</span> <span m=''3620310''>a</span> <span m=''3620370''>factor</span>
  <span m=''3620770''>of</span> <span m=''3620880''>30</span> <span m=''3621230''>or</span>
  <span m=''3621310''>something.</span> </p><p><span m=''3624640''>It</span> <span
  m=''3624770''>turns</span> <span m=''3625010''>out</span> <span m=''3625150''>it</span>
  <span m=''3625240''>even</span> <span m=''3625450''>works</span> <span m=''3625810''>on</span>
  <span m=''3626370''>SSD,</span> <span m=''3627190''>solid</span> <span m=''3627560''>state</span>
  <span m=''3627870''>disk.</span> <span m=''3628480''>You</span> <span m=''3628630''>might</span>
  <span m=''3628850''>think--</span> <span m=''3629300''>all</span> <span m=''3629500''>this</span>
  <span m=''3629650''>time</span> <span m=''3629980''>I''ve been</span> <span m=''3630250''>talking</span>
  <span m=''3630490''>about disk</span> <span m=''3630720''>drives.</span> <span m=''3631500''>Solid</span>
  <span m=''3631880''>state</span> <span m=''3632190''>disk</span> <span m=''3632460''>has</span>
  <span m=''3632690''>a</span> <span m=''3633080''>complicated</span> <span m=''3633690''>cache</span>
  <span m=''3634000''>hierarchy</span> <span m=''3634440''>inside</span> <span m=''3634880''>it,</span>
  <span m=''3635480''>and</span> <span m=''3635780''>we</span> <span m=''3635900''>were</span>
  <span m=''3636070''>surprised</span> <span m=''3636660''>to</span> <span m=''3636740''>see</span>
  <span m=''3637070''>that</span> <span m=''3637250''>basically</span> <span m=''3638510''>we''re</span>
  <span m=''3638750''>faster</span> <span m=''3639700''>on</span> <span m=''3639830''>this</span>
  <span m=''3639960''>workload</span> <span m=''3640770''>on</span> <span m=''3641280''>a</span>
  <span m=''3641560''>rotating</span> <span m=''3642190''>disk</span> <span m=''3643840''>than</span>
  <span m=''3644900''>a</span> <span m=''3645080''>B-tree</span> <span m=''3645390''>is</span>
  <span m=''3645660''>on</span> <span m=''3645990''>an</span> <span m=''3646510''>SSD,</span>
  <span m=''3647290''>which</span> <span m=''3647560''>is</span> <span m=''3647780''>orders</span>
  <span m=''3648120''>of</span> <span m=''3648190''>magnitude</span> <span m=''3649220''>faster</span>
  <span m=''3649880''>in</span> <span m=''3650010''>principle,</span> <span m=''3650630''>but</span>
  <span m=''3651400''>turns</span> <span m=''3651710''>out</span> <span m=''3651900''>that
  for</span> <span m=''3652100''>various</span> <span m=''3652500''>reasons</span>
  <span m=''3652910''>it''s</span> <span m=''3653080''>not.</span> <span m=''3659440''>One</span>
  <span m=''3659610''>question</span> <span m=''3659950''>I</span> <span m=''3660020''>get</span>
  <span m=''3660240''>often</span> <span m=''3660630''>is,</span> <span m=''3661380''>the</span>
  <span m=''3661480''>world</span> <span m=''3661830''>is</span> <span m=''3661960''>moving</span>
  <span m=''3662320''>away</span> <span m=''3662720''>from</span> <span m=''3663190''>rotating</span>
  <span m=''3663690''>disk</span> <span m=''3664270''>to</span> <span m=''3664630''>solid</span>
  <span m=''3665010''>state</span> <span m=''3665330''>disk.</span> <span m=''3665660''>A</span>
  <span m=''3665730''>lot</span> <span m=''3666030''>of</span> <span m=''3666120''>applications--</span>
  <span m=''3666760''>how</span> <span m=''3666910''>many</span> <span m=''3667070''>of</span>
  <span m=''3667110''>you</span> <span m=''3667310''>have</span> <span m=''3667770''>solid</span>
  <span m=''3668140''>state</span> <span m=''3668360''>disks</span> <span m=''3668570''>in</span>
  <span m=''3668660''>your</span> <span m=''3668770''>laptops?</span> <span m=''3670050''>That''s</span>
  <span m=''3670240''>a</span> <span m=''3670300''>really</span> <span m=''3670780''>good</span>
  <span m=''3670990''>application</span> <span m=''3671670''>for a</span> <span m=''3671880''>solid</span>
  <span m=''3672190''>state</span> <span m=''3672430''>disk,</span> <span m=''3673040''>because</span>
  <span m=''3673910''>it''s</span> <span m=''3674220''>not</span> <span m=''3674480''>sensitive</span>
  <span m=''3674970''>to</span> <span m=''3675070''>being</span> <span m=''3675340''>knocked</span>
  <span m=''3675660''>around.</span> <span m=''3676990''>So</span> <span m=''3677710''>it''s</span>
  <span m=''3677890''>worth</span> <span m=''3678190''>it</span> <span m=''3678420''>to</span>
  <span m=''3678550''>have</span> <span m=''3679230''>a</span> <span m=''3679270''>solid</span>
  <span m=''3679560''>state</span> <span m=''3679770''>disk</span> <span m=''3680020''>even</span>
  <span m=''3680310''>if</span> <span m=''3680410''>it</span> <span m=''3680550''>were</span>
  <span m=''3680680''>more</span> <span m=''3680890''>expensive,</span> <span m=''3681380''>which</span>
  <span m=''3681590''>it</span> <span m=''3681680''>is.</span> <span m=''3682810''>It</span>
  <span m=''3683010''>turns out</span> <span m=''3683150''>it''s</span> <span m=''3683280''>not</span>
  <span m=''3683460''>that</span> <span m=''3683660''>much</span> <span m=''3683850''>more</span>
  <span m=''3684020''>expensive</span> <span m=''3684430''>for</span> <span m=''3684510''>a</span>
  <span m=''3684590''>laptop.</span> <span m=''3684950''>It''s</span> <span m=''3685090''>a</span>
  <span m=''3685200''>couple</span> <span m=''3685310''>of</span> <span m=''3685430''>hundred</span>
  <span m=''3685700''>dollars</span> <span m=''3685970''>more</span> <span m=''3686050''>or</span>
  <span m=''3686370''>something.</span> </p><p><span m=''3687990''>But</span> <span
  m=''3688200''>the</span> <span m=''3688320''>advantage</span> <span m=''3688770''>of</span>
  <span m=''3688910''>it</span> <span m=''3689010''>is</span> <span m=''3689210''>that</span>
  <span m=''3689560''>if  you</span> <span m=''3689660''>go</span> <span m=''3689840''>up</span>
  <span m=''3690010''>in</span> <span m=''3690130''>an</span> <span m=''3690250''>airplane</span>
  <span m=''3690940''>and</span> <span m=''3691340''>you''re</span> <span m=''3691570''>sitting</span>
  <span m=''3691930''>and</span> <span m=''3692070''>trying</span> <span m=''3692300''>to</span>
  <span m=''3692370''>type</span> <span m=''3692660''>in</span> <span m=''3692730''>the</span>
  <span m=''3692820''>middle</span> <span m=''3693000''>of</span> <span m=''3693080''>a</span>
  <span m=''3693120''>thunderstorm,</span> <span m=''3693890''>flying</span> <span
  m=''3694200''>across--</span> <span m=''3695140''>it</span> <span m=''3695670''>doesn''t</span>
  <span m=''3695930''>care.</span> <span m=''3698410''>Disk</span> <span m=''3698680''>drives,</span>
  <span m=''3699260''>if</span> <span m=''3699480''>you</span> <span m=''3699590''>do</span>
  <span m=''3699750''>that--</span> <span m=''3700415''>disk</span> <span m=''3700980''>drives</span>
  <span m=''3701240''>do</span> <span m=''3701410''>not</span> <span m=''3701700''>like</span>
  <span m=''3701940''>flying</span> <span m=''3702350''>at</span> <span m=''3702430''>high</span>
  <span m=''3702630''>altitude,</span> <span m=''3703160''>because</span> <span m=''3703700''>they</span>
  <span m=''3704170''>work</span> <span m=''3704540''>by</span> <span m=''3704850''>having</span>
  <span m=''3705120''>a</span> <span m=''3705210''>cushion</span> <span m=''3705580''>of</span>
  <span m=''3705690''>air</span> <span m=''3705900''>that</span> <span m=''3706080''>the</span>
  <span m=''3706550''>head</span> <span m=''3706770''>is</span> <span m=''3706930''>flying</span>
  <span m=''3707380''>on,</span> <span m=''3708020''>and</span> <span m=''3708160''>in</span>
  <span m=''3708380''>airplanes,</span> <span m=''3710010''>which</span> <span m=''3710260''>pressurize</span>
  <span m=''3710810''>the</span> <span m=''3710900''>cabin</span> <span m=''3711270''>to</span>
  <span m=''3712580''>the</span> <span m=''3712670''>same</span> <span m=''3712950''>altitude</span>
  <span m=''3713410''>as</span> <span m=''3713520''>8,000</span> <span m=''3714020''>feet,</span>
  <span m=''3714550''>that''s</span> <span m=''3714770''>half</span> <span m=''3715080''>an</span>
  <span m=''3715200''>atmosphere.</span> <span m=''3716450''>So</span> <span m=''3716610''>there''s</span>
  <span m=''3716790''>only</span> <span m=''3716990''>half</span> <span m=''3717280''>as</span>
  <span m=''3717420''>much</span> <span m=''3718470''>air</span> <span m=''3718790''>keeping</span>
  <span m=''3719100''>it</span> <span m=''3719190''>off.</span> <span m=''3719340''>So</span>
  <span m=''3720820''>if</span> <span m=''3720960''>you</span> <span m=''3721060''>travel</span>
  <span m=''3721460''>a</span> <span m=''3721500''>lot,</span> <span m=''3721810''>that''s</span>
  <span m=''3722030''>when</span> <span m=''3722160''>your</span> <span m=''3722270''>disk</span>
  <span m=''3722520''>drive will</span> <span m=''3722830''>fail,</span> <span m=''3723280''>is
  when</span> <span m=''3723410''>you''re</span> <span m=''3723500''>flying.</span>
  </p><p><span m=''3726100''>OK.</span> <span m=''3728790''>So</span> <span m=''3729940''>it</span>
  <span m=''3730170''>looks</span> <span m=''3730440''>like,</span> <span m=''3730730''>however</span>
  <span m=''3731210''>that</span> <span m=''3731380''>rotating</span> <span m=''3731940''>disk</span>
  <span m=''3732330''>is</span> <span m=''3732480''>getting</span> <span m=''3732940''>cheaper</span>
  <span m=''3733730''>faster</span> <span m=''3735260''>then</span> <span m=''3735450''>solid</span>
  <span m=''3735820''>state</span> <span m=''3736140''>disk</span> <span m=''3736460''>is.</span>
  <span m=''3736810''>So rotating</span> <span m=''3737250''>disk</span> <span m=''3737540''>is</span>
  <span m=''3738200''>an</span> <span m=''3738450''>order</span> <span m=''3738730''>of</span>
  <span m=''3738770''>magnitude</span> <span m=''3739280''>cheaper</span> <span m=''3739970''>per</span>
  <span m=''3740180''>byte</span> <span m=''3741200''>than</span> <span m=''3741360''>solid</span>
  <span m=''3741730''>state</span> <span m=''3742030''>disk</span> <span m=''3742260''>today.</span>
  <span m=''3743250''>Maybe</span> <span m=''3743640''>two</span> <span m=''3743820''>orders</span>
  <span m=''3744090''>of</span> <span m=''3744170''>magnitude</span> <span m=''3744640''>cheaper.</span>
  <span m=''3745010''>It''s</span> <span m=''3745170''>hard</span> <span m=''3745850''>to</span>
  <span m=''3745930''>measure</span> <span m=''3746340''>fairly.</span> <span m=''3747480''>But</span>
  <span m=''3748170''>rotating</span> <span m=''3748620''>disk,</span> <span m=''3748960''>according</span>
  <span m=''3749330''>to</span> <span m=''3749640''>Seagate--</span> <span m=''3750470''>they''re</span>
  <span m=''3750600''>saying,</span> <span m=''3751660''>by</span> <span m=''3751820''>the</span>
  <span m=''3751940''>end</span> <span m=''3752050''>of</span> <span m=''3752110''>the</span>
  <span m=''3752180''>decade,</span> <span m=''3752660''>we''ll</span> <span m=''3752810''>have</span>
  <span m=''3753000''>70</span> <span m=''3753650''>terabyte</span> <span m=''3753900''>drives</span>
  <span m=''3756160''>that are</span> <span m=''3756310''>the</span> <span m=''3756450''>same</span>
  <span m=''3756730''>form</span> <span m=''3757060''>factor.</span> <span m=''3758870''>And</span>
  <span m=''3759070''>so</span> <span m=''3759140''>you</span> <span m=''3759320''>figure</span>
  <span m=''3759600''>out</span> <span m=''3759780''>what</span> <span m=''3760050''>the</span>
  <span m=''3760160''>Moore''s</span> <span m=''3760510''>Law</span> <span m=''3761030''>is</span>
  <span m=''3761330''>for</span> <span m=''3761450''>that,</span> <span m=''3761750''>and</span>
  <span m=''3761870''>it''s</span> <span m=''3762060''>better</span> <span m=''3762630''>than</span>
  <span m=''3763650''>for</span> <span m=''3763950''>lithography.</span> <span m=''3765330''>Lithography</span>
  <span m=''3765840''>is</span> <span m=''3765970''>not</span> <span m=''3766250''>going</span>
  <span m=''3766380''>to</span> <span m=''3766440''>be</span> <span m=''3766580''>that</span>
  <span m=''3766830''>much</span> <span m=''3768460''>more</span> <span m=''3768670''>dense</span>
  <span m=''3769260''>in</span> <span m=''3769430''>that</span> <span m=''3769660''>timeframe.</span>
  <span m=''3770580''>So</span> <span m=''3770770''>at</span> <span m=''3770880''>least</span>
  <span m=''3771280''>for</span> <span m=''3771420''>the</span> <span m=''3772170''>next</span>
  <span m=''3772540''>5 or 10</span> <span m=''3773110''>years,</span> <span m=''3774580''>it</span>
  <span m=''3774660''>looks</span> <span m=''3774910''>like</span> <span m=''3775190''>disk</span>
  <span m=''3775440''>drives</span> <span m=''3775830''>are</span> <span m=''3775900''>going</span>
  <span m=''3776040''>to</span> <span m=''3776120''>maintain</span> <span m=''3777260''>their</span>
  <span m=''3777770''>cost</span> <span m=''3778150''>advantage</span> <span m=''3778660''>over</span>
  <span m=''3779460''>solid</span> <span m=''3779810''>state</span> <span m=''3780090''>storage,</span>
  <span m=''3780810''>and</span> <span m=''3780950''>maybe</span> <span m=''3781230''>even</span>
  <span m=''3781450''>spread</span> <span m=''3781860''>that</span> <span m=''3782050''>cost</span>
  <span m=''3782340''>advantage.</span> </p><p><span m=''3782770''>So</span> <span
  m=''3783580''>for</span> <span m=''3783750''>any</span> <span m=''3783950''>particular</span>
  <span m=''3784590''>application,</span> <span m=''3785270''>for</span> <span m=''3785390''>storing</span>
  <span m=''3785780''>your</span> <span m=''3785920''>music,</span> <span m=''3787460''>SSD</span>
  <span m=''3787960''>will</span> <span m=''3788050''>be</span> <span m=''3788170''>cheap</span>
  <span m=''3788400''>enough,</span> <span m=''3788640''>but</span> <span m=''3788800''>for</span>
  <span m=''3788900''>those</span> <span m=''3789120''>people</span> <span m=''3789390''>that
  have</span> <span m=''3789790''>really</span> <span m=''3790060''>big</span> <span
  m=''3790280''>data</span> <span m=''3790530''>sets,</span> <span m=''3790930''>like</span>
  <span m=''3791560''>these</span> <span m=''3791710''>new</span> <span m=''3791820''>telescopes</span>
  <span m=''3792410''>they''re</span> <span m=''3792530''>putting</span> <span m=''3792830''>up--</span>
  <span m=''3793510''>these</span> <span m=''3793800''>new</span> <span m=''3794080''>telescopes</span>
  <span m=''3794560''>are</span> <span m=''3794640''>crazy.</span> <span m=''3795040''>These</span>
  <span m=''3795180''>people</span> <span m=''3795430''>are</span> <span m=''3795480''>putting</span>
  <span m=''3795720''>up</span> <span m=''3795800''>these</span> <span m=''3795970''>telescopes.</span>
  <span m=''3797480''>They''re</span> <span m=''3797580''>putting</span> <span m=''3797840''>up</span>
  <span m=''3797950''>1,500</span> <span m=''3798560''>telescopes</span> <span m=''3799090''>across</span>
  <span m=''3799440''>the</span> <span m=''3799540''>Australian</span> <span m=''3800100''>Outback.</span>
  <span m=''3801300''>And</span> <span m=''3801600''>each</span> <span m=''3801820''>of</span>
  <span m=''3801900''>those</span> <span m=''3802100''>telescopes</span> <span m=''3802700''>in</span>
  <span m=''3802770''>the</span> <span m=''3802850''>first</span> <span m=''3803190''>15</span>
  <span m=''3803610''>minutes</span> <span m=''3803950''>live</span> <span m=''3804370''>is</span>
  <span m=''3804510''>going</span> <span m=''3804620''>to</span> <span m=''3804660''>produce</span>
  <span m=''3804980''>more</span> <span m=''3805210''>data</span> <span m=''3805500''>than</span>
  <span m=''3805640''>has</span> <span m=''3805810''>come</span> <span m=''3805980''>down</span>
  <span m=''3806260''>from</span> <span m=''3806870''>the</span> <span m=''3806940''>Hubble,</span>
  <span m=''3808030''>total.</span> <span m=''3809910''>And</span> <span m=''3811040''>there''s</span>
  <span m=''3811850''>just</span> <span m=''3812050''>no</span> <span m=''3812220''>way</span>
  <span m=''3812620''>for</span> <span m=''3812750''>them</span> <span m=''3813010''>to--</span>
  <span m=''3813690''>I</span> <span m=''3813800''>don''t</span> <span m=''3813910''>know</span>
  <span m=''3814010''>what</span> <span m=''3814200''>they''re</span> <span m=''3814320''>going</span>
  <span m=''3814460''>to</span> <span m=''3814530''>do.</span> <span m=''3814760''>But</span>
  <span m=''3814950''>it''s</span> <span m=''3815130''>a</span> <span m=''3815170''>huge</span>
  <span m=''3815430''>amount</span> <span m=''3815660''>of</span> <span m=''3815730''>data,</span>
  <span m=''3816500''>and</span> <span m=''3816770''>they''re</span> <span m=''3816900''>going</span>
  <span m=''3817040''>to</span> <span m=''3817140''>have</span> <span m=''3817250''>to</span>
  <span m=''3817340''>use</span> <span m=''3817550''>disks</span> <span m=''3817920''>to</span>
  <span m=''3818010''>store</span> <span m=''3818370''>whatever</span> <span m=''3818730''>it</span>
  <span m=''3818790''>is</span> <span m=''3818910''>that</span> <span m=''3819040''>they</span>
  <span m=''3819110''>want</span> <span m=''3819310''>to</span> <span m=''3819370''>keep.</span>
  <span m=''3820010''>And</span> <span m=''3820100''>they</span> <span m=''3820170''>don''t</span>
  <span m=''3820410''>like</span> <span m=''3820610''>throwing</span> <span m=''3820940''>away</span>
  <span m=''3821170''>data,</span> <span m=''3821360''>because</span> <span m=''3821620''>it''s</span>
  <span m=''3821780''>so</span> <span m=''3821950''>expensive</span> <span m=''3822360''>to</span>
  <span m=''3822470''>make.</span> <span m=''3823790''>So</span> <span m=''3824150''>if</span>
  <span m=''3824280''>I</span> <span m=''3824320''>were</span> <span m=''3824490''>a</span>
  <span m=''3824550''>disk</span> <span m=''3824830''>maker,</span> <span m=''3825180''>I''d</span>
  <span m=''3825410''>make</span> <span m=''3825610''>sure</span> <span m=''3825810''>that</span>
  <span m=''3825940''>my</span> <span m=''3826170''>salesmen</span> <span m=''3826580''>had</span>
  <span m=''3826720''>an</span> <span m=''3826960''>office</span> <span m=''3827400''>somewhere</span>
  <span m=''3827730''>out</span> <span m=''3827890''>there.</span> </p><p><span m=''3831930''>So</span>
  <span m=''3832140''>the</span> <span m=''3832240''>conclusion</span> <span m=''3832700''>is</span>
  <span m=''3832800''>you''re</span> <span m=''3832890''>not</span> <span m=''3833120''>going</span>
  <span m=''3833220''>to</span> <span m=''3833290''>be</span> <span m=''3833440''>able</span>
  <span m=''3833630''>to,</span> <span m=''3833810''>at</span> <span m=''3833870''>least</span>
  <span m=''3834090''>for</span> <span m=''3834210''>those</span> <span m=''3834720''>applications,</span>
  <span m=''3835650''>just</span> <span m=''3835890''>have</span> <span m=''3836020''>an</span>
  <span m=''3836130''>index</span> <span m=''3836540''>in</span> <span m=''3836660''>main</span>
  <span m=''3836860''>memory.</span> <span m=''3837250''>You''re</span> <span m=''3837300''>going</span>
  <span m=''3837400''>to</span> <span m=''3837510''>have</span> <span m=''3837660''>to</span>
  <span m=''3837760''>have</span> <span m=''3838740''>a</span> <span m=''3838840''>data</span>
  <span m=''3839040''>structure</span> <span m=''3839320''>that</span> <span m=''3839430''>works</span>
  <span m=''3839720''>well</span> <span m=''3839960''>on</span> <span m=''3840110''>disk.</span>
  </p><p><span m=''3843520''>The</span> <span m=''3843740''>speed</span> <span m=''3844020''>trends--</span>
  <span m=''3845740''>well,</span> <span m=''3846440''>seek</span> <span m=''3846770''>time
  is</span> <span m=''3847240''>not</span> <span m=''3847500''>going</span> <span
  m=''3847620''>to</span> <span m=''3847710''>change.</span> <span m=''3848530''>It</span>
  <span m=''3848630''>hasn''t</span> <span m=''3848940''>changed.</span> <span m=''3849350''>It''s</span>
  <span m=''3849510''>not</span> <span m=''3849700''>going</span> <span m=''3849800''>to</span>
  <span m=''3849900''>change.</span> <span m=''3850970''>The</span> <span m=''3851070''>bandwidth</span>
  <span m=''3852140''>of</span> <span m=''3852310''>a</span> <span m=''3852400''>disk</span>
  <span m=''3852660''>drive</span> <span m=''3853510''>grows</span> <span m=''3853830''>with</span>
  <span m=''3854020''>the</span> <span m=''3854090''>square</span> <span m=''3854570''>root</span>
  <span m=''3854870''>of</span> <span m=''3855000''>its</span> <span m=''3855150''>capacity.</span>
  <span m=''3856440''>So</span> <span m=''3856660''>if</span> <span m=''3856750''>you</span>
  <span m=''3856890''>quadruple</span> <span m=''3857900''>the</span> <span m=''3858080''>storage</span>
  <span m=''3858490''>on</span> <span m=''3858570''>the</span> <span m=''3858660''>disk</span>
  <span m=''3858900''>because</span> <span m=''3859150''>you''ve</span> <span m=''3859330''>made</span>
  <span m=''3860030''>the</span> <span m=''3860130''>bits</span> <span m=''3860480''>twice</span>
  <span m=''3860890''>as</span> <span m=''3861950''>dense</span> <span m=''3862220''>in</span>
  <span m=''3862320''>each</span> <span m=''3862870''>dimension,</span> <span m=''3863920''>then</span>
  <span m=''3864500''>one</span> <span m=''3864710''>spin</span> <span m=''3864970''>of</span>
  <span m=''3865060''>the</span> <span m=''3865140''>disk</span> <span m=''3865420''>sees</span>
  <span m=''3866040''>twice</span> <span m=''3866420''>as</span> <span m=''3866540''>many</span>
  <span m=''3866760''>disks,</span> <span m=''3867400''>not</span> <span m=''3867600''>four</span>
  <span m=''3867800''>times</span> <span m=''3868040''>as</span> <span m=''3868150''>many</span>
  <span m=''3868370''>disks.</span> <span m=''3869310''>So</span> <span m=''3869750''>that</span>
  <span m=''3869990''>projects</span> <span m=''3870410''>out</span> <span m=''3870570''>to</span>
  <span m=''3870630''>something</span> <span m=''3870950''>like</span> <span m=''3871570''>disks</span>
  <span m=''3871940''>that</span> <span m=''3872040''>are</span> <span m=''3872110''>500</span>
  <span m=''3872650''>megabytes</span> <span m=''3873150''>per</span> <span m=''3873290''>second.</span>
  <span m=''3874210''>So</span> <span m=''3874470''>how</span> <span m=''3874630''>long</span>
  <span m=''3874900''>is it</span> <span m=''3875060''>going to</span> <span m=''3875250''>take</span>
  <span m=''3875930''>to</span> <span m=''3876040''>back</span> <span m=''3876330''>up</span>
  <span m=''3876430''>a</span> <span m=''3876500''>67</span> <span m=''3877370''>terabyte</span>
  <span m=''3877650''>disk drive?</span> </p><p><span m=''3882860''>So</span> <span
  m=''3884060''>there</span> <span m=''3884310''>remain</span> <span m=''3885740''>systems</span>
  <span m=''3886360''>problems.</span> <span m=''3887700''>And</span> <span m=''3888910''>I</span>
  <span m=''3888990''>was</span> <span m=''3889120''>explaining</span> <span m=''3889620''>to</span>
  <span m=''3889780''>my</span> <span m=''3889920''>son</span> <span m=''3890820''>that</span>
  <span m=''3891190''>there''s</span> <span m=''3891360''>all</span> <span m=''3891510''>these</span>
  <span m=''3891720''>problems</span> <span m=''3892530''>in</span> <span m=''3892880''>systems.</span>
  <span m=''3894020''>Data</span> <span m=''3894280''>structures</span> <span m=''3895880''>aren''t</span>
  <span m=''3896080''>suited,</span> <span m=''3896600''>and</span> <span m=''3897890''>all</span>
  <span m=''3898360''>these</span> <span m=''3898630''>systems</span> <span m=''3898960''>suck.</span>
  <span m=''3899320''>He said,</span> <span m=''3900530''>well,</span> <span m=''3900730''>isn''t</span>
  <span m=''3901050''>that</span> <span m=''3901230''>horrible</span> <span m=''3901660''>if</span>
  <span m=''3901740''>you''re</span> <span m=''3901880''>computer</span> <span m=''3902250''>scientist?</span>
  <span m=''3902790''>I said,</span> <span m=''3902830''>no,</span> <span m=''3904130''>because</span>
  <span m=''3908390''>we</span> <span m=''3908560''>make</span> <span m=''3908780''>our</span>
  <span m=''3908920''>living</span> <span m=''3909650''>off</span> <span m=''3910210''>of</span>
  <span m=''3910350''>these</span> <span m=''3910600''>problems.</span> <span m=''3914060''>So</span>
  <span m=''3914290''>here</span> <span m=''3914450''>are</span> <span m=''3914500''>some</span>
  <span m=''3914720''>problems.</span> <span m=''3915270''>There''s</span> <span m=''3915680''>plenty</span>
  <span m=''3915980''>of</span> <span m=''3916060''>living</span> <span m=''3916390''>to</span>
  <span m=''3916490''>be</span> <span m=''3916630''>made</span> <span m=''3916920''>yet.</span>
  </p><p><span m=''3923760''>Power</span> <span m=''3924210''>consumption</span> <span
  m=''3924830''>is</span> <span m=''3924960''>also</span> <span m=''3925280''>a</span>
  <span m=''3925370''>big</span> <span m=''3925700''>issue</span> <span m=''3925990''>for</span>
  <span m=''3926120''>these</span> <span m=''3926370''>things.</span> <span m=''3926630''>If</span>
  <span m=''3926720''>you</span> <span m=''3926870''>fill</span> <span m=''3927250''>up</span>
  <span m=''3927370''>a</span> <span m=''3927780''>room</span> <span m=''3929860''>a</span>
  <span m=''3930160''>Google</span> <span m=''3930500''>data</span> <span m=''3930760''>center,</span>
  <span m=''3931500''>a</span> <span m=''3931600''>room</span> <span m=''3931930''>which</span>
  <span m=''3932130''>is</span> <span m=''3932300''>probably</span> <span m=''3932660''>bigger</span>
  <span m=''3933080''>than</span> <span m=''3933260''>this</span> <span m=''3933460''>room,</span>
  <span m=''3934710''>full</span> <span m=''3934930''>of</span> <span m=''3935010''>machines.</span>
  <span m=''3936960''>The</span> <span m=''3937190''>Facebook</span> <span m=''3937650''>data</span>
  <span m=''3937890''>center</span> <span m=''3938630''>is</span> <span m=''3938730''>probably</span>
  <span m=''3939060''>a</span> <span m=''3939130''>room</span> <span m=''3939370''>about</span>
  <span m=''3939720''>this</span> <span m=''3939930''>size,</span> <span m=''3940310''>full
  of</span> <span m=''3940590''>machines.</span> <span m=''3941690''>And</span> <span
  m=''3942480''>power</span> <span m=''3944320''>and</span> <span m=''3944400''>cooling</span>
  <span m=''3944685''>is</span> <span m=''3944970''>something</span> <span m=''3945320''>like</span>
  <span m=''3945530''>half</span> <span m=''3945880''>the</span> <span m=''3945990''>cost</span>
  <span m=''3946420''>of</span> <span m=''3946880''>the</span> <span m=''3947010''>machines.</span>
  <span m=''3947440''>The</span> <span m=''3947520''>machines</span> <span m=''3950230''>for</span>
  <span m=''3950330''>something</span> <span m=''3950630''>like</span> <span m=''3950850''>Facebook,</span>
  <span m=''3952450''>the</span> <span m=''3952610''>hardware</span> <span m=''3952940''>might</span>
  <span m=''3953140''>cost</span> <span m=''3953430''>them</span> <span m=''3953570''>$10
  million</span> <span m=''3953780''>or</span> <span m=''3953850''>$20</span> <span
  m=''3954140''>million</span> <span m=''3954760''>a</span> <span m=''3954800''>year,</span>
  <span m=''3955020''>and</span> <span m=''3955100''>the</span> <span m=''3955160''>heating</span>
  <span m=''3955440''>and</span> <span m=''3955550''>cooling</span> <span m=''3955900''>is</span>
  <span m=''3956020''>another</span> <span m=''3956280''>$10 million</span> <span
  m=''3956480''>or</span> <span m=''3956550''>$20</span> <span m=''3956800''>million</span>
  <span m=''3957410''>a year,</span> <span m=''3957900''>which</span> <span m=''3958000''>is</span>
  <span m=''3958110''>why</span> <span m=''3958290''>they</span> <span m=''3958380''>go</span>
  <span m=''3958540''>off</span> <span m=''3958780''>and</span> <span m=''3958880''>they</span>
  <span m=''3958980''>build</span> <span m=''3959670''>these</span> <span m=''3959860''>data</span>
  <span m=''3960080''>centers</span> <span m=''3960500''>in</span> <span m=''3961240''>places</span>
  <span m=''3961710''>like</span> <span m=''3962020''>North</span> <span m=''3962310''>Carolina,</span>
  <span m=''3962890''>where</span> <span m=''3963100''>I</span> <span m=''3963160''>guess</span>
  <span m=''3963430''>they''re</span> <span m=''3963550''>willing</span> <span m=''3964790''>to</span>
  <span m=''3965360''>give</span> <span m=''3965510''>them</span> <span m=''3965640''>power</span>
  <span m=''3965970''>for</span> <span m=''3966100''>free</span> <span m=''3966390''>or</span>
  <span m=''3966480''>something.</span> <span m=''3968350''>So</span> <span m=''3968550''>making</span>
  <span m=''3968950''>good</span> <span m=''3969180''>use</span> <span m=''3969450''>of</span>
  <span m=''3969570''>disk</span> <span m=''3970070''>bandwidth</span> <span m=''3970390''>offers</span>
  <span m=''3970790''>huge</span> <span m=''3971100''>power</span> <span m=''3971460''>savings,</span>
  <span m=''3971960''>because</span> <span m=''3972240''>basically</span> <span m=''3974300''>you</span>
  <span m=''3974480''>can</span> <span m=''3974620''>use</span> <span m=''3974830''>disks</span>
  <span m=''3975250''>which</span> <span m=''3975440''>are</span> <span m=''3975530''>cheaper</span>
  <span m=''3975930''>than</span> <span m=''3976060''>solid</span> <span m=''3976460''>state</span>
  <span m=''3976810''>for</span> <span m=''3976920''>power.</span> <span m=''3977450''>And</span>
  <span m=''3979611''>you</span> <span m=''3980340''>want</span> <span m=''3980520''>to</span>
  <span m=''3980560''>use</span> <span m=''3980790''>that</span> <span m=''3981010''>well.</span>
  </p><p><span m=''3984000''>CPU</span> <span m=''3984510''>trends.</span> <span m=''3985110''>Well,</span>
  <span m=''3985230''>you''ve</span> <span m=''3985340''>probably</span> <span m=''3985600''>talked</span>
  <span m=''3985880''>about</span> <span m=''3986130''>this,</span> <span m=''3986360''>right?</span>
  <span m=''3986900''>CPUs</span> <span m=''3987630''>are</span> <span m=''3987850''>going</span>
  <span m=''3988030''>to</span> <span m=''3988070''>get</span> <span m=''3988170''>a</span>
  <span m=''3988230''>lot</span> <span m=''3988470''>more</span> <span m=''3988710''>cores.</span>
  <span m=''3990600''>I</span> <span m=''3990730''>actually</span> <span m=''3991030''>have</span>
  <span m=''3991230''>a</span> <span m=''3991270''>48-core</span> <span m=''3992090''>machine</span>
  <span m=''3993270''>that</span> <span m=''3993470''>cost</span> <span m=''3993770''>$10,000</span>
  <span m=''3995030''>that</span> <span m=''3995160''>I</span> <span m=''3995210''>bought</span>
  <span m=''3995890''>about</span> <span m=''3996110''>a</span> <span m=''3996170''>month</span>
  <span m=''3996400''>ago.</span> <span m=''3997340''>And</span> <span m=''3999120''>our</span>
  <span m=''3999370''>customers</span> <span m=''4000660''>mostly</span> <span m=''4001080''>use</span>
  <span m=''4001360''>machines</span> <span m=''4001690''>that</span> <span m=''4001790''>are</span>
  <span m=''4001840''>like</span> <span m=''4002050''>$5,000</span> <span m=''4003100''>machines.</span>
  <span m=''4004000''>So</span> <span m=''4004300''>when</span> <span m=''4004600''>I</span>
  <span m=''4004830''>provisioned</span> <span m=''4005440''>this</span> <span m=''4005620''>machine,</span>
  <span m=''4005920''>I</span> <span m=''4005970''>said,</span> <span m=''4006140''>well,</span>
  <span m=''4006540''>I</span> <span m=''4006610''>should</span> <span m=''4006830''>spend</span>
  <span m=''4007080''>and</span> <span m=''4007130''>buy</span> <span m=''4007320''>a</span>
  <span m=''4007380''>machine</span> <span m=''4007730''>that''s</span> <span m=''4007960''>twice</span>
  <span m=''4008340''>as</span> <span m=''4008610''>good</span> <span m=''4008830''>as</span>
  <span m=''4008960''>what</span> <span m=''4009370''>they''re</span> <span m=''4009610''>buying,</span>
  <span m=''4010040''>because</span> <span m=''4010410''>I''m</span> <span m=''4010610''>developing</span>
  <span m=''4011420''>software</span> <span m=''4011880''>that</span> <span m=''4012030''>they''re</span>
  <span m=''4012140''>going</span> <span m=''4012240''>to</span> <span m=''4012280''>use</span>
  <span m=''4012540''>next</span> <span m=''4012780''>year.</span> <span m=''4015010''>So</span>
  <span m=''4015220''>I</span> <span m=''4015320''>bought</span> <span m=''4015500''>a</span>
  <span m=''4015550''>$10,000</span> <span m=''4016270''>machine,</span> <span m=''4016680''>which</span>
  <span m=''4016840''>is</span> <span m=''4016970''>48</span> <span m=''4017420''>cores.</span>
  <span m=''4018440''>And</span> <span m=''4021100''>we''re</span> <span m=''4021240''>having</span>
  <span m=''4021460''>all</span> <span m=''4021590''>sorts</span> <span m=''4021870''>of</span>
  <span m=''4022680''>making</span> <span m=''4023080''>a</span> <span m=''4023160''>living</span>
  <span m=''4023500''>with</span> <span m=''4023630''>that</span> <span m=''4023820''>machine.</span>
  <span m=''4026110''>The</span> <span m=''4026610''>memory</span> <span m=''4026890''>bandwidth</span>
  <span m=''4027360''>and</span> <span m=''4027530''>the I/O</span> <span m=''4027810''>bus</span>
  <span m=''4028360''>bandwidth will</span> <span m=''4028790''>grow.</span> <span
  m=''4029790''>And</span> <span m=''4030110''>so</span> <span m=''4031060''>I</span>
  <span m=''4031270''>think</span> <span m=''4032820''>it''s</span> <span m=''4033120''>going</span>
  <span m=''4033230''>to</span> <span m=''4033270''>get</span> <span m=''4033470''>more</span>
  <span m=''4033690''>and</span> <span m=''4033750''>more</span> <span m=''4033920''>exciting</span>
  <span m=''4034370''>to</span> <span m=''4034410''>try</span> <span m=''4034580''>to</span>
  <span m=''4034640''>use</span> <span m=''4034900''>all</span> <span m=''4035020''>these</span>
  <span m=''4035210''>cores.</span> <span m=''4035970''>Fractal</span> <span m=''4036350''>trees</span>
  <span m=''4038160''>have</span> <span m=''4038290''>a</span> <span m=''4038430''>lot</span>
  <span m=''4038710''>of</span> <span m=''4038830''>opportunity</span> <span m=''4039370''>to</span>
  <span m=''4039450''>use</span> <span m=''4040130''>those</span> <span m=''4040400''>cores</span>
  <span m=''4041180''>to</span> <span m=''4041420''>improve</span> <span m=''4042120''>and</span>
  <span m=''4042720''>reduce</span> <span m=''4043030''>the</span> <span m=''4043110''>number</span>
  <span m=''4043300''>of</span> <span m=''4043390''>disk I/Os.</span> </p><p><span
  m=''4045510''>So</span> <span m=''4046920''>the</span> <span m=''4047020''>conclusion</span>
  <span m=''4048170''>is,</span> <span m=''4048500''>basically,</span> <span m=''4049620''>these</span>
  <span m=''4049900''>data structures</span> <span m=''4051080''>dominate</span> <span
  m=''4052630''>B-trees</span> <span m=''4053670''>asymptotically.</span> <span m=''4055850''>And</span>
  <span m=''4056150''>then</span> <span m=''4056720''>B-trees</span> <span m=''4057140''>have</span>
  <span m=''4057300''>40</span> <span m=''4057620''>years</span> <span m=''4057920''>of</span>
  <span m=''4058010''>engineering</span> <span m=''4059860''>advantage,</span> <span
  m=''4060510''>but</span> <span m=''4060870''>that</span> <span m=''4061070''>will</span>
  <span m=''4061200''>evaporate</span> <span m=''4061700''>eventually.</span> <span
  m=''4065300''>These</span> <span m=''4065500''>data</span> <span m=''4065710''>structures</span>
  <span m=''4066240''>ride</span> <span m=''4066700''>better</span> <span m=''4067000''>technology</span>
  <span m=''4067600''>curves</span> <span m=''4068050''>than</span> <span m=''4068170''>B-trees</span>
  <span m=''4068770''>do,</span> <span m=''4069600''>and</span> <span m=''4069810''>so</span>
  <span m=''4070480''>I</span> <span m=''4070730''>find</span> <span m=''4071010''>it</span>
  <span m=''4071100''>hard</span> <span m=''4071390''>to</span> <span m=''4071470''>believe</span>
  <span m=''4072070''>that</span> <span m=''4072380''>in</span> <span m=''4072550''>10</span>
  <span m=''4072810''>years</span> <span m=''4073810''>that</span> <span m=''4074360''>anybody</span>
  <span m=''4074880''>would</span> <span m=''4075070''>design</span> <span m=''4075400''>a</span>
  <span m=''4075460''>system</span> <span m=''4075830''>using</span> <span m=''4076140''>a</span>
  <span m=''4076180''>B-tree,</span> <span m=''4076660''>because</span> <span m=''4078420''>how</span>
  <span m=''4078550''>do</span> <span m=''4078620''>you</span> <span m=''4078740''>overcome</span>
  <span m=''4079860''>those</span> <span m=''4080130''>advantages.</span> <span m=''4080700''>So</span>
  <span m=''4080860''>basically</span> <span m=''4081490''>all</span> <span m=''4081730''>storage</span>
  <span m=''4082040''>systems</span> <span m=''4082400''>are</span> <span m=''4082470''>going</span>
  <span m=''4082590''>to</span> <span m=''4082630''>use</span> <span m=''4083430''>data</span>
  <span m=''4083660''>structures</span> <span m=''4084230''>that</span> <span m=''4084380''>are</span>
  <span m=''4085080''>like</span> <span m=''4085380''>this,</span> <span m=''4086340''>or</span>
  <span m=''4086490''>something</span> <span m=''4086780''>else.</span> </p><p><span
  m=''4086940''>There''s</span> <span m=''4087070''>a</span> <span m=''4087130''>whole</span>
  <span m=''4087310''>bunch</span> <span m=''4087510''>of</span> <span m=''4087680''>other</span>
  <span m=''4087960''>kinds</span> <span m=''4088190''>of</span> <span m=''4088280''>indexes</span>
  <span m=''4088750''>that</span> <span m=''4088850''>we</span> <span m=''4089000''>haven''t</span>
  <span m=''4089320''>attacked,</span> <span m=''4089820''>things</span> <span m=''4090120''>like</span>
  <span m=''4091070''>indexing</span> <span m=''4091650''>multi-dimensional</span>
  <span m=''4092450''>data</span> <span m=''4094490''>or</span> <span m=''4094660''>indexing</span>
  <span m=''4096319''>data</span> <span m=''4096740''>where</span> <span m=''4097090''>you
  have</span> <span m=''4097479''>very</span> <span m=''4097859''>large</span> <span
  m=''4098819''>keys,</span> <span m=''4099359''>very</span> <span m=''4099609''>large</span>
  <span m=''4099939''>rows.</span> <span m=''4102189''>Imagine</span> <span m=''4102680''>that</span>
  <span m=''4102840''>you''re</span> <span m=''4102979''>trying</span> <span m=''4103260''>to</span>
  <span m=''4103370''>index</span> <span m=''4103840''>DNA</span> <span m=''4104290''>sequences,</span>
  <span m=''4105240''>which</span> <span m=''4105450''>are</span> <span m=''4105729''>much</span>
  <span m=''4106010''>bigger</span> <span m=''4106390''>than</span> <span m=''4107340''>a</span>
  <span m=''4108560''>disk</span> <span m=''4108830''>block.</span> <span m=''4109520''>So</span>
  <span m=''4110359''>there''s</span> <span m=''4110490''>a</span> <span m=''4110560''>whole</span>
  <span m=''4110729''>bunch</span> <span m=''4110930''>of</span> <span m=''4111390''>interesting</span>
  <span m=''4112210''>opportunities.</span> <span m=''4113160''>And</span> <span m=''4116560''>that''s</span>
  <span m=''4116740''>what</span> <span m=''4116859''>I''m</span> <span m=''4116950''>working</span>
  <span m=''4117229''>on.</span> </p><p><span m=''4117880''>So</span> <span m=''4119200''>any</span>
  <span m=''4119359''>questions</span> <span m=''4119990''>or</span> <span m=''4120090''>comments?</span>
  <span m=''4121660''>Arguments?</span> <span m=''4123109''>Fistfights?</span> <span
  m=''4133540''>OK.</span> </p><p><span m=''4134232''>AUDIENCE:</span> <span m=''4134580''>Where''s
  the mic?</span> </p><p><span m=''4135359''>BRADLEY KUSZMAUL: Where</span> <span
  m=''4135720''>is</span> <span m=''4135960''>the</span> <span m=''4136050''>mic?</span>
  </p><p><span m=''4137138''>AUDIENCE:</span> <span m=''4137616''>That''s OK.</span>
  <span m=''4138094''>I can</span> <span m=''4138572''>[INAUDIBLE].</span> </p><p><span
  m=''4139528''>BRADLEY KUSZMAUL:</span> <span m=''4140010''>It''s on</span> <span
  m=''4140250''>my</span> <span m=''4140370''>coat.</span> </p><p><span m=''4145122''>PROFESSOR:</span>
  <span m=''4145590''>So</span> <span m=''4145830''>actually,</span> <span m=''4146100''>this</span>
  <span m=''4146290''>is</span> <span m=''4146450''>a</span> <span m=''4146660''>very</span>
  <span m=''4146830''>interesting</span> <span m=''4147270''>point,</span> <span m=''4147540''>because</span>
  <span m=''4149020''>if</span> <span m=''4149130''>you</span> <span m=''4149240''>think</span>
  <span m=''4149510''>where</span> <span m=''4149810''>the</span> <span m=''4149890''>world</span>
  <span m=''4150149''>is</span> <span m=''4150319''>leading,</span> <span m=''4150729''>I</span>
  <span m=''4150819''>think</span> <span m=''4150920''>that</span> <span m=''4151029''>big</span>
  <span m=''4151439''>data</span> <span m=''4152420''>is</span> <span m=''4152620''>something</span>
  <span m=''4152990''>that''s</span> <span m=''4153300''>very, very</span> <span m=''4153680''>interesting,</span>
  <span m=''4154109''>because</span> <span m=''4154760''>all</span> <span m=''4155029''>these</span>
  <span m=''4155189''>people</span> <span m=''4155500''>are</span> <span m=''4155540''>gathering</span>
  <span m=''4155920''>huge</span> <span m=''4156399''>amounts</span> <span m=''4156689''>of</span>
  <span m=''4156819''>data,</span> <span m=''4157580''>and</span> <span m=''4157760''>they''re</span>
  <span m=''4158050''>storing</span> <span m=''4158330''>huge</span> <span m=''4158680''>amounts</span>
  <span m=''4158930''>of</span> <span m=''4159050''>data.</span> <span m=''4159330''>And</span>
  <span m=''4159910''>what</span> <span m=''4160229''>do</span> <span m=''4160350''>with</span>
  <span m=''4160569''>data,</span> <span m=''4160779''>accessing</span> <span m=''4161229''>them,</span>
  <span m=''4161830''>is</span> <span m=''4161970''>going</span> <span m=''4162069''>to</span>
  <span m=''4162180''>be</span> <span m=''4162300''>one</span> <span m=''4162490''>big</span>
  <span m=''4162670''>problem.</span> <span m=''4163080''>I</span> <span m=''4163120''>mean,</span>
  <span m=''4163899''>if</span> <span m=''4163979''>you</span> <span m=''4164060''>look</span>
  <span m=''4164189''>at</span> <span m=''4164300''>what</span> <span m=''4164490''>people</span>
  <span m=''4164670''>like</span> <span m=''4164790''>Google</span> <span m=''4165120''>are</span>
  <span m=''4165189''>doing,</span> <span m=''4165890''>they''re</span> <span m=''4166380''>just</span>
  <span m=''4166740''>collecting</span> <span m=''4167180''>all those.</span> <span
  m=''4167710''>Nobody''s</span> <span m=''4167939''>throwing</span> <span m=''4168250''>anything</span>
  <span m=''4168529''>out.</span> <span m=''4169250''>And</span> <span m=''4170580''>I
  believe</span> <span m=''4170729''>if</span> <span m=''4170819''>you</span> <span
  m=''4170890''>to</span> <span m=''4171000''>kind</span> <span m=''4171310''>of</span>
  <span m=''4171580''>look</span> <span m=''4171770''>at</span> <span m=''4171970''>them,</span>
  <span m=''4173040''>analyze</span> <span m=''4173600''>them,</span> <span m=''4174800''>do</span>
  <span m=''4175029''>cool</span> <span m=''4175310''>things</span> <span m=''4175500''>with
  the</span> <span m=''4175689''>data,</span> <span m=''4176170''>it''s</span> <span
  m=''4176550''>going to be very,</span> <span m=''4176890''>very</span> <span m=''4177080''>important.</span>
  </p><p><span m=''4178080''>So</span> <span m=''4178960''>I</span> <span m=''4179109''>think</span>
  <span m=''4179260''>that</span> <span m=''4179420''>would</span> <span m=''4179580''>be</span>
  <span m=''4179729''>very</span> <span m=''4179979''>interesting,</span> <span m=''4180729''>high-performance</span>
  <span m=''4181520''>end.</span> <span m=''4183160''>It''s</span> <span m=''4183950''>not</span>
  <span m=''4184229''>just</span> <span m=''4184729''>doing</span> <span m=''4185140''>number</span>
  <span m=''4185420''>crunching.</span> <span m=''4186220''>Until</span> <span m=''4186319''>now,
  when</span> <span m=''4186420''>people</span> <span m=''4186790''>look</span> <span
  m=''4187020''>at</span> <span m=''4187569''>high-performance,</span> <span m=''4187729''>it''s</span>
  <span m=''4188180''>about</span> <span m=''4188510''>CPU.</span> <span m=''4188960''>It''s</span>
  <span m=''4189189''>about</span> <span m=''4189479''>how many</span> <span m=''4190550''>FLOPS</span>
  <span m=''4191069''>per</span> <span m=''4191279''>second</span> <span m=''4191640''>can</span>
  <span m=''4191810''>you</span> <span m=''4191950''>do?</span> <span m=''4192290''>TeraFLOPS,</span>
  <span m=''4193090''>petaFLOP</span> <span m=''4193529''>machines</span> <span m=''4193920''>and</span>
  <span m=''4194029''>stuff</span> <span m=''4194290''>like</span> <span m=''4194480''>that.</span>
  <span m=''4195060''>But</span> <span m=''4195230''>I</span> <span m=''4195280''>think</span>
  <span m=''4195440''>one</span> <span m=''4195670''>thing</span> <span m=''4195790''>that''s</span>
  <span m=''4195980''>really</span> <span m=''4196140''>interesting</span> <span m=''4196600''>is</span>
  <span m=''4196770''>it''s</span> <span m=''4196930''>not</span> <span m=''4197230''>petaFLOPS.</span>
  <span m=''4198250''>How</span> <span m=''4198590''>many</span> <span m=''4199120''>terabytes</span>
  <span m=''4199480''>of</span> <span m=''4199610''>data</span> <span m=''4199880''>can</span>
  <span m=''4200020''>you</span> <span m=''4200200''>process</span> <span m=''4200690''>through
  to</span> <span m=''4201000''>find</span> <span m=''4201320''>something.</span>
  </p><p><span m=''4203150''>BRADLEY KUSZMAUL:</span> <span m=''4203630''>So</span>
  <span m=''4205160''>I</span> <span m=''4205200''>was</span> <span m=''4205380''>at</span>
  <span m=''4205470''>a</span> <span m=''4205560''>talk</span> <span m=''4205890''>by</span>
  <span m=''4206030''>Facebook,</span> <span m=''4206610''>and</span> <span m=''4206940''>they</span>
  <span m=''4209120''>serve</span> <span m=''4209580''>37</span> <span m=''4210430''>gigabytes</span>
  <span m=''4211140''>per</span> <span m=''4211370''>data</span> <span m=''4212170''>per</span>
  <span m=''4212330''>second</span> <span m=''4214030''>out</span> <span m=''4214170''>of</span>
  <span m=''4214300''>their</span> <span m=''4214410''>database</span> <span m=''4215000''>tier.</span>
  <span m=''4217310''>And</span> <span m=''4222130''>that''s</span> <span m=''4222340''>a</span>
  <span m=''4222420''>lot</span> <span m=''4222780''>of</span> <span m=''4222880''>serving.</span>
  <span m=''4225130''>Out of one</span> <span m=''4225340''>little</span> <span m=''4225570''>piece</span>
  <span m=''4225840''>of</span> <span m=''4226210''>whatever</span> <span m=''4226640''>they''re</span>
  <span m=''4226780''>doing.</span> <span m=''4229780''>Those</span> <span m=''4229990''>guys</span>
  <span m=''4230270''>have</span> <span m=''4231020''>three</span> <span m=''4231310''>or</span>
  <span m=''4231360''>five</span> <span m=''4231770''>petabytes.</span> <span m=''4233860''>And</span>
  <span m=''4234040''>in</span> <span m=''4234920''>the</span> <span m=''4235280''>petabyte</span>
  <span m=''4235510''>club,</span> <span m=''4235780''>they''re</span> <span m=''4235930''>small</span>
  <span m=''4236250''>potatoes.</span> <span m=''4238680''>There''s</span> <span m=''4239110''>people</span>
  <span m=''4239430''>who have</span> <span m=''4239700''>hundreds</span> <span m=''4240150''>of</span>
  <span m=''4240250''>petabytes,</span> <span m=''4241710''>people</span> <span m=''4242040''>with</span>
  <span m=''4242230''>three-letter</span> <span m=''4242910''>acronyms.</span> </p><p><span
  m=''4246448''>PROFESSOR:</span> <span m=''4246920''>I</span> <span m=''4247030''>mean,</span>
  <span m=''4247130''>some</span> <span m=''4247330''>of</span> <span m=''4247380''>those</span>
  <span m=''4247480''>three-letter</span> <span m=''4248000''>acronym</span> <span
  m=''4248795''>places,</span> <span m=''4250020''>the</span> <span m=''4250130''>amount</span>
  <span m=''4250430''>of</span> <span m=''4250590''>data</span> <span m=''4250900''>they</span>
  <span m=''4250990''>are</span> <span m=''4251840''>getting</span> <span m=''4252060''>and</span>
  <span m=''4252150''>they are</span> <span m=''4252270''>processing</span> <span
  m=''4252590''>is</span> <span m=''4252910''>just</span> <span m=''4253610''>gigantic.</span>
  <span m=''4255000''>And</span> <span m=''4255880''>I</span> <span m=''4256000''>think</span>
  <span m=''4256540''>to a</span> <span m=''4256800''>point</span> <span m=''4257070''>that</span>
  <span m=''4258190''>even</span> <span m=''4258590''>some</span> <span m=''4258760''>of</span>
  <span m=''4258850''>the</span> <span m=''4259730''>interesting</span> <span m=''4260170''>things</span>
  <span m=''4260360''>about--</span> <span m=''4261936''>if</span> <span m=''4262380''>they</span>
  <span m=''4262660''>keep</span> <span m=''4263080''>growing</span> <span m=''4263680''>their</span>
  <span m=''4264020''>data</span> <span m=''4264270''>centers</span> <span m=''4264620''>at</span>
  <span m=''4265060''>the</span> <span m=''4265770''>rate they</span> <span m=''4266040''>keep</span>
  <span m=''4266250''>growing</span> <span m=''4267450''>in</span> <span m=''4268000''>the</span>
  <span m=''4268090''>next</span> <span m=''4268470''>couple</span> <span m=''4268670''>of</span>
  <span m=''4268860''>decades,</span> <span m=''4269040''>they</span> <span m=''4269170''>will</span>
  <span m=''4269490''>need the</span> <span m=''4269630''>entire</span> <span m=''4269920''>power</span>
  <span m=''4270210''>of the</span> <span m=''4270390''>United</span> <span m=''4270580''>States</span>
  <span m=''4270870''>to power their</span> <span m=''4271290''>data</span> <span
  m=''4271490''>centers,</span> <span m=''4271840''>because</span> <span m=''4272010''>they</span>
  <span m=''4272485''>are at</span> <span m=''4272960''>that</span> <span m=''4273220''>kind</span>
  <span m=''4273460''>of</span> <span m=''4273560''>thing</span> <span m=''4273780''>at</span>
  <span m=''4273880''>this</span> <span m=''4274040''>point.</span> <span m=''4276940''>Even</span>
  <span m=''4277330''>in</span> <span m=''4277450''>these</span> <span m=''4277680''>big</span>
  <span m=''4279470''>national</span> <span m=''4279840''>labs,</span> <span m=''4280760''>the</span>
  <span m=''4281430''>reason</span> <span m=''4281750''>they</span> <span m=''4281890''>can''t</span>
  <span m=''4282150''>expand</span> <span m=''4282780''>is</span> <span m=''4282920''>not</span>
  <span m=''4283140''>that</span> <span m=''4283350''>they</span> <span m=''4283560''>don''t</span>
  <span m=''4283720''>have</span> <span m=''4283840''>money</span> <span m=''4284080''>to</span>
  <span m=''4284170''>buy</span> <span m=''4284360''>the</span> <span m=''4284480''>machines,</span>
  <span m=''4285180''>but</span> <span m=''4285480''>they</span> <span m=''4285580''>don''t</span>
  <span m=''4285770''>have</span> <span m=''4285940''>money</span> <span m=''4286180''>to</span>
  <span m=''4286290''>pay</span> <span m=''4286540''>for the</span> <span m=''4286690''>electricity,</span>
  <span m=''4287210''>and</span> <span m=''4287320''>also</span> <span m=''4287550''>they</span>
  <span m=''4287660''>don''t</span> <span m=''4287860''>have</span> <span m=''4288110''>electricity--</span>
  <span m=''4288560''>that</span> <span m=''4288750''>much</span> <span m=''4288900''>electricity--</span>
  <span m=''4289560''>[UNINTELLIGIBLE]</span> <span m=''4290820''>them</span> <span
  m=''4291140''>to</span> <span m=''4291210''>basically</span> <span m=''4291670''>feed</span>
  <span m=''4292000''>it.</span> </p><p><span m=''4292672''>BRADLEY KUSZMAUL:</span>
  <span m=''4293010''>I''ve</span> <span m=''4293270''>run</span> <span m=''4293460''>into</span>
  <span m=''4293990''>people</span> <span m=''4294490''>for</span> <span m=''4294850''>whom</span>
  <span m=''4295090''>the</span> <span m=''4295190''>power</span> <span m=''4295740''>issue</span>
  <span m=''4296120''>was</span> <span m=''4296450''>a</span> <span m=''4296530''>big</span>
  <span m=''4296770''>deal.</span> <span m=''4297010''>I</span> <span m=''4297110''>look</span>
  <span m=''4297330''>at</span> <span m=''4297450''>it</span> <span m=''4297670''>and
  say,</span> <span m=''4297925''>eh,</span> <span m=''4298810''>you bought</span>
  <span m=''4298970''>a</span> <span m=''4299490''>$5,000</span> <span m=''4300270''>machine.</span>
  <span m=''4300780''>You</span> <span m=''4300860''>spend</span> <span m=''4301140''>$5,000</span>
  <span m=''4301990''>in</span> <span m=''4302100''>power</span> <span m=''4302470''>over</span>
  <span m=''4302590''>the</span> <span m=''4302660''>lifetime</span> <span m=''4303110''>of</span>
  <span m=''4303180''>the</span> <span m=''4303260''>machine.</span> <span m=''4304230''>It</span>
  <span m=''4304490''>doesn''t</span> <span m=''4304770''>seem</span> <span m=''4304970''>like</span>
  <span m=''4305180''>it''s</span> <span m=''4305860''>that</span> <span m=''4306150''>big</span>
  <span m=''4306330''>a</span> <span m=''4306360''>deal.</span> <span m=''4307390''>But</span>
  <span m=''4307960''>they''ve</span> <span m=''4308270''>filled</span> <span m=''4308580''>up</span>
  <span m=''4308690''>their</span> <span m=''4308790''>data</span> <span m=''4309020''>center,</span>
  <span m=''4309460''>and</span> <span m=''4309930''>the</span> <span m=''4310060''>cost</span>
  <span m=''4310400''>of</span> <span m=''4310490''>adding</span> <span m=''4310780''>one</span>
  <span m=''4310970''>more</span> <span m=''4311190''>machine</span> <span m=''4311980''>has</span>
  <span m=''4312240''>a</span> <span m=''4312280''>huge</span> <span m=''4312700''>incremental</span>
  <span m=''4313120''>cost,</span> <span m=''4314120''>because</span> <span m=''4314310''>they</span>
  <span m=''4314450''>can''t</span> <span m=''4315590''>fit one</span> <span m=''4315770''>more</span>
  <span m=''4316040''>in.</span> <span m=''4316470''>So</span> <span m=''4316570''>that</span>
  <span m=''4316670''>means</span> <span m=''4316790''>they have</span> <span m=''4316980''>to</span>
  <span m=''4317050''>build</span> <span m=''4317650''>another</span> <span m=''4318210''>building.</span>
  <span m=''4319330''>And</span> <span m=''4321530''>so</span> <span m=''4323050''>almost</span>
  <span m=''4323410''>everybody''s</span> <span m=''4323920''>facing</span> <span
  m=''4324250''>that</span> <span m=''4324440''>problem</span> <span m=''4325930''>who''s</span>
  <span m=''4326160''>in</span> <span m=''4326260''>this</span> <span m=''4326440''>business.</span>
  <span m=''4329260''>And</span> <span m=''4329380''>then</span> <span m=''4329490''>they</span>
  <span m=''4329590''>try</span> <span m=''4329780''>to</span> <span m=''4329880''>build</span>
  <span m=''4330070''>a</span> <span m=''4330110''>building</span> <span m=''4330460''>somewhere</span>
  <span m=''4330830''>where</span> <span m=''4330980''>there''s</span> <span m=''4331300''>natural</span>
  <span m=''4331710''>cooled--</span> <span m=''4332350''>Google''s</span> <span m=''4332770''>written</span>
  <span m=''4333040''>these</span> <span m=''4333250''>papers</span> <span m=''4333710''>about,</span>
  <span m=''4334170''>oh, it</span> <span m=''4334340''>turns</span> <span m=''4334590''>out</span>
  <span m=''4334800''>if you</span> <span m=''4334870''>don''t</span> <span m=''4335150''>air</span>
  <span m=''4335330''>condition</span> <span m=''4335710''>your</span> <span m=''4335850''>computers,</span>
  <span m=''4336340''>most</span> <span m=''4336610''>of</span> <span m=''4336670''>them</span>
  <span m=''4336740''>work</span> <span m=''4337160''>anyway.</span> <span m=''4344180''>So,</span>
  <span m=''4345220''>well,</span> <span m=''4345710''>air</span> <span m=''4346080''>conditioning</span>
  <span m=''4346550''>is a quarter</span> <span m=''4346940''>of</span> <span m=''4347010''>the</span>
  <span m=''4347090''>cost</span> <span m=''4347460''>over</span> <span m=''4347620''>the</span>
  <span m=''4347710''>lifetime</span> <span m=''4348200''>of</span> <span m=''4348260''>the</span>
  <span m=''4348350''>computer.</span> <span m=''4348880''>So</span> <span m=''4349350''>if
  you</span> <span m=''4349470''>can</span> <span m=''4350030''>make</span> <span
  m=''4350490''>more</span> <span m=''4350750''>than</span> <span m=''4350900''>3/4</span>
  <span m=''4351550''>of</span> <span m=''4352250''>them</span> <span m=''4352620''>give</span>
  <span m=''4352770''>you</span> <span m=''4352880''>service,</span> <span m=''4353490''>you</span>
  <span m=''4353980''>come</span> <span m=''4354150''>out</span> <span m=''4354330''>ahead.</span>
  </p><p><span m=''4356815''>GUEST SPEAKER:</span> <span m=''4357270''>On</span> <span
  m=''4357440''>that</span> <span m=''4357670''>note,</span> <span m=''4358440''>MIT</span>
  <span m=''4358970''>is</span> <span m=''4359180''>part</span> <span m=''4359370''>of</span>
  <span m=''4359570''>a</span> <span m=''4359780''>consortium</span> <span m=''4360660''>that</span>
  <span m=''4360770''>includes</span> <span m=''4361900''>Harvard,</span> <span m=''4363300''>Northeastern,</span>
  <span m=''4365140''>Boston</span> <span m=''4365590''>University,</span> <span m=''4366800''>and</span>
  <span m=''4367060''>University</span> <span m=''4367500''>of</span> <span m=''4367560''>Massachusetts</span>
  <span m=''4368320''>Amherst,</span> <span m=''4369360''>to</span> <span m=''4370130''>relocate</span>
  <span m=''4371050''>all</span> <span m=''4371440''>of</span> <span m=''4371580''>our</span>
  <span m=''4372310''>high-performance</span> <span m=''4373150''>computing</span>
  <span m=''4374920''>into</span> <span m=''4375580''>a</span> <span m=''4375820''>new</span>
  <span m=''4376670''>green</span> <span m=''4377140''>data</span> <span m=''4377440''>center</span>
  <span m=''4377990''>in</span> <span m=''4378670''>Holyoke,</span> <span m=''4379350''>Massachusetts.</span>
  <span m=''4380280''>So</span> <span m=''4381060''>the</span> <span m=''4381180''>idea</span>
  <span m=''4381450''>is</span> <span m=''4381850''>that</span> <span m=''4382510''>rather</span>
  <span m=''4382910''>than</span> <span m=''4383150''>us</span> <span m=''4383410''>locating</span>
  <span m=''4383870''>things</span> <span m=''4384180''>here</span> <span m=''4384410''>on</span>
  <span m=''4384520''>campus,</span> <span m=''4385580''>where</span> <span m=''4385760''>the</span>
  <span m=''4385960''>energy</span> <span m=''4386320''>costs</span> <span m=''4386730''>are</span>
  <span m=''4386840''>high</span> <span m=''4387730''>and</span> <span m=''4387970''>we
  get</span> <span m=''4388090''>a</span> <span m=''4388130''>lot</span> <span m=''4388480''>of</span>
  <span m=''4389800''>our</span> <span m=''4390070''>energy</span> <span m=''4390530''>from</span>
  <span m=''4392800''>fuels</span> <span m=''4393280''>that</span> <span m=''4393580''>have</span>
  <span m=''4395230''>a</span> <span m=''4395350''>big</span> <span m=''4395590''>carbon</span>
  <span m=''4396060''>footprint,</span> <span m=''4397290''>locating</span> <span
  m=''4397880''>it</span> <span m=''4398130''>in</span> <span m=''4398450''>Holyoke--</span>
  <span m=''4399660''>they</span> <span m=''4400120''>have</span> <span m=''4400620''>a</span>
  <span m=''4400970''>lot</span> <span m=''4401260''>of</span> <span m=''4403460''>hydro</span>
  <span m=''4403930''>power</span> <span m=''4404890''>and</span> <span m=''4405210''>nuclear</span>
  <span m=''4405580''>power</span> <span m=''4406260''>there.</span> <span m=''4407080''>And</span>
  <span m=''4407700''>they''re</span> <span m=''4407880''>able</span> <span m=''4408170''>to</span>
  <span m=''4408230''>build</span> <span m=''4408600''>a</span> <span m=''4408650''>building</span>
  <span m=''4409660''>that</span> <span m=''4410860''>is</span> <span m=''4411050''>extremely</span>
  <span m=''4411660''>energy-efficient.</span> <span m=''4413140''>And</span> <span
  m=''4413370''>it</span> <span m=''4413520''>turns</span> <span m=''4413830''>out</span>
  <span m=''4414160''>that</span> <span m=''4414380''>a</span> <span m=''4415510''>bunch</span>
  <span m=''4415800''>of</span> <span m=''4415850''>years</span> <span m=''4416160''>ago</span>
  <span m=''4417270''>when</span> <span m=''4417600''>they</span> <span m=''4417700''>were</span>
  <span m=''4417810''>digging</span> <span m=''4418140''>up</span> <span m=''4418360''>the</span>
  <span m=''4418860''>Route</span> <span m=''4419340''>90,</span> <span m=''4419740''>the</span>
  <span m=''4419870''>Mass</span> <span m=''4420210''>Pike,</span> <span m=''4421530''>they</span>
  <span m=''4421810''>laid</span> <span m=''4422280''>a</span> <span m=''4422380''>lot</span>
  <span m=''4422700''>of</span> <span m=''4422780''>dark</span> <span m=''4423080''>fiber</span>
  <span m=''4424370''>down</span> <span m=''4424650''>the</span> <span m=''4424720''>length.</span>
  <span m=''4425220''>And</span> <span m=''4425520''>so</span> <span m=''4426200''>what</span>
  <span m=''4426440''>they''re</span> <span m=''4426520''>going</span> <span m=''4426600''>to</span>
  <span m=''4426660''>do</span> <span m=''4426770''>is</span> <span m=''4426870''>light</span>
  <span m=''4427120''>up</span> <span m=''4427250''>that</span> <span m=''4427540''>fiber,</span>
  <span m=''4428080''>which</span> <span m=''4428270''>comes</span> <span m=''4428490''>right</span>
  <span m=''4428780''>back</span> <span m=''4429050''>here</span> <span m=''4429380''>to</span>
  <span m=''4430420''>the</span> <span m=''4430510''>Boston</span> <span m=''4430950''>area.</span>
  </p><p><span m=''4431220''>And</span> <span m=''4431340''>so</span> <span m=''4432140''>for</span>
  <span m=''4432250''>most</span> <span m=''4432520''>people</span> <span m=''4432770''>who
  are</span> <span m=''4432810''>using</span> <span m=''4433400''>these</span> <span
  m=''4433710''>very</span> <span m=''4433940''>high-performance</span> <span m=''4434640''>things,</span>
  <span m=''4434850''>it</span> <span m=''4434940''>doesn''t</span> <span m=''4435220''>really</span>
  <span m=''4435440''>matter</span> <span m=''4435880''>where</span> <span m=''4436210''>it''s</span>
  <span m=''4436370''>located</span> <span m=''4437640''>anymore,</span> <span m=''4438800''>at</span>
  <span m=''4438940''>the</span> <span m=''4439020''>level</span> <span m=''4439330''>of
  that.</span> <span m=''4439590''>So</span> <span m=''4440680''>instead</span> <span
  m=''4441060''>of</span> <span m=''4441140''>just</span> <span m=''4441360''>locating</span>
  <span m=''4441890''>some</span> <span m=''4442110''>piece</span> <span m=''4442340''>of</span>
  <span m=''4442420''>equipment</span> <span m=''4442820''>here,</span> <span m=''4443830''>we</span>
  <span m=''4443940''>just</span> <span m=''4444200''>will locate it</span> <span
  m=''4444870''>out</span> <span m=''4445130''>there,</span> <span m=''4445490''>and</span>
  <span m=''4446260''>the</span> <span m=''4446400''>price</span> <span m=''4447370''>will</span>
  <span m=''4447980''>drop</span> <span m=''4448490''>dramatically.</span> <span m=''4449240''>And</span>
  <span m=''4450340''>it''ll</span> <span m=''4450490''>be</span> <span m=''4450610''>a
  much</span> <span m=''4450890''>greener</span> <span m=''4451320''>way</span> <span
  m=''4451630''>for</span> <span m=''4451840''>us</span> <span m=''4452040''>to</span>
  <span m=''4452360''>be</span> <span m=''4452470''>doing</span> <span m=''4452820''>our</span>
  <span m=''4453490''>high-end</span> <span m=''4453900''>computing.</span> </p><p><span
  m=''4455450''>Yeah,</span> <span m=''4455810''>question?</span> </p><p><span m=''4456170''>AUDIENCE:</span>
  <span m=''4456638''>Isn''t someone</span> <span m=''4457106''>talking</span> <span
  m=''4457574''>about</span> <span m=''4458042''>water-cooled</span> <span m=''4458510''>offshore</span>
  <span m=''4458978''>floating</span> <span m=''4459446''>data centers?</span> </p><p><span
  m=''4459914''>GUEST SPEAKER:</span> <span m=''4460390''>Sure.</span> <span m=''4461050''>Sure.</span>
  <span m=''4462080''>So</span> <span m=''4462900''>the</span> <span m=''4463250''>question</span>
  <span m=''4463600''>is,</span> <span m=''4463810''>are</span> <span m=''4464020''>people</span>
  <span m=''4464270''>talking</span> <span m=''4464550''>about</span> <span m=''4464800''>water-coooled</span>
  <span m=''4465930''>offshore</span> <span m=''4466570''>floating</span> <span m=''4467040''>data</span>
  <span m=''4467280''>centers.</span> <span m=''4467630''>Yeah.</span> <span m=''4467850''>I</span>
  <span m=''4467980''>mean,</span> <span m=''4468450''>locating</span> <span m=''4468870''>things</span>
  <span m=''4469710''>in</span> <span m=''4470060''>some</span> <span m=''4471220''>area</span>
  <span m=''4471560''>where</span> <span m=''4471730''>you</span> <span m=''4472040''>can</span>
  <span m=''4474210''>cool</span> <span m=''4474500''>things</span> <span m=''4474770''>easily</span>
  <span m=''4476020''>makes</span> <span m=''4476270''>a</span> <span m=''4476320''>lot</span>
  <span m=''4476520''>of</span> <span m=''4476590''>sense.</span> <span m=''4476860''>Usually,</span>
  <span m=''4477260''>they</span> <span m=''4477420''>tend</span> <span m=''4477650''>to</span>
  <span m=''4477960''>want</span> <span m=''4478290''>those</span> <span m=''4478610''>near</span>
  <span m=''4479670''>rivers</span> <span m=''4480150''>rather</span> <span m=''4480520''>than</span>
  <span m=''4481490''>in</span> <span m=''4481600''>the</span> <span m=''4481680''>middle</span>
  <span m=''4481870''>of</span> <span m=''4481940''>the</span> <span m=''4482080''>ocean,</span>
  <span m=''4482430''>just</span> <span m=''4482650''>because</span> <span m=''4484390''>you</span>
  <span m=''4484490''>get</span> <span m=''4484750''>the</span> <span m=''4484990''>hydropower.</span>
  <span m=''4486340''>But</span> <span m=''4486820''>even</span> <span m=''4487110''>in</span>
  <span m=''4487210''>the</span> <span m=''4487340''>ocean,</span> <span m=''4487690''>you</span>
  <span m=''4487790''>can</span> <span m=''4487890''>use</span> <span m=''4488090''>currents</span>
  <span m=''4488540''>to</span> <span m=''4488630''>do</span> <span m=''4488760''>very</span>
  <span m=''4488970''>much</span> <span m=''4489210''>the</span> <span m=''4489300''>same</span>
  <span m=''4489610''>kind</span> <span m=''4489790''>of</span> <span m=''4489970''>thing.</span>
  <span m=''4490200''>So</span> <span m=''4490860''>for</span> <span m=''4490980''>some</span>
  <span m=''4491140''>of</span> <span m=''4491180''>these</span> <span m=''4491360''>things,</span>
  <span m=''4491570''>people</span> <span m=''4491880''>are</span> <span m=''4492080''>looking</span>
  <span m=''4492420''>very</span> <span m=''4492620''>seriously</span> <span m=''4493250''>at</span>
  <span m=''4494220''>a</span> <span m=''4494350''>whole</span> <span m=''4494550''>bunch</span>
  <span m=''4494870''>of</span> <span m=''4498000''>different</span> <span m=''4498250''>strategies</span>
  <span m=''4499010''>for</span> <span m=''4500830''>containing</span> <span m=''4501740''>large-scale</span>
  <span m=''4502680''>equipment.</span> </p><p><span m=''4503625''>PROFESSOR:</span>
  <span m=''4504070''>So</span> <span m=''4504270''>one</span> <span m=''4504810''>that''s</span>
  <span m=''4505240''>very</span> <span m=''4505420''>counterintuitive</span> <span
  m=''4506250''>is</span> <span m=''4506730''>people</span> <span m=''4507090''>are</span>
  <span m=''4508060''>trying</span> <span m=''4508330''>to</span> <span m=''4508560''>build</span>
  <span m=''4508770''>data</span> <span m=''4509070''>centers</span> <span m=''4509320''>in</span>
  <span m=''4509420''>the</span> <span m=''4509510''>middle</span> <span m=''4509835''>of</span>
  <span m=''4510160''>deserts,</span> <span m=''4511490''>when</span> <span m=''4511680''>it''s</span>
  <span m=''4511880''>very</span> <span m=''4512260''>hot.</span> <span m=''4513130''>I</span>
  <span m=''4513200''>mean,</span> <span m=''4514340''>why</span> <span m=''4514520''>do</span>
  <span m=''4514610''>you</span> <span m=''4514700''>think</span> <span m=''4514870''>people</span>
  <span m=''4515230''>want</span> <span m=''4515310''>to build</span> <span m=''4515410''>a</span>
  <span m=''4515510''>data center</span> <span m=''4515920''>in</span> <span m=''4516060''>the</span>
  <span m=''4516310''>middle</span> <span m=''4516400''>of the</span> <span m=''4516640''>desert?</span>
  </p><p><span m=''4517530''>AUDIENCE:</span> <span m=''4517975''>Solar</span> <span
  m=''4518420''>power?</span> </p><p><span m=''4519310''>PROFESSOR:</span> <span m=''4519760''>Solar
  power</span> <span m=''4520140''>is</span> <span m=''4520830''>one thing.</span>
  <span m=''4521110''>No,</span> <span m=''4521280''>it''s</span> <span m=''4521440''>not</span>
  <span m=''4521570''>solar</span> <span m=''4521670''>power.</span> </p><p><span
  m=''4522626''>AUDIENCE:</span> <span m=''4523072''>It gets really cold</span> <span
  m=''4523518''>at night.</span> </p><p><span m=''4523964''>PROFESSOR:</span> <span
  m=''4524410''>No,</span> <span m=''4524705''>it''s</span> <span m=''4525000''>not</span>
  <span m=''4525050''>really</span> <span m=''4525330''>cold at</span> <span m=''4525480''>night.</span>
  <span m=''4525760''>That''s not it.</span> </p><p><span m=''4526990''>GUEST SPEAKER:</span>
  <span m=''4527290''>Cheap</span> <span m=''4528490''>property.</span> </p><p><span
  m=''4529740''>PROFESSOR:</span> <span m=''4530160''>No, the</span> <span m=''4530250''>biggest</span>
  <span m=''4530810''>thing</span> <span m=''4531010''>about</span> <span m=''4531390''>cooling</span>
  <span m=''4532300''>is</span> <span m=''4532890''>either</span> <span m=''4533120''>you
  can</span> <span m=''4533270''>do</span> <span m=''4533410''>air conditioning,</span>
  <span m=''4533690''>where</span> <span m=''4533965''>you''re</span> <span m=''4534240''>using</span>
  <span m=''4534590''>power</span> <span m=''4534865''>to</span> <span m=''4535140''>pull</span>
  <span m=''4535880''>heat</span> <span m=''4536150''>out,</span> <span m=''4536510''>or</span>
  <span m=''4537350''>you</span> <span m=''4537570''>can</span> <span m=''4537840''>use</span>
  <span m=''4538260''>just</span> <span m=''4538610''>water</span> <span m=''4538980''>to</span>
  <span m=''4539100''>cool.</span> <span m=''4539920''>And</span> <span m=''4540500''>what</span>
  <span m=''4540700''>happens</span> <span m=''4541040''>is</span> <span m=''4541160''>most</span>
  <span m=''4541500''>of other</span> <span m=''4541750''>places</span> <span m=''4542600''>is</span>
  <span m=''4543200''>the</span> <span m=''4543290''>humidity</span> <span m=''4543750''>is</span>
  <span m=''4543860''>too</span> <span m=''4544010''>high.</span> <span m=''4544710''>And</span>
  <span m=''4544890''>when</span> <span m=''4545010''>you</span> <span m=''4545130''>go</span>
  <span m=''4545330''>to</span> <span m=''4545430''>the</span> <span m=''4545540''>desert,</span>
  <span m=''4546010''>humidity</span> <span m=''4546240''>is</span> <span m=''4546410''>low</span>
  <span m=''4546630''>enough</span> <span m=''4547250''>that</span> <span m=''4547470''>you</span>
  <span m=''4547580''>can</span> <span m=''4547780''>just</span> <span m=''4548030''>pump</span>
  <span m=''4548360''>water</span> <span m=''4548670''>through</span> <span m=''4548850''>the</span>
  <span m=''4548950''>thing</span> <span m=''4549140''>and</span> <span m=''4549260''>get</span>
  <span m=''4549340''>the</span> <span m=''4549590''>water</span> <span m=''4549900''>evaporation</span>
  <span m=''4550510''>going</span> <span m=''4550790''>by,</span> <span m=''4551290''>and</span>
  <span m=''4551510''>then</span> <span m=''4551820''>use</span> <span m=''4552280''>that</span>
  <span m=''4552470''>to</span> <span m=''4552580''>cool</span> <span m=''4553310''>the</span>
  <span m=''4553380''>system.</span> <span m=''4553750''>So</span> <span m=''4554590''>sometimes</span>
  <span m=''4555010''>they''re</span> <span m=''4555140''>looking</span> <span m=''4555390''>at</span>
  <span m=''4555510''>data</span> <span m=''4555630''>centers</span> <span m=''4556335''>in</span>
  <span m=''4556660''>places</span> <span m=''4556970''>where</span> <span m=''4557060''>it</span>
  <span m=''4557170''>could</span> <span m=''4557380''>be</span> <span m=''4557490''>120</span>
  <span m=''4557960''>degrees,</span> <span m=''4558520''>but</span> <span m=''4559190''>very</span>
  <span m=''4559590''>low</span> <span m=''4559750''>humidity.</span> <span m=''4560480''>And</span>
  <span m=''4560660''>they</span> <span m=''4560790''>think</span> <span m=''4560990''>that</span>
  <span m=''4561200''>is</span> <span m=''4561450''>a</span> <span m=''4561710''>lot</span>
  <span m=''4561940''>more</span> <span m=''4562100''>efficient</span> <span m=''4562940''>to</span>
  <span m=''4563265''>cool</span> <span m=''4563590''>than</span> <span m=''4563660''>that.</span>
  <span m=''4564490''>So</span> <span m=''4564710''>there</span> <span m=''4564880''>are</span>
  <span m=''4564990''>a lot</span> <span m=''4565100''>of</span> <span m=''4565210''>these</span>
  <span m=''4565370''>interesting</span> <span m=''4565770''>nonintuitive</span> <span
  m=''4566570''>things</span> <span m=''4567040''>people</span> <span m=''4567290''>are</span>
  <span m=''4567370''>looking</span> <span m=''4567700''>at.</span> <span m=''4568280''>So</span>
  <span m=''4568410''>what</span> <span m=''4568560''>[UNINTELLIGIBLE]</span> <span
  m=''4568660''>they say</span> <span m=''4569200''>is</span> <span m=''4569430''>that</span>
  <span m=''4569860''>humidity''s</span> <span m=''4570170''>the</span> <span m=''4570435''>killer,</span>
  <span m=''4570700''>not</span> <span m=''4570890''>the</span> <span m=''4570970''>temperature.</span>
  </p><p><span m=''4571988''>AUDIENCE:</span> <span m=''4572486''>What if you''re</span>
  <span m=''4572984''>located</span> <span m=''4573482''>on the</span> <span m=''4573980''>South--</span>
  <span m=''4575480''>if</span> <span m=''4575630''>you''re</span> <span m=''4576030''>located</span>
  <span m=''4576600''>on</span> <span m=''4576690''>the</span> <span m=''4576770''>South</span>
  <span m=''4577180''>Pole,</span> <span m=''4577530''>then</span> <span m=''4577950''>that''s</span>
  <span m=''4579200''>both</span> <span m=''4579540''>cold</span> <span m=''4579910''>and</span>
  <span m=''4580180''>really</span> <span m=''4581080''>low</span> <span m=''4581550''>humidity.</span>
  </p><p><span m=''4584370''>GUEST SPEAKER:</span> <span m=''4584840''>Yeah.</span>
  <span m=''4585540''>I</span> <span m=''4585730''>mean</span> <span m=''4585860''>it''ll</span>
  <span m=''4585950''>be</span> <span m=''4586080''>interesting</span> <span m=''4586510''>to</span>
  <span m=''4586590''>see</span> <span m=''4586870''>how</span> <span m=''4587860''>these</span>
  <span m=''4588050''>things</span> <span m=''4588220''>develop.</span> <span m=''4588270''>It''s</span>
  <span m=''4588600''>a</span> <span m=''4588740''>very</span> <span m=''4589640''>so-called</span>
  <span m=''4590100''>hot</span> <span m=''4590420''>topic</span> <span m=''4593680''>these</span>
  <span m=''4594130''>days,</span> <span m=''4594440''>is</span> <span m=''4594870''>energy</span>
  <span m=''4595300''>for</span> <span m=''4595490''>computing.</span> <span m=''4596090''>And</span>
  <span m=''4596890''>the</span> <span m=''4597090''>energy</span> <span m=''4597470''>for</span>
  <span m=''4597600''>computing</span> <span m=''4597960''>of</span> <span m=''4598070''>course</span>
  <span m=''4598350''>matters</span> <span m=''4598720''>also</span> <span m=''4599580''>not</span>
  <span m=''4599820''>only</span> <span m=''4600070''>at the</span> <span m=''4600190''>large</span>
  <span m=''4600490''>scale</span> <span m=''4600790''>but</span> <span m=''4600910''>also</span>
  <span m=''4601170''>at the</span> <span m=''4601280''>small</span> <span m=''4601630''>scale,</span>
  <span m=''4602000''>because</span> <span m=''4602300''>you</span> <span m=''4602440''>want</span>
  <span m=''4603230''>your</span> <span m=''4604350''>favorite</span> <span m=''4607200''>handheld</span>
  <span m=''4608210''>to</span> <span m=''4609410''>use</span> <span m=''4609700''>very</span>
  <span m=''4609930''>little</span> <span m=''4610120''>battery.</span> <span m=''4611110''>So</span>
  <span m=''4611240''>your</span> <span m=''4611350''>batteries</span> <span m=''4611780''>last</span>
  <span m=''4612120''>longer.</span> <span m=''4612540''>So</span> <span m=''4613700''>the</span>
  <span m=''4613990''>issue</span> <span m=''4614330''>of</span> <span m=''4614410''>energy,</span>
  <span m=''4615100''>using</span> <span m=''4615550''>that as</span> <span m=''4615700''>a</span>
  <span m=''4615850''>measure--</span> <span m=''4616620''>we''ve</span> <span m=''4616820''>mostly</span>
  <span m=''4617230''>been</span> <span m=''4617340''>looking</span> <span m=''4617720''>at</span>
  <span m=''4618010''>how</span> <span m=''4618140''>fast</span> <span m=''4618590''>we</span>
  <span m=''4618670''>can</span> <span m=''4618820''>make</span> <span m=''4619580''>things</span>
  <span m=''4619830''>run</span> <span m=''4620110''>in this</span> <span m=''4620270''>class,</span>
  <span m=''4620890''>but</span> <span m=''4621090''>many</span> <span m=''4621410''>of</span>
  <span m=''4621450''>the</span> <span m=''4621510''>lessons</span> <span m=''4622620''>you</span>
  <span m=''4622810''>can</span> <span m=''4622940''>use</span> <span m=''4623160''>to</span>
  <span m=''4623260''>say,</span> <span m=''4623430''>well,</span> <span m=''4623580''>how</span>
  <span m=''4623820''>can</span> <span m=''4623970''>I</span> <span m=''4624040''>make</span>
  <span m=''4624330''>this</span> <span m=''4624500''>run</span> <span m=''4626150''>as</span>
  <span m=''4626550''>energy-efficient</span> <span m=''4627360''>as</span> <span
  m=''4627490''>possible?</span> </p><p><span m=''4629180''>And</span> <span m=''4631030''>what</span>
  <span m=''4631190''>you''ll</span> <span m=''4631340''>learn</span> <span m=''4631620''>is</span>
  <span m=''4631820''>that</span> <span m=''4631950''>many of the</span> <span m=''4632210''>lessons</span>
  <span m=''4632630''>we''ve</span> <span m=''4632790''>had</span> <span m=''4633410''>in</span>
  <span m=''4633870''>the</span> <span m=''4633970''>class</span> <span m=''4634360''>during</span>
  <span m=''4634590''>the</span> <span m=''4634700''>term</span> <span m=''4635940''>we</span>
  <span m=''4636170''>focused,</span> <span m=''4636690''>as</span> <span m=''4636910''>I</span>
  <span m=''4636960''>say,</span> <span m=''4637190''>on</span> <span m=''4637310''>performance.</span>
  <span m=''4638180''>But</span> <span m=''4638370''>there</span> <span m=''4638450''>are</span>
  <span m=''4638470''>many</span> <span m=''4638820''>resources</span> <span m=''4639810''>in</span>
  <span m=''4639960''>any</span> <span m=''4640110''>given</span> <span m=''4640360''>situation</span>
  <span m=''4641010''>that you</span> <span m=''4641130''>might</span> <span m=''4641370''>want</span>
  <span m=''4641470''>to</span> <span m=''4641580''>optimize.</span> <span m=''4642390''>And</span>
  <span m=''4642890''>so</span> <span m=''4643060''>understanding</span> <span m=''4643820''>something</span>
  <span m=''4644210''>about</span> <span m=''4644550''>how</span> <span m=''4644770''>do</span>
  <span m=''4644840''>I</span> <span m=''4644920''>minimize</span> <span m=''4645370''>energy,</span>
  <span m=''4645660''>how</span> <span m=''4645860''>do</span> <span m=''4645960''>I</span>
  <span m=''4646050''>minimize</span> <span m=''4646540''>disk</span> <span m=''4646750''>I/Os,</span>
  <span m=''4647570''>how</span> <span m=''4647680''>do</span> <span m=''4647780''>I</span>
  <span m=''4647870''>minimize</span> <span m=''4648870''>clock</span> <span m=''4649200''>cycles,</span>
  <span m=''4649540''>how</span> <span m=''4649660''>do</span> <span m=''4649760''>I</span>
  <span m=''4649850''>minimize</span> <span m=''4650930''>off-chip</span> <span m=''4651640''>accesses--</span>
  <span m=''4652760''>which</span> <span m=''4653090''>tend</span> <span m=''4653280''>to</span>
  <span m=''4653340''>be</span> <span m=''4653520''>much</span> <span m=''4653760''>more</span>
  <span m=''4654040''>energy</span> <span m=''4654430''>intensive</span> <span m=''4655020''>than</span>
  <span m=''4655590''>on-chip--</span> <span m=''4656070''>all</span> <span m=''4656340''>those</span>
  <span m=''4656940''>different</span> <span m=''4657250''>kinds</span> <span m=''4657570''>of</span>
  <span m=''4657670''>measures</span> <span m=''4659030''>end</span> <span m=''4659260''>up</span>
  <span m=''4659450''>being</span> <span m=''4660390''>part</span> <span m=''4660690''>of</span>
  <span m=''4660740''>the</span> <span m=''4660840''>mix</span> <span m=''4661170''>of</span>
  <span m=''4661240''>what</span> <span m=''4661370''>you</span> <span m=''4661490''>have</span>
  <span m=''4661610''>to</span> <span m=''4661700''>do</span> <span m=''4661840''>when</span>
  <span m=''4662010''>you''re</span> <span m=''4662120''>really</span> <span m=''4662410''>engineering</span>
  <span m=''4662700''>these</span> <span m=''4662990''>systems.</span> </p><p><span
  m=''4666142''>PROFESSOR:</span> <span m=''4666580''>So</span> <span m=''4666720''>I</span>
  <span m=''4666790''>think</span> <span m=''4667020''>another</span> <span m=''4667280''>interesting</span>
  <span m=''4667660''>thing</span> <span m=''4667920''>is,</span> <span m=''4668510''>because</span>
  <span m=''4669130''>we</span> <span m=''4669190''>are</span> <span m=''4669410''>in</span>
  <span m=''4669640''>this</span> <span m=''4670910''>time</span> <span m=''4671160''>where</span>
  <span m=''4672160''>some</span> <span m=''4672420''>stuff</span> <span m=''4672980''>grows</span>
  <span m=''4673670''>at</span> <span m=''4673800''>exponential</span> <span m=''4674170''>rates</span>
  <span m=''4674500''>and</span> <span m=''4674620''>stuff</span> <span m=''4674880''>like</span>
  <span m=''4675070''>that,</span> <span m=''4675740''>some</span> <span m=''4676080''>of</span>
  <span m=''4676170''>those</span> <span m=''4676370''>ratios</span> <span m=''4677090''>that</span>
  <span m=''4677330''>made</span> <span m=''4677630''>sense</span> <span m=''4678030''>at</span>
  <span m=''4678180''>some</span> <span m=''4678410''>point</span> <span m=''4679130''>just</span>
  <span m=''4679230''>suddenly</span> <span m=''4679760''>start</span> <span m=''4680160''>making</span>
  <span m=''4680940''>really</span> <span m=''4682330''>bad</span> <span m=''4682700''>things.</span>
  <span m=''4682960''>Like,</span> <span m=''4683080''>for</span> <span m=''4683150''>example,</span>
  <span m=''4683550''>in</span> <span m=''4683650''>this,</span> <span m=''4684480''>at</span>
  <span m=''4684610''>some</span> <span m=''4684830''>point</span> <span m=''4685210''>the</span>
  <span m=''4686200''>seek</span> <span m=''4686470''>times</span> <span m=''4686650''>were</span>
  <span m=''4686770''>normal</span> <span m=''4687080''>enough</span> <span m=''4687390''>that</span>
  <span m=''4687710''>you</span> <span m=''4687820''>didn''t</span> <span m=''4688020''>care.</span>
  <span m=''4688870''>And</span> <span m=''4690780''>at</span> <span m=''4690840''>some</span>
  <span m=''4691050''>point,</span> <span m=''4691380''>because</span> <span m=''4691890''>the</span>
  <span m=''4692120''>rest</span> <span m=''4692380''>of</span> <span m=''4692450''>the</span>
  <span m=''4692530''>things</span> <span m=''4693180''>took off</span> <span m=''4693410''>so</span>
  <span m=''4693620''>fast,</span> <span m=''4694480''>suddenly</span> <span m=''4694820''>it
  becomes</span> <span m=''4695420''>this</span> <span m=''4695670''>really,</span>
  <span m=''4696170''>really</span> <span m=''4696470''>big</span> <span m=''4696610''>bottlenecks.</span>
  </p><p><span m=''4697150''>BRADLEY KUSZMAUL:</span> <span m=''4697400''>B-trees</span>
  <span m=''4698380''>were</span> <span m=''4698680''>a really</span> <span m=''4699110''>good</span>
  <span m=''4699400''>data</span> <span m=''4699660''>structure</span> <span m=''4700110''>in</span>
  <span m=''4700210''>1972.</span> <span m=''4702750''>Because,</span> <span m=''4704330''>well,</span>
  <span m=''4704450''>the seek</span> <span m=''4704790''>time</span> <span m=''4705330''>and</span>
  <span m=''4705400''>the</span> <span m=''4706040''>transfer</span> <span m=''4706590''>time</span>
  <span m=''4707240''>and</span> <span m=''4707320''>the</span> <span m=''4707410''>CPU--</span>
  <span m=''4708660''>the</span> <span m=''4709460''>CPUs</span> <span m=''4709680''>actually</span>
  <span m=''4710120''>couldn''t</span> <span m=''4711100''>read</span> <span m=''4711350''>in</span>
  <span m=''4711490''>the</span> <span m=''4711570''>data</span> <span m=''4712460''>in</span>
  <span m=''4712800''>one</span> <span m=''4713040''>rotation,</span> <span m=''4713980''>so</span>
  <span m=''4714140''>people</span> <span m=''4714450''>didn''t</span> <span m=''4714690''>even</span>
  <span m=''4714960''>read</span> <span m=''4715360''>consecutive</span> <span m=''4715950''>blocks,</span>
  <span m=''4716530''>because</span> <span m=''4716905''>the</span> <span m=''4717280''>CPU</span>
  <span m=''4717720''>just</span> <span m=''4717920''>couldn''t</span> <span m=''4718250''>handle</span>
  <span m=''4718590''>data</span> <span m=''4718860''>coming</span> <span m=''4719130''>in</span>
  <span m=''4719210''>that</span> <span m=''4719430''>fast.</span> <span m=''4720040''>You</span>
  <span m=''4720160''>would</span> <span m=''4720290''>stagger</span> <span m=''4720750''>blocks</span>
  <span m=''4721110''>around</span> <span m=''4721290''>the</span> <span m=''4721470''>disk,</span>
  <span m=''4721850''>so</span> <span m=''4721950''>that</span> <span m=''4722060''>when</span>
  <span m=''4722200''>you did</span> <span m=''4722400''>sequential</span> <span m=''4722940''>reads,</span>
  <span m=''4723260''>you''d</span> <span m=''4723360''>get</span> <span m=''4723550''>this</span>
  <span m=''4723730''>one</span> <span m=''4724090''>and</span> <span m=''4724200''>then</span>
  <span m=''4724640''>this</span> <span m=''4724850''>one</span> <span m=''4725160''>and</span>
  <span m=''4725560''>this</span> <span m=''4725750''>one.</span> <span m=''4726330''>There
  was</span> <span m=''4726490''>this</span> <span m=''4726690''>whole</span> <span
  m=''4727160''>thing</span> <span m=''4727370''>about</span> <span m=''4727620''>tuning</span>
  <span m=''4727970''>your</span> <span m=''4728110''>file</span> <span m=''4728450''>system.</span>
  <span m=''4728730''>It''s</span> <span m=''4729480''>like--</span> </p><p><span
  m=''4730190''>AUDIENCE:</span> <span m=''4730680''>By the way,</span> <span m=''4731170''>back
  when</span> <span m=''4731660''>disks were--</span> </p><p><span m=''4732640''>BRADLEY
  KUSZMAUL:</span> <span m=''4733130''>Yeah.</span> <span m=''4734310''>Washing</span>
  <span m=''4734700''>machine.</span> </p><p><span m=''4735180''>AUDIENCE:</span>
  <span m=''4735611''>Washing</span> <span m=''4736042''>machine</span> <span m=''4736473''>size.</span>
  </p><p><span m=''4737335''>BRADLEY KUSZMAUL:</span> <span m=''4737770''>For</span>
  <span m=''4737900''>20</span> <span m=''4738240''>megabytes.</span> </p><p><span
  m=''4739565''>PROFESSOR:</span> <span m=''4740000''>Oh, yeah,</span> <span m=''4740290''>that''s
  the</span> <span m=''4740350''>big</span> <span m=''4740540''>disk.</span> </p><p><span
  m=''4745540''>So</span> <span m=''4745840''>hopefully</span> <span m=''4746190''>you</span>
  <span m=''4746280''>guys</span> <span m=''4746580''>got</span> <span m=''4746730''>a</span>
  <span m=''4746790''>feel</span> <span m=''4747250''>for--</span> <span m=''4747870''>we</span>
  <span m=''4747960''>have</span> <span m=''4748080''>been</span> <span m=''4748220''>looking</span>
  <span m=''4748470''>at</span> <span m=''4748560''>this</span> <span m=''4748690''>performance</span>
  <span m=''4749370''>on</span> <span m=''4749510''>a</span> <span m=''4749560''>small</span>
  <span m=''4749840''>multi-core</span> <span m=''4750115''>and</span> <span m=''4750390''>stuff</span>
  <span m=''4750630''>like that,</span> <span m=''4751100''>how</span> <span m=''4751410''>it</span>
  <span m=''4751680''>can</span> <span m=''4751880''>scale</span> <span m=''4752320''>in</span>
  <span m=''4752440''>different</span> <span m=''4752720''>directions</span> <span
  m=''4753650''>and</span> <span m=''4754000''>the</span> <span m=''4754270''>kind</span>
  <span m=''4754520''>of</span> <span m=''4754610''>impact</span> <span m=''4755030''>performance</span>
  <span m=''4755450''>can</span> <span m=''4755610''>have.</span> <span m=''4756365''>And</span>
  <span m=''4756790''>in</span> <span m=''4756910''>fact,</span> <span m=''4757580''>if</span>
  <span m=''4757880''>anybody</span> <span m=''4758170''>has</span> <span m=''4758350''>read</span>
  <span m=''4760090''>books</span> <span m=''4760440''>on</span> <span m=''4761420''>why</span>
  <span m=''4761580''>Google</span> <span m=''4761970''>is</span> <span m=''4762050''>successful,</span>
  <span m=''4762630''>one</span> <span m=''4762880''>of</span> <span m=''4762940''>the</span>
  <span m=''4763030''>biggest</span> <span m=''4763480''>things</span> <span m=''4764250''>for</span>
  <span m=''4764500''>their</span> <span m=''4764750''>success</span> <span m=''4765100''>is</span>
  <span m=''4765530''>they</span> <span m=''4765670''>managed</span> <span m=''4766180''>to</span>
  <span m=''4766290''>do</span> <span m=''4766530''>a huge</span> <span m=''4766960''>amount
  of</span> <span m=''4766980''>work</span> <span m=''4767590''>very</span> <span
  m=''4767860''>cheaply,</span> <span m=''4769090''>because</span> <span m=''4769690''>the</span>
  <span m=''4769790''>amount</span> <span m=''4770150''>of</span> <span m=''4770280''>work</span>
  <span m=''4770600''>they</span> <span m=''4771010''>do,</span> <span m=''4771500''>if</span>
  <span m=''4771690''>anybody</span> <span m=''4772080''>did</span> <span m=''4772450''>in</span>
  <span m=''4772620''>the</span> <span m=''4772790''>traditional</span> <span m=''4773420''>way,</span>
  <span m=''4773990''>they</span> <span m=''4774200''>can''t</span> <span m=''4774530''>afford</span>
  <span m=''4774880''>that</span> <span m=''4775110''>model,</span> <span m=''4775990''>to</span>
  <span m=''4776060''>give</span> <span m=''4776270''>it</span> <span m=''4776400''>for</span>
  <span m=''4776500''>free</span> <span m=''4776830''>or</span> <span m=''4777010''>give
  it</span> <span m=''4777710''>supplied</span> <span m=''4778360''>for</span> <span
  m=''4778820''>advertising.</span> <span m=''4779820''>Because</span> <span m=''4780090''>they</span>
  <span m=''4780220''>can</span> <span m=''4780390''>get it</span> <span m=''4780520''>done</span>
  <span m=''4780820''>because</span> <span m=''4781850''>it''s</span> <span m=''4782020''>about</span>
  <span m=''4782360''>optimization.</span> <span m=''4783980''>Performance,</span>
  <span m=''4784345''>Performance</span> <span m=''4784970''>basically</span> <span
  m=''4785760''>relates</span> <span m=''4786990''>to</span> <span m=''4787110''>cost.</span>
  <span m=''4787770''>And</span> <span m=''4787980''>if the</span> <span m=''4788060''>cost</span>
  <span m=''4788360''>is</span> <span m=''4788500''>low</span> <span m=''4788660''>enough,</span>
  <span m=''4788960''>then</span> <span m=''4789730''>they</span> <span m=''4789860''>don''t</span>
  <span m=''4790000''>have</span> <span m=''4790070''>to</span> <span m=''4790150''>keep</span>
  <span m=''4790380''>charging</span> <span m=''4790635''>a</span> <span m=''4790890''>huge</span>
  <span m=''4791150''>amount</span> <span m=''4791350''>of</span> <span m=''4791410''>money</span>
  <span m=''4791790''>for</span> <span m=''4791940''>each</span> <span m=''4792130''>search.</span>
  </p><p><span m=''4793370''>GUEST SPEAKER:</span> <span m=''4793720''>So</span> <span
  m=''4795130''>let''s</span> <span m=''4796140''>thank</span> <span m=''4796400''>Dr.</span>
  <span m=''4796700''>Kuszmaul</span> <span m=''4797200''>for</span> <span m=''4797790''>an</span>
  <span m=''4798246''>excellent</span> <span m=''4799158''>talk.</span> <span m=''4801438''>And</span>
  <span m=''4801894''>can</span> <span m=''4802350''>you</span> <span m=''4802640''>hang</span>
  <span m=''4803130''>out for</span> <span m=''4803290''>just</span> <span m=''4803480''>a</span>
  <span m=''4803510''>little</span> <span m=''4803620''>bit,</span> <span m=''4803730''>if</span>
  <span m=''4803820''>people</span> <span m=''4804170''>want to</span> <span m=''4804320''>come</span>
  <span m=''4804460''>down?</span> <span m=''4804710''>OK.</span> <span m=''4806200''>Thanks.</span>
  </p>'
uid: f0f7ede1-8e41-a3c5-bcab-7153f90d3a69
---

---
about_this_resource_text: <p><strong>Description:</strong> Lecture covering memory
  systems, including cache concepts, access pattern concepts, data structure transformations,
  and computation transformations.</p> <p><strong>Speaker:</strong> Saman Amarasinghe</p>
content_type: resource
course_id: 6-172-performance-engineering-of-software-systems-fall-2010
embedded_media:
- id: Video-InternetArchive-MP4
  media_location: http://www.archive.org/download/MIT6.172F10/MIT6_172_F10_lec07_300k.mp4
  parent_uid: bbfc11626d8a809bd3cb82ee5fbb41db
  title: Video-Internet Archive-MP4
  type: Video
  uid: 0804f6c682223b5596827fa6f1fed802
- id: Video-iTunesU-MP4
  media_location: http://itunes.apple.com/us/itunes-u/lecture-7-memory-systems-performance/id481759887?i=109649117
  parent_uid: bbfc11626d8a809bd3cb82ee5fbb41db
  title: Video-iTunes U-MP4
  type: Video
  uid: f3c509c4856a3639818323359f9f2340
- id: Video-YouTube-Stream
  media_location: l8GqOCN8M-w
  parent_uid: bbfc11626d8a809bd3cb82ee5fbb41db
  title: Video-YouTube-Stream
  type: Video
  uid: 28749de343dbe2f6323bd0c5de2027e0
- id: Thumbnail-YouTube-JPG
  media_location: https://img.youtube.com/vi/l8GqOCN8M-w/default.jpg
  parent_uid: bbfc11626d8a809bd3cb82ee5fbb41db
  title: Thumbnail-YouTube-JPG
  type: Thumbnail
  uid: 88dfdf8bbe5dfa6e72109d1d8d862060
- id: MIT6_172F10_lec07.pdf
  parent_uid: bbfc11626d8a809bd3cb82ee5fbb41db
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-172-performance-engineering-of-software-systems-fall-2010/video-lectures/lecture-7-memory-systems-and-performance-engineering/MIT6_172F10_lec07.pdf
  title: MIT6_172F10_lec07.pdf
  type: null
  uid: dc079918ef9e55391acc9b9c6d675d6c
- id: 3Play-3PlayYouTubeid-MP4
  media_location: l8GqOCN8M-w
  parent_uid: bbfc11626d8a809bd3cb82ee5fbb41db
  title: 3Play-3Play YouTube id
  type: 3Play
  uid: 8f805f3e9f9470fcbd99af111504a560
- id: l8GqOCN8M-w.srt
  parent_uid: bbfc11626d8a809bd3cb82ee5fbb41db
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-172-performance-engineering-of-software-systems-fall-2010/video-lectures/lecture-7-memory-systems-and-performance-engineering/l8GqOCN8M-w.srt
  title: 3play caption file
  type: null
  uid: ded0d40db351df39066518e49551d97a
- id: l8GqOCN8M-w.pdf
  parent_uid: bbfc11626d8a809bd3cb82ee5fbb41db
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-172-performance-engineering-of-software-systems-fall-2010/video-lectures/lecture-7-memory-systems-and-performance-engineering/l8GqOCN8M-w.pdf
  title: 3play pdf file
  type: null
  uid: a9896e9ea021cdcf387b980179f92cc0
- id: Caption-3Play YouTube id-SRT
  parent_uid: bbfc11626d8a809bd3cb82ee5fbb41db
  title: Caption-3Play YouTube id-SRT-English - US
  type: Caption
  uid: 8937415d8ce97eeb091c0862c6bbf0cc
- id: Transcript-3Play YouTube id-PDF
  parent_uid: bbfc11626d8a809bd3cb82ee5fbb41db
  title: Transcript-3Play YouTube id-PDF-English - US
  type: Transcript
  uid: 9829ec3b5850a97b0a2c0442fc4f77c1
file: null
file_size: null
hide_download: true
hide_download_original: null
inline_embed_id: 35448536lecture7:memorysystemsandperformanceengineering62118571
layout: video
license: https://creativecommons.org/licenses/by-nc-sa/4.0/
order_index: 82
parent_uid: 24169d0487e846a39c316276f85b8cb5
related_resources_text: ''
short_url: lecture-7-memory-systems-and-performance-engineering
technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-172-performance-engineering-of-software-systems-fall-2010/video-lectures/lecture-7-memory-systems-and-performance-engineering
title: 'Lecture 7: Memory Systems and Performance Engineering'
transcript: '<p><span m=''2190''>The</span> <span m=''2320''>following</span> <span
  m=''2770''>content</span> <span m=''3360''>is</span> <span m=''3470''>provided</span>
  <span m=''3920''>under</span> <span m=''4200''>a</span> <span m=''4230''>Creative</span>
  <span m=''4640''>Commons</span> <span m=''5040''>license.</span> <span m=''6050''>Your</span>
  <span m=''6330''>support</span> <span m=''6830''>will</span> <span m=''7000''>help</span>
  <span m=''7240''>MIT</span> <span m=''7710''>OpenCourseWare</span> <span m=''8490''>continue</span>
  <span m=''8790''>to</span> <span m=''9090''>offer</span> <span m=''9510''>high</span>
  <span m=''9730''>quality</span> <span m=''10260''>educational</span> <span m=''10870''>resources</span>
  <span m=''11520''>for</span> <span m=''11660''>free.</span> <span m=''12740''>To</span>
  <span m=''12870''>make</span> <span m=''13070''>a</span> <span m=''13120''>donation</span>
  <span m=''13750''>or</span> <span m=''14060''>view</span> <span m=''14480''>additional</span>
  <span m=''14930''>materials</span> <span m=''15470''>from</span> <span m=''15630''>hundreds</span>
  <span m=''16059''>of</span> <span m=''16170''>MIT</span> <span m=''16600''>courses,</span>
  <span m=''17610''>visit</span> <span m=''17930''>MIT</span> <span m=''18350''>OpenCourseWare</span>
  <span m=''19390''>at</span> <span m=''19560''>ocw.mit.edu.</span> </p><p><span m=''31380''>PROFESSOR:
  OK,</span> <span m=''32479''>so</span> <span m=''34160''>by</span> <span m=''34440''>this</span>
  <span m=''34660''>time,</span> <span m=''35420''>most</span> <span m=''35870''>of</span>
  <span m=''35990''>you</span> <span m=''36190''>should</span> <span m=''36400''>have</span>
  <span m=''36900''>had</span> <span m=''37220''>your</span> <span m=''37350''>meetings</span>
  <span m=''37780''>with</span> <span m=''37940''>your</span> <span m=''40250''>masters.</span>
  <span m=''40790''>How</span> <span m=''40910''>many</span> <span m=''41110''>of</span>
  <span m=''41240''>you</span> <span m=''41960''>had</span> <span m=''42280''>meetings</span>
  <span m=''42580''>with</span> <span m=''42650''>your</span> <span m=''42750''>masters?</span>
  <span m=''44650''>Who</span> <span m=''44860''>didn''t</span> <span m=''45210''>yet?</span>
  </p><p><span m=''47130''>AUDIENCE: Today.</span> </p><p><span m=''47610''>PROFESSOR:
  Today?</span> <span m=''48370''>And</span> <span m=''48500''>Friday.</span> <span
  m=''49450''>Who</span> <span m=''49920''>hasn''t</span> <span m=''50250''>scheduled</span>
  <span m=''50750''>a</span> <span m=''50800''>meeting?</span> <span m=''53060''>So</span>
  <span m=''53250''>are you</span> <span m=''53400''>talking</span> <span m=''53750''>to</span>
  <span m=''54240''>them,</span> <span m=''54550''>and</span> <span m=''55010''>do
  you</span> <span m=''55428''>know--</span> </p><p><span m=''55846''>AUDIENCE: [INAUDIBLE]</span>
  </p><p><span m=''57100''>PROFESSOR: OK,</span> <span m=''58140''>make</span> <span
  m=''58340''>sure</span> <span m=''58500''>you</span> <span m=''58940''>get</span>
  <span m=''59200''>masters</span> <span m=''59950''>meetings</span> <span m=''60390''>scheduled</span>
  <span m=''61230''>because</span> <span m=''61850''>this</span> <span m=''61990''>is</span>
  <span m=''62100''>a</span> <span m=''62150''>very</span> <span m=''62410''>important</span>
  <span m=''62830''>part.</span> <span m=''63130''>We are</span> <span m=''63470''>getting</span>
  <span m=''63840''>feedback</span> <span m=''64239''>from</span> <span m=''64379''>the</span>
  <span m=''64459''>masters.</span> <span m=''64890''>I</span> <span m=''64980''>think</span>
  <span m=''65060''>they are</span> <span m=''65800''>giving</span> <span m=''66150''>you</span>
  <span m=''66240''>guys</span> <span m=''66350''>a</span> <span m=''66490''>lot</span>
  <span m=''66740''>of</span> <span m=''66820''>good</span> <span m=''67010''>advice,</span>
  <span m=''67890''>and</span> <span m=''68820''>so</span> <span m=''69160''>make</span>
  <span m=''69410''>sure</span> <span m=''70200''>you</span> <span m=''70640''>schedule,</span>
  <span m=''71310''>you</span> <span m=''71410''>go,</span> <span m=''71670''>you</span>
  <span m=''71840''>meet,</span> <span m=''74160''>get</span> <span m=''74390''>that</span>
  <span m=''74550''>result,</span> <span m=''74900''>use</span> <span m=''75110''>that</span>
  <span m=''75250''>result.</span> <span m=''75590''>It''s</span> <span m=''75840''>very</span>
  <span m=''76010''>hard</span> <span m=''76350''>to</span> <span m=''76530''>arrange</span>
  <span m=''77990''>that</span> <span m=''78390''>kind</span> <span m=''78550''>of</span>
  <span m=''78710''>a</span> <span m=''78760''>senior</span> <span m=''79170''>person</span>
  <span m=''79870''>spending</span> <span m=''80950''>a</span> <span m=''80970''>lot</span>
  <span m=''81220''>of</span> <span m=''81340''>time</span> <span m=''81630''>with</span>
  <span m=''81910''>only</span> <span m=''82060''>two</span> <span m=''82170''>of</span>
  <span m=''82280''>you</span> <span m=''82810''>at</span> <span m=''82880''>a</span>
  <span m=''82960''>given</span> <span m=''83250''>time.</span> <span m=''83520''>That''s</span>
  <span m=''83740''>a</span> <span m=''83860''>really</span> <span m=''84110''>good</span>
  <span m=''84310''>ratio</span> <span m=''84640''>to</span> <span m=''84730''>have,</span>
  <span m=''85260''>so</span> <span m=''85750''>take</span> <span m=''85940''>advantage</span>
  <span m=''86420''>of</span> <span m=''86510''>that.</span> </p><p><span m=''88330''>OK,</span>
  <span m=''89560''>so</span> <span m=''90400''>also,</span> <span m=''91550''>I</span>
  <span m=''91700''>think</span> <span m=''91900''>at</span> <span m=''92110''>this</span>
  <span m=''92360''>point,</span> <span m=''93040''>most</span> <span m=''93440''>of</span>
  <span m=''93540''>the</span> <span m=''93650''>beta</span> <span m=''94120''>issues</span>
  <span m=''94630''>for</span> <span m=''95060''>project</span> <span m=''95630''>one,</span>
  <span m=''97210''>we</span> <span m=''97300''>have</span> <span m=''97470''>been</span>
  <span m=''97640''>probably</span> <span m=''98830''>worked</span> <span m=''99120''>with,</span>
  <span m=''99680''>and</span> <span m=''100140''>they have</span> <span m=''100410''>some</span>
  <span m=''100750''>issues</span> <span m=''101010''>some</span> <span m=''101200''>people</span>
  <span m=''102080''>looked</span> <span m=''102340''>at</span> <span m=''102610''>that</span>
  <span m=''103430''>they</span> <span m=''103700''>are</span> <span m=''104390''>performance</span>
  <span m=''104870''>code.</span> <span m=''105210''>They were</span> <span m=''105510''>not</span>
  <span m=''105670''>happy</span> <span m=''106400''>because</span> <span m=''107240''>the</span>
  <span m=''107420''>thing</span> <span m=''107690''>is</span> <span m=''107790''>this.</span>
  <span m=''108850''>You</span> <span m=''108990''>can</span> <span m=''109190''>always</span>
  <span m=''110730''>run</span> <span m=''111050''>everything</span> <span m=''112390''>instantaneously</span>
  <span m=''113430''>if</span> <span m=''113570''>it</span> <span m=''113680''>doesn''t</span>
  <span m=''113920''>have</span> <span m=''114000''>to</span> <span m=''114080''>produce</span>
  <span m=''114630''>a</span> <span m=''114700''>correct</span> <span m=''115000''>answer.</span>
  <span m=''116480''>You</span> <span m=''116650''>can</span> <span m=''116790''>just</span>
  <span m=''117170''>return,</span> <span m=''117550''>and</span> <span m=''118060''>so</span>
  <span m=''118660''>part</span> <span m=''119110''>of</span> <span m=''119200''>performance</span>
  <span m=''119750''>is</span> <span m=''119900''>also</span> <span m=''120240''>it</span>
  <span m=''120580''>has</span> <span m=''120770''>to</span> <span m=''120870''>have</span>
  <span m=''120980''>some</span> <span m=''121170''>correctness.</span> <span m=''123590''>So</span>
  <span m=''123760''>certain</span> <span m=''124220''>amount</span> <span m=''124440''>of</span>
  <span m=''124520''>correctness</span> <span m=''125000''>has</span> <span m=''125140''>to</span>
  <span m=''125230''>be</span> <span m=''125360''>passed</span> <span m=''125760''>before</span>
  <span m=''125990''>we</span> <span m=''126110''>can</span> <span m=''126320''>give</span>
  <span m=''126460''>performer</span> <span m=''126990''>grade.</span> </p><p><span
  m=''127270''>So</span> <span m=''127620''>some</span> <span m=''127820''>people</span>
  <span m=''128030''>have</span> <span m=''128190''>this</span> <span m=''128350''>question.</span>
  <span m=''130490''>Why</span> <span m=''130699''>are you</span> <span m=''130860''>giving</span>
  <span m=''131160''>me a</span> <span m=''131310''>correctness</span> <span m=''131750''>grade</span>
  <span m=''132040''>because</span> <span m=''132700''>it</span> <span m=''132850''>seemed</span>
  <span m=''133120''>to</span> <span m=''133490''>run?</span> <span m=''134240''>But</span>
  <span m=''134390''>if</span> <span m=''134510''>you</span> <span m=''134640''>haven''t</span>
  <span m=''134990''>done</span> <span m=''135560''>the</span> <span m=''135800''>right</span>
  <span m=''136060''>checks</span> <span m=''136410''>and</span> <span m=''136550''>stuff</span>
  <span m=''136790''>like</span> <span m=''136970''>that,</span> <span m=''137150''>then</span>
  <span m=''137400''>it''s</span> <span m=''137620''>unfair</span> <span m=''138010''>for</span>
  <span m=''138150''>other</span> <span m=''138270''>people</span> <span m=''138500''>because</span>
  <span m=''138730''>there''s</span> <span m=''138940''>no way</span> <span m=''139720''>people</span>
  <span m=''139960''>who</span> <span m=''140300''>do</span> <span m=''140450''>the
  correct</span> <span m=''140780''>implementation</span> <span m=''141400''>can</span>
  <span m=''141600''>match</span> <span m=''141800''>that</span> <span m=''142020''>performance</span>
  <span m=''142710''>because</span> <span m=''142940''>we''re</span> <span m=''143040''>using</span>
  <span m=''143390''>that</span> <span m=''143560''>as</span> <span m=''143740''>upper</span>
  <span m=''143870''>bound.</span> <span m=''144550''>So</span> <span m=''144690''>make</span>
  <span m=''144910''>sure</span> <span m=''145260''>you</span> <span m=''145480''>do</span>
  <span m=''145590''>that.</span> </p><p><span m=''146110''>And</span> <span m=''146670''>another</span>
  <span m=''147030''>issue</span> <span m=''147180''>people</span> <span m=''147490''>had</span>
  <span m=''147760''>was</span> <span m=''149410''>when</span> <span m=''149550''>you
  go</span> <span m=''149870''>to</span> <span m=''150210''>masters,</span> <span
  m=''150660''>you''re</span> <span m=''150860''>going</span> <span m=''151020''>to</span>
  <span m=''151090''>work</span> <span m=''151680''>with</span> <span m=''153070''>one</span>
  <span m=''153290''>or two</span> <span m=''153410''>other</span> <span m=''153690''>students.</span>
  <span m=''154730''>And</span> <span m=''156700''>in your</span> <span m=''157130''>group,</span>
  <span m=''157670''>you''re</span> <span m=''157860''>going</span> <span m=''157990''>to</span>
  <span m=''158030''>share</span> <span m=''158350''>all the</span> <span m=''158470''>material</span>
  <span m=''158910''>with</span> <span m=''159210''>your</span> <span m=''159400''>group</span>
  <span m=''160550''>member</span> <span m=''160900''>and</span> <span m=''161130''>nobody</span>
  <span m=''161480''>else.</span> <span m=''162260''>But</span> <span m=''163240''>between</span>
  <span m=''163740''>the</span> <span m=''164830''>beta</span> <span m=''165370''>and</span>
  <span m=''165610''>final,</span> <span m=''166570''>you</span> <span m=''166750''>get</span>
  <span m=''166940''>opportunity</span> <span m=''167580''>to</span> <span m=''167680''>basically</span>
  <span m=''168830''>get</span> <span m=''169220''>input</span> <span m=''169720''>from</span>
  <span m=''169930''>your</span> <span m=''170020''>masters,</span> <span m=''170860''>and</span>
  <span m=''171050''>also</span> <span m=''171490''>see</span> <span m=''171710''>what</span>
  <span m=''172240''>the</span> <span m=''172460''>other</span> <span m=''173210''>people</span>
  <span m=''173400''>who</span> <span m=''173600''>are</span> <span m=''173690''>coming</span>
  <span m=''174020''>to</span> <span m=''174220''>a</span> <span m=''174270''>project</span>
  <span m=''175080''>in</span> <span m=''175330''>your</span> <span m=''175720''>discussion</span>
  <span m=''176350''>have</span> <span m=''176610''>done.</span> <span m=''177330''>So</span>
  <span m=''177540''>it''s</span> <span m=''177710''>OK</span> <span m=''177940''>for</span>
  <span m=''178060''>you to</span> <span m=''178300''>see</span> <span m=''178490''>those</span>
  <span m=''178720''>code.</span> </p><p><span m=''179100''>You</span> <span m=''179260''>can''t</span>
  <span m=''179480''>take</span> <span m=''179650''>the</span> <span m=''179730''>code</span>
  <span m=''179930''>home.</span> <span m=''180370''>You</span> <span m=''180460''>can''t
  just</span> <span m=''180610''>say</span> <span m=''180760''>give me</span> <span
  m=''181150''>a print-out,</span> <span m=''181540''>I am</span> <span m=''181690''>going
  to</span> <span m=''181840''>take</span> <span m=''182000''>home and</span> <span
  m=''182400''>re-implement.</span> <span m=''182860''>That</span> <span m=''183010''>doesn''t</span>
  <span m=''183400''>count,</span> <span m=''183820''>but</span> <span m=''184080''>if</span>
  <span m=''184200''>you</span> <span m=''184350''>see</span> <span m=''184490''>some</span>
  <span m=''184870''>clever</span> <span m=''185020''>things</span> <span m=''185270''>they</span>
  <span m=''185360''>have</span> <span m=''185570''>done,</span> <span m=''186190''>it''s
  all</span> <span m=''186490''>here</span> <span m=''186760''>to learn.</span> </p><p><span
  m=''187560''>Class is</span> <span m=''187980''>all</span> <span m=''188140''>the</span>
  <span m=''188300''>mostly</span> <span m=''188740''>about</span> <span m=''188990''>learning.</span>
  <span m=''190240''>However</span> <span m=''190390''>we</span> <span m=''190530''>have</span>
  <span m=''190680''>to</span> <span m=''190880''>grade</span> <span m=''191040''>you,</span>
  <span m=''191420''>so</span> <span m=''191540''>it''s</span> <span m=''191710''>not</span>
  <span m=''191850''>all</span> <span m=''192030''>about</span> <span m=''192270''>grading,</span>
  <span m=''192650''>it''s</span> <span m=''192760''>about</span> <span m=''192950''>learning.</span>
  <span m=''193670''>So</span> <span m=''193840''>we</span> <span m=''194160''>are</span>
  <span m=''194370''>trying</span> <span m=''194570''>to</span> <span m=''194610''>get</span>
  <span m=''194780''>a</span> <span m=''194820''>balance</span> <span m=''195540''>where</span>
  <span m=''195630''>we</span> <span m=''196180''>opportunity</span> <span m=''196650''>for</span>
  <span m=''196790''>you</span> <span m=''196880''>to</span> <span m=''196990''>learn</span>
  <span m=''197310''>from</span> <span m=''197500''>your</span> <span m=''197990''>peers.</span>
  <span m=''198890''>So</span> <span m=''199300''>if</span> <span m=''199460''>you</span>
  <span m=''199580''>go</span> <span m=''199930''>look</span> <span m=''200130''>at</span>
  <span m=''200220''>other</span> <span m=''200380''>people''s</span> <span m=''200700''>code,</span>
  <span m=''200890''>if</span> <span m=''200980''>you</span> <span m=''201090''>find</span>
  <span m=''201400''>something</span> <span m=''201700''>cool</span> <span m=''201910''>they</span>
  <span m=''202060''>have</span> <span m=''202210''>done,</span> <span m=''203130''>learn.</span>
  </p><p><span m=''203400''>And</span> <span m=''203460''>also</span> <span m=''203660''>if</span>
  <span m=''203860''>you</span> <span m=''204100''>[UNINTELLIGIBLE]</span> <span m=''204950''>for</span>
  <span m=''205040''>you</span> <span m=''205320''>[UNINTELLIGIBLE]</span> <span m=''206130''>say,</span>
  <span m=''206230''>look,</span> <span m=''206555''>I did</span> <span m=''206880''>something</span>
  <span m=''207190''>cool.</span> <span m=''208150''>It''s</span> <span m=''208320''>a</span>
  <span m=''208370''>good</span> <span m=''208560''>learning</span> <span m=''208850''>experience</span>
  <span m=''209630''>in</span> <span m=''209790''>there,</span> <span m=''210320''>so</span>
  <span m=''210930''>that''s</span> <span m=''211240''>one</span> <span m=''211540''>opportunity</span>
  <span m=''212010''>you</span> <span m=''212100''>have</span> <span m=''212620''>to</span>
  <span m=''212770''>talk</span> <span m=''213110''>to</span> <span m=''213200''>other</span>
  <span m=''213420''>people</span> <span m=''214470''>on</span> <span m=''214690''>other</span>
  <span m=''214910''>groups,</span> <span m=''215620''>to</span> <span m=''215690''>basically</span>
  <span m=''216370''>learn</span> <span m=''216630''>something</span> <span m=''217050''>or</span>
  <span m=''217460''>find</span> <span m=''217690''>some</span> <span m=''217850''>interesting</span>
  <span m=''218250''>tidbits</span> <span m=''218400''>of</span> <span m=''218560''>how</span>
  <span m=''219390''>to</span> <span m=''219470''>get</span> <span m=''219640''>good</span>
  <span m=''219820''>performance.</span> <span m=''220510''>And</span> <span m=''220630''>hopefully,</span>
  <span m=''221070''>you</span> <span m=''221260''>learn</span> <span m=''221610''>some</span>
  <span m=''221800''>interesting</span> <span m=''222200''>things</span> <span m=''222560''>and</span>
  <span m=''223150''>able</span> <span m=''223340''>to</span> <span m=''223500''>implement</span>
  <span m=''223990''>that</span> <span m=''224160''>in your</span> <span m=''224280''>final.</span>
  <span m=''225770''>OK?</span> </p><p><span m=''226790''>So</span> <span m=''227690''>today</span>
  <span m=''228750''>we</span> <span m=''228910''>are</span> <span m=''229060''>going</span>
  <span m=''229240''>to</span> <span m=''229360''>talk</span> <span m=''229700''>about</span>
  <span m=''230060''>memory</span> <span m=''230440''>systems</span> <span m=''231080''>and</span>
  <span m=''231370''>performance</span> <span m=''231860''>engineering.</span> <span
  m=''233900''>So</span> <span m=''234720''>if</span> <span m=''234860''>you</span>
  <span m=''235000''>look</span> <span m=''235380''>at</span> <span m=''238090''>basic</span>
  <span m=''238710''>idea</span> <span m=''239020''>of what</span> <span m=''239180''>memory</span>
  <span m=''239440''>systems,</span> <span m=''240440''>you</span> <span m=''240640''>want</span>
  <span m=''240960''>to</span> <span m=''241160''>build</span> <span m=''241610''>a</span>
  <span m=''241740''>computer</span> <span m=''242170''>that</span> <span m=''243190''>seemed</span>
  <span m=''243590''>to</span> <span m=''243700''>have</span> <span m=''243870''>a</span>
  <span m=''244100''>really</span> <span m=''244560''>fast</span> <span m=''245060''>memory.</span>
  <span m=''245860''>You</span> <span m=''246020''>don''t</span> <span m=''246180''>want</span>
  <span m=''247020''>things</span> <span m=''247260''>to</span> <span m=''247330''>be</span>
  <span m=''247470''>slow.</span> <span m=''247750''>For</span> <span m=''247890''>example,</span>
  <span m=''248290''>a</span> <span m=''248330''>long</span> <span m=''248490''>time</span>
  <span m=''248670''>ago,</span> <span m=''248810''>people</span> <span m=''249160''>build</span>
  <span m=''249390''>these</span> <span m=''249560''>computers</span> <span m=''250110''>where</span>
  <span m=''251010''>memory''s</span> <span m=''251460''>always</span> <span m=''251980''>slow,</span>
  <span m=''252200''>everything</span> <span m=''252630''>[UNINTELLIGIBLE]</span>
  <span m=''253590''>further</span> <span m=''253810''>away.</span> <span m=''254350''>It</span>
  <span m=''254470''>doesn''t</span> <span m=''254690''>help</span> <span m=''254870''>anybody.</span>
  </p><p><span m=''255872''>The way</span> <span m=''256209''>we</span> <span m=''256544''>know</span>
  <span m=''256880''>how</span> <span m=''257040''>to</span> <span m=''257209''>do</span>
  <span m=''257420''>that</span> <span m=''257910''>is</span> <span m=''258140''>to</span>
  <span m=''258250''>build</span> <span m=''259029''>small</span> <span m=''259660''>amount</span>
  <span m=''260089''>of</span> <span m=''260190''>memory</span> <span m=''260610''>very</span>
  <span m=''260870''>close</span> <span m=''261149''>to</span> <span m=''261519''>the</span>
  <span m=''262120''>processor.</span> <span m=''263460''>You</span> <span m=''263590''>can''t</span>
  <span m=''263940''>build</span> <span m=''264110''>a</span> <span m=''264160''>huge</span>
  <span m=''264500''>amount</span> <span m=''264790''>of</span> <span m=''264900''>things</span>
  <span m=''265110''>all</span> <span m=''265400''>close</span> <span m=''265710''>to
  you.</span> <span m=''265860''>That</span> <span m=''266040''>doesn''t</span> <span
  m=''266300''>work,</span> <span m=''266680''>doesn''t</span> <span m=''267010''>scale</span>
  <span m=''267300''>like that.</span> <span m=''269890''>And</span> <span m=''270040''>we</span>
  <span m=''270160''>made</span> <span m=''270350''>a</span> <span m=''270410''>cache</span>
  <span m=''270660''>just</span> <span m=''270860''>like</span> <span m=''271040''>that,</span>
  <span m=''271170''>and</span> <span m=''271350''>you</span> <span m=''271470''>build</span>
  <span m=''271600''>larger</span> <span m=''271990''>and</span> <span m=''272090''>larger</span>
  <span m=''272310''>memory</span> <span m=''272530''>[UNINTELLIGIBLE]</span> <span
  m=''272750''>going</span> <span m=''273010''>down,</span> <span m=''273730''>and</span>
  <span m=''274380''>the</span> <span m=''274550''>illusion</span> <span m=''275060''>is</span>
  <span m=''275350''>you want</span> <span m=''275550''>to give</span> <span m=''275810''>the</span>
  <span m=''276210''>illusion</span> <span m=''276770''>of you</span> <span m=''277020''>have</span>
  <span m=''277240''>huge</span> <span m=''277550''>amount</span> <span m=''277800''>of</span>
  <span m=''277860''>memory.</span> </p><p><span m=''279080''>Everybody''s</span>
  <span m=''279740''>very</span> <span m=''279920''>close</span> <span m=''280210''>to
  you.</span> <span m=''281540''>OK,</span> <span m=''281760''>so</span> <span m=''281940''>it</span>
  <span m=''282070''>looks</span> <span m=''282310''>like</span> <span m=''282620''>you
  have</span> <span m=''282730''>millions</span> <span m=''283130''>of</span> <span
  m=''283300''>friends,</span> <span m=''284000''>that</span> <span m=''284200''>you</span>
  <span m=''284370''>talk</span> <span m=''284590''>to</span> <span m=''284640''>everybody,</span>
  <span m=''285190''>and</span> <span m=''285320''>that</span> <span m=''285470''>doesn''t</span>
  <span m=''285690''>happen.</span> <span m=''286870''>But</span> <span m=''287740''>how</span>
  <span m=''287980''>do</span> <span m=''288080''>you</span> <span m=''288180''>give</span>
  <span m=''288340''>that</span> <span m=''288510''>illusion?</span> <span m=''289040''>And</span>
  <span m=''289170''>the</span> <span m=''289270''>way</span> <span m=''289510''>that</span>
  <span m=''289700''>you</span> <span m=''289820''>give</span> <span m=''290020''>that</span>
  <span m=''290070''>illusion</span> <span m=''290500''>is</span> <span m=''291320''>when</span>
  <span m=''291530''>you</span> <span m=''291690''>use</span> <span m=''292670''>normal</span>
  <span m=''293130''>programming</span> <span m=''293670''>practice,</span> <span
  m=''294130''>when you</span> <span m=''294650''>normally</span> <span m=''295090''>using</span>
  <span m=''295510''>data,</span> <span m=''296510''>people</span> <span m=''296840''>have</span>
  <span m=''297040''>found</span> <span m=''297310''>there are</span> <span m=''297430''>two</span>
  <span m=''297730''>properties.</span> </p><p><span m=''301820''>The</span> <span
  m=''302240''>first</span> <span m=''302490''>thing</span> <span m=''302660''>is</span>
  <span m=''302790''>called</span> <span m=''303030''>temporal</span> <span m=''303460''>locality.</span>
  <span m=''304010''>That</span> <span m=''304260''>means</span> <span m=''304580''>if</span>
  <span m=''304720''>I</span> <span m=''305530''>use</span> <span m=''305710''>some</span>
  <span m=''305960''>data</span> <span m=''306190''>item,</span> <span m=''307140''>there''s</span>
  <span m=''307340''>a</span> <span m=''307420''>good</span> <span m=''307730''>chance</span>
  <span m=''308170''>I</span> <span m=''308290''>use</span> <span m=''308690''>that</span>
  <span m=''308840''>data</span> <span m=''309040''>item</span> <span m=''309220''>again</span>
  <span m=''309800''>very</span> <span m=''310040''>soon.</span> <span m=''311400''>There</span>
  <span m=''311580''>is</span> <span m=''311730''>something</span> <span m=''312110''>I</span>
  <span m=''312270''>haven''t</span> <span m=''313760''>used</span> <span m=''314120''>for</span>
  <span m=''314280''>a</span> <span m=''314300''>long</span> <span m=''314600''>time,</span>
  <span m=''315870''>probably</span> <span m=''316150''>has</span> <span m=''316340''>a</span>
  <span m=''316400''>good</span> <span m=''316600''>chance</span> <span m=''317380''>I
  will</span> <span m=''317690''>not</span> <span m=''317890''>use</span> <span m=''318050''>it</span>
  <span m=''318150''>for</span> <span m=''318310''>a</span> <span m=''318360''>very,</span>
  <span m=''318520''>very</span> <span m=''318710''>long</span> <span m=''318970''>time.</span>
  <span m=''319520''>So</span> <span m=''319720''>can</span> <span m=''319970''>I</span>
  <span m=''320050''>take</span> <span m=''320320''>advantage</span> <span m=''320790''>of</span>
  <span m=''320900''>temporal</span> <span m=''321280''>locality?</span> <span m=''321590''>So</span>
  <span m=''321720''>that</span> <span m=''321890''>mean</span> <span m=''322030''>some</span>
  <span m=''322370''>data</span> <span m=''322490''>will</span> <span m=''322600''>be</span>
  <span m=''322780''>get</span> <span m=''322990''>for</span> <span m=''323180''>use</span>
  <span m=''323500''>a</span> <span m=''323540''>lot</span> <span m=''323810''>of</span>
  <span m=''323940''>time,</span> <span m=''324430''>in a</span> <span m=''324580''>very</span>
  <span m=''324820''>quick</span> <span m=''325190''>[UNINTELLIGIBLE],</span> <span
  m=''326300''>so</span> <span m=''326440''>those</span> <span m=''326680''>things</span>
  <span m=''326840''>should</span> <span m=''326970''>be</span> <span m=''327100''>very</span>
  <span m=''327270''>near</span> <span m=''327550''>to</span> <span m=''327650''>you</span>
  <span m=''327790''>because</span> <span m=''328070''>you</span> <span m=''328180''>might.</span>
  </p><p><span m=''329380''>Other</span> <span m=''329460''>one</span> <span m=''329580''>is</span>
  <span m=''329720''>spatial</span> <span m=''329980''>locality.</span> <span m=''331060''>That</span>
  <span m=''331270''>means</span> <span m=''331480''>if</span> <span m=''331650''>I</span>
  <span m=''331710''>use</span> <span m=''331920''>some</span> <span m=''332130''>data</span>
  <span m=''332370''>item,</span> <span m=''332800''>there''s</span> <span m=''332940''>a</span>
  <span m=''333010''>good</span> <span m=''333280''>chance</span> <span m=''333640''>you''ll</span>
  <span m=''333810''>be</span> <span m=''333970''>using</span> <span m=''334370''>data</span>
  <span m=''334620''>items</span> <span m=''335020''>next</span> <span m=''335210''>to</span>
  <span m=''335280''>that,</span> <span m=''335660''>closer</span> <span m=''336000''>to</span>
  <span m=''336080''>that.</span> <span m=''336760''>So</span> <span m=''336960''>can</span>
  <span m=''337130''>we</span> <span m=''337250''>take</span> <span m=''337470''>advantage</span>
  <span m=''338000''>of</span> <span m=''338100''>that?</span> <span m=''338700''>So</span>
  <span m=''338830''>those</span> <span m=''339260''>two</span> <span m=''339420''>properties</span>
  <span m=''340910''>help</span> <span m=''341250''>you</span> <span m=''341790''>help</span>
  <span m=''342120''>the</span> <span m=''342210''>compiler</span> <span m=''342990''>to
  fool</span> <span m=''343500''>the</span> <span m=''343630''>system,</span> <span
  m=''344090''>fool</span> <span m=''344420''>everybody,</span> <span m=''345040''>thinking</span>
  <span m=''345830''>that</span> <span m=''346010''>it</span> <span m=''346170''>has</span>
  <span m=''346410''>this</span> <span m=''346600''>huge</span> <span m=''346940''>amount</span>
  <span m=''347190''>of memory</span> <span m=''347270''>very</span> <span m=''347680''>close</span>
  <span m=''347950''>to you,</span> <span m=''348480''>but</span> <span m=''348760''>internally</span>
  <span m=''349210''>doesn''t.</span> <span m=''350310''>Unfortunately,</span> <span
  m=''351480''>since</span> <span m=''351760''>it''s</span> <span m=''351890''>trying</span>
  <span m=''352050''>to</span> <span m=''352280''>fool</span> <span m=''352580''>you,</span>
  <span m=''353150''>it</span> <span m=''353450''>doesn''t</span> <span m=''353690''>work</span>
  <span m=''353900''>all</span> <span m=''354010''>the</span> <span m=''354130''>time,</span>
  <span m=''354650''>and</span> <span m=''354870''>when</span> <span m=''354930''>it</span>
  <span m=''355140''>doesn''t</span> <span m=''355480''>work,</span> <span m=''355640''>it''s</span>
  <span m=''355780''>good</span> <span m=''356030''>to</span> <span m=''356110''>recognize</span>
  <span m=''357340''>and</span> <span m=''358530''>able</span> <span m=''358800''>to</span>
  <span m=''358860''>fix</span> <span m=''359090''>those</span> <span m=''359320''>things.</span>
  </p><p><span m=''361000''>So</span> <span m=''361790''>I</span> <span m=''361920''>showed</span>
  <span m=''362270''>this</span> <span m=''362650''>picture</span> <span m=''363210''>sometime</span>
  <span m=''363670''>ago,</span> <span m=''363920''>too.</span> <span m=''365280''>Memories</span>
  <span m=''365910''>in</span> <span m=''366040''>a</span> <span m=''366090''>big</span>
  <span m=''366320''>hierarchy.</span> <span m=''368440''>L1,</span> <span m=''368930''>L2,</span>
  <span m=''369240''>in</span> <span m=''369420''>fact,</span> <span m=''369610''>we</span>
  <span m=''369680''>have</span> <span m=''369810''>L3</span> <span m=''370250''>cache</span>
  <span m=''370780''>and</span> <span m=''370970''>a</span> <span m=''371140''>memory,</span>
  <span m=''372020''>disk,</span> <span m=''372630''>tapes,</span> <span m=''372980''>it</span>
  <span m=''373110''>can</span> <span m=''373290''>go</span> <span m=''373410''>up</span>
  <span m=''373620''>and</span> <span m=''373875''>down.</span> <span m=''374130''>And</span>
  <span m=''374290''>the</span> <span m=''374480''>key</span> <span m=''374710''>thing</span>
  <span m=''374940''>is</span> <span m=''375040''>when</span> <span m=''375180''>you</span>
  <span m=''375270''>go</span> <span m=''375420''>here,</span> <span m=''376140''>you''re
  starting</span> <span m=''376530''>from registers,</span> <span m=''377220''>you</span>
  <span m=''377350''>have</span> <span m=''377810''>very</span> <span m=''378000''>small</span>
  <span m=''378290''>amount</span> <span m=''378550''>of</span> <span m=''378630''>things,</span>
  <span m=''378810''>very</span> <span m=''379010''>fast</span> <span m=''379320''>access.</span>
  <span m=''380570''>Here,</span> <span m=''380840''>we</span> <span m=''380990''>have</span>
  <span m=''381290''>almost</span> <span m=''381660''>infinite</span> <span m=''382030''>amount</span>
  <span m=''382320''>of</span> <span m=''382440''>things,</span> <span m=''382960''>very</span>
  <span m=''383260''>slow</span> <span m=''383410''>access.</span> </p><p><span m=''384290''>And</span>
  <span m=''384760''>the</span> <span m=''385530''>two</span> <span m=''385730''>reasons</span>
  <span m=''386130''>why</span> <span m=''386310''>this</span> <span m=''386910''>has</span>
  <span m=''387120''>to</span> <span m=''387180''>be</span> <span m=''387290''>smart</span>
  <span m=''388070''>because</span> <span m=''388260''>first</span> <span m=''388500''>of</span>
  <span m=''388620''>all,</span> <span m=''388740''>those</span> <span m=''388950''>things</span>
  <span m=''389160''>are</span> <span m=''389240''>very</span> <span m=''389440''>expensive.</span>
  <span m=''390510''>And</span> <span m=''390730''>second</span> <span m=''391050''>of</span>
  <span m=''391160''>course,</span> <span m=''391400''>you</span> <span m=''391510''>can''t</span>
  <span m=''391820''>[UNINTELLIGIBLE]</span> <span m=''391980''>too</span> <span m=''392140''>much,</span>
  <span m=''392760''>and</span> <span m=''392960''>when</span> <span m=''393080''>you</span>
  <span m=''393160''>go</span> <span m=''393320''>down,</span> <span m=''393580''>things</span>
  <span m=''393810''>get</span> <span m=''394030''>somewhat</span> <span m=''394310''>cheaper.</span>
  <span m=''394680''>So</span> <span m=''394810''>that</span> <span m=''395020''>was</span>
  <span m=''395190''>one</span> <span m=''395340''>of</span> <span m=''395420''>the</span>
  <span m=''396090''>kind</span> <span m=''396290''>of</span> <span m=''396350''>economic</span>
  <span m=''396950''>incentive</span> <span m=''397350''>here.</span> </p><p><span
  m=''400900''>So</span> <span m=''401110''>I</span> <span m=''401220''>talked</span>
  <span m=''401490''>about</span> <span m=''401720''>cache</span> <span m=''402090''>issues,</span>
  <span m=''402980''>and</span> <span m=''403160''>I''m</span> <span m=''403250''>going</span>
  <span m=''403380''>to</span> <span m=''403520''>go</span> <span m=''403690''>through</span>
  <span m=''403830''>this</span> <span m=''404010''>again</span> <span m=''404310''>because</span>
  <span m=''404890''>we</span> <span m=''405060''>are</span> <span m=''405130''>really</span>
  <span m=''405370''>going</span> <span m=''405750''>to</span> <span m=''406050''>dig</span>
  <span m=''406150''>deep</span> <span m=''406450''>into</span> <span m=''406620''>these</span>
  <span m=''406860''>things.</span> <span m=''407730''>So</span> <span m=''407900''>when
  you</span> <span m=''408170''>have a</span> <span m=''408320''>cache,</span> <span
  m=''408650''>that</span> <span m=''408870''>means</span> <span m=''409090''>you</span>
  <span m=''409230''>have</span> <span m=''409720''>a</span> <span m=''409780''>small</span>
  <span m=''410120''>memory</span> <span m=''410430''>close</span> <span m=''410740''>to</span>
  <span m=''410950''>you</span> <span m=''411400''>that''s</span> <span m=''411750''>basically</span>
  <span m=''412330''>shadowing</span> <span m=''412960''>something</span> <span m=''413300''>sitting</span>
  <span m=''413790''>behind</span> <span m=''414170''>you.</span> <span m=''415070''>So</span>
  <span m=''415700''>when</span> <span m=''415920''>you</span> <span m=''416460''>ask</span>
  <span m=''416840''>for</span> <span m=''416950''>the</span> <span m=''417060''>data</span>
  <span m=''417310''>in</span> <span m=''417430''>the</span> <span m=''417520''>cache,</span>
  <span m=''417900''>there</span> <span m=''418080''>are</span> <span m=''418140''>many</span>
  <span m=''418490''>reasons</span> <span m=''419240''>why</span> <span m=''419450''>it''s</span>
  <span m=''419630''>not</span> <span m=''419830''>there.</span> </p><p><span m=''421100''>First</span>
  <span m=''421430''>thing</span> <span m=''421660''>is</span> <span m=''421800''>cold</span>
  <span m=''422150''>miss.</span> <span m=''423090''>What</span> <span m=''423300''>that</span>
  <span m=''423530''>means</span> <span m=''423850''>is</span> <span m=''423950''>you''re</span>
  <span m=''424090''>asking</span> <span m=''424430''>for</span> <span m=''424550''>something</span>
  <span m=''425110''>that</span> <span m=''425630''>you</span> <span m=''425760''>have</span>
  <span m=''425920''>never</span> <span m=''426040''>asked</span> <span m=''426210''>before.</span>
  <span m=''426645''>It''s</span> <span m=''426980''>the</span> <span m=''427150''>first</span>
  <span m=''427400''>time</span> <span m=''427660''>you''re</span> <span m=''427780''>asking,</span>
  <span m=''428720''>so</span> <span m=''428910''>the</span> <span m=''429100''>data</span>
  <span m=''429300''>is</span> <span m=''429500''>probably</span> <span m=''429770''>sitting</span>
  <span m=''430080''>way</span> <span m=''430350''>behind</span> <span m=''430750''>in</span>
  <span m=''430780''>your</span> <span m=''431000''>memory</span> <span m=''431310''>where,</span>
  <span m=''431890''>[UNINTELLIGIBLE]</span> <span m=''433180''>in a</span> <span
  m=''433270''>disk.</span> <span m=''433580''>We haven''t</span> <span m=''433890''>even</span>
  <span m=''434080''>loaded</span> <span m=''434310''>it</span> <span m=''434470''>in
  there.</span> <span m=''435330''>And</span> <span m=''435510''>the</span> <span
  m=''435580''>first</span> <span m=''436040''>time</span> <span m=''436530''>you</span>
  <span m=''436650''>have</span> <span m=''436750''>to</span> <span m=''436860''>get</span>
  <span m=''437040''>it,</span> <span m=''437570''>so</span> <span m=''439980''>that</span>
  <span m=''440150''>get</span> <span m=''440340''>pulled</span> <span m=''440570''>in,</span>
  <span m=''441780''>and</span> <span m=''443230''>so</span> <span m=''443820''>this</span>
  <span m=''443920''>seems</span> <span m=''444260''>to</span> <span m=''444370''>be</span>
  <span m=''444570''>a</span> <span m=''444870''>place</span> <span m=''445170''>where</span>
  <span m=''445600''>there''s</span> <span m=''445750''>nothing</span> <span m=''446020''>you</span>
  <span m=''446200''>can</span> <span m=''446380''>do.</span> </p><p><span m=''447080''>But</span>
  <span m=''448350''>another</span> <span m=''448770''>part</span> <span m=''449090''>of</span>
  <span m=''449200''>locality</span> <span m=''449720''>is</span> <span m=''450320''>a
  thing</span> <span m=''450560''>called</span> <span m=''450730''>prefetching.</span>
  <span m=''452460''>These</span> <span m=''452820''>modern</span> <span m=''453470''>processors</span>
  <span m=''455370''>have</span> <span m=''455650''>a</span> <span m=''455930''>crystal</span>
  <span m=''456205''>ball.</span> <span m=''457350''>They</span> <span m=''457650''>carry</span>
  <span m=''457970''>most</span> <span m=''458280''>of</span> <span m=''458420''>the</span>
  <span m=''458530''>things</span> <span m=''458740''>that</span> <span m=''458820''>branch</span>
  <span m=''459240''>prediction</span> <span m=''459680''>and</span> <span m=''459780''>stuff</span>
  <span m=''460200''>is</span> <span m=''460650''>trying</span> <span m=''462090''>to</span>
  <span m=''462340''>predict</span> <span m=''462770''>what</span> <span m=''462940''>you</span>
  <span m=''463120''>want</span> <span m=''463260''>to</span> <span m=''463400''>do.</span>
  <span m=''463980''>You</span> <span m=''464090''>can do</span> <span m=''464460''>the</span>
  <span m=''464540''>same</span> <span m=''464780''>thing</span> <span m=''464920''>in</span>
  <span m=''465020''>memory.</span> <span m=''466320''>You</span> <span m=''466500''>can</span>
  <span m=''466690''>look</span> <span m=''466860''>at</span> <span m=''467040''>what</span>
  <span m=''467190''>you</span> <span m=''467340''>have</span> <span m=''467590''>done.</span>
  </p><p><span m=''468550''>And</span> <span m=''469060''>Intel</span> <span m=''469400''>has</span>
  <span m=''469670''>this</span> <span m=''469940''>huge</span> <span m=''470310''>amount</span>
  <span m=''470630''>of</span> <span m=''470720''>circuitry</span> <span m=''470970''>that</span>
  <span m=''471180''>they</span> <span m=''471270''>don''t</span> <span m=''471470''>tell</span>
  <span m=''471610''>anybody</span> <span m=''472010''>what</span> <span m=''472200''>they</span>
  <span m=''472320''>do,</span> <span m=''473060''>but</span> <span m=''473260''>they''re</span>
  <span m=''473420''>trying</span> <span m=''473540''>to</span> <span m=''473670''>predict</span>
  <span m=''474150''>what</span> <span m=''474380''>you</span> <span m=''474500''>might</span>
  <span m=''474810''>fetch</span> <span m=''475160''>next,</span> <span m=''475470''>what</span>
  <span m=''475780''>data</span> <span m=''475910''>you might</span> <span m=''476120''>look</span>
  <span m=''476280''>for</span> <span m=''476480''>next.</span> <span m=''477060''>And</span>
  <span m=''477420''>if</span> <span m=''477630''>it</span> <span m=''477760''>is</span>
  <span m=''479160''>working</span> <span m=''479880''>well,</span> <span m=''480200''>something</span>
  <span m=''480700''>you had</span> <span m=''480750''>never,</span> <span m=''481220''>ever</span>
  <span m=''481610''>looked</span> <span m=''481810''>before,</span> <span m=''482360''>it</span>
  <span m=''482530''>might</span> <span m=''482990''>deduce</span> <span m=''483470''>that</span>
  <span m=''483620''>you</span> <span m=''483720''>might</span> <span m=''483910''>need</span>
  <span m=''484150''>it</span> <span m=''484300''>and</span> <span m=''484480''>go</span>
  <span m=''484590''>get</span> <span m=''484750''>it</span> <span m=''484880''>for</span>
  <span m=''484990''>you.</span> <span m=''485560''>So</span> <span m=''486170''>if</span>
  <span m=''486280''>that</span> <span m=''486560''>works,</span> <span m=''487790''>great.</span>
  </p><p><span m=''490130''>So</span> <span m=''490260''>then</span> <span m=''490450''>there''s</span>
  <span m=''490690''>thing called</span> <span m=''490820''>capacity</span> <span
  m=''490960''>miss.</span> <span m=''492790''>What</span> <span m=''493070''>that</span>
  <span m=''493290''>means</span> <span m=''493620''>is</span> <span m=''495520''>as</span>
  <span m=''495780''>I</span> <span m=''495850''>said,</span> <span m=''496480''>I
  am</span> <span m=''496800''>trying</span> <span m=''496990''>to</span> <span m=''497180''>keep</span>
  <span m=''497710''>my</span> <span m=''497880''>best</span> <span m=''498240''>friends,</span>
  <span m=''498750''>or</span> <span m=''498930''>the</span> <span m=''499100''>people</span>
  <span m=''499500''>I</span> <span m=''499820''>will</span> <span m=''500210''>be</span>
  <span m=''500640''>working</span> <span m=''501120''>with</span> <span m=''501300''>a</span>
  <span m=''501330''>lot--</span> <span m=''502330''>Oh,</span> <span m=''502450''>nice.</span>
  <span m=''503000''>What''s</span> <span m=''503620''>going</span> <span m=''503870''>on</span>
  <span m=''504030''>here?</span> <span m=''506240''>Please</span> <span m=''506630''>start</span>
  <span m=''506960''>later.</span> <span m=''508040''>OK.</span> <span m=''512169''>--the</span>
  <span m=''512429''>people</span> <span m=''512809''>I''m</span> <span m=''512950''>going</span>
  <span m=''513100''>to</span> <span m=''513159''>work</span> <span m=''513440''>a
  lot</span> <span m=''513549''>with,</span> <span m=''514169''>close</span> <span
  m=''514429''>to</span> <span m=''514530''>me.</span> </p><p><span m=''515820''>The</span>
  <span m=''515940''>problem</span> <span m=''516419''>is</span> <span m=''516880''>I</span>
  <span m=''516929''>can have</span> <span m=''517150''>only</span> <span m=''517190''>certain</span>
  <span m=''517480''>number</span> <span m=''517740''>of</span> <span m=''517820''>friends,</span>
  <span m=''518340''>and</span> <span m=''518880''>if</span> <span m=''518990''>you</span>
  <span m=''519070''>have</span> <span m=''519200''>more</span> <span m=''519370''>than</span>
  <span m=''519610''>that,</span> <span m=''520530''>I</span> <span m=''520640''>can''t</span>
  <span m=''520890''>keep</span> <span m=''521080''>everybody.</span> <span m=''521890''>So</span>
  <span m=''522630''>hopefully,</span> <span m=''523230''>your</span> <span m=''523309''>program</span>
  <span m=''524300''>is</span> <span m=''524520''>going</span> <span m=''524720''>to</span>
  <span m=''524770''>use</span> <span m=''525190''>a</span> <span m=''525240''>lot</span>
  <span m=''526140''>what</span> <span m=''526310''>we</span> <span m=''526430''>call</span>
  <span m=''526600''>the</span> <span m=''526690''>working</span> <span m=''527160''>set</span>
  <span m=''527600''>that</span> <span m=''527820''>can</span> <span m=''527970''>fit</span>
  <span m=''528170''>in</span> <span m=''528270''>the</span> <span m=''528370''>cache.</span>
  <span m=''529400''>And</span> <span m=''529510''>at</span> <span m=''529630''>that</span>
  <span m=''529840''>point,</span> <span m=''530240''>you</span> <span m=''530360''>get</span>
  <span m=''530610''>all</span> <span m=''530720''>of</span> <span m=''530790''>those</span>
  <span m=''530990''>people,</span> <span m=''531240''>like</span> <span m=''531490''>I</span>
  <span m=''531540''>said,</span> <span m=''532030''>get</span> <span m=''532190''>everybody</span>
  <span m=''532550''>into</span> <span m=''532670''>one</span> <span m=''532930''>room,</span>
  <span m=''533630''>and</span> <span m=''534780''>the</span> <span m=''534860''>problem</span>
  <span m=''535230''>is</span> <span m=''535340''>if</span> <span m=''535490''>your</span>
  <span m=''536600''>party</span> <span m=''536940''>spills</span> <span m=''537280''>over</span>
  <span m=''537510''>from</span> <span m=''537700''>the</span> <span m=''537800''>room,</span>
  <span m=''538000''>then</span> <span m=''538150''>there''s</span> <span m=''538390''>a</span>
  <span m=''538470''>lot</span> <span m=''538660''>of</span> <span m=''538780''>issues.</span>
  <span m=''539340''>But</span> <span m=''539560''>if</span> <span m=''539690''>everybody</span>
  <span m=''540070''>fits</span> <span m=''540290''>in</span> <span m=''540380''>the</span>
  <span m=''540480''>room,</span> <span m=''540710''>things</span> <span m=''541000''>are</span>
  <span m=''541380''>very</span> <span m=''541450''>nice.</span> <span m=''541570''>You</span>
  <span m=''541670''>can</span> <span m=''541840''>have</span> <span m=''542000''>a</span>
  <span m=''542160''>good</span> <span m=''542460''>interaction,</span> <span m=''543000''>continuous</span>
  <span m=''543390''>interaction,</span> <span m=''543860''>with</span> <span m=''544000''>them.</span>
  </p><p><span m=''544850''>And</span> <span m=''545210''>what</span> <span m=''545380''>happens</span>
  <span m=''545770''>is,</span> <span m=''546030''>if</span> <span m=''546250''>not,</span>
  <span m=''548000''>the</span> <span m=''548090''>worst</span> <span m=''548360''>case</span>
  <span m=''548670''>is</span> <span m=''549920''>the</span> <span m=''550320''>caches</span>
  <span m=''550900''>have</span> <span m=''551190''>eviction</span> <span m=''551710''>policy,</span>
  <span m=''553280''>normally</span> <span m=''553680''>is</span> <span m=''553860''>called</span>
  <span m=''554060''>least</span> <span m=''554400''>recently</span> <span m=''554820''>used.</span>
  <span m=''555370''>That</span> <span m=''555600''>means</span> <span m=''556120''>if</span>
  <span m=''556460''>I</span> <span m=''556580''>don''t</span> <span m=''556780''>have</span>
  <span m=''556980''>room</span> <span m=''557240''>in</span> <span m=''557310''>the</span>
  <span m=''557420''>cache,</span> <span m=''557900''>I</span> <span m=''558080''>figure</span>
  <span m=''558480''>out</span> <span m=''558750''>the</span> <span m=''559160''>cache</span>
  <span m=''559640''>line</span> <span m=''560030''>that</span> <span m=''560200''>I</span>
  <span m=''560270''>haven''t</span> <span m=''560490''>touched</span> <span m=''560890''>for</span>
  <span m=''561160''>longest,</span> <span m=''561500''>and</span> <span m=''561680''>I</span>
  <span m=''561730''>get</span> <span m=''561970''>rid of</span> <span m=''562220''>that,</span>
  <span m=''562720''>bring</span> <span m=''562900''>the</span> <span m=''563000''>next</span>
  <span m=''563230''>one.</span> <span m=''564710''>So</span> <span m=''565610''>that''s</span>
  <span m=''565810''>a</span> <span m=''566020''>good</span> <span m=''566250''>policy.</span>
  <span m=''567250''>It</span> <span m=''567430''>fits</span> <span m=''567610''>in</span>
  <span m=''567870''>your</span> <span m=''568090''>locality</span> <span m=''568550''>thing,</span>
  <span m=''569030''>but</span> <span m=''569480''>when</span> <span m=''569740''>will</span>
  <span m=''569860''>did</span> <span m=''570020''>not</span> <span m=''570250''>work?</span>
  <span m=''573620''>[UNINTELLIGIBLE]</span> <span m=''574220''>going</span> <span
  m=''574440''>to</span> <span m=''574480''>figure</span> <span m=''574720''>out</span>
  <span m=''575245''>when</span> <span m=''577710''>least</span> <span m=''578530''>recently</span>
  <span m=''578770''>used</span> <span m=''579390''>will</span> <span m=''579500''>create</span>
  <span m=''579760''>a</span> <span m=''579880''>really</span> <span m=''580160''>bad</span>
  <span m=''580490''>problem</span> <span m=''580930''>in</span> <span m=''581200''>capacity.</span>
  </p><p><span m=''582257''>AUDIENCE: [INAUDIBLE]</span> <span m=''585410''>just</span>
  <span m=''585760''>one.</span> <span m=''586911''>Say you''re</span> <span m=''587833''>[INAUDIBLE]</span>
  <span m=''588294''>set,</span> <span m=''588755''>and that set</span> <span m=''589216''>is,</span>
  <span m=''590599''>by one,</span> <span m=''591060''>bigger</span> <span m=''591521''>than
  the</span> <span m=''591990''>[INAUDIBLE]</span> <span m=''592890''>missing.</span>
  </p><p><span m=''593630''>PROFESSOR: Very</span> <span m=''593860''>good.</span>
  <span m=''594205''>So</span> <span m=''594550''>what</span> <span m=''594720''>you''re</span>
  <span m=''594850''>going</span> <span m=''595050''>through,</span> <span m=''595260''>you''re
  going</span> <span m=''595500''>round</span> <span m=''596350''>some</span> <span
  m=''596610''>data</span> <span m=''596900''>again</span> <span m=''597210''>and</span>
  <span m=''597330''>again,</span> <span m=''599090''>and</span> <span m=''599380''>that</span>
  <span m=''599730''>amount</span> <span m=''600120''>of</span> <span m=''600250''>data</span>
  <span m=''600460''>is</span> <span m=''600800''>one</span> <span m=''601230''>bigger</span>
  <span m=''601540''>than</span> <span m=''601920''>your</span> <span m=''602200''>cache</span>
  <span m=''602590''>line.</span> <span m=''603210''>You are</span> <span m=''603380''>going
  to</span> <span m=''603550''>have</span> <span m=''603720''>no</span> <span m=''604000''>locality</span>
  <span m=''604450''>because</span> <span m=''604670''>[UNINTELLIGIBLE],</span> <span
  m=''605770''>and when</span> <span m=''605920''>you</span> <span m=''606020''>go</span>
  <span m=''606210''>to,</span> <span m=''606650''>just</span> <span m=''607030''>before</span>
  <span m=''607310''>you</span> <span m=''607600''>use</span> <span m=''607830''>that</span>
  <span m=''607990''>data,</span> <span m=''608230''>they</span> <span m=''608390''>said,</span>
  <span m=''608500''>oops,</span> <span m=''608900''>I need</span> <span m=''609020''>to</span>
  <span m=''609080''>bring</span> <span m=''609220''>one</span> <span m=''609500''>more</span>
  <span m=''609670''>data.</span> <span m=''610360''>I</span> <span m=''610450''>need</span>
  <span m=''610610''>to</span> <span m=''610770''>evict</span> <span m=''610940''>something,</span>
  <span m=''611850''>and</span> <span m=''612040''>who</span> <span m=''612260''>am</span>
  <span m=''612310''>I</span> <span m=''612500''>going to</span> <span m=''612600''>evict?</span>
  <span m=''613950''>The</span> <span m=''614060''>guy</span> <span m=''614290''>I''m
  going</span> <span m=''614610''>to use</span> <span m=''614930''>next</span> <span
  m=''615380''>because</span> <span m=''615620''>it</span> <span m=''615770''>was</span>
  <span m=''616800''>the</span> <span m=''617300''>least</span> <span m=''617630''>recently</span>
  <span m=''617980''>used</span> <span m=''618110''>thing.</span> </p><p><span m=''618340''>So
  it</span> <span m=''618550''>goes,</span> <span m=''618840''>and</span> <span m=''618930''>then</span>
  <span m=''619060''>you</span> <span m=''619160''>go</span> <span m=''619340''>there,</span>
  <span m=''619850''>and</span> <span m=''620010''>you</span> <span m=''620680''>bring</span>
  <span m=''620910''>that.</span> <span m=''621100''>Who''s it</span> <span m=''621290''>going
  to</span> <span m=''621490''>evict?</span> <span m=''621660''>You''re</span> <span
  m=''621850''>going</span> <span m=''621960''>to</span> <span m=''622080''>evict</span>
  <span m=''622520''>the</span> <span m=''622620''>one</span> <span m=''622810''>I</span>
  <span m=''622870''>just</span> <span m=''623090''>brought.</span> <span m=''623580''>You''re</span>
  <span m=''623800''>going</span> <span m=''623940''>to</span> <span m=''624080''>evict</span>
  <span m=''624180''>the</span> <span m=''624320''>next</span> <span m=''624570''>one</span>
  <span m=''625620''>that I am</span> <span m=''626070''>just</span> <span m=''626320''>about</span>
  <span m=''626570''>to</span> <span m=''626630''>use</span> <span m=''627330''>and</span>
  <span m=''627510''>bring</span> <span m=''627680''>that</span> <span m=''627900''>one.</span>
  </p><p><span m=''628020''>And</span> <span m=''628140''>you</span> <span m=''628260''>go</span>
  <span m=''628420''>use</span> <span m=''628670''>that,</span> <span m=''628850''>and</span>
  <span m=''628940''>then</span> <span m=''629630''>to</span> <span m=''629730''>use</span>
  <span m=''629850''>the</span> <span m=''629930''>next</span> <span m=''630150''>one,</span>
  <span m=''630310''>you''re</span> <span m=''630450''>going</span> <span m=''630570''>evict</span>
  <span m=''631240''>the</span> <span m=''631340''>one</span> <span m=''631560''>you''re</span>
  <span m=''631760''>just</span> <span m=''632010''>about</span> <span m=''632240''>to
  use.</span> <span m=''632690''>So</span> <span m=''632900''>by</span> <span m=''633370''>going
  and</span> <span m=''633520''>doing</span> <span m=''633760''>that,</span> <span
  m=''634220''>you</span> <span m=''634330''>basically</span> <span m=''634860''>get</span>
  <span m=''635050''>no</span> <span m=''635230''>locality.</span> <span m=''635480''>So</span>
  <span m=''635600''>that''s</span> <span m=''635840''>a</span> <span m=''635890''>really</span>
  <span m=''636140''>bad</span> <span m=''636400''>problem</span> <span m=''636880''>in
  here.</span> </p><p><span m=''639920''>So</span> <span m=''640120''>another</span>
  <span m=''640900''>interesting</span> <span m=''641320''>thing</span> <span m=''641490''>is</span>
  <span m=''641640''>called</span> <span m=''641770''>a</span> <span m=''641860''>conflict</span>
  <span m=''642330''>misses.</span> <span m=''643370''>Conflict</span> <span m=''643700''>misses</span>
  <span m=''644120''>says</span> <span m=''645065''>normally,</span> <span m=''645360''>when</span>
  <span m=''645670''>you</span> <span m=''645740''>have</span> <span m=''645830''>a</span>
  <span m=''645930''>cache--</span> <span m=''646920''>so</span> <span m=''647080''>what</span>
  <span m=''647270''>we</span> <span m=''647440''>have</span> <span m=''647620''>is</span>
  <span m=''647720''>you</span> <span m=''647850''>have</span> <span m=''647980''>this</span>
  <span m=''648150''>large</span> <span m=''648470''>storage,</span> <span m=''650040''>which</span>
  <span m=''650360''>[UNINTELLIGIBLE]</span> <span m=''651050''>the</span> <span m=''651160''>memory,</span>
  <span m=''653180''>you''re</span> <span m=''653370''>going</span> <span m=''653520''>to</span>
  <span m=''653570''>map</span> <span m=''653770''>into</span> <span m=''654130''>smaller</span>
  <span m=''654510''>storage</span> <span m=''654950''>in</span> <span m=''655100''>here,</span>
  <span m=''655910''>which</span> <span m=''656030''>is</span> <span m=''656180''>cache.</span>
  <span m=''657420''>So</span> <span m=''657640''>one</span> <span m=''657880''>way</span>
  <span m=''658100''>to</span> <span m=''658280''>say</span> <span m=''658440''>is</span>
  <span m=''659260''>any</span> <span m=''659610''>of</span> <span m=''659850''>this</span>
  <span m=''660160''>value</span> <span m=''660990''>line</span> <span m=''661260''>can</span>
  <span m=''661460''>be</span> <span m=''661620''>anywhere</span> <span m=''661980''>here.</span>
  <span m=''663550''>That''s</span> <span m=''664110''>called</span> <span m=''664500''>fully</span>
  <span m=''664750''>associative</span> <span m=''665310''>cache.</span> </p><p><span
  m=''668670''>Implementing</span> <span m=''669140''>that</span> <span m=''669360''>is</span>
  <span m=''669440''>somewhat</span> <span m=''669840''>complicated,</span> <span
  m=''670760''>so</span> <span m=''671480''>the</span> <span m=''671730''>other</span>
  <span m=''672000''>extreme</span> <span m=''672520''>is</span> <span m=''672630''>called</span>
  <span m=''672740''>direct</span> <span m=''673040''>map</span> <span m=''673320''>cache.</span>
  <span m=''673940''>What</span> <span m=''674150''>that</span> <span m=''674400''>means</span>
  <span m=''674730''>is</span> <span m=''674930''>this</span> <span m=''675260''>segment,</span>
  <span m=''675780''>the</span> <span m=''675840''>same</span> <span m=''676230''>size</span>
  <span m=''676560''>here,</span> <span m=''677080''>can</span> <span m=''677280''>map</span>
  <span m=''677690''>into</span> <span m=''677780''>here,</span> <span m=''678870''>and</span>
  <span m=''679070''>then</span> <span m=''679180''>the</span> <span m=''679280''>next</span>
  <span m=''679600''>segment</span> <span m=''680160''>also</span> <span m=''680570''>can</span>
  <span m=''680780''>map</span> <span m=''681120''>into here.</span> <span m=''681370''>That</span>
  <span m=''681700''>means</span> <span m=''682070''>if</span> <span m=''682220''>you</span>
  <span m=''682370''>get</span> <span m=''682640''>this</span> <span m=''682860''>cache</span>
  <span m=''683240''>line</span> <span m=''683505''>here,</span> <span m=''684840''>it</span>
  <span m=''685100''>can</span> <span m=''685320''>be</span> <span m=''685490''>only</span>
  <span m=''685860''>mapped</span> <span m=''686170''>into</span> <span m=''686390''>one</span>
  <span m=''686640''>place</span> <span m=''688490''>in this</span> <span m=''688600''>here.</span>
  </p><p><span m=''690200''>This</span> <span m=''690460''>cache</span> <span m=''690830''>line</span>
  <span m=''691200''>can</span> <span m=''691370''>only</span> <span m=''691550''>be</span>
  <span m=''691730''>here,</span> <span m=''691880''>and</span> <span m=''692110''>also</span>
  <span m=''692420''>this</span> <span m=''692730''>cache</span> <span m=''693160''>line</span>
  <span m=''693800''>can</span> <span m=''694200''>also</span> <span m=''694650''>only</span>
  <span m=''694960''>be</span> <span m=''695150''>here</span> <span m=''695560''>if</span>
  <span m=''695710''>it</span> <span m=''695760''>is</span> <span m=''695860''>the</span>
  <span m=''695960''>same</span> <span m=''696230''>offset.</span> <span m=''697620''>So</span>
  <span m=''697760''>that</span> <span m=''698010''>means</span> <span m=''698230''>for</span>
  <span m=''698370''>every</span> <span m=''698670''>cache</span> <span m=''699020''>line,</span>
  <span m=''699170''>there''s</span> <span m=''699390''>only</span> <span m=''699760''>one</span>
  <span m=''700000''>location</span> <span m=''700580''>in</span> <span m=''700700''>the</span>
  <span m=''700800''>cache.</span> <span m=''701980''>So</span> <span m=''702570''>here,</span>
  <span m=''703180''>what</span> <span m=''703400''>would</span> <span m=''703580''>be</span>
  <span m=''703750''>really</span> <span m=''704800''>sad</span> <span m=''705110''>scenario?</span>
  </p><p><span m=''711214''>AUDIENCE: [INAUDIBLE]</span> </p><p><span m=''713580''>PROFESSOR:
  Yeah,</span> <span m=''714560''>I</span> <span m=''714680''>mean</span> <span m=''715000''>I</span>
  <span m=''715360''>assume</span> <span m=''715640''>I</span> <span m=''715750''>have</span>
  <span m=''715900''>a lot of</span> <span m=''716220''>these</span> <span m=''716480''>slots.</span>
  <span m=''717010''>I</span> <span m=''717210''>read</span> <span m=''717440''>something</span>
  <span m=''717890''>here,</span> <span m=''718360''>and</span> <span m=''718570''>the</span>
  <span m=''718680''>next</span> <span m=''718900''>time</span> <span m=''719120''>I</span>
  <span m=''719200''>read</span> <span m=''719460''>something</span> <span m=''719860''>here,</span>
  <span m=''720120''>next time</span> <span m=''720420''>I</span> <span m=''720480''>read</span>
  <span m=''720690''>something here,</span> <span m=''721090''>and</span> <span m=''721210''>I</span>
  <span m=''721260''>go</span> <span m=''721470''>round</span> <span m=''721750''>and</span>
  <span m=''721910''>round</span> <span m=''722295''>this way.</span> <span m=''723350''>I</span>
  <span m=''723430''>might</span> <span m=''723640''>be</span> <span m=''723750''>touching</span>
  <span m=''723910''>only</span> <span m=''724280''>very</span> <span m=''724560''>few</span>
  <span m=''724770''>number</span> <span m=''725050''>of</span> <span m=''725120''>data</span>
  <span m=''725390''>items,</span> <span m=''726810''>but</span> <span m=''727000''>they</span>
  <span m=''727090''>also</span> <span m=''727480''>mapping</span> <span m=''727790''>into</span>
  <span m=''727850''>one</span> <span m=''728060''>cache</span> <span m=''728370''>line</span>
  <span m=''729000''>even</span> <span m=''729340''>though</span> <span m=''729460''>my</span>
  <span m=''729630''>working</span> <span m=''729950''>set</span> <span m=''730920''>is</span>
  <span m=''731280''>very</span> <span m=''731640''>small</span> <span m=''731870''>than</span>
  <span m=''732100''>the</span> <span m=''732210''>cache.</span> <span m=''733320''>I</span>
  <span m=''733540''>still</span> <span m=''734060''>don''t</span> <span m=''734250''>have</span>
  <span m=''734790''>any</span> <span m=''736590''>cache</span> <span m=''737610''>usage</span>
  <span m=''738340''>because</span> <span m=''738670''>I am having</span> <span m=''739030''>conflicts.</span>
  </p><p><span m=''740840''>And</span> <span m=''741050''>then</span> <span m=''741240''>there</span>
  <span m=''741670''>are two</span> <span m=''742060''>other</span> <span m=''742190''>misses</span>
  <span m=''742490''>when</span> <span m=''742760''>you''re</span> <span m=''742930''>going</span>
  <span m=''743100''>to</span> <span m=''743430''>multi-process.</span> <span m=''744220''>We''ll</span>
  <span m=''744440''>go</span> <span m=''744820''>through</span> <span m=''745280''>them</span>
  <span m=''745580''>in</span> <span m=''746140''>later</span> <span m=''746560''>lectures.</span>
  <span m=''746800''>One</span> <span m=''746940''>is</span> <span m=''747050''>called</span>
  <span m=''747210''>true</span> <span m=''747510''>sharing.</span> <span m=''748270''>That</span>
  <span m=''748530''>means</span> <span m=''749140''>there are</span> <span m=''749380''>caches</span>
  <span m=''750070''>private</span> <span m=''750430''>to</span> <span m=''750530''>each</span>
  <span m=''752020''>core,</span> <span m=''752740''>and</span> <span m=''753400''>what</span>
  <span m=''753560''>happens</span> <span m=''753920''>is</span> <span m=''754070''>if</span>
  <span m=''754180''>one core</span> <span m=''754590''>uses</span> <span m=''754850''>some</span>
  <span m=''755070''>data,</span> <span m=''755390''>you''ve</span> <span m=''755550''>have</span>
  <span m=''755620''>to</span> <span m=''755660''>get</span> <span m=''755780''>the</span>
  <span m=''755900''>cache</span> <span m=''756120''>line</span> <span m=''756330''>there.</span>
  <span m=''757330''>If the other</span> <span m=''757650''>core</span> <span m=''757880''>wants</span>
  <span m=''758150''>to use</span> <span m=''758420''>that</span> <span m=''758560''>data,</span>
  <span m=''758830''>you have to</span> <span m=''758920''>bring</span> <span m=''759100''>the</span>
  <span m=''759200''>cache</span> <span m=''759480''>line</span> <span m=''759650''>back</span>
  <span m=''759940''>there,</span> <span m=''760550''>and</span> <span m=''760680''>the</span>
  <span m=''760770''>cache</span> <span m=''761050''>lines</span> <span m=''761340''>can</span>
  <span m=''761560''>ping-pong</span> <span m=''762220''>[UNINTELLIGIBLE]</span> <span
  m=''762350''>that.</span> </p><p><span m=''763940''>False</span> <span m=''764290''>sharing
  is</span> <span m=''764790''>even</span> <span m=''764990''>a</span> <span m=''765080''>worst</span>
  <span m=''765540''>way.</span> <span m=''766090''>So</span> <span m=''766240''>what</span>
  <span m=''766430''>happens</span> <span m=''766810''>is</span> <span m=''767470''>if</span>
  <span m=''768350''>the</span> <span m=''768490''>first</span> <span m=''768820''>processor</span>
  <span m=''769220''>here</span> <span m=''770310''>touches</span> <span m=''770700''>this</span>
  <span m=''770970''>value</span> <span m=''771280''>of</span> <span m=''771490''>the</span>
  <span m=''771580''>cache</span> <span m=''771860''>line,</span> <span m=''772420''>second</span>
  <span m=''772880''>processor</span> <span m=''773400''>touches</span> <span m=''773700''>this</span>
  <span m=''773910''>value</span> <span m=''774130''>of</span> <span m=''774250''>the</span>
  <span m=''774320''>cache</span> <span m=''774470''>line.</span> <span m=''775841''>We''re
  not</span> <span m=''776300''>sharing</span> <span m=''776740''>anything,</span>
  <span m=''778130''>but</span> <span m=''778470''>unfortunately,</span> <span m=''778785''>the</span>
  <span m=''779100''>two</span> <span m=''779320''>things</span> <span m=''779510''>I''m</span>
  <span m=''779720''>using</span> <span m=''780050''>sits</span> <span m=''780310''>next</span>
  <span m=''780540''>to</span> <span m=''780630''>each</span> <span m=''780850''>other,</span>
  <span m=''781270''>so</span> <span m=''781460''>when</span> <span m=''781800''>I
  ride</span> <span m=''781920''>this</span> <span m=''782190''>thing,</span> <span
  m=''782620''>I</span> <span m=''782730''>get</span> <span m=''782920''>the</span>
  <span m=''783020''>cache</span> <span m=''783290''>line,</span> <span m=''783490''>he</span>
  <span m=''783630''>doesn''t.</span> <span m=''784500''>When he need</span> <span
  m=''784680''>to</span> <span m=''784870''>ride</span> <span m=''785120''>this</span>
  <span m=''785270''>thing,</span> <span m=''785480''>he has</span> <span m=''785590''>to</span>
  <span m=''785660''>get</span> <span m=''785780''>the</span> <span m=''785860''>cache</span>
  <span m=''786160''>line.</span> <span m=''786510''>So</span> <span m=''786720''>I
  am</span> <span m=''787190''>seemingly</span> <span m=''787750''>using</span> <span
  m=''788230''>independent</span> <span m=''788810''>data,</span> <span m=''789680''>but</span>
  <span m=''790200''>I am</span> <span m=''790860''>bouncing</span> <span m=''791300''>cache</span>
  <span m=''791640''>line</span> <span m=''791800''>in</span> <span m=''791920''>between,</span>
  <span m=''792290''>and</span> <span m=''792950''>if</span> <span m=''793270''>that</span>
  <span m=''793410''>happened,</span> <span m=''793720''>that</span> <span m=''793920''>going</span>
  <span m=''794090''>to</span> <span m=''794140''>have</span> <span m=''794280''>a</span>
  <span m=''794310''>huge</span> <span m=''794920''>big</span> <span m=''795400''>performance</span>
  <span m=''795860''>impact.</span> </p><p><span m=''796880''>So</span> <span m=''797010''>these</span>
  <span m=''797240''>other</span> <span m=''797390''>things.</span> <span m=''797610''>The</span>
  <span m=''797690''>last</span> <span m=''797990''>two,</span> <span m=''798130''>we''ll</span>
  <span m=''798280''>get</span> <span m=''798500''>to a</span> <span m=''798850''>little
  bit</span> <span m=''799000''>later.</span> <span m=''800850''>So</span> <span m=''801020''>today</span>
  <span m=''801960''>I am</span> <span m=''802270''>going</span> <span m=''802810''>to</span>
  <span m=''802880''>start</span> <span m=''803360''>with</span> <span m=''803700''>modeling</span>
  <span m=''804850''>how</span> <span m=''805120''>caches</span> <span m=''805620''>work</span>
  <span m=''806010''>with</span> <span m=''806150''>a</span> <span m=''806200''>very</span>
  <span m=''806470''>simplistic</span> <span m=''807110''>cache.</span> <span m=''808180''>So</span>
  <span m=''808420''>here''s,</span> <span m=''808770''>assume,</span> <span m=''809130''>my</span>
  <span m=''809250''>cache.</span> <span m=''810840''>I</span> <span m=''810920''>have</span>
  <span m=''811250''>32</span> <span m=''811740''>kilobytes</span> <span m=''812300''>in</span>
  <span m=''812430''>here.</span> </p><p><span m=''815300''>This</span> <span m=''815490''>is</span>
  <span m=''815630''>a</span> <span m=''815670''>direct</span> <span m=''816060''>map</span>
  <span m=''816340''>cache.</span> <span m=''816640''>That</span> <span m=''816850''>means</span>
  <span m=''817040''>that</span> <span m=''817160''>in</span> <span m=''817290''>my</span>
  <span m=''817400''>memory,</span> <span m=''819230''>32</span> <span m=''819570''>kilobyte</span>
  <span m=''820180''>chucks</span> <span m=''821110''>get</span> <span m=''821320''>mapped</span>
  <span m=''821600''>to</span> <span m=''822073''>direct</span> <span m=''822486''>[UNINTELLIGIBLE].</span>
  <span m=''822900''>This</span> <span m=''823210''>32</span> <span m=''823450''>kilobyte</span>
  <span m=''823860''>get</span> <span m=''824070''>mapped</span> <span m=''824320''>here.</span>
  <span m=''825060''>That</span> <span m=''825240''>32</span> <span m=''825590''>kilobyte</span>
  <span m=''826200''>get</span> <span m=''826520''>mapped</span> <span m=''826790''>here.</span>
  </p><p><span m=''827970''>And</span> <span m=''828560''>the</span> <span m=''828680''>cache</span>
  <span m=''829110''>line</span> <span m=''829330''>inside</span> <span m=''829970''>is</span>
  <span m=''830790''>64</span> <span m=''831370''>bytes,</span> <span m=''833590''>64,</span>
  <span m=''836130''>and</span> <span m=''836840''>that</span> <span m=''837040''>means</span>
  <span m=''837380''>I</span> <span m=''837890''>have</span> <span m=''839460''>basically</span>
  <span m=''840330''>[UNINTELLIGIBLE PHRASE].</span> <span m=''843280''>32</span>
  <span m=''843520''>kilobyte</span> <span m=''843780''>in here.</span> <span m=''844590''>OK?</span>
  <span m=''845700''>So</span> <span m=''846200''>just</span> <span m=''846420''>remember</span>
  <span m=''846710''>this</span> <span m=''846960''>as</span> <span m=''847150''>we</span>
  <span m=''847270''>go</span> <span m=''847640''>on</span> <span m=''850380''>doing</span>
  <span m=''850690''>this,</span> <span m=''851220''>we</span> <span m=''851540''>will</span>
  <span m=''852500''>use</span> <span m=''852770''>this</span> <span m=''852960''>as
  a</span> <span m=''853110''>formula.</span> <span m=''853530''>OK?</span> </p><p><span
  m=''854130''>And</span> <span m=''854350''>we</span> <span m=''854580''>assume</span>
  <span m=''854840''>if you</span> <span m=''854980''>getting</span> <span m=''855420''>the</span>
  <span m=''855630''>cache,</span> <span m=''856030''>[UNINTELLIGIBLE]</span> <span
  m=''856340''>single</span> <span m=''856700''>cycle,</span> <span m=''857060''>if</span>
  <span m=''857200''>you</span> <span m=''857300''>miss</span> <span m=''857760''>100</span>
  <span m=''858010''>cycles.</span> <span m=''859400''>OK,</span> <span m=''859520''>so</span>
  <span m=''859670''>it''s</span> <span m=''859750''>nice</span> <span m=''860150''>numbers</span>
  <span m=''861100''>to</span> <span m=''861270''>do</span> <span m=''861520''>that.</span>
  <span m=''862210''>And</span> <span m=''864460''>so</span> <span m=''864620''>the</span>
  <span m=''864840''>first</span> <span m=''865070''>thing</span> <span m=''865310''>is</span>
  <span m=''866040''>we</span> <span m=''866160''>have</span> <span m=''866280''>a</span>
  <span m=''866410''>reference</span> <span m=''866860''>like</span> <span m=''867110''>this.</span>
  <span m=''868630''>OK?</span> </p><p><span m=''869210''>You</span> <span m=''869430''>go</span>
  <span m=''869900''>from</span> <span m=''871920''>[i]</span> <span m=''872370''>equals</span>
  <span m=''872690''>0</span> <span m=''873270''>to</span> <span m=''873960''>[i]</span>
  <span m=''874190''>less</span> <span m=''874460''>than</span> <span m=''875150''>very</span>
  <span m=''875450''>large</span> <span m=''875820''>number,</span> <span m=''876300''>A[i].</span>
  <span m=''878640''>I</span> <span m=''878750''>just</span> <span m=''878960''>go</span>
  <span m=''879120''>to</span> <span m=''879760''>accessing</span> <span m=''880140''>memory</span>
  <span m=''880490''>like</span> <span m=''880690''>one</span> <span m=''880910''>after
  another</span> <span m=''881320''>after</span> <span m=''881600''>another after</span>
  <span m=''881880''>another.</span> <span m=''886610''>So</span> <span m=''886750''>you</span>
  <span m=''886890''>see</span> <span m=''887030''>how</span> <span m=''887320''>this</span>
  <span m=''887580''>is</span> <span m=''887720''>going</span> <span m=''887960''>on</span>
  <span m=''888110''>in</span> <span m=''888210''>here?</span> </p><p><span m=''889070''>So</span>
  <span m=''889240''>also</span> <span m=''889500''>I am</span> <span m=''889870''>accessing</span>
  <span m=''890370''>integers,</span> <span m=''890900''>so</span> <span m=''890990''>that</span>
  <span m=''891170''>means</span> <span m=''891360''>four</span> <span m=''891580''>bytes</span>
  <span m=''891850''>at</span> <span m=''891910''>a</span> <span m=''892010''>time</span>
  <span m=''892640''>in</span> <span m=''893050''>cache</span> <span m=''893340''>line.</span>
  <span m=''894460''>So</span> <span m=''894620''>what</span> <span m=''894810''>happens
  here?</span> <span m=''895200''>So I</span> <span m=''895440''>assume</span> <span
  m=''895890''>size</span> <span m=''896180''>of</span> <span m=''896330''>int</span>
  <span m=''896490''>is</span> <span m=''896650''>four,</span> <span m=''897250''>so</span>
  <span m=''897440''>you''re</span> <span m=''897590''>getting</span> <span m=''898470''>four</span>
  <span m=''898800''>bytes</span> <span m=''898980''>in</span> <span m=''899150''>here.</span>
  <span m=''901490''>So yeah,</span> <span m=''901530''>you''re</span> <span m=''901830''>doing</span>
  <span m=''902080''>s</span> <span m=''902360''>reads</span> <span m=''902700''>to
  A.</span> <span m=''902880''>I''m</span> <span m=''903230''>accessing</span> <span
  m=''903610''>s</span> <span m=''903750''>elements</span> <span m=''904160''>in</span>
  <span m=''904280''>here.</span> </p><p><span m=''906240''>And</span> <span m=''906790''>you</span>
  <span m=''906910''>have</span> <span m=''907040''>16</span> <span m=''907640''>elements</span>
  <span m=''908100''>of</span> <span m=''908250''>a</span> <span m=''908620''>per</span>
  <span m=''908760''>cache</span> <span m=''909090''>line.</span> <span m=''910490''>OK,</span>
  <span m=''911050''>you</span> <span m=''911180''>see</span> <span m=''911310''>why</span>
  <span m=''911520''>16</span> <span m=''911980''>if</span> <span m=''912090''>there?</span>
  <span m=''912220''>Because</span> <span m=''913060''>I</span> <span m=''913500''>have</span>
  <span m=''914010''>64</span> <span m=''914630''>in</span> <span m=''915010''>here,</span>
  <span m=''915280''>64</span> <span m=''917890''>bytes</span> <span m=''918320''>in
  here.</span> <span m=''919010''>Each</span> <span m=''919320''>time</span> <span
  m=''919540''>axises</span> <span m=''919980''>four</span> <span m=''920180''>bytes,</span>
  <span m=''920460''>so</span> <span m=''920550''>I</span> <span m=''920630''>have</span>
  <span m=''920790''>16</span> <span m=''921360''>of</span> <span m=''921710''>integers</span>
  <span m=''922180''>in</span> <span m=''922340''>cache</span> <span m=''922610''>line.</span>
  </p><p><span m=''924748''>AUDIENCE: [INAUDIBLE]</span> <span m=''926134''>bits or</span>
  <span m=''926596''>bytes?</span> </p><p><span m=''927520''>PROFESSOR: Bytes.</span>
  <span m=''928330''>Byte.</span> <span m=''929010''>Did I</span> <span m=''929250''>say</span>
  <span m=''929370''>bits?</span> <span m=''929775''>No,</span> <span m=''930240''>bytes.</span>
  <span m=''932690''>So</span> <span m=''933230''>what</span> <span m=''933490''>happens</span>
  <span m=''933890''>is</span> <span m=''934020''>if it</span> <span m=''934270''>axises</span>
  <span m=''934400''>the same</span> <span m=''934820''>element,</span> <span m=''936530''>15</span>
  <span m=''936926''>of</span> <span m=''937322''>every</span> <span m=''937720''>16</span>
  <span m=''938340''>is</span> <span m=''938900''>in</span> <span m=''939020''>the</span>
  <span m=''939120''>cache</span> <span m=''939560''>because</span> <span m=''939900''>when</span>
  <span m=''940000''>we are</span> <span m=''940110''>going</span> <span m=''940420''>one</span>
  <span m=''940680''>after</span> <span m=''940910''>the</span> <span m=''941090''>first</span>
  <span m=''941270''>guy,</span> <span m=''941680''>cache</span> <span m=''941985''>miss,</span>
  <span m=''942550''>I</span> <span m=''942630''>had</span> <span m=''942710''>to</span>
  <span m=''942790''>go</span> <span m=''942950''>bring it,</span> <span m=''944230''>and</span>
  <span m=''944390''>the</span> <span m=''944480''>next</span> <span m=''944720''>15,</span>
  <span m=''945200''>I</span> <span m=''945280''>have</span> <span m=''945480''>brought</span>
  <span m=''945750''>to</span> <span m=''945890''>it.</span> <span m=''946240''>It''s
  in</span> <span m=''946320''>the</span> <span m=''946390''>cache.</span> </p><p><span
  m=''947360''>So</span> <span m=''947930''>what</span> <span m=''948210''>should</span>
  <span m=''948480''>be</span> <span m=''948650''>my</span> <span m=''948950''>cost?</span>
  <span m=''951170''>[UNINTELLIGIBLE]</span> <span m=''951880''>cost</span> <span
  m=''952270''>of</span> <span m=''953090''>memory</span> <span m=''953430''>access.</span>
  <span m=''957840''>I</span> <span m=''957940''>am</span> <span m=''958100''>accessing</span>
  <span m=''958470''>s</span> <span m=''958710''>data,</span> <span m=''960240''>and</span>
  <span m=''961590''>1/16th</span> <span m=''962490''>of</span> <span m=''962650''>that</span>
  <span m=''963220''>is</span> <span m=''963360''>a</span> <span m=''963410''>cache</span>
  <span m=''963715''>miss,</span> <span m=''965070''>15/16th</span> <span m=''965882''>is
  a</span> <span m=''966290''>cache</span> <span m=''966590''>hit.</span> <span m=''967320''>So</span>
  <span m=''967510''>basically</span> <span m=''968160''>total</span> <span m=''968520''>[UNINTELLIGIBLE]</span>
  <span m=''969320''>is</span> <span m=''970440''>a</span> <span m=''970520''>15/16th</span>
  <span m=''971910''>of</span> <span m=''972320''>s</span> <span m=''972460''>is a</span>
  <span m=''972520''>cache</span> <span m=''973340''>hit,</span> <span m=''974110''>and</span>
  <span m=''974530''>other</span> <span m=''974730''>1/16th</span> <span m=''975360''>I</span>
  <span m=''975410''>have</span> <span m=''975970''>100</span> <span m=''977470''>times</span>
  <span m=''979250''>cycles</span> <span m=''979650''>I</span> <span m=''979720''>need</span>
  <span m=''979950''>because</span> <span m=''980290''>it''s a</span> <span m=''980350''>cache</span>
  <span m=''980570''>miss.</span> <span m=''981970''>Everybody</span> <span m=''982170''>good</span>
  <span m=''982380''>so far?</span> </p><p><span m=''984210''>OK,</span> <span m=''984630''>so</span>
  <span m=''984800''>what</span> <span m=''984990''>type</span> <span m=''985240''>of</span>
  <span m=''986030''>locality</span> <span m=''986470''>do</span> <span m=''986550''>we</span>
  <span m=''986710''>have</span> <span m=''986870''>here?</span> <span m=''989760''>First</span>
  <span m=''989940''>of all,</span> <span m=''990270''>do</span> <span m=''990460''>we</span>
  <span m=''990650''>have</span> <span m=''990950''>locality?</span> <span m=''993870''>Who
  thinks</span> <span m=''994360''>we have</span> <span m=''994440''>locality?</span>
  <span m=''996231''>OK,</span> <span m=''996720''>lot</span> <span m=''996890''>of</span>
  <span m=''997020''>people</span> <span m=''997200''>thinks</span> <span m=''997390''>we
  have</span> <span m=''997500''>locality.</span> <span m=''998480''>What</span> <span
  m=''998955''>type?</span> </p><p><span m=''1000400''>AUDIENCE: [INAUDIBLE]</span>
  </p><p><span m=''1001370''>PROFESSOR: Spatial</span> <span m=''1001810''>locality</span>
  <span m=''1002620''>because</span> <span m=''1003270''>what</span> <span m=''1003430''>we
  are</span> <span m=''1003570''>doing</span> <span m=''1003900''>is</span> <span
  m=''1004090''>we</span> <span m=''1004200''>are</span> <span m=''1004390''>accessing</span>
  <span m=''1004780''>the</span> <span m=''1004860''>nearby</span> <span m=''1005230''>elements</span>
  <span m=''1005980''>even</span> <span m=''1006300''>though</span> <span m=''1006610''>we</span>
  <span m=''1006790''>are</span> <span m=''1007030''>not</span> <span m=''1007230''>getting</span>
  <span m=''1007480''>back</span> <span m=''1008090''>any</span> <span m=''1008330''>of</span>
  <span m=''1008410''>the</span> <span m=''1008490''>data</span> <span m=''1008730''>yet,</span>
  <span m=''1008950''>so</span> <span m=''1009050''>we</span> <span m=''1009210''>get</span>
  <span m=''1009380''>some</span> <span m=''1009870''>spacial</span> <span m=''1010300''>locality</span>
  <span m=''1010610''>axis</span> <span m=''1011010''>here.</span> <span m=''1011810''>That''s</span>
  <span m=''1011990''>good,</span> <span m=''1012590''>so</span> <span m=''1012750''>this</span>
  <span m=''1012920''>is</span> <span m=''1013100''>our</span> <span m=''1013500''>very</span>
  <span m=''1013815''>--</span> <span m=''1014130''>most</span> <span m=''1014330''>simple</span>
  <span m=''1015150''>thing</span> <span m=''1015270''>we</span> <span m=''1015400''>can</span>
  <span m=''1015540''>do.</span> <span m=''1017220''>So</span> <span m=''1017370''>what</span>
  <span m=''1017590''>kind of</span> <span m=''1018010''>misses</span> <span m=''1018190''>are
  we</span> <span m=''1018330''>going</span> <span m=''1018530''>to</span> <span m=''1018690''>have
  in</span> <span m=''1018780''>the</span> <span m=''1018880''>cache?</span> <span
  m=''1026119''>Cold</span> <span m=''1026460''>misses.</span> <span m=''1027869''>I''m</span>
  <span m=''1028060''>missing</span> <span m=''1028300''>because</span> <span m=''1028740''>I</span>
  <span m=''1028819''>have</span> <span m=''1028950''>never</span> <span m=''1029119''>seen</span>
  <span m=''1029280''>that</span> <span m=''1029420''>data</span> <span m=''1029609''>before,</span>
  <span m=''1029859''>so it''s</span> <span m=''1030270''>a</span> <span m=''1030369''>cold</span>
  <span m=''1030760''>miss in</span> <span m=''1031250''>here.</span> </p><p><span
  m=''1033280''>OK,</span> <span m=''1033980''>so</span> <span m=''1034109''>that''s</span>
  <span m=''1034310''>that.</span> <span m=''1035550''>Let''s</span> <span m=''1035710''>look</span>
  <span m=''1035839''>at</span> <span m=''1035960''>this</span> <span m=''1036170''>one.</span>
  <span m=''1037700''>I''m</span> <span m=''1037930''>accessing</span> <span m=''1038319''>A[0]</span>
  <span m=''1041780''>s</span> <span m=''1041950''>times.</span> <span m=''1045690''>OK?</span>
  <span m=''1047400''>What''s</span> <span m=''1047550''>the</span> <span m=''1047700''>total</span>
  <span m=''1048099''>access</span> <span m=''1048369''>time?</span> </p><p><span
  m=''1060950''>How</span> <span m=''1061120''>many</span> <span m=''1061300''>cache</span>
  <span m=''1061710''>misses</span> <span m=''1061840''>am</span> <span m=''1061990''>I</span>
  <span m=''1062060''>going</span> <span m=''1062170''>to</span> <span m=''1062280''>get?</span>
  <span m=''1064360''>One,</span> <span m=''1065480''>so</span> <span m=''1065660''>I</span>
  <span m=''1066040''>basically</span> <span m=''1066690''>have</span> <span m=''1067290''>100</span>
  <span m=''1069580''>time</span> <span m=''1069950''>for</span> <span m=''1070070''>the</span>
  <span m=''1070150''>first</span> <span m=''1070380''>cache</span> <span m=''1070630''>miss,</span>
  <span m=''1070780''>and</span> <span m=''1070900''>s</span> <span m=''1071070''>minus</span>
  <span m=''1071350''>1</span> <span m=''1071690''>for</span> <span m=''1071740''>the</span>
  <span m=''1071800''>rest</span> <span m=''1072030''>basically</span> <span m=''1072560''>it''s
  a hit.</span> <span m=''1073740''>OK?</span> <span m=''1075080''>That''s</span>
  <span m=''1075290''>good,</span> <span m=''1075690''>so</span> <span m=''1075830''>what</span>
  <span m=''1075950''>kind</span> <span m=''1076130''>of</span> <span m=''1076190''>locality''s</span>
  <span m=''1076500''>this?</span> </p><p><span m=''1082070''>Spatial</span> <span
  m=''1082340''>or</span> <span m=''1082610''>temporal.</span> <span m=''1083030''>There''s</span>
  <span m=''1083220''>not</span> <span m=''1083570''>too</span> <span m=''1083650''>many</span>
  <span m=''1083800''>choices.</span> <span m=''1085490''>Or</span> <span m=''1085650''>none.</span>
  </p><p><span m=''1089140''>How</span> <span m=''1089290''>many</span> <span m=''1089420''>people
  think</span> <span m=''1089820''>spatial?</span> <span m=''1092850''>How</span>
  <span m=''1093100''>many</span> <span m=''1093340''>people</span> <span m=''1093540''>think</span>
  <span m=''1093680''>temporal?</span> <span m=''1095770''>How</span> <span m=''1095940''>many</span>
  <span m=''1096120''>people</span> <span m=''1096350''>said</span> <span m=''1096490''>there''s</span>
  <span m=''1096650''>none</span> <span m=''1096800''>locality?</span> <span m=''1099230''>OK,</span>
  <span m=''1099830''>that''s</span> <span m=''1100100''>a lot</span> <span m=''1100405''>of</span>
  <span m=''1100710''>temporal.</span> <span m=''1100990''>OK,</span> <span m=''1101320''>you</span>
  <span m=''1101500''>want</span> <span m=''1101650''>to</span> <span m=''1101690''>get</span>
  <span m=''1102750''>[UNINTELLIGIBLE].</span> <span m=''1104210''>That''s</span>
  <span m=''1104510''>temporal</span> <span m=''1104845''>locality</span> <span m=''1105180''>here</span>
  <span m=''1105390''>because</span> <span m=''1105620''>you''re</span> <span m=''1105730''>accessing</span>
  <span m=''1105990''>to</span> <span m=''1106060''>the</span> <span m=''1106150''>same</span>
  <span m=''1106380''>thing</span> <span m=''1106520''>again</span> <span m=''1106840''>and</span>
  <span m=''1106950''>again</span> <span m=''1107230''>and</span> <span m=''1107340''>again,</span>
  <span m=''1107610''>same</span> <span m=''1107840''>data.</span> <span m=''1108650''>So
  this is--</span> </p><p><span m=''1108910''>Oh,</span> <span m=''1109292''>OK.</span>
  <span m=''1110056''>Want</span> <span m=''1110440''>to</span> <span m=''1110840''>restart,</span>
  <span m=''1111360''>OK.</span> <span m=''1112350''>Wait</span> <span m=''1112550''>a</span>
  <span m=''1112580''>little.</span> <span m=''1114826''>So this</span> <span m=''1115220''>is</span>
  <span m=''1115460''>only</span> <span m=''1115770''>time</span> <span m=''1116260''>we
  notice</span> <span m=''1116490''>in a</span> <span m=''1116670''>hurry.</span>
  <span m=''1116810''>Every</span> <span m=''1117060''>time,</span> <span m=''1117160''>I</span>
  <span m=''1117270''>go</span> <span m=''1117560''>to do</span> <span m=''1117710''>something,</span>
  <span m=''1118310''>I</span> <span m=''1118410''>get</span> <span m=''1118570''>hourglass.</span>
  </p><p><span m=''1121630''>So</span> <span m=''1122050''>what</span> <span m=''1122220''>kind</span>
  <span m=''1122330''>of</span> <span m=''1122570''>misses</span> <span m=''1122990''>are
  we</span> <span m=''1123430''>getting?</span> <span m=''1125190''>Trick</span> <span
  m=''1125630''>question.</span> <span m=''1134150''>I</span> <span m=''1134220''>got</span>
  <span m=''1134400''>one</span> <span m=''1134740''>cold</span> <span m=''1135055''>miss,</span>
  <span m=''1135720''>and</span> <span m=''1136070''>that''s</span> <span m=''1136320''>about</span>
  <span m=''1136550''>it.</span> <span m=''1137510''>And</span> <span m=''1137640''>the</span>
  <span m=''1137780''>rest</span> <span m=''1137940''>I</span> <span m=''1137990''>don''t</span>
  <span m=''1138140''>have</span> <span m=''1138270''>any</span> <span m=''1138390''>misses.</span>
  <span m=''1138840''>So</span> <span m=''1138980''>if I</span> <span m=''1139070''>have</span>
  <span m=''1139150''>a</span> <span m=''1139420''>miss,</span> <span m=''1139870''>it''s</span>
  <span m=''1139990''>a</span> <span m=''1140060''>cold</span> <span m=''1140510''>miss.</span>
  </p><p><span m=''1141410''>OK,</span> <span m=''1142190''>so</span> <span m=''1142370''>here</span>
  <span m=''1142860''>I am</span> <span m=''1143070''>doing</span> <span m=''1143270''>something</span>
  <span m=''1143630''>interesting.</span> <span m=''1145260''>So</span> <span m=''1146210''>what</span>
  <span m=''1146510''>the</span> <span m=''1146590''>heck</span> <span m=''1146900''>is</span>
  <span m=''1147860''>in</span> <span m=''1148100''>this</span> <span m=''1148350''>list?</span>
  <span m=''1148720''>So</span> <span m=''1148820''>I''m</span> <span m=''1149060''>accessing</span>
  <span m=''1149590''>A[i]</span> <span m=''1150840''>[UNINTELLIGIBLE]</span> <span
  m=''1151840''>this</span> <span m=''1152100''>2</span> <span m=''1152280''>to</span>
  <span m=''1152340''>the</span> <span m=''1152440''>power</span> <span m=''1152730''>number,</span>
  <span m=''1153050''>one</span> <span m=''1153660''>shifted</span> <span m=''1153920''>to</span>
  <span m=''1154220''>the</span> <span m=''1154430''>entire</span> <span m=''1154860''>miss,</span>
  <span m=''1154990''>2</span> <span m=''1155150''>to</span> <span m=''1155200''>the</span>
  <span m=''1155300''>power</span> <span m=''1155560''>N.</span> <span m=''1157300''>I</span>
  <span m=''1157570''>shifted</span> <span m=''1158090''>between</span> <span m=''1158580''>4</span>
  <span m=''1159060''>and</span> <span m=''1159360''>13.</span> </p><p><span m=''1161470''>What</span>
  <span m=''1161780''>this</span> <span m=''1162030''>13?</span> <span m=''1162500''>Why
  is</span> <span m=''1162840''>13?</span> <span m=''1164080''>Less</span> <span m=''1164280''>than</span>
  <span m=''1164480''>13.</span> <span m=''1169590''>What''s</span> <span m=''1169800''>2</span>
  <span m=''1170000''>the</span> <span m=''1170120''>power of</span> <span m=''1170590''>13?</span>
  <span m=''1171060''>I</span> <span m=''1171140''>think</span> <span m=''1171380''>I</span>
  <span m=''1171420''>got</span> <span m=''1171680''>this</span> <span m=''1171880''>right.</span>
  </p><p><span m=''1177625''>AUDIENCE: 8,192.</span> </p><p><span m=''1183070''>PROFESSOR:
  What''s</span> <span m=''1183300''>2</span> <span m=''1183520''>to the</span> <span
  m=''1183660''>power of</span> <span m=''1183800''>13?</span> </p><p><span m=''1184370''>AUDIENCE:
  8,192.</span> </p><p><span m=''1185270''>PROFESSOR: Yeah,</span> <span m=''1185720''>8K.</span>
  <span m=''1186890''>And</span> <span m=''1187420''>I</span> <span m=''1187570''>have</span>
  <span m=''1189500''>32K.</span> <span m=''1190330''>So</span> <span m=''1190620''>8K</span>
  <span m=''1191475''>of</span> <span m=''1193500''>32</span> <span m=''1193680''>[UNINTELLIGIBLE].</span>
  <span m=''1194290''>8K</span> <span m=''1195030''>of</span> <span m=''1195250''>integers,</span>
  <span m=''1195880''>which</span> <span m=''1196160''>is</span> <span m=''1196480''>each</span>
  <span m=''1196820''>as</span> <span m=''1196960''>4</span> <span m=''1197100''>bytes</span>
  <span m=''1197250''>is</span> <span m=''1197420''>how</span> <span m=''1197560''>much?</span>
  <span m=''1199680''>32K.</span> </p><p><span m=''1200140''>So</span> <span m=''1200360''>what</span>
  <span m=''1200640''>this</span> <span m=''1200820''>says</span> <span m=''1201180''>is</span>
  <span m=''1202950''>everything</span> <span m=''1203470''>I</span> <span m=''1203530''>access</span>
  <span m=''1204720''>should</span> <span m=''1205150''>fit</span> <span m=''1205410''>into</span>
  <span m=''1205470''>the</span> <span m=''1205600''>cache.</span> <span m=''1205900''>I
  am</span> <span m=''1206090''>accessing</span> <span m=''1206530''>data</span> <span
  m=''1206720''>like</span> <span m=''1206940''>that.</span> <span m=''1207080''>I''m</span>
  <span m=''1207220''>going</span> <span m=''1207450''>back</span> <span m=''1207680''>and</span>
  <span m=''1207810''>accessing</span> <span m=''1208170''>data</span> <span m=''1208350''>like</span>
  <span m=''1208570''>that.</span> <span m=''1208680''>I''m going</span> <span m=''1208850''>back</span>
  <span m=''1208970''>and</span> <span m=''1209260''>accessing</span> <span m=''1209660''>data</span>
  <span m=''1209790''>like</span> <span m=''1209990''>that,</span> <span m=''1210990''>and</span>
  <span m=''1211310''>it</span> <span m=''1211440''>should</span> <span m=''1211520''>all</span>
  <span m=''1212040''>fit</span> <span m=''1212130''>into</span> <span m=''1212320''>the</span>
  <span m=''1212430''>cache.</span> </p><p><span m=''1212700''>Do you</span> <span
  m=''1212860''>see</span> <span m=''1212990''>what</span> <span m=''1213110''>I</span>
  <span m=''1213230''>do?</span> <span m=''1214270''>I</span> <span m=''1214990''>access</span>
  <span m=''1215390''>up</span> <span m=''1215630''>to</span> <span m=''1216720''>2</span>
  <span m=''1216930''>to the</span> <span m=''1217020''>power of</span> <span m=''1217200''>18,</span>
  <span m=''1217470''>and</span> <span m=''1217740''>I</span> <span m=''1217800''>go</span>
  <span m=''1218010''>back</span> <span m=''1218230''>and</span> <span m=''1218370''>access</span>
  <span m=''1218630''>that</span> <span m=''1218750''>again.</span> <span m=''1219060''>I''m</span>
  <span m=''1219190''>just</span> <span m=''1219340''>going</span> <span m=''1219530''>back</span>
  <span m=''1219750''>and</span> <span m=''1219900''>back</span> <span m=''1220400''>because</span>
  <span m=''1220640''>of</span> <span m=''1220700''>the</span> <span m=''1220780''>model</span>
  <span m=''1221070''>operation.</span> <span m=''1223150''>Everybody</span> <span
  m=''1223320''>see</span> <span m=''1223440''>what''s</span> <span m=''1223630''>going</span>
  <span m=''1223820''>on?</span> <span m=''1225670''>So</span> <span m=''1225900''>how</span>
  <span m=''1226140''>many</span> <span m=''1226340''>cache</span> <span m=''1226840''>misses</span>
  <span m=''1227170''>should I</span> <span m=''1227450''>have?</span> </p><p><span
  m=''1240916''>AUDIENCE: There are</span> <span m=''1241404''>four</span> <span m=''1241892''>cache</span>
  <span m=''1242380''>[INAUDIBLE].</span> </p><p><span m=''1244870''>PROFESSOR: OK,</span>
  <span m=''1245250''>how</span> <span m=''1245470''>many</span> <span m=''1245700''>cache</span>
  <span m=''1246040''>lines</span> <span m=''1246420''>I</span> <span m=''1246510''>would</span>
  <span m=''1246680''>be</span> <span m=''1247320''>accessing</span> <span m=''1247900''>if</span>
  <span m=''1248090''>I</span> <span m=''1248160''>am</span> <span m=''1248330''>doing</span>
  <span m=''1250600''>i1</span> <span m=''1251290''>2</span> <span m=''1251430''>to</span>
  <span m=''1251480''>the</span> <span m=''1251560''>power</span> <span m=''1251790''>N?</span>
  <span m=''1254875''>[i]</span> <span m=''1257070''>mod</span> <span m=''1257950''>2</span>
  <span m=''1258220''>to the</span> <span m=''1258310''>power</span> <span m=''1258560''>N.</span>
  </p><p><span m=''1260974''>AUDIENCE: [INAUDIBLE]</span> </p><p><span m=''1277720''>PROFESSOR:
  So</span> <span m=''1278640''>one</span> <span m=''1278990''>miss</span> <span m=''1279190''>for
  each</span> <span m=''1279590''>axis</span> <span m=''1279990''>line</span> <span
  m=''1280240''>the</span> <span m=''1280430''>first</span> <span m=''1280620''>time</span>
  <span m=''1280760''>around.</span> <span m=''1281070''>Afterward,</span> <span m=''1281610''>it''s</span>
  <span m=''1281970''>only</span> <span m=''1282220''>in</span> <span m=''1282370''>the</span>
  <span m=''1282470''>cache.</span> <span m=''1283290''>So</span> <span m=''1283700''>how</span>
  <span m=''1284110''>many</span> <span m=''1285140''>axis</span> <span m=''1285840''>lines?</span>
  <span m=''1288430''>2</span> <span m=''1288680''>to the</span> <span m=''1288780''>power</span>
  <span m=''1289045''>N.</span> </p><p><span m=''1290000''>Is</span> <span m=''1290270''>that</span>
  <span m=''1290470''>right?</span> <span m=''1290770''>I</span> <span m=''1290900''>think</span>
  <span m=''1291040''>this</span> <span m=''1291170''>is</span> <span m=''1291340''>wrong.</span>
  <span m=''1296087''>Oh, yeah,</span> <span m=''1296580''>this</span> <span m=''1296660''>is</span>
  <span m=''1296840''>right</span> <span m=''1298830''>because</span> <span m=''1299380''>every</span>
  <span m=''1299730''>axis--</span> <span m=''1300510''>So in</span> <span m=''1300900''>the</span>
  <span m=''1300990''>cache</span> <span m=''1301360''>line,</span> <span m=''1301790''>how</span>
  <span m=''1302271''>many--</span> </p><p><span m=''1304676''>AUDIENCE: [INAUDIBLE]</span>
  </p><p><span m=''1308150''>PROFESSOR: This is</span> <span m=''1308410''>four.</span>
  <span m=''1311730''>So</span> <span m=''1311880''>there</span> <span m=''1312050''>are</span>
  <span m=''1312120''>16</span> <span m=''1313640''>entries</span> <span m=''1314080''>here.</span>
  <span m=''1317760''>16</span> <span m=''1318240''>entries</span> <span m=''1318610''>in</span>
  <span m=''1318740''>here.</span> <span m=''1319780''>OK,</span> <span m=''1320350''>only</span>
  <span m=''1320590''>one</span> <span m=''1320900''>of</span> <span m=''1321040''>them</span>
  <span m=''1321860''>basically</span> <span m=''1322340''>misses</span> <span m=''1322700''>that,</span>
  <span m=''1323350''>so</span> <span m=''1323660''>that</span> <span m=''1323880''>means</span>
  <span m=''1325360''>if</span> <span m=''1325470''>2</span> <span m=''1325590''>to</span>
  <span m=''1325860''>the</span> <span m=''1325930''>power</span> <span m=''1326220''>N</span>
  <span m=''1326850''>axises--</span> </p><p><span m=''1329224''>AUDIENCE: [INAUDIBLE]</span>
  </p><p><span m=''1331090''>PROFESSOR: You are</span> <span m=''1331330''>doing</span>
  <span m=''1331730''>2 to the</span> <span m=''1331920''>power</span> <span m=''1332273''>N</span>
  <span m=''1335030''>axises</span> <span m=''1337070''>before</span> <span m=''1337430''>you</span>
  <span m=''1337680''>go</span> <span m=''1337830''>back</span> <span m=''1338070''>in</span>
  <span m=''1338170''>here.</span> <span m=''1338720''>So</span> <span m=''1338880''>what</span>
  <span m=''1339050''>you''re</span> <span m=''1339180''>doing</span> <span m=''1339500''>is</span>
  <span m=''1340760''>you</span> <span m=''1340930''>are--</span> <span m=''1342260''>you</span>
  <span m=''1342370''>make</span> <span m=''1342660''>this</span> <span m=''1342900''>many</span>
  <span m=''1343100''>axises</span> <span m=''1344820''>before</span> <span m=''1345140''>you</span>
  <span m=''1345220''>go</span> <span m=''1345420''>back</span> <span m=''1345640''>again.</span>
  <span m=''1347320''>OK?</span> <span m=''1348910''>And</span> <span m=''1349250''>how</span>
  <span m=''1349520''>many</span> <span m=''1349780''>axises</span> <span m=''1350240''>assigned</span>
  <span m=''1350600''>to</span> <span m=''1350680''>be in</span> <span m=''1350880''>the</span>
  <span m=''1350960''>same</span> <span m=''1351210''>cache</span> <span m=''1351470''>line?</span>
  <span m=''1354130''>You</span> <span m=''1354230''>have</span> <span m=''1354330''>64</span>
  <span m=''1355620''>bytes</span> <span m=''1356090''>in</span> <span m=''1356130''>the</span>
  <span m=''1356230''>cache.</span> <span m=''1357490''>OK</span> <span m=''1358220''>each</span>
  <span m=''1358470''>axis</span> <span m=''1359210''>is</span> <span m=''1359440''>four.</span>
  <span m=''1361730''>16.</span> </p><p><span m=''1363134''>AUDIENCE: [INAUDIBLE]</span>
  </p><p><span m=''1366040''>PROFESSOR: 16.</span> <span m=''1368210''>So</span> <span
  m=''1368370''>that''s</span> <span m=''1368720''>true</span> <span m=''1368840''>[UNINTELLIGIBLE].</span>
  </p><p><span m=''1369430''>AUDIENCE: [INAUDIBLE]</span> </p><p><span m=''1373410''>PROFESSOR:
  Yeah,</span> <span m=''1373780''>but</span> <span m=''1374150''>what</span> <span
  m=''1374435''>I''m</span> <span m=''1374720''>saying</span> <span m=''1375020''>is</span>
  <span m=''1375580''>I</span> <span m=''1375710''>might</span> <span m=''1375910''>not</span>
  <span m=''1376080''>access</span> <span m=''1376510''>the</span> <span m=''1376690''>[UNINTELLIGIBLE]</span>
  <span m=''1377250''>because</span> <span m=''1377560''>if</span> <span m=''1377690''>any</span>
  <span m=''1377960''>small.</span> <span m=''1378890''>I only</span> <span m=''1379210''>access</span>
  <span m=''1379390''>a</span> <span m=''1379450''>certain</span> <span m=''1379760''>amount</span>
  <span m=''1379990''>of</span> <span m=''1380070''>cache</span> <span m=''1380340''>line,</span>
  <span m=''1380450''>so</span> <span m=''1380570''>I''m</span> <span m=''1380760''>accessing</span>
  <span m=''1381110''>a</span> <span m=''1381190''>part</span> <span m=''1381400''>of</span>
  <span m=''1381610''>the</span> <span m=''1381700''>cache.</span> <span m=''1382760''>I</span>
  <span m=''1382860''>might</span> <span m=''1383100''>not</span> <span m=''1383290''>go</span>
  <span m=''1383430''>through</span> <span m=''1383550''>the--</span> <span m=''1383640''>can</span>
  <span m=''1384010''>everybody</span> <span m=''1384060''>see</span> <span m=''1384210''>this,</span>
  <span m=''1384370''>how</span> <span m=''1384520''>this</span> <span m=''1384670''>is</span>
  <span m=''1384780''>working?</span> <span m=''1386160''>Because</span> <span m=''1386560''>if</span>
  <span m=''1386740''>I''m</span> <span m=''1386940''>only</span> <span m=''1387090''>accessing,</span>
  <span m=''1388200''>we''ll</span> <span m=''1388400''>say,</span> <span m=''1390810''>accessing</span>
  <span m=''1391430''>one,</span> <span m=''1392020''>if</span> <span m=''1392170''>this</span>
  <span m=''1392420''>is,</span> <span m=''1393010''>we''ll</span> <span m=''1393180''>say,</span>
  <span m=''1393590''>2</span> <span m=''1393860''>to the</span> <span m=''1393990''>power
  of</span> <span m=''1394280''>5.</span> </p><p><span m=''1396472''>OK,</span> <span
  m=''1396910''>I</span> <span m=''1397040''>am not</span> <span m=''1397160''>going</span>
  <span m=''1397280''>to</span> <span m=''1397480''>access</span> <span m=''1397790''>the</span>
  <span m=''1397960''>entire</span> <span m=''1398000''>cache</span> <span m=''1398310''>line.</span>
  <span m=''1398570''>[UNINTELLIGIBLE]</span> <span m=''1398990''>cache</span> <span
  m=''1399780''>is</span> <span m=''1400260''>I''m</span> <span m=''1400380''>going</span>
  <span m=''1400580''>to</span> <span m=''1400670''>[UNINTELLIGIBLE]</span> <span
  m=''1402100''>go</span> <span m=''1402230''>through</span> <span m=''1402350''>the</span>
  <span m=''1402440''>cache.</span> <span m=''1403220''>So</span> <span m=''1403380''>this</span>
  <span m=''1403640''>many</span> <span m=''1403820''>cache</span> <span m=''1404210''>lines
  I''m</span> <span m=''1404700''>accessing.</span> <span m=''1407670''>OK,</span>
  <span m=''1408350''>and</span> <span m=''1408530''>the</span> <span m=''1408600''>first</span>
  <span m=''1408850''>time</span> <span m=''1409090''>I</span> <span m=''1409160''>access</span>
  <span m=''1409590''>that,</span> <span m=''1410770''>I</span> <span m=''1410900''>get</span>
  <span m=''1411170''>a</span> <span m=''1411270''>cache</span> <span m=''1411665''>miss,</span>
  <span m=''1412870''>and</span> <span m=''1413010''>after</span> <span m=''1413270''>that,</span>
  <span m=''1413510''>it</span> <span m=''1413620''>say</span> <span m=''1413900''>everything</span>
  <span m=''1414000''>is</span> <span m=''1414150''>in</span> <span m=''1414210''>the</span>
  <span m=''1414290''>cache.</span> </p><p><span m=''1418820''>Everybody''s</span>
  <span m=''1419210''>following</span> <span m=''1419370''>me?</span> <span m=''1419460''>Or</span>
  <span m=''1419820''>are</span> <span m=''1419990''>we</span> <span m=''1420140''>like</span>
  <span m=''1420920''>lost</span> <span m=''1421285''>in here?</span> <span m=''1421650''>How</span>
  <span m=''1421810''>many</span> <span m=''1421970''>people</span> <span m=''1422160''>are</span>
  <span m=''1422300''>lost?</span> <span m=''1424540''>OK,</span> <span m=''1425530''>let''s</span>
  <span m=''1425750''>do</span> <span m=''1425890''>this.</span> </p><p><span m=''1429430''>So</span>
  <span m=''1429670''>what</span> <span m=''1429880''>happens</span> <span m=''1430310''>is</span>
  <span m=''1430900''>if</span> <span m=''1431190''>you</span> <span m=''1431380''>have</span>
  <span m=''1431560''>a</span> <span m=''1431640''>modular</span> <span m=''1434492''>2</span>
  <span m=''1434890''>to the</span> <span m=''1434960''>power</span> <span m=''1435875''>N.</span>
  <span m=''1437120''>What</span> <span m=''1437440''>that</span> <span m=''1437660''>means</span>
  <span m=''1438080''>is</span> <span m=''1438570''>I''m</span> <span m=''1438890''>going</span>
  <span m=''1439080''>to</span> <span m=''1439270''>keep</span> <span m=''1439520''>accessing</span>
  <span m=''1442350''>one</span> <span m=''1442830''>to</span> <span m=''1443390''>somewhere</span>
  <span m=''1444075''>2</span> <span m=''1444540''>to</span> <span m=''1444660''>the</span>
  <span m=''1444800''>power</span> <span m=''1445070''>N,</span> <span m=''1446850''>and</span>
  <span m=''1447000''>the</span> <span m=''1447080''>next</span> <span m=''1447350''>one,</span>
  <span m=''1447500''>I am</span> <span m=''1447650''>going</span> <span m=''1447900''>back</span>
  <span m=''1448120''>here</span> <span m=''1448310''>again.</span> <span m=''1452800''>That''s</span>
  <span m=''1453000''>my</span> <span m=''1453110''>axises,</span> <span m=''1453570''>basically,</span>
  <span m=''1453740''>because</span> <span m=''1454040''>it</span> <span m=''1454160''>goes</span>
  <span m=''1454580''>[UNINTELLIGIBLE]</span> <span m=''1456620''>accessing</span>
  <span m=''1456860''>to</span> <span m=''1456950''>the</span> <span m=''1457080''>power
  of</span> <span m=''1457380''>N.</span> </p><p><span m=''1458380''>I</span> <span
  m=''1458450''>nicely</span> <span m=''1459210''>said</span> <span m=''1459860''>n</span>
  <span m=''1460340''>is</span> <span m=''1460960''>between</span> <span m=''1461520''>4</span>
  <span m=''1461790''>and</span> <span m=''1461890''>13.</span> <span m=''1463840''>So</span>
  <span m=''1463990''>n</span> <span m=''1464100''>is</span> <span m=''1464380''>13</span>
  <span m=''1464760''>means</span> <span m=''1471050''>the</span> <span m=''1471440''>maximum</span>
  <span m=''1472110''>I</span> <span m=''1472190''>can</span> <span m=''1472520''>do</span>
  <span m=''1472760''>is</span> <span m=''1476210''>8K.</span> <span m=''1478820''>8K</span>
  <span m=''1479180''>increase.</span> <span m=''1482340''>8K</span> <span m=''1482750''>increase</span>
  <span m=''1486740''>equals</span> <span m=''1487680''>32K</span> <span m=''1489320''>kilobytes</span>
  <span m=''1491060''>of</span> <span m=''1491200''>memory.</span> </p><p><span m=''1494540''>So</span>
  <span m=''1494690''>that</span> <span m=''1494930''>means</span> <span m=''1495170''>you</span>
  <span m=''1495380''>don''t</span> <span m=''1495600''>have</span> <span m=''1495810''>any</span>
  <span m=''1496060''>option</span> <span m=''1496470''>of</span> <span m=''1496580''>overwriting</span>
  <span m=''1497070''>the</span> <span m=''1497170''>cache.</span> <span m=''1499660''>So</span>
  <span m=''1500080''>you</span> <span m=''1500460''>go</span> <span m=''1500660''>to</span>
  <span m=''1500800''>cache,</span> <span m=''1501200''>[UNINTELLIGIBLE].</span> <span
  m=''1502790''>You</span> <span m=''1502950''>don''t</span> <span m=''1503290''>wrap</span>
  <span m=''1503620''>around</span> <span m=''1503860''>in the</span> <span m=''1504070''>cache.</span>
  <span m=''1504880''>Do you</span> <span m=''1505020''>see</span> <span m=''1505150''>that?</span>
  <span m=''1506325''>OK,</span> <span m=''1506780''>you</span> <span m=''1507040''>know</span>
  <span m=''1507210''>wrap</span> <span m=''1507290''>arounding</span> <span m=''1507620''>is</span>
  <span m=''1507830''>so</span> <span m=''1507980''>bad,</span> <span m=''1508300''>that</span>
  <span m=''1508530''>means</span> <span m=''1508810''>all</span> <span m=''1509120''>these</span>
  <span m=''1509450''>things</span> <span m=''1510190''>is</span> <span m=''1510390''>going</span>
  <span m=''1510570''>to</span> <span m=''1510630''>fit</span> <span m=''1510840''>in</span>
  <span m=''1510990''>the</span> <span m=''1511100''>cache,</span> <span m=''1511450''>and</span>
  <span m=''1511570''>then when</span> <span m=''1511740''>you</span> <span m=''1511860''>get</span>
  <span m=''1512110''>[UNINTELLIGIBLE],</span> <span m=''1512540''>this</span> <span
  m=''1512730''>is</span> <span m=''1512840''>going</span> <span m=''1513010''>to</span>
  <span m=''1513060''>be</span> <span m=''1513130''>in</span> <span m=''1513200''>the</span>
  <span m=''1513280''>cache</span> <span m=''1514860''>because</span> <span m=''1517940''>the</span>
  <span m=''1518020''>data</span> <span m=''1518340''>you</span> <span m=''1518460''>access</span>
  <span m=''1518990''>is</span> <span m=''1519100''>smaller</span> <span m=''1519610''>than</span>
  <span m=''1519890''>the entire</span> <span m=''1520160''>cache.</span> </p><p><span
  m=''1522630''>OK,</span> <span m=''1523110''>so</span> <span m=''1523270''>what</span>
  <span m=''1523480''>that</span> <span m=''1523690''>means</span> <span m=''1523920''>is</span>
  <span m=''1524060''>only</span> <span m=''1524390''>the</span> <span m=''1524620''>first</span>
  <span m=''1524860''>line</span> <span m=''1525340''>has</span> <span m=''1525510''>to</span>
  <span m=''1525620''>have</span> <span m=''1525760''>some</span> <span m=''1525940''>cache</span>
  <span m=''1526230''>misses.</span> <span m=''1528410''>So</span> <span m=''1528570''>how</span>
  <span m=''1528780''>many</span> <span m=''1528990''>cache</span> <span m=''1529420''>misses</span>
  <span m=''1529510''>you are</span> <span m=''1529750''>going to</span> <span m=''1529860''>have
  in</span> <span m=''1530070''>the</span> <span m=''1530140''>first line?</span>
  <span m=''1530470''>Or</span> <span m=''1530640''>any</span> <span m=''1530850''>of</span>
  <span m=''1530960''>the</span> <span m=''1531080''>lines</span> <span m=''1531250''>going
  to</span> <span m=''1531400''>have</span> <span m=''1531560''>cache</span> <span
  m=''1531800''>misses</span> <span m=''1532340''>because</span> <span m=''1532700''>the</span>
  <span m=''1532790''>first</span> <span m=''1533230''>line</span> <span m=''1533540''>still</span>
  <span m=''1533890''>fit</span> <span m=''1533980''>in the</span> <span m=''1534180''>cache.</span>
  <span m=''1534430''>[UNINTELLIGIBLE]</span> <span m=''1534970''>anything.</span>
  <span m=''1535280''>We</span> <span m=''1535360''>don''t</span> <span m=''1535490''>need</span>
  <span m=''1535640''>everything.</span> </p><p><span m=''1536540''>How</span> <span
  m=''1536710''>many</span> <span m=''1536910''>cache</span> <span m=''1537270''>misses</span>
  <span m=''1537450''>have</span> <span m=''1537690''>in</span> <span m=''1537830''>here?</span>
  <span m=''1538410''>The</span> <span m=''1538510''>interesting</span> <span m=''1538960''>thing</span>
  <span m=''1539250''>is</span> <span m=''1540770''>because</span> <span m=''1541280''>these</span>
  <span m=''1541490''>are</span> <span m=''1541570''>four</span> <span m=''1541830''>bytes,</span>
  <span m=''1545410''>we</span> <span m=''1545660''>have</span> <span m=''1546390''>a</span>
  <span m=''1547330''>64-byte</span> <span m=''1552750''>cache</span> <span m=''1553100''>line,</span>
  <span m=''1554100''>and</span> <span m=''1554560''>each</span> <span m=''1554930''>is</span>
  <span m=''1555195''>four</span> <span m=''1555460''>bytes.</span> <span m=''1558390''>So</span>
  <span m=''1558560''>that</span> <span m=''1558830''>means</span> <span m=''1559480''>I</span>
  <span m=''1559600''>can</span> <span m=''1559870''>do</span> <span m=''1560010''>16</span>
  <span m=''1560690''>axises</span> <span m=''1563190''>every</span> <span m=''1563420''>time</span>
  <span m=''1563690''>I</span> <span m=''1563770''>have</span> <span m=''1563870''>a</span>
  <span m=''1563980''>cache</span> <span m=''1564260''>miss.</span> </p><p><span m=''1566550''>OK,</span>
  <span m=''1567070''>so</span> <span m=''1567460''>up to</span> <span m=''1567820''>here</span>
  <span m=''1568170''>to</span> <span m=''1568270''>here</span> <span m=''1568520''>is</span>
  <span m=''1568780''>2</span> <span m=''1568890''>to the</span> <span m=''1569110''>N.</span>
  <span m=''1571600''>My</span> <span m=''1571860''>cache</span> <span m=''1572330''>misses</span>
  <span m=''1572900''>I</span> <span m=''1572970''>do</span> <span m=''1573280''>[UNINTELLIGIBLE]</span>
  <span m=''1573960''>basically.</span> <span m=''1574690''>My</span> <span m=''1574810''>cache</span>
  <span m=''1575150''>misses</span> <span m=''1575460''>is</span> <span m=''1575640''>basically</span>
  <span m=''1577700''>this</span> <span m=''1577870''>much.</span> <span m=''1581460''>Everything</span>
  <span m=''1581850''>else</span> <span m=''1581960''>is in</span> <span m=''1582120''>the</span>
  <span m=''1582250''>cache,</span> <span m=''1582730''>and</span> <span m=''1582870''>after</span>
  <span m=''1582980''>the</span> <span m=''1583080''>first</span> <span m=''1583280''>line,</span>
  <span m=''1583440''>everything</span> <span m=''1583750''>else</span> <span m=''1583920''>is</span>
  <span m=''1584050''>in the</span> <span m=''1584160''>cache</span> <span m=''1584480''>again,</span>
  <span m=''1584810''>[UNINTELLIGIBLE]</span> <span m=''1585110''>nicely,</span> <span
  m=''1585920''>got</span> <span m=''1586150''>my</span> <span m=''1586270''>working</span>
  <span m=''1586650''>set</span> <span m=''1587030''>to fit in</span> <span m=''1587290''>the</span>
  <span m=''1587390''>cache.</span> <span m=''1588140''>I''m</span> <span m=''1588310''>really</span>
  <span m=''1588610''>happy.</span> </p><p><span m=''1590180''>Everybody</span> <span
  m=''1590560''>see</span> <span m=''1590700''>this?</span> <span m=''1591580''>How</span>
  <span m=''1591720''>many</span> <span m=''1591880''>people</span> <span m=''1592130''>don''t</span>
  <span m=''1592530''>see it</span> <span m=''1592780''>now?</span> <span m=''1594530''>OK,</span>
  <span m=''1594830''>good.</span> <span m=''1596010''>So</span> <span m=''1596490''>let''s</span>
  <span m=''1596660''>move</span> <span m=''1596910''>to</span> <span m=''1597000''>something</span>
  <span m=''1597410''>a little bit</span> <span m=''1597700''>more</span> <span m=''1597750''>complicated.</span>
  </p><p><span m=''1599380''>What</span> <span m=''1599550''>kind</span> <span m=''1599730''>of</span>
  <span m=''1599790''>locality</span> <span m=''1600110''>do</span> <span m=''1600220''>we</span>
  <span m=''1600340''>have?</span> </p><p><span m=''1605698''>AUDIENCE: Temporal</span>
  <span m=''1606166''>and</span> <span m=''1606634''>spatial.</span> </p><p><span
  m=''1607570''>PROFESSOR: Good.</span> <span m=''1607830''>We</span> <span m=''1608090''>have</span>
  <span m=''1608170''>temporal</span> <span m=''1608550''>and</span> <span m=''1608900''>spatial.</span>
  <span m=''1611560''>You</span> <span m=''1611720''>have</span> <span m=''1611890''>spatial</span>
  <span m=''1612920''>because</span> <span m=''1613430''>every</span> <span m=''1613800''>time</span>
  <span m=''1614040''>you</span> <span m=''1614130''>go,</span> <span m=''1614580''>you</span>
  <span m=''1614700''>only</span> <span m=''1614900''>get</span> <span m=''1615020''>the</span>
  <span m=''1615090''>first</span> <span m=''1615350''>line</span> <span m=''1615530''>of</span>
  <span m=''1615590''>the</span> <span m=''1615690''>cache.</span> <span m=''1616060''>Rest</span>
  <span m=''1616230''>is</span> <span m=''1616340''>in</span> <span m=''1616470''>the</span>
  <span m=''1616600''>cache.</span> <span m=''1618850''>From</span> <span m=''1619110''>that,</span>
  <span m=''1619590''>I</span> <span m=''1619710''>got</span> <span m=''1619950''>a</span>
  <span m=''1620010''>16x</span> <span m=''1620650''>improvement</span> <span m=''1621150''>because</span>
  <span m=''1621410''>I</span> <span m=''1621620''>have</span> <span m=''1621720''>temporal</span>
  <span m=''1621910''>locality.</span> </p><p><span m=''1622990''>And</span> <span
  m=''1623250''>since</span> <span m=''1623740''>I</span> <span m=''1624170''>only</span>
  <span m=''1624470''>access</span> <span m=''1625040''>when</span> <span m=''1625170''>I</span>
  <span m=''1625230''>go</span> <span m=''1625440''>back</span> <span m=''1625640''>to</span>
  <span m=''1625720''>the</span> <span m=''1625870''>data,</span> <span m=''1626370''>after</span>
  <span m=''1626690''>accessing</span> <span m=''1627110''>this,</span> <span m=''1627650''>since</span>
  <span m=''1627900''>it''s</span> <span m=''1628100''>already</span> <span m=''1628400''>in</span>
  <span m=''1628510''>the</span> <span m=''1628620''>cache,</span> <span m=''1632430''>I</span>
  <span m=''1632490''>get</span> <span m=''1632660''>spatial</span> <span m=''1632990''>locality</span>
  <span m=''1633370''>because</span> <span m=''1633620''>of</span> <span m=''1633710''>the</span>
  <span m=''1633760''>16.</span> <span m=''1634800''>16</span> <span m=''1635150''>things</span>
  <span m=''1635360''>are in</span> <span m=''1635490''>the</span> <span m=''1635590''>cache,</span>
  <span m=''1635860''>I am</span> <span m=''1636030''>going</span> <span m=''1636260''>through</span>
  <span m=''1636400''>that.</span> <span m=''1636600''>I</span> <span m=''1636680''>get</span>
  <span m=''1636840''>spatial</span> <span m=''1637150''>locality.</span> <span m=''1638050''>I</span>
  <span m=''1638140''>get</span> <span m=''1638390''>temporal</span> <span m=''1638790''>locality</span>
  <span m=''1640570''>because</span> <span m=''1641650''>next</span> <span m=''1641870''>time</span>
  <span m=''1642100''>I</span> <span m=''1642170''>access,</span> <span m=''1642530''>it''s</span>
  <span m=''1642890''>still in</span> <span m=''1643250''>the cache.</span> <span
  m=''1643580''>I</span> <span m=''1643660''>haven''t</span> <span m=''1643920''>taken</span>
  <span m=''1644280''>anything</span> <span m=''1644610''>out</span> <span m=''1644690''>of</span>
  <span m=''1644770''>the</span> <span m=''1644860''>cache.</span> </p><p><span m=''1646380''>OK,</span>
  <span m=''1647220''>what</span> <span m=''1647340''>kind</span> <span m=''1647490''>of</span>
  <span m=''1647640''>misses?</span> <span m=''1650960''>Should</span> <span m=''1651150''>be</span>
  <span m=''1651340''>cold</span> <span m=''1651670''>misses</span> <span m=''1651830''>again.</span>
  <span m=''1653950''>Cold</span> <span m=''1654340''>misses</span> <span m=''1654450''>because</span>
  <span m=''1654730''>the</span> <span m=''1654790''>first</span> <span m=''1655020''>time</span>
  <span m=''1655250''>I</span> <span m=''1655330''>[UNINTELLIGIBLE]</span> <span m=''1655650''>things.</span>
  <span m=''1655890''>I</span> <span m=''1655930''>haven''t</span> <span m=''1656180''>seen</span>
  <span m=''1656350''>that</span> <span m=''1656530''>data.</span> <span m=''1656860''>After</span>
  <span m=''1657260''>I</span> <span m=''1657350''>get</span> <span m=''1657540''>it,</span>
  <span m=''1658690''>everything</span> <span m=''1658950''>is</span> <span m=''1659160''>in</span>
  <span m=''1659230''>the</span> <span m=''1659300''>cache.</span> </p><p><span m=''1661460''>So</span>
  <span m=''1661760''>now,</span> <span m=''1663130''>here''s</span> <span m=''1663420''>interesting</span>
  <span m=''1663870''>case.</span> <span m=''1664700''>Now,</span> <span m=''1664970''>I
  am</span> <span m=''1665250''>doing</span> <span m=''1666210''>2</span> <span m=''1666520''>to</span>
  <span m=''1666760''>the</span> <span m=''1666860''>power</span> <span m=''1667280''>N,</span>
  <span m=''1667600''>where</span> <span m=''1667800''>N</span> <span m=''1668020''>is</span>
  <span m=''1668230''>great</span> <span m=''1668480''>than</span> <span m=''1668710''>14.</span>
  <span m=''1672800''>Now,</span> <span m=''1673000''>what</span> <span m=''1673190''>happens?</span>
  <span m=''1675120''>Now,</span> <span m=''1675320''>what</span> <span m=''1675560''>happens</span>
  <span m=''1675940''>in</span> <span m=''1676150''>our</span> <span m=''1676400''>picture</span>
  <span m=''1676780''>here</span> <span m=''1679410''>is</span> <span m=''1680130''>I
  am</span> <span m=''1680510''>going--</span> </p><p><span m=''1685180''>So</span>
  <span m=''1685310''>as</span> <span m=''1685490''>you</span> <span m=''1685680''>might</span>
  <span m=''1686070''>cache</span> <span m=''1686460''>is</span> <span m=''1686540''>somewhere</span>
  <span m=''1686950''>here.</span> <span m=''1688220''>At this</span> <span m=''1688570''>point,</span>
  <span m=''1691300''>I</span> <span m=''1691780''>fill</span> <span m=''1692030''>out</span>
  <span m=''1692150''>the</span> <span m=''1692250''>cache.</span> <span m=''1693470''>I</span>
  <span m=''1693670''>still</span> <span m=''1694060''>keep</span> <span m=''1694310''>going,</span>
  <span m=''1696440''>and</span> <span m=''1696620''>minute</span> <span m=''1697090''>I</span>
  <span m=''1697150''>access</span> <span m=''1697680''>something</span> <span m=''1698010''>[UNINTELLIGIBLE]</span>
  <span m=''1699300''>cache,</span> <span m=''1699500''>what''s</span> <span m=''1699670''>going</span>
  <span m=''1699760''>to</span> <span m=''1699850''>happen?</span> <span m=''1704630''>So</span>
  <span m=''1705040''>I</span> <span m=''1706160''>went</span> <span m=''1706590''>through</span>
  <span m=''1707280''>accessing</span> <span m=''1707890''>34</span> <span m=''1708280''>kilobyte.</span>
  <span m=''1708650''>If I</span> <span m=''1709130''>access</span> <span m=''1709370''>the</span>
  <span m=''1709620''>next one,</span> <span m=''1709880''>what</span> <span m=''1710150''>happens?</span>
  </p><p><span m=''1714420''>OK,</span> <span m=''1715290''>no,</span> <span m=''1715480''>no,</span>
  <span m=''1715980''>no</span> <span m=''1716240''>shutting</span> <span m=''1716570''>down,</span>
  <span m=''1716920''>please.</span> <span m=''1718130''>OK,</span> <span m=''1718680''>what</span>
  <span m=''1718830''>happened?</span> <span m=''1722730''>So</span> <span m=''1722910''>I
  am</span> <span m=''1723120''>accessing</span> <span m=''1723610''>more</span> <span
  m=''1723780''>than</span> <span m=''1723940''>I</span> <span m=''1724000''>can</span>
  <span m=''1724150''>fit</span> <span m=''1724310''>into</span> <span m=''1724450''>the</span>
  <span m=''1724530''>cache.</span> <span m=''1725940''>Next</span> <span m=''1726150''>time</span>
  <span m=''1726360''>access,</span> <span m=''1726810''>what''s</span> <span m=''1727020''>going</span>
  <span m=''1727120''>to</span> <span m=''1727230''>happen?</span> <span m=''1728840''>Anyone</span>
  <span m=''1728960''>want to</span> <span m=''1729160''>take</span> <span m=''1729290''>a
  wild</span> <span m=''1729530''>guess?</span> </p><p><span m=''1731638''>AUDIENCE:
  [INAUDIBLE]</span> </p><p><span m=''1735530''>PROFESSOR: [UNINTELLIGIBLE PHRASE]</span>
  <span m=''1737450''>before</span> <span m=''1737670''>that.</span> <span m=''1737840''>[UNINTELLIGIBLE]</span>
  <span m=''1738440''>in</span> <span m=''1738520''>there.</span> <span m=''1739260''>So</span>
  <span m=''1739430''>what</span> <span m=''1739670''>happens</span> <span m=''1740080''>is</span>
  <span m=''1740230''>then</span> <span m=''1741520''>am</span> <span m=''1741650''>I</span>
  <span m=''1742050''>ever</span> <span m=''1742210''>going</span> <span m=''1742600''>to</span>
  <span m=''1743110''>have</span> <span m=''1743580''>any</span> <span m=''1744410''>temporal</span>
  <span m=''1744810''>locality?</span> <span m=''1747120''>No.</span> </p><p><span
  m=''1748330''>OK,</span> <span m=''1748570''>so</span> <span m=''1749240''>now,</span>
  <span m=''1751260''>first</span> <span m=''1751680''>access</span> <span m=''1752100''>to</span>
  <span m=''1752240''>each</span> <span m=''1752690''>line</span> <span m=''1752980''>basically</span>
  <span m=''1753500''>misses</span> <span m=''1754590''>forever</span> <span m=''1756580''>because</span>
  <span m=''1757090''>by</span> <span m=''1757200''>the</span> <span m=''1757320''>time</span>
  <span m=''1757510''>I</span> <span m=''1757570''>get</span> <span m=''1757780''>back</span>
  <span m=''1757950''>to</span> <span m=''1758020''>the</span> <span m=''1758720''>[UNINTELLIGIBLE],</span>
  <span m=''1759320''>it''s</span> <span m=''1759540''>not</span> <span m=''1759720''>there.</span>
  <span m=''1759880''>So</span> <span m=''1760050''>basically,</span> <span m=''1760220''>it''s</span>
  <span m=''1760340''>gone</span> <span m=''1760530''>out of</span> <span m=''1760926''>the
  cache.</span> <span m=''1761720''>So</span> <span m=''1761890''>what</span> <span
  m=''1762090''>that</span> <span m=''1762300''>means</span> <span m=''1762650''>is</span>
  <span m=''1763280''>my</span> <span m=''1763420''>total</span> <span m=''1763740''>access</span>
  <span m=''1764090''>time</span> <span m=''1764360''>is</span> <span m=''1764490''>basically</span>
  <span m=''1765750''>every</span> <span m=''1766060''>16th</span> <span m=''1766590''>element,</span>
  <span m=''1767590''>I am</span> <span m=''1767810''>getting</span> <span m=''1768050''>cache</span>
  <span m=''1768345''>miss</span> <span m=''1769020''>forever.</span> </p><p><span
  m=''1770720''>So</span> <span m=''1770940''>what</span> <span m=''1771080''>that</span>
  <span m=''1771290''>means,</span> <span m=''1771790''>every</span> <span m=''1772010''>15th</span>
  <span m=''1772285''>of</span> <span m=''1772560''>16,</span> <span m=''1773000''>I</span>
  <span m=''1773070''>have</span> <span m=''1773310''>a hit.</span> <span m=''1773890''>So</span>
  <span m=''1774070''>what</span> <span m=''1774260''>I</span> <span m=''1774530''>have</span>
  <span m=''1774820''>is</span> <span m=''1775260''>15</span> <span m=''1776760''>out</span>
  <span m=''1777220''>of</span> <span m=''1777310''>16,</span> <span m=''1778100''>I</span>
  <span m=''1778230''>have</span> <span m=''1778620''>a cache</span> <span m=''1778930''>hit.</span>
  <span m=''1780070''>1/16th</span> <span m=''1780740''>of</span> <span m=''1780820''>the</span>
  <span m=''1780950''>time,</span> <span m=''1781190''>I</span> <span m=''1781280''>have
  a</span> <span m=''1781380''>cache</span> <span m=''1781650''>miss</span> <span
  m=''1782770''>forever.</span> </p><p><span m=''1784440''>So</span> <span m=''1784580''>what</span>
  <span m=''1784750''>kind</span> <span m=''1784860''>of</span> <span m=''1784980''>locality</span>
  <span m=''1785330''>do</span> <span m=''1785430''>I</span> <span m=''1785560''>have</span>
  <span m=''1785700''>now?</span> <span m=''1790367''>I have</span> <span m=''1790860''>spatial</span>
  <span m=''1791340''>locality.</span> <span m=''1792250''>I</span> <span m=''1792370''>don''t</span>
  <span m=''1792540''>have any</span> <span m=''1792760''>temporal</span> <span m=''1793260''>locality.</span>
  <span m=''1793520''>I</span> <span m=''1793690''>don''t</span> <span m=''1793800''>ever</span>
  <span m=''1794080''>go</span> <span m=''1794250''>back</span> <span m=''1794440''>to</span>
  <span m=''1794510''>something</span> <span m=''1794830''>in</span> <span m=''1794910''>the</span>
  <span m=''1795000''>cache</span> <span m=''1795280''>again.</span> <span m=''1795910''>So</span>
  <span m=''1796100''>what</span> <span m=''1796290''>I</span> <span m=''1796340''>have</span>
  <span m=''1796490''>is</span> <span m=''1796520''>spatial</span> <span m=''1796860''>locality,</span>
  <span m=''1797250''>so</span> <span m=''1797730''>what</span> <span m=''1797950''>type</span>
  <span m=''1798050''>of</span> <span m=''1798280''>misses</span> <span m=''1798740''>now</span>
  <span m=''1798850''>do I</span> <span m=''1799010''>have?</span> </p><p><span m=''1803679''>AUDIENCE:
  [INAUDIBLE]</span> </p><p><span m=''1806090''>PROFESSOR: Cold,</span> <span m=''1806740''>right.</span>
  </p><p><span m=''1808112''>AUDIENCE: Is it</span> <span m=''1808554''>like shared</span>
  <span m=''1808996''>misses?</span> <span m=''1809438''>[INAUDIBLE]</span> </p><p><span
  m=''1809880''>PROFESSOR: It''s not</span> <span m=''1810322''>shared.</span> <span
  m=''1810770''>When you</span> <span m=''1811165''>fill</span> <span m=''1811560''>out
  the</span> <span m=''1811910''>cache,</span> <span m=''1812170''>you go</span> <span
  m=''1812430''>back to</span> <span m=''1812930''>[UNINTELLIGIBLE].</span> <span
  m=''1814080''>You fill</span> <span m=''1814350''>the cache.</span> <span m=''1815690''>So</span>
  <span m=''1815850''>what</span> <span m=''1816020''>type</span> <span m=''1816160''>of
  miss</span> <span m=''1816240''>is</span> <span m=''1816550''>that?</span> </p><p><span
  m=''1817828''>AUDIENCE: Capacity?</span> </p><p><span m=''1818716''>PROFESSOR: Capacity</span>
  <span m=''1819160''>miss.</span> <span m=''1819770''>OK,</span> <span m=''1820040''>so</span>
  <span m=''1820150''>you</span> <span m=''1820220''>have</span> <span m=''1820470''>basically</span>
  <span m=''1822240''>cold</span> <span m=''1822540''>and</span> <span m=''1822630''>capacity</span>
  <span m=''1822910''>misses</span> <span m=''1823290''>happening</span> <span m=''1823630''>now.</span>
  <span m=''1825360''>OK?</span> </p><p><span m=''1825695''>AUDIENCE: One</span> <span
  m=''1826030''>question.</span> <span m=''1826518''>[INAUDIBLE]</span> <span m=''1827982''>that
  you</span> <span m=''1828470''>multiplied</span> <span m=''1828958''>whenever you''re</span>
  <span m=''1829446''>trying to load</span> <span m=''1831398''>from memory,</span>
  <span m=''1831886''>is that</span> <span m=''1832374''>like an</span> <span m=''1832862''>arbitrary
  number,</span> <span m=''1833350''>or is that</span> <span m=''1835302''>the</span>
  <span m=''1835790''>actual cost</span> <span m=''1836278''>of going--</span> </p><p><span
  m=''1836766''>PROFESSOR: Every</span> <span m=''1837380''>machine,</span> <span
  m=''1838060''>you</span> <span m=''1838350''>can</span> <span m=''1838510''>get</span>
  <span m=''1838650''>this</span> <span m=''1838770''>beautiful</span> <span m=''1839145''>table.</span>
  <span m=''1839520''>I will</span> <span m=''1840070''>go off</span> <span m=''1840790''>what</span>
  <span m=''1842010''>your</span> <span m=''1842230''>machines</span> <span m=''1842600''>have.</span>
  <span m=''1842860''>We</span> <span m=''1843120''>still</span> <span m=''1843280''>have</span>
  <span m=''1843500''>a</span> <span m=''1843560''>number</span> <span m=''1844170''>saying</span>
  <span m=''1844430''>this</span> <span m=''1844600''>is</span> <span m=''1844710''>your</span>
  <span m=''1844860''>miss</span> <span m=''1845020''>[UNINTELLIGIBLE],</span> <span
  m=''1845380''>this</span> <span m=''1845600''>is</span> <span m=''1845780''>the</span>
  <span m=''1845880''>thing--</span> <span m=''1846130''>I</span> <span m=''1846190''>mean,</span>
  <span m=''1846890''>so</span> <span m=''1847550''>some</span> <span m=''1847920''>of</span>
  <span m=''1848030''>these</span> <span m=''1848300''>things</span> <span m=''1848550''>you</span>
  <span m=''1848770''>realize</span> <span m=''1849640''>because</span> <span m=''1850010''>of
  all</span> <span m=''1850230''>of</span> <span m=''1850300''>the</span> <span m=''1850370''>complexity.</span>
  <span m=''1850780''>It''s</span> <span m=''1850920''>not</span> <span m=''1851100''>that</span>
  <span m=''1851310''>nice and</span> <span m=''1851520''>simple,</span> <span m=''1852470''>but</span>
  <span m=''1852890''>this,</span> <span m=''1853140''>I</span> <span m=''1853210''>just</span>
  <span m=''1853400''>pull out</span> <span m=''1853530''>of hat,</span> <span m=''1854030''>and
  it''s</span> <span m=''1854410''>kind</span> <span m=''1854580''>of</span> <span
  m=''1855240''>normal.</span> <span m=''1859860''>So</span> <span m=''1860080''>what</span>
  <span m=''1860230''>do</span> <span m=''1860380''>I</span> <span m=''1860450''>do,</span>
  <span m=''1860640''>now?</span> </p><p><span m=''1862110''>I</span> <span m=''1862250''>am</span>
  <span m=''1864140''>doing</span> <span m=''1864430''>the</span> <span m=''1864550''>mod,</span>
  <span m=''1864880''>but</span> <span m=''1865150''>I am</span> <span m=''1865360''>multiplying</span>
  <span m=''1866130''>[i]</span> <span m=''1866310''>by</span> <span m=''1866450''>16.</span>
  <span m=''1870150''>So</span> <span m=''1870480''>now,</span> <span m=''1871770''>I</span>
  <span m=''1871900''>am</span> <span m=''1872050''>accessing</span> <span m=''1872740''>this</span>
  <span m=''1873010''>value,</span> <span m=''1873360''>this</span> <span m=''1873580''>value,</span>
  <span m=''1873990''>this</span> <span m=''1874090''>value,</span> <span m=''1874450''>this</span>
  <span m=''1874710''>value</span> <span m=''1874950''>in here.</span> <span m=''1875550''>I''m
  accessing</span> <span m=''1875700''>this</span> <span m=''1875790''>value,</span>
  <span m=''1876140''>this</span> <span m=''1876260''>value,</span> <span m=''1876380''>this</span>
  <span m=''1876500''>value,</span> <span m=''1876940''>this</span> <span m=''1877100''>value.</span>
  <span m=''1877590''>One</span> <span m=''1879030''>value</span> <span m=''1879140''>in</span>
  <span m=''1879270''>each</span> <span m=''1879410''>cache</span> <span m=''1879680''>line.</span>
  <span m=''1882490''>OK?</span> <span m=''1883440''>How</span> <span m=''1883700''>much</span>
  <span m=''1883940''>cache</span> <span m=''1884250''>misses</span> <span m=''1884510''>do
  you</span> <span m=''1884650''>think</span> <span m=''1884810''>I''m</span> <span
  m=''1884920''>going</span> <span m=''1885060''>to</span> <span m=''1885100''>get?</span>
  </p><p><span m=''1889895''>AUDIENCE: [INAUDIBLE]</span> </p><p><span m=''1893300''>PROFESSOR:
  100</span> <span m=''1893870''>for</span> <span m=''1894090''>every</span> <span
  m=''1894540''>access</span> <span m=''1895880''>is</span> <span m=''1896300''>basically</span>
  <span m=''1896930''>beginning</span> <span m=''1897250''>a</span> <span m=''1897290''>cache</span>
  <span m=''1897640''>line,</span> <span m=''1898230''>you''re</span> <span m=''1898360''>taking</span>
  <span m=''1898630''>one</span> <span m=''1898920''>value</span> <span m=''1899450''>and</span>
  <span m=''1900890''>if</span> <span m=''1901030''>I</span> <span m=''1901090''>go</span>
  <span m=''1901310''>back</span> <span m=''1901580''>to</span> <span m=''1901980''>that</span>
  <span m=''1902190''>value,</span> <span m=''1902390''>I</span> <span m=''1902540''>have</span>
  <span m=''1902570''>already</span> <span m=''1903900''>filled</span> <span m=''1904350''>up</span>
  <span m=''1904470''>the</span> <span m=''1904540''>cache.</span> <span m=''1905230''>So</span>
  <span m=''1905390''>basically,</span> <span m=''1905780''>I have</span> <span m=''1906150''>first</span>
  <span m=''1906370''>access</span> <span m=''1908320''>in</span> <span m=''1908460''>the</span>
  <span m=''1908570''>cache.</span> <span m=''1909370''>And</span> <span m=''1910060''>what''s</span>
  <span m=''1910260''>your</span> <span m=''1910340''>total</span> <span m=''1910560''>access</span>
  <span m=''1910890''>time?</span> <span m=''1913700''>Anyone</span> <span m=''1914010''>will</span>
  <span m=''1914120''>take</span> <span m=''1914280''>a</span> <span m=''1914320''>guess?</span>
  </p><p><span m=''1914790''>AUDIENCE: [INAUDIBLE]</span> </p><p><span m=''1915996''>PROFESSOR:
  Yep,</span> <span m=''1916400''>100 times</span> <span m=''1916900''>x</span> <span
  m=''1917240''>because</span> <span m=''1917520''>I</span> <span m=''1917610''>have</span>
  <span m=''1917780''>no--</span> <span m=''1918650''>OK,</span> <span m=''1918880''>so</span>
  <span m=''1919060''>this</span> <span m=''1919230''>is</span> <span m=''1919330''>a</span>
  <span m=''1919380''>[UNINTELLIGIBLE]</span> <span m=''1920470''>locality.</span>
  <span m=''1921090''>That was</span> <span m=''1921350''>clear.</span> <span m=''1923150''>What</span>
  <span m=''1923340''>kind of</span> <span m=''1923650''>misses</span> <span m=''1923920''>am</span>
  <span m=''1924080''>I</span> <span m=''1924140''>getting</span> <span m=''1924390''>now?</span>
  </p><p><span m=''1925143''>AUDIENCE: [INAUDIBLE]</span> </p><p><span m=''1926130''>PROFESSOR:
  Now,</span> <span m=''1926555''>I''m getting</span> <span m=''1926980''>conflict</span>
  <span m=''1927240''>misses.</span> <span m=''1927390''>I</span> <span m=''1927450''>get</span>
  <span m=''1927610''>a cold</span> <span m=''1927680''>miss</span> <span m=''1928110''>at</span>
  <span m=''1928170''>the</span> <span m=''1928240''>beginning,</span> <span m=''1928570''>first</span>
  <span m=''1928750''>time</span> <span m=''1928940''>around,</span> <span m=''1929420''>and</span>
  <span m=''1929600''>then</span> <span m=''1929750''>every</span> <span m=''1929950''>time</span>
  <span m=''1930160''>I</span> <span m=''1930230''>do</span> <span m=''1930370''>something,</span>
  <span m=''1930690''>I''m</span> <span m=''1930770''>getting</span> <span m=''1931040''>conflict</span>
  <span m=''1931390''>miss</span> <span m=''1931620''>because</span> <span m=''1931890''>the</span>
  <span m=''1931960''>thing</span> <span m=''1932210''>is,</span> <span m=''1932350''>now,</span>
  <span m=''1933040''>this</span> <span m=''1933340''>N,</span> <span m=''1935620''>I
  am</span> <span m=''1935870''>only</span> <span m=''1936130''>accessing</span> <span
  m=''1936580''>small</span> <span m=''1936920''>amount</span> <span m=''1937160''>of</span>
  <span m=''1937280''>data.</span> <span m=''1938340''>It</span> <span m=''1938840''>doesn''t</span>
  <span m=''1939110''>fit in</span> <span m=''1939380''>the</span> <span m=''1939480''>cache,</span>
  <span m=''1940080''>but</span> <span m=''1940390''>I''m</span> <span m=''1940580''>not
  still</span> <span m=''1940880''>getting</span> <span m=''1942840''>any</span> <span
  m=''1943090''>kind</span> <span m=''1943350''>of</span> <span m=''1944500''>sharing,</span>
  <span m=''1944845''>so I''m</span> <span m=''1945190''>having</span> <span m=''1945495''>conflict</span>
  <span m=''1945800''>misses.</span> </p><p><span m=''1950910''>[UNINTELLIGIBLE]</span>
  <span m=''1951050''>second</span> <span m=''1951440''>time,</span> <span m=''1951660''>I</span>
  <span m=''1951710''>guess</span> <span m=''1951980''>I</span> <span m=''1952080''>will</span>
  <span m=''1952540''>probably</span> <span m=''1952800''>jump</span> <span m=''1953160''>over</span>
  <span m=''1953320''>this.</span> <span m=''1953500''>I</span> <span m=''1953590''>just</span>
  <span m=''1953770''>did</span> <span m=''1953910''>OK,</span> <span m=''1954090''>if</span>
  <span m=''1954210''>I</span> <span m=''1954270''>go</span> <span m=''1954440''>random</span>
  <span m=''1954730''>access,</span> <span m=''1955140''>what</span> <span m=''1955310''>happens?</span>
  <span m=''1955980''>So</span> <span m=''1956120''>let</span> <span m=''1956270''>me</span>
  <span m=''1956430''>jump</span> <span m=''1956650''>over</span> <span m=''1956830''>that.</span>
  <span m=''1957120''>Actually</span> <span m=''1957290''>can</span> <span m=''1957460''>do</span>
  <span m=''1957560''>a</span> <span m=''1957630''>calculation</span> <span m=''1957945''>to</span>
  <span m=''1958260''>figure</span> <span m=''1958540''>out</span> <span m=''1958720''>how</span>
  <span m=''1958860''>many,</span> <span m=''1959600''>probabilistically,</span> <span
  m=''1960260''>how</span> <span m=''1960590''>much you</span> <span m=''1960680''>might</span>
  <span m=''1960890''>have</span> <span m=''1961230''>and stuff</span> <span m=''1961545''>like
  that.</span> <span m=''1961860''>OK.</span> </p><p><span m=''1963990''>So</span>
  <span m=''1965340''>now,</span> <span m=''1965520''>if</span> <span m=''1965700''>you</span>
  <span m=''1965850''>look</span> <span m=''1966040''>at</span> <span m=''1966190''>what''s</span>
  <span m=''1966390''>going</span> <span m=''1966670''>on,</span> <span m=''1968280''>when
  you</span> <span m=''1968480''>have</span> <span m=''1968570''>no</span> <span m=''1968790''>locality,</span>
  <span m=''1970400''>you''d have no</span> <span m=''1970840''>locality.</span> <span
  m=''1971280''>That''s</span> <span m=''1971470''>a</span> <span m=''1971530''>pretty</span>
  <span m=''1971820''>obvious</span> <span m=''1972170''>statement.</span> <span m=''1973410''>And</span>
  <span m=''1973990''>then</span> <span m=''1974140''>if</span> <span m=''1974340''>you</span>
  <span m=''1974550''>have</span> <span m=''1974770''>spatial</span> <span m=''1975510''>locality</span>
  <span m=''1976450''>and</span> <span m=''1976680''>no</span> <span m=''1976880''>temporal</span>
  <span m=''1977470''>locality,</span> <span m=''1977890''>we</span> <span m=''1977910''>are</span>
  <span m=''1978250''>streaming</span> <span m=''1978750''>data.</span> <span m=''1979560''>That</span>
  <span m=''1979760''>means</span> <span m=''1979960''>you are</span> <span m=''1980170''>going</span>
  <span m=''1980480''>through</span> <span m=''1980670''>the</span> <span m=''1980710''>data,</span>
  <span m=''1981840''>but</span> <span m=''1982060''>you''re</span> <span m=''1982150''>not</span>
  <span m=''1982380''>getting</span> <span m=''1982650''>back</span> <span m=''1982990''>to
  it</span> <span m=''1983270''>fast</span> <span m=''1983740''>enough,</span> <span
  m=''1984360''>so</span> <span m=''1984730''>I</span> <span m=''1984910''>have</span>
  <span m=''1985090''>temporal</span> <span m=''1985530''>locality.</span> <span m=''1985810''>So
  I</span> <span m=''1986080''>stream</span> <span m=''1986320''>through</span> <span
  m=''1986480''>data,</span> <span m=''1986730''>so</span> <span m=''1986860''>that</span>
  <span m=''1987040''>means</span> <span m=''1987190''>I</span> <span m=''1988000''>go</span>
  <span m=''1988160''>through</span> <span m=''1988320''>data</span> <span m=''1989060''>in
  a</span> <span m=''1989480''>streaming</span> <span m=''1989860''>fashion.</span>
  <span m=''1991170''>OK?</span> </p><p><span m=''1996820''>So</span> <span m=''1996960''>what</span>
  <span m=''1997200''>we</span> <span m=''1997280''>have</span> <span m=''1997650''>is</span>
  <span m=''1997810''>if</span> <span m=''1998080''>working</span> <span m=''1998570''>set</span>
  <span m=''2000140''>fits</span> <span m=''2000280''>in</span> <span m=''2000620''>cache,</span>
  <span m=''2000880''>you</span> <span m=''2001140''>have</span> <span m=''2001530''>InCache</span>
  <span m=''2001995''>mode.</span> <span m=''2002640''>If</span> <span m=''2002860''>working</span>
  <span m=''2003290''>set</span> <span m=''2004210''>is</span> <span m=''2004420''>too</span>
  <span m=''2004580''>big</span> <span m=''2004740''>for</span> <span m=''2005010''>cache,</span>
  <span m=''2005280''>you</span> <span m=''2005450''>can</span> <span m=''2005620''>get</span>
  <span m=''2005760''>some</span> <span m=''2005920''>streaming</span> <span m=''2006420''>mode</span>
  <span m=''2006570''>and</span> <span m=''2006720''>still</span> <span m=''2006970''>get</span>
  <span m=''2007120''>some</span> <span m=''2007270''>locality</span> <span m=''2008130''>because</span>
  <span m=''2008330''>we</span> <span m=''2008450''>are</span> <span m=''2008550''>bringing</span>
  <span m=''2008780''>the</span> <span m=''2008860''>lines</span> <span m=''2009160''>in</span>
  <span m=''2009300''>here.</span> <span m=''2010060''>And</span> <span m=''2010830''>you</span>
  <span m=''2010960''>can</span> <span m=''2011140''>do</span> <span m=''2011240''>other</span>
  <span m=''2011510''>things</span> <span m=''2011830''>like</span> <span m=''2014040''>optimizers</span>
  <span m=''2014730''>like</span> <span m=''2014800''>prefetching</span> <span m=''2015180''>we''ll</span>
  <span m=''2015440''>get</span> <span m=''2015720''>to.</span> <span m=''2017230''>And</span>
  <span m=''2018490''>other</span> <span m=''2018780''>issues</span> <span m=''2019080''>[UNINTELLIGIBLE]</span>
  <span m=''2020060''>this</span> <span m=''2020510''>last</span> <span m=''2020860''>one,</span>
  <span m=''2021340''>but</span> <span m=''2022610''>to</span> <span m=''2022680''>deal</span>
  <span m=''2022790''>with</span> <span m=''2023260''>cache</span> <span m=''2023550''>axises.</span>
  </p><p><span m=''2026130''>So</span> <span m=''2027920''>if</span> <span m=''2028080''>you</span>
  <span m=''2028270''>have</span> <span m=''2028460''>more</span> <span m=''2028710''>than</span>
  <span m=''2029010''>one</span> <span m=''2029260''>axis--</span> <span m=''2029670''>so</span>
  <span m=''2029770''>here</span> <span m=''2030200''>what I</span> <span m=''2030360''>have</span>
  <span m=''2030550''>is</span> <span m=''2030820''>too</span> <span m=''2031060''>nice</span>
  <span m=''2031350''>arrays.</span> <span m=''2033040''>[UNINTELLIGIBLE]</span> <span
  m=''2033440''>is</span> <span m=''2033630''>2</span> <span m=''2033890''>to</span>
  <span m=''2034220''>the</span> <span m=''2034920''>power</span> <span m=''2035630''>size</span>
  <span m=''2036200''>array</span> <span m=''2036640''>2 to</span> <span m=''2036990''>the</span>
  <span m=''2037340''>19</span> <span m=''2037860''>power</span> <span m=''2038240''>arrays.</span>
  <span m=''2039430''>OK,</span> <span m=''2039630''>so</span> <span m=''2039940''>now</span>
  <span m=''2040080''>what</span> <span m=''2040260''>happens</span> <span m=''2040730''>when</span>
  <span m=''2040890''>I</span> <span m=''2040940''>put</span> <span m=''2041170''>this</span>
  <span m=''2041330''>in</span> <span m=''2041420''>the</span> <span m=''2041550''>cache?</span>
  </p><p><span m=''2042940''>Look</span> <span m=''2043120''>what</span> <span m=''2043290''>happens</span>
  <span m=''2043620''>in</span> <span m=''2043730''>here.</span> <span m=''2044370''>So</span>
  <span m=''2044560''>what</span> <span m=''2044770''>happens</span> <span m=''2045200''>is</span>
  <span m=''2045380''>this</span> <span m=''2045610''>array</span> <span m=''2048090''>get</span>
  <span m=''2048460''>mapped</span> <span m=''2048800''>in</span> <span m=''2049310''>this</span>
  <span m=''2049590''>one.</span> <span m=''2050080''>This</span> <span m=''2050460''>array</span>
  <span m=''2051469''>get</span> <span m=''2051850''>maps</span> <span m=''2052760''>this</span>
  <span m=''2053190''>nicely</span> <span m=''2053520''>in</span> <span m=''2053719''>here.</span>
  <span m=''2053969''>So</span> <span m=''2054110''>what</span> <span m=''2054290''>happens</span>
  <span m=''2054620''>is</span> <span m=''2054800''>this</span> <span m=''2055070''>line</span>
  <span m=''2056350''>can</span> <span m=''2056580''>only</span> <span m=''2056830''>be</span>
  <span m=''2056940''>in</span> <span m=''2057040''>this</span> <span m=''2057260''>cache</span>
  <span m=''2057580''>line,</span> <span m=''2058230''>and</span> <span m=''2058480''>this</span>
  <span m=''2058739''>line</span> <span m=''2059219''>also</span> <span m=''2059639''>only</span>
  <span m=''2060280''>can</span> <span m=''2060480''>be</span> <span m=''2060679''>in</span>
  <span m=''2060820''>this</span> <span m=''2060969''>line</span> <span m=''2061730''>of</span>
  <span m=''2061790''>the</span> <span m=''2061850''>cache.</span> <span m=''2064310''>Do
  you</span> <span m=''2064469''>see</span> <span m=''2064630''>what''s</span> <span
  m=''2064810''>going</span> <span m=''2065020''>on,</span> <span m=''2065239''>now?</span>
  </p><p><span m=''2065969''>So</span> <span m=''2066820''>if</span> <span m=''2067000''>you</span>
  <span m=''2067230''>do</span> <span m=''2067550''>this</span> <span m=''2067790''>one,</span>
  <span m=''2069330''>basically</span> <span m=''2069980''>every</span> <span m=''2070310''>time</span>
  <span m=''2070620''>you</span> <span m=''2070739''>access</span> <span m=''2071159''>something--</span>
  <span m=''2072194''>See,</span> <span m=''2072679''>assume</span> <span m=''2073179''>I''m</span>
  <span m=''2073300''>accessing</span> <span m=''2074050''>this</span> <span m=''2074179''>data</span>
  <span m=''2074389''>item,</span> <span m=''2074760''>so</span> <span m=''2074960''>I''m
  doing</span> <span m=''2075179''>A, B.</span> <span m=''2076130''>I</span> <span
  m=''2076260''>access</span> <span m=''2076639''>A,</span> <span m=''2077210''>I</span>
  <span m=''2077300''>get</span> <span m=''2077510''>this</span> <span m=''2077690''>line.</span>
  <span m=''2078370''>I</span> <span m=''2078489''>access</span> <span m=''2078850''>B,</span>
  <span m=''2079230''>what</span> <span m=''2079380''>happens?</span> </p><p><span
  m=''2080317''>AUDIENCE: [INAUDIBLE]</span> </p><p><span m=''2081510''>PROFESSOR:
  So</span> <span m=''2081750''>this</span> <span m=''2081960''>[UNINTELLIGIBLE]</span>
  <span m=''2082170''>is gone.</span> <span m=''2082550''>It is</span> <span m=''2082770''>gone.</span>
  <span m=''2082920''>Now,</span> <span m=''2083080''>I am</span> <span m=''2083310''>accessing</span>
  <span m=''2083730''>the</span> <span m=''2083850''>next</span> <span m=''2084090''>one</span>
  <span m=''2084250''>in</span> <span m=''2084389''>that</span> <span m=''2084600''>cache
  line</span> <span m=''2084994''>we made.</span> </p><p><span m=''2087829''>AUDIENCE:
  How do you</span> <span m=''2088317''>know</span> <span m=''2088805''>what</span>
  <span m=''2089293''>cache line--</span> <span m=''2089781''>or</span> <span m=''2090269''>how</span>
  <span m=''2090757''>[INAUDIBLE]</span> <span m=''2091733''>cache?</span> <span m=''2092709''>[INAUDIBLE]</span>
  </p><p><span m=''2093699''>PROFESSOR: Normally,</span> <span m=''2094100''>in</span>
  <span m=''2094310''>language</span> <span m=''2094710''>like</span> <span m=''2095060''>C,</span>
  <span m=''2095550''>if people</span> <span m=''2096080''>two</span> <span m=''2097200''>arrays</span>
  <span m=''2097430''>next</span> <span m=''2097670''>to</span> <span m=''2097740''>each</span>
  <span m=''2097950''>other,</span> <span m=''2098750''>they</span> <span m=''2098890''>should</span>
  <span m=''2099100''>be</span> <span m=''2099310''>mapped</span> <span m=''2099710''>next</span>
  <span m=''2099990''>to</span> <span m=''2100080''>each</span> <span m=''2100310''>other</span>
  <span m=''2100460''>in</span> <span m=''2100690''>memory.</span> <span m=''2101830''>And</span>
  <span m=''2102180''>if</span> <span m=''2102290''>you</span> <span m=''2102430''>want</span>
  <span m=''2102620''>to</span> <span m=''2102680''>be</span> <span m=''2102830''>more</span>
  <span m=''2103180''>adventurous,</span> <span m=''2103690''>you</span> <span m=''2103840''>can</span>
  <span m=''2103990''>go</span> <span m=''2104120''>to</span> <span m=''2104180''>the</span>
  <span m=''2104290''>assembly</span> <span m=''2105100''>and</span> <span m=''2105420''>then</span>
  <span m=''2105640''>see</span> <span m=''2106080''>what</span> <span m=''2106370''>their</span>
  <span m=''2106510''>locations</span> <span m=''2106895''>is.</span> <span m=''2108070''>So</span>
  <span m=''2108230''>if</span> <span m=''2108370''>you</span> <span m=''2108490''>put</span>
  <span m=''2108670''>A,</span> <span m=''2109050''>A</span> <span m=''2109430''>next</span>
  <span m=''2109640''>to</span> <span m=''2109700''>each</span> <span m=''2109830''>other,</span>
  <span m=''2109950''>you</span> <span m=''2110030''>normally</span> <span m=''2110430''>kind</span>
  <span m=''2110650''>of</span> <span m=''2110730''>get it</span> <span m=''2110970''>next
  to</span> <span m=''2111310''>each</span> <span m=''2111390''>other.</span> </p><p><span
  m=''2113000''>So</span> <span m=''2113160''>what</span> <span m=''2113530''>this</span>
  <span m=''2113750''>one</span> <span m=''2113980''>is</span> <span m=''2114130''>this</span>
  <span m=''2114290''>is</span> <span m=''2114400''>pretty</span> <span m=''2114630''>bad.</span>
  <span m=''2115540''>I</span> <span m=''2115670''>should</span> <span m=''2115870''>have</span>
  <span m=''2116030''>gotten</span> <span m=''2116380''>at</span> <span m=''2116580''>least</span>
  <span m=''2116790''>some</span> <span m=''2118690''>spatial</span> <span m=''2119090''>locality.</span>
  <span m=''2119450''>I''m</span> <span m=''2119580''>getting</span> <span m=''2119840''>nothing.</span>
  <span m=''2120585''>Do</span> <span m=''2120930''>you</span> <span m=''2121040''>see</span>
  <span m=''2121190''>what''s</span> <span m=''2121480''>going</span> <span m=''2121690''>on</span>
  <span m=''2121830''>here?</span> </p><p><span m=''2126140''>Do you</span> <span
  m=''2126600''>know</span> <span m=''2127070''>what''s</span> <span m=''2127250''>going</span>
  <span m=''2127430''>on</span> <span m=''2127550''>here?</span> <span m=''2128035''>Know</span>
  <span m=''2128520''>why</span> <span m=''2129070''>I''m</span> <span m=''2129250''>not</span>
  <span m=''2129400''>getting</span> <span m=''2129600''>any</span> <span m=''2129720''>spatial</span>
  <span m=''2130040''>locality?</span> <span m=''2130770''>Because</span> <span m=''2131200''>I</span>
  <span m=''2131270''>am</span> <span m=''2131480''>bouncing.</span> </p><p><span
  m=''2131940''>When</span> <span m=''2132020''>I</span> <span m=''2132110''>access</span>
  <span m=''2132440''>this</span> <span m=''2132630''>one,</span> <span m=''2133090''>this</span>
  <span m=''2133240''>one</span> <span m=''2133390''>is</span> <span m=''2133490''>gone</span>
  <span m=''2133810''>even</span> <span m=''2134080''>though</span> <span m=''2134150''>I</span>
  <span m=''2134230''>have</span> <span m=''2134410''>more</span> <span m=''2134580''>data</span>
  <span m=''2134790''>in the</span> <span m=''2135040''>same</span> <span m=''2135270''>cache</span>
  <span m=''2135540''>line,</span> <span m=''2135790''>so</span> <span m=''2136020''>I''m</span>
  <span m=''2136220''>kind</span> <span m=''2136420''>of</span> <span m=''2136480''>bouncing</span>
  <span m=''2136960''>two</span> <span m=''2137130''>cache</span> <span m=''2137410''>lines</span>
  <span m=''2137630''>because</span> <span m=''2137890''>of that.</span> <span m=''2138390''>What''s</span>
  <span m=''2138610''>a</span> <span m=''2138660''>good</span> <span m=''2138810''>solution</span>
  <span m=''2139260''>for</span> <span m=''2139370''>this?</span> <span m=''2140600''>Back</span>
  <span m=''2141075''>there.</span> </p><p><span m=''2141550''>AUDIENCE: [INAUDIBLE]</span>
  <span m=''2142500''>A</span> <span m=''2142975''>and B</span> <span m=''2143450''>could
  be</span> <span m=''2143925''>mapped</span> <span m=''2144400''>to the same</span>
  <span m=''2144875''>cache line.</span> </p><p><span m=''2147120''>PROFESSOR: The</span>
  <span m=''2147250''>thing</span> <span m=''2147720''>A</span> <span m=''2148065''>is</span>
  <span m=''2148410''>a</span> <span m=''2148490''>nice</span> <span m=''2148850''>2
  to</span> <span m=''2149000''>the power.</span> <span m=''2149330''>A</span> <span
  m=''2150230''>size is</span> <span m=''2150710''>a</span> <span m=''2150780''>multiple</span>
  <span m=''2151510''>of</span> <span m=''2151810''>the</span> <span m=''2151930''>cache</span>
  <span m=''2152180''>size.</span> </p><p><span m=''2154422''>AUDIENCE: [INAUDIBLE]</span>
  </p><p><span m=''2154860''>PROFESSOR: The</span> <span m=''2155180''>size</span>
  <span m=''2155455''>of</span> <span m=''2155730''>A</span> <span m=''2156570''>is</span>
  <span m=''2156700''>a</span> <span m=''2156930''>multiple</span> <span m=''2157320''>of
  the</span> <span m=''2157775''>cache</span> <span m=''2158230''>size.</span> <span
  m=''2159140''>So</span> <span m=''2159500''>what</span> <span m=''2159730''>happens</span>
  <span m=''2160060''>is</span> <span m=''2160250''>if</span> <span m=''2160360''>you</span>
  <span m=''2160440''>have</span> <span m=''2160590''>memory</span> <span m=''2161040''>in
  here,</span> <span m=''2163980''>you</span> <span m=''2164150''>map</span> <span
  m=''2164480''>something</span> <span m=''2164870''>like</span> <span m=''2165150''>A,</span>
  <span m=''2165830''>C</span> <span m=''2166170''>here.</span> <span m=''2166775''>If</span>
  <span m=''2167080''>this</span> <span m=''2167370''>is</span> <span m=''2167710''>a</span>
  <span m=''2167770''>multiple</span> <span m=''2168320''>of</span> <span m=''2168460''>cache</span>
  <span m=''2168770''>line,</span> <span m=''2169000''>so</span> <span m=''2169590''>assume</span>
  <span m=''2170000''>this</span> <span m=''2170090''>is</span> <span m=''2172240''>32K</span>
  <span m=''2173960''>times</span> <span m=''2174340''>some</span> <span m=''2175180''>number,</span>
  <span m=''2176070''>and</span> <span m=''2176190''>you</span> <span m=''2176310''>map</span>
  <span m=''2176690''>B</span> <span m=''2176930''>here,</span> <span m=''2177580''>and</span>
  <span m=''2177820''>then</span> <span m=''2178090''>this</span> <span m=''2178260''>is</span>
  <span m=''2178450''>normally</span> <span m=''2178890''>what</span> <span m=''2179060''>happens</span>
  <span m=''2179360''>in</span> <span m=''2179470''>C.</span> <span m=''2179730''>You</span>
  <span m=''2179860''>put</span> <span m=''2180290''>all</span> <span m=''2180640''>adjacent</span>
  <span m=''2181580''>map</span> <span m=''2182590''>allocations</span> <span m=''2183140''>next</span>
  <span m=''2183500''>to each other</span> <span m=''2183830''>in memory.</span> <span
  m=''2185150''>Do</span> <span m=''2185350''>you</span> <span m=''2185460''>got</span>
  <span m=''2185720''>A</span> <span m=''2185890''>here,</span> <span m=''2186560''>and</span>
  <span m=''2186680''>you</span> <span m=''2186780''>start</span> <span m=''2187050''>having</span>
  <span m=''2187300''>B</span> <span m=''2187640''>in here,</span> <span m=''2188020''>next</span>
  <span m=''2188380''>to it.</span> </p><p><span m=''2190130''>OK,</span> <span m=''2190570''>so</span>
  <span m=''2190740''>what</span> <span m=''2191090''>happens</span> <span m=''2191530''>is</span>
  <span m=''2191750''>now</span> <span m=''2192500''>if</span> <span m=''2192710''>A</span>
  <span m=''2193010''>starts</span> <span m=''2193360''>to</span> <span m=''2193410''>assume</span>
  <span m=''2193770''>address,</span> <span m=''2194840''>we''ll</span> <span m=''2195190''>say</span>
  <span m=''2198436''>100,</span> <span m=''2200020''>this</span> <span m=''2200290''>is</span>
  <span m=''2200590''>100</span> <span m=''2201650''>plus</span> <span m=''2203240''>32K</span>
  <span m=''2204870''>times</span> <span m=''2205180''>N,</span> <span m=''2205360''>basically.</span>
  <span m=''2207710''>And</span> <span m=''2207850''>you</span> <span m=''2207950''>do</span>
  <span m=''2209160''>this</span> <span m=''2209330''>mod</span> <span m=''2209740''>32K,</span>
  <span m=''2213420''>this</span> <span m=''2213660''>mod</span> <span m=''2213870''>32K,</span>
  <span m=''2214530''>this</span> <span m=''2214660''>same</span> <span m=''2214940''>number.</span>
  <span m=''2215680''>It</span> <span m=''2215820''>maps</span> <span m=''2216080''>into</span>
  <span m=''2216200''>the</span> <span m=''2216280''>same</span> <span m=''2216560''>line.</span>
  <span m=''2218280''>OK,</span> <span m=''2218760''>so</span> <span m=''2220230''>I</span>
  <span m=''2220660''>kind</span> <span m=''2220880''>of</span> <span m=''2220970''>gave</span>
  <span m=''2221190''>you</span> <span m=''2221280''>the</span> <span m=''2221380''>problem.</span>
  <span m=''2221740''>What</span> <span m=''2221920''>can</span> <span m=''2222210''>be</span>
  <span m=''2222260''>the</span> <span m=''2222320''>solution?</span> </p><p><span
  m=''2223752''>AUDIENCE: [INAUDIBLE]</span> <span m=''2225135''>allocate</span> <span
  m=''2225596''>one</span> <span m=''2226057''>line.</span> </p><p><span m=''2226980''>PROFESSOR:
  Yes,</span> <span m=''2227350''>it''s</span> <span m=''2227720''>called</span> <span
  m=''2227950''>padding.</span> <span m=''2232530''>OK,</span> <span m=''2232830''>so</span>
  <span m=''2233130''>I</span> <span m=''2233270''>have</span> <span m=''2233500''>no</span>
  <span m=''2233550''>locality</span> <span m=''2233940''>in</span> <span m=''2234110''>here,</span>
  <span m=''2234480''>let me go</span> <span m=''2234820''>to the next</span> <span
  m=''2234950''>slide,</span> <span m=''2235090''>what</span> <span m=''2235280''>kind</span>
  <span m=''2235490''>of</span> <span m=''2235570''>misses?</span> <span m=''2235920''>I
  have</span> <span m=''2236110''>cold and</span> <span m=''2236590''>conflict.</span>
  <span m=''2237500''>What</span> <span m=''2237730''>I</span> <span m=''2237830''>can</span>
  <span m=''2238090''>do</span> <span m=''2238260''>is</span> <span m=''2238480''>just</span>
  <span m=''2238640''>basically</span> <span m=''2239070''>add</span> <span m=''2239390''>a</span>
  <span m=''2239710''>little</span> <span m=''2239900''>bit</span> <span m=''2240100''>of</span>
  <span m=''2240210''>padding.</span> <span m=''2241180''>I</span> <span m=''2241440''>did</span>
  <span m=''2241600''>16</span> <span m=''2242020''>here.</span> </p><p><span m=''2242320''>Normally,</span>
  <span m=''2242510''>you</span> <span m=''2242670''>do</span> <span m=''2243550''>a</span>
  <span m=''2244440''>prime</span> <span m=''2244770''>number</span> <span m=''2245150''>so</span>
  <span m=''2245270''>it</span> <span m=''2245380''>will</span> <span m=''2245550''>not</span>
  <span m=''2246100''>clash</span> <span m=''2246400''>with</span> <span m=''2246540''>anything.</span>
  <span m=''2246910''>Add</span> <span m=''2247070''>a</span> <span m=''2247250''>little</span>
  <span m=''2247520''>bit</span> <span m=''2247710''>of</span> <span m=''2248270''>padding</span>
  <span m=''2248710''>at</span> <span m=''2248850''>the</span> <span m=''2249000''>end</span>
  <span m=''2249160''>of array,</span> <span m=''2250480''>and</span> <span m=''2251120''>that</span>
  <span m=''2251350''>means</span> <span m=''2251770''>the</span> <span m=''2251880''>next</span>
  <span m=''2252080''>array</span> <span m=''2252520''>will</span> <span m=''2252640''>not</span>
  <span m=''2252950''>be</span> <span m=''2253230''>conflicted</span> <span m=''2253570''>most</span>
  <span m=''2253740''>of</span> <span m=''2253810''>the</span> <span m=''2253880''>time.</span>
  <span m=''2255310''>So</span> <span m=''2255490''>a</span> <span m=''2255530''>lot</span>
  <span m=''2255700''>of</span> <span m=''2255760''>times</span> <span m=''2255990''>when</span>
  <span m=''2256090''>you</span> <span m=''2256170''>declare</span> <span m=''2257070''>things</span>
  <span m=''2257320''>next</span> <span m=''2257480''>to</span> <span m=''2257540''>each</span>
  <span m=''2257710''>other,</span> <span m=''2257920''>it''s</span> <span m=''2258220''>always</span>
  <span m=''2258750''>good</span> <span m=''2258880''>to</span> <span m=''2259050''>add</span>
  <span m=''2259230''>a</span> <span m=''2259250''>little</span> <span m=''2259440''>bit</span>
  <span m=''2259570''>of</span> <span m=''2259630''>a</span> <span m=''2259690''>padding</span>
  <span m=''2260070''>in</span> <span m=''2260160''>between.</span> </p><p><span m=''2261450''>Normally,</span>
  <span m=''2263730''>a</span> <span m=''2264020''>smaller</span> <span m=''2264320''>prime</span>
  <span m=''2264590''>number</span> <span m=''2265140''>would</span> <span m=''2265390''>be</span>
  <span m=''2265490''>a</span> <span m=''2265530''>good</span> <span m=''2265750''>thing</span>
  <span m=''2266010''>to add a</span> <span m=''2266280''>padding.</span> <span m=''2270620''>Now,</span>
  <span m=''2270900''>I</span> <span m=''2271030''>start</span> <span m=''2271310''>getting</span>
  <span m=''2271600''>back</span> <span m=''2271930''>my</span> <span m=''2272110''>nice</span>
  <span m=''2272370''>locality</span> <span m=''2273240''>because</span> <span m=''2273520''>the</span>
  <span m=''2274010''>two</span> <span m=''2274180''>things</span> <span m=''2274550''>are</span>
  <span m=''2274810''>mapping</span> <span m=''2275070''>the</span> <span m=''2275390''>two</span>
  <span m=''2275590''>cache</span> <span m=''2275850''>lines.</span> <span m=''2277460''>What</span>
  <span m=''2277640''>type</span> <span m=''2277780''>of</span> <span m=''2277920''>locality</span>
  <span m=''2278130''>do</span> <span m=''2278330''>I</span> <span m=''2278400''>get</span>
  <span m=''2278600''>here?</span> <span m=''2285960''>Anybody</span> <span m=''2286140''>want</span>
  <span m=''2286260''>to</span> <span m=''2286500''>take</span> <span m=''2286660''>any</span>
  <span m=''2286830''>guess</span> <span m=''2287080''>what</span> <span m=''2287220''>type</span>
  <span m=''2287360''>of</span> <span m=''2287470''>locality</span> <span m=''2287800''>I</span>
  <span m=''2287960''>have</span> <span m=''2288160''>here?</span> </p><p><span m=''2291816''>AUDIENCE:
  Question,</span> <span m=''2292284''>sorry.</span> <span m=''2293220''>[INAUDIBLE]</span>
  <span m=''2294954''>you actually</span> <span m=''2295451''>added just</span> <span
  m=''2295948''>an extra</span> <span m=''2296445''>16.</span> </p><p><span m=''2296942''>PROFESSOR:
  Yes.</span> </p><p><span m=''2297439''>AUDIENCE: Why</span> <span m=''2297936''>would</span>
  <span m=''2298433''>that just</span> <span m=''2298930''>make</span> <span m=''2299427''>the</span>
  <span m=''2299924''>A and B</span> <span m=''2300421''>[INAUDIBLE]?</span> </p><p><span
  m=''2301420''>PROFESSOR: Because</span> <span m=''2301805''>what</span> <span m=''2302190''>happens</span>
  <span m=''2302630''>is</span> <span m=''2302800''>normally</span> <span m=''2303890''>it</span>
  <span m=''2304300''>doesn''t</span> <span m=''2304640''>make</span> <span m=''2304850''>A
  and</span> <span m=''2305240''>B into</span> <span m=''2305500''>leaving</span>
  <span m=''2305780''>the</span> <span m=''2305880''>cache,</span> <span m=''2306600''>but</span>
  <span m=''2306960''>it</span> <span m=''2307100''>makes</span> <span m=''2307430''>A[0]</span>
  <span m=''2309830''>not</span> <span m=''2310290''>exactly</span> <span m=''2310750''>matching</span>
  <span m=''2311080''>to</span> <span m=''2311150''>B[0].</span> <span m=''2313800''>A[0]</span>
  <span m=''2315200''>will</span> <span m=''2315650''>interleave</span> <span m=''2316530''>with</span>
  <span m=''2316640''>something</span> <span m=''2317010''>like</span> <span m=''2317240''>B[16]</span>
  <span m=''2319670''>or</span> <span m=''2319770''>something.</span> <span m=''2320670''>This</span>
  <span m=''2320990''>thing</span> <span m=''2321170''>might</span> <span m=''2321570''>map</span>
  <span m=''2321800''>into</span> <span m=''2321870''>the</span> <span m=''2321970''>same</span>
  <span m=''2322240''>place.</span> </p><p><span m=''2323232''>AUDIENCE: I mean,</span>
  <span m=''2323704''>but</span> <span m=''2324176''>I</span> <span m=''2324648''>[INAUDIBLE].</span>
  </p><p><span m=''2327480''>PROFESSOR: Yes,</span> <span m=''2328090''>normally</span>
  <span m=''2328230''>in</span> <span m=''2328570''>a</span> <span m=''2328680''>computation,</span>
  <span m=''2329220''>people</span> <span m=''2329410''>do</span> <span m=''2329610''>that,</span>
  <span m=''2329730''>A[i]</span> <span m=''2330120''>equals</span> <span m=''2330350''>B[i]</span>
  <span m=''2330670''>plus</span> <span m=''2330880''>something.</span> </p><p><span
  m=''2332246''>AUDIENCE: Oh, OK,</span> <span m=''2332739''>so</span> <span m=''2333232''>[INAUDIBLE].</span>
  <span m=''2337669''>Like I understand</span> <span m=''2338162''>what you''re saying,</span>
  <span m=''2338655''>but I don''t</span> <span m=''2339148''>understand how that</span>
  <span m=''2339641''>[INAUDIBLE]</span> <span m=''2340627''>because</span> <span
  m=''2341120''>they''re both</span> <span m=''2341613''>accessing</span> <span m=''2342106''>[i]</span>
  <span m=''2342599''>at the</span> <span m=''2343092''>same time.</span> <span m=''2343585''>Why
  would they</span> <span m=''2344078''>[INAUDIBLE]?</span> </p><p><span m=''2349980''>PROFESSOR:
  So</span> <span m=''2350150''>here''s</span> <span m=''2350530''>the</span> <span
  m=''2350600''>problem.</span> <span m=''2353290''>Assume</span> <span m=''2353600''>I</span>
  <span m=''2353740''>have</span> <span m=''2354030''>[UNINTELLIGIBLE]</span> <span
  m=''2354840''>32K.</span> <span m=''2356710''>I''m</span> <span m=''2356930''>assuming</span>
  <span m=''2357110''>[UNINTELLIGIBLE].</span> <span m=''2358180''>OK,</span> <span
  m=''2358620''>so</span> <span m=''2358780''>first</span> <span m=''2359100''>one</span>
  <span m=''2359340''>is,</span> <span m=''2359470''>we''ll</span> <span m=''2359700''>say,</span>
  <span m=''2360410''>you</span> <span m=''2360520''>start</span> <span m=''2360810''>with</span>
  <span m=''2360890''>100,</span> <span m=''2365120''>100</span> <span m=''2365600''>plus</span>
  <span m=''2365880''>[i],</span> <span m=''2368110''>and the</span> <span m=''2368410''>other</span>
  <span m=''2368680''>one</span> <span m=''2368790''>is</span> <span m=''2370090''>100</span>
  <span m=''2371120''>plus</span> <span m=''2371480''>32K</span> <span m=''2373710''>plus</span>
  <span m=''2373910''>[i].</span> </p><p><span m=''2376400''>OK,</span> <span m=''2377590''>then</span>
  <span m=''2377790''>you</span> <span m=''2378170''>take</span> <span m=''2378360''>a</span>
  <span m=''2378420''>mod</span> <span m=''2380570''>32K,</span> <span m=''2385340''>and</span>
  <span m=''2385610''>this</span> <span m=''2385840''>end</span> <span m=''2386050''>up</span>
  <span m=''2386250''>being</span> <span m=''2387480''>100</span> <span m=''2387720''>plus</span>
  <span m=''2388010''>[i]</span> <span m=''2390740''>with</span> <span m=''2391010''>another</span>
  <span m=''2391150''>100</span> <span m=''2391730''>plus</span> <span m=''2391810''>[i].</span>
  <span m=''2393110''>So</span> <span m=''2393390''>this</span> <span m=''2393580''>is</span>
  <span m=''2393770''>basically</span> <span m=''2394380''>[UNINTELLIGIBLE].</span>
  <span m=''2395760''>You still</span> <span m=''2395980''>have</span> <span m=''2396270''>one</span>
  <span m=''2396680''>or</span> <span m=''2396850''>one</span> <span m=''2397520''>element</span>
  <span m=''2397780''>in</span> <span m=''2398120''>the</span> <span m=''2398230''>cache</span>
  <span m=''2398570''>it''s</span> <span m=''2398710''>all</span> <span m=''2398950''>going
  to</span> <span m=''2399030''>map</span> <span m=''2399430''>into.</span> <span
  m=''2401890''>You</span> <span m=''2401990''>see</span> <span m=''2402090''>that?</span>
  <span m=''2403390''>But</span> <span m=''2403700''>now,</span> <span m=''2403880''>if</span>
  <span m=''2404060''>I</span> <span m=''2404140''>add</span> <span m=''2404510''>16</span>
  <span m=''2404930''>more</span> <span m=''2405150''>to</span> <span m=''2405220''>this</span>
  <span m=''2405430''>one,</span> <span m=''2409230''>then</span> <span m=''2410470''>this</span>
  <span m=''2410690''>map</span> <span m=''2411100''>into</span> <span m=''2411556''>116</span>
  <span m=''2412924''>plus</span> <span m=''2413380''>[i].</span> </p><p><span m=''2415816''>AUDIENCE:
  I don''t</span> <span m=''2416310''>see that</span> <span m=''2417298''>reflected
  in</span> <span m=''2417792''>the code.</span> <span m=''2418286''>You just</span>
  <span m=''2418780''>[INAUDIBLE],</span> <span m=''2419768''>so how is</span> <span
  m=''2420262''>B</span> <span m=''2420756''>different</span> <span m=''2421250''>from
  A</span> <span m=''2421744''>in your code?</span> </p><p><span m=''2422240''>PROFESSOR:
  Because</span> <span m=''2422830''>[UNINTELLIGIBLE]</span> <span m=''2423170''>my</span>
  <span m=''2423340''>S.</span> <span m=''2424110''>I</span> <span m=''2424250''>added</span>
  <span m=''2424450''>16</span> <span m=''2424930''>to S,</span> <span m=''2425170''>so</span>
  <span m=''2425330''>my</span> <span m=''2425530''>A</span> <span m=''2425950''>is
  a little</span> <span m=''2426100''>bit</span> <span m=''2426230''>bigger,</span>
  <span m=''2426420''>now.</span> </p><p><span m=''2428488''>AUDIENCE: But isn''t</span>
  <span m=''2428936''>B</span> <span m=''2429384''>also</span> <span m=''2429832''>[INAUDIBLE]?</span>
  </p><p><span m=''2430280''>PROFESSOR: Yeah,</span> <span m=''2430835''>B''s</span>
  <span m=''2431140''>also</span> <span m=''2431490''>bigger</span> <span m=''2431840''>here.</span>
  <span m=''2432240''>I</span> <span m=''2432390''>don''t</span> <span m=''2432540''>care.</span>
  <span m=''2432870''>B</span> <span m=''2432910''>goes</span> <span m=''2433250''>down</span>
  <span m=''2433500''>here.</span> <span m=''2434110''>B,</span> <span m=''2434270''>I</span>
  <span m=''2434440''>add</span> <span m=''2434930''>a little</span> <span m=''2435260''>bit</span>
  <span m=''2435590''>more</span> <span m=''2436010''>to</span> <span m=''2436090''>the</span>
  <span m=''2436180''>B.</span> <span m=''2436810''>It</span> <span m=''2436920''>doesn''t</span>
  <span m=''2437140''>matter.</span> <span m=''2437780''>I</span> <span m=''2437940''>padded</span>
  <span m=''2438300''>B,</span> <span m=''2438560''>too.</span> </p><p><span m=''2440010''>So</span>
  <span m=''2440220''>what</span> <span m=''2440420''>that</span> <span m=''2440630''>means</span>
  <span m=''2440900''>is</span> <span m=''2441000''>the</span> <span m=''2441080''>first</span>
  <span m=''2441390''>A[i]</span> <span m=''2441790''>and</span> <span m=''2442000''>B[i]</span>
  <span m=''2442370''>are</span> <span m=''2442550''>not</span> <span m=''2442840''>in</span>
  <span m=''2442950''>the</span> <span m=''2443040''>same</span> <span m=''2443260''>cache</span>
  <span m=''2443530''>line.</span> </p><p><span m=''2445282''>AUDIENCE: How do we</span>
  <span m=''2446270''>allocate</span> <span m=''2446764''>A and B</span> <span m=''2447258''>right
  next</span> <span m=''2447752''>to each</span> <span m=''2448246''>other?</span>
  </p><p><span m=''2448740''>PROFESSOR: So</span> <span m=''2449000''>normally</span>
  <span m=''2449510''>in</span> <span m=''2449700''>C,</span> <span m=''2450645''>if</span>
  <span m=''2451030''>you</span> <span m=''2451190''>declare</span> <span m=''2451540''>something</span>
  <span m=''2451900''>like</span> <span m=''2457270''>int A [100],</span> <span m=''2461780''>int
  B [100],</span> <span m=''2466850''>more</span> <span m=''2467150''>or less,</span>
  <span m=''2467490''>they will</span> <span m=''2467840''>be</span> <span m=''2468010''>allocated</span>
  <span m=''2468220''>next</span> <span m=''2468360''>to each</span> <span m=''2468640''>other.</span>
  <span m=''2469700''>If</span> <span m=''2469840''>you</span> <span m=''2469960''>look</span>
  <span m=''2470200''>at</span> <span m=''2470460''>the</span> <span m=''2470710''>assembly</span>
  <span m=''2470980''>listing,</span> <span m=''2471390''>it''ll</span> <span m=''2471740''>say</span>
  <span m=''2472410''>code</span> <span m=''2472620''>allocated</span> <span m=''2473500''>next</span>
  <span m=''2473670''>to each</span> <span m=''2473820''>other</span> <span m=''2473940''>in</span>
  <span m=''2474080''>memory.</span> <span m=''2475640''>Even</span> <span m=''2475970''>in</span>
  <span m=''2476050''>the</span> <span m=''2476130''>stack,</span> <span m=''2476470''>if</span>
  <span m=''2476580''>you</span> <span m=''2476690''>do</span> <span m=''2476850''>that,</span>
  <span m=''2477150''>if</span> <span m=''2477300''>you</span> <span m=''2477450''>allocate</span>
  <span m=''2477770''>things,</span> <span m=''2479480''>compiler</span> <span m=''2480030''>has</span>
  <span m=''2480290''>no</span> <span m=''2480430''>incentive</span> <span m=''2480970''>to</span>
  <span m=''2481030''>go</span> <span m=''2481220''>and</span> <span m=''2481860''>move</span>
  <span m=''2482195''>things</span> <span m=''2482530''>around.</span> </p><p><span
  m=''2484265''>AUDIENCE: This</span> <span m=''2484610''>is</span> <span m=''2485270''>only</span>
  <span m=''2485590''>for</span> <span m=''2486042''>global</span> <span m=''2486494''>and</span>
  <span m=''2486946''>[INAUDIBLE]?</span> </p><p><span m=''2487850''>PROFESSOR: Global</span>
  <span m=''2488210''>variable,</span> <span m=''2488670''>local</span> <span m=''2488950''>variables.</span>
  </p><p><span m=''2490172''>AUDIENCE: Does any of it</span> <span m=''2490584''>still
  apply</span> <span m=''2490996''>if</span> <span m=''2491410''>you</span> <span
  m=''2492050''>use</span> <span m=''2492455''>malloc?</span> </p><p><span m=''2498520''>PROFESSOR:
  The</span> <span m=''2498610''>thing</span> <span m=''2498820''>about</span> <span
  m=''2499060''>malloc</span> <span m=''2499380''>is--</span> </p><p><span m=''2503164''>AUDIENCE:
  [INAUDIBLE]</span> </p><p><span m=''2504150''>PROFESSOR: It</span> <span m=''2504360''>might</span>
  <span m=''2504680''>do something</span> <span m=''2505146''>[UNINTELLIGIBLE],</span>
  <span m=''2505612''>but on the other hand,</span> <span m=''2506705''>if it</span>
  <span m=''2506970''>is</span> <span m=''2507060''>fitting</span> <span m=''2507610''>on</span>
  <span m=''2507710''>the</span> <span m=''2507800''>same</span> <span m=''2508120''>page,</span>
  <span m=''2508760''>it</span> <span m=''2508920''>might</span> <span m=''2509170''>also</span>
  <span m=''2509460''>do</span> <span m=''2509630''>something</span> <span m=''2509910''>like</span>
  <span m=''2510130''>that,</span> <span m=''2510340''>too.</span> <span m=''2510460''>So</span>
  <span m=''2511060''>it</span> <span m=''2511230''>depends</span> <span m=''2512070''>on</span>
  <span m=''2512350''>how</span> <span m=''2512520''>we</span> <span m=''2512670''>do</span>
  <span m=''2512830''>that.</span> <span m=''2513120''>At</span> <span m=''2513190''>the</span>
  <span m=''2513270''>beginning,</span> <span m=''2513720''>if</span> <span m=''2514100''>you</span>
  <span m=''2514260''>keep</span> <span m=''2514610''>mallocing</span> <span m=''2515430''>things,</span>
  <span m=''2516080''>it</span> <span m=''2516150''>might</span> <span m=''2516310''>be</span>
  <span m=''2516400''>[UNINTELLIGIBLE].</span> <span m=''2516870''>They</span> <span
  m=''2516970''>might</span> <span m=''2517120''>be</span> <span m=''2517180''>a</span>
  <span m=''2517200''>little</span> <span m=''2517420''>bit</span> <span m=''2517590''>off</span>
  <span m=''2517850''>because</span> <span m=''2518610''>malloc</span> <span m=''2519420''>put</span>
  <span m=''2519640''>some</span> <span m=''2520660''>metadata</span> <span m=''2521560''>with</span>
  <span m=''2521850''>each</span> <span m=''2522280''>status.</span> </p><p><span
  m=''2522920''>If</span> <span m=''2523060''>you</span> <span m=''2523170''>ask</span>
  <span m=''2523350''>for</span> <span m=''2523510''>[UNINTELLIGIBLE],</span> <span
  m=''2524080''>you''re not</span> <span m=''2524290''>getting</span> <span m=''2524530''>exactly</span>
  <span m=''2524880''>100.</span> <span m=''2525260''>You''re</span> <span m=''2525370''>getting</span>
  <span m=''2525650''>a</span> <span m=''2525680''>little</span> <span m=''2525930''>bit</span>
  <span m=''2526020''>of a</span> <span m=''2526140''>bigger</span> <span m=''2526440''>size.</span>
  <span m=''2526740''>But</span> <span m=''2528060''>you</span> <span m=''2528200''>might</span>
  <span m=''2528430''>have</span> <span m=''2528660''>some</span> <span m=''2529020''>configuring</span>
  <span m=''2529120''>to</span> <span m=''2529330''>do,</span> <span m=''2529430''>but</span>
  <span m=''2529650''>after</span> <span m=''2529930''>some</span> <span m=''2530185''>time,</span>
  <span m=''2530440''>when you</span> <span m=''2530540''>have done</span> <span m=''2530760''>a</span>
  <span m=''2530840''>lot</span> <span m=''2531010''>of</span> <span m=''2531070''>[UNINTELLIGIBLE],</span>
  <span m=''2532360''>we</span> <span m=''2532710''>have</span> <span m=''2532830''>no</span>
  <span m=''2532940''>idea</span> <span m=''2533270''>where it''s</span> <span m=''2533410''>going</span>
  <span m=''2533590''>to go.</span> <span m=''2533810''>It''s</span> <span m=''2534060''>random.</span>
  </p><p><span m=''2535290''>Anymore</span> <span m=''2535540''>questions?</span>
  <span m=''2537530''>OK,</span> <span m=''2537700''>good,</span> <span m=''2537870''>that</span>
  <span m=''2537970''>is</span> <span m=''2538130''>a good</span> <span m=''2538220''>question.</span>
  <span m=''2540940''>So</span> <span m=''2541140''>what</span> <span m=''2541340''>kind</span>
  <span m=''2541480''>of</span> <span m=''2541610''>locality</span> <span m=''2541890''>do</span>
  <span m=''2542120''>I</span> <span m=''2542210''>have</span> <span m=''2542440''>here?</span>
  <span m=''2549030''>[UNINTELLIGIBLE]</span> <span m=''2549860''>two</span> <span
  m=''2550110''>lines,</span> <span m=''2550260''>I</span> <span m=''2550470''>am</span>
  <span m=''2550690''>accessing</span> <span m=''2551140''>each,</span> <span m=''2551990''>and</span>
  <span m=''2553100''>I</span> <span m=''2553260''>got</span> <span m=''2554940''>16</span>
  <span m=''2555570''>times</span> <span m=''2556700''>15</span> <span m=''2557130''>out</span>
  <span m=''2557230''>of</span> <span m=''2557320''>16</span> <span m=''2557640''>hits.</span>
  <span m=''2561570''>What''s</span> <span m=''2561760''>that?</span> </p><p><span
  m=''2562650''>AUDIENCE: Spatial?</span> </p><p><span m=''2563540''>PROFESSOR: Spatial</span>
  <span m=''2563970''>locality.</span> <span m=''2565400''>And</span> <span m=''2565880''>of</span>
  <span m=''2565990''>course,</span> <span m=''2566230''>if</span> <span m=''2566330''>you</span>
  <span m=''2566440''>have</span> <span m=''2566550''>spatial</span> <span m=''2566910''>locality,</span>
  <span m=''2567430''>you</span> <span m=''2567530''>get</span> <span m=''2567740''>cold</span>
  <span m=''2567990''>misses,</span> <span m=''2568280''>basically.</span> <span m=''2568850''>And</span>
  <span m=''2569380''>I</span> <span m=''2569540''>think</span> <span m=''2569700''>[UNINTELLIGIBLE],</span>
  <span m=''2570070''>you</span> <span m=''2570420''>get</span> <span m=''2570950''>what</span>
  <span m=''2571170''>other</span> <span m=''2571380''>type</span> <span m=''2571570''>of</span>
  <span m=''2571720''>misses?</span> </p><p><span m=''2574605''>AUDIENCE: [INAUDIBLE]</span>
  </p><p><span m=''2576569''>PROFESSOR: [UNINTELLIGIBLE]</span> <span m=''2577060''>conflict
  here.</span> <span m=''2577551''>Basically,</span> <span m=''2578042''>capacity.</span>
  <span m=''2578540''>Capacity</span> <span m=''2579500''>miss,</span> <span m=''2579690''>exactly.</span>
  </p><p><span m=''2581260''>So</span> <span m=''2582070''>in</span> <span m=''2582330''>order</span>
  <span m=''2582600''>to</span> <span m=''2582680''>avoid</span> <span m=''2582900''>this,</span>
  <span m=''2583940''>what</span> <span m=''2584280''>we</span> <span m=''2584530''>have</span>
  <span m=''2584780''>done</span> <span m=''2585360''>is</span> <span m=''2587040''>we</span>
  <span m=''2587240''>make</span> <span m=''2588260''>cache--</span> <span m=''2588640''>instead</span>
  <span m=''2589040''>of</span> <span m=''2589130''>mapping</span> <span m=''2589520''>into</span>
  <span m=''2589710''>one</span> <span m=''2590100''>place</span> <span m=''2590410''>before,</span>
  <span m=''2590840''>and</span> <span m=''2590940''>what</span> <span m=''2591110''>we</span>
  <span m=''2591220''>said</span> <span m=''2591450''>was</span> <span m=''2591700''>we</span>
  <span m=''2591790''>had</span> <span m=''2592020''>this</span> <span m=''2592150''>memory,</span>
  <span m=''2594540''>and</span> <span m=''2594800''>assume</span> <span m=''2595040''>we</span>
  <span m=''2595210''>have</span> <span m=''2595460''>32</span> <span m=''2596020''>sets.</span>
  <span m=''2596160''>And if</span> <span m=''2596310''>you have</span> <span m=''2596620''>a
  cache</span> <span m=''2596940''>like</span> <span m=''2597190''>this,</span> <span
  m=''2598940''>we</span> <span m=''2599090''>make</span> <span m=''2599500''>this</span>
  <span m=''2599700''>entire</span> <span m=''2600090''>map</span> <span m=''2600270''>into</span>
  <span m=''2600490''>this</span> <span m=''2600730''>one,</span> <span m=''2601050''>and</span>
  <span m=''2601280''>this</span> <span m=''2601380''>map</span> <span m=''2601640''>into</span>
  <span m=''2601820''>this</span> <span m=''2602050''>one.</span> <span m=''2604100''>What</span>
  <span m=''2604320''>people</span> <span m=''2604590''>have</span> <span m=''2604830''>done</span>
  <span m=''2605090''>is</span> <span m=''2605300''>instead</span> <span m=''2605605''>of</span>
  <span m=''2605910''>doing</span> <span m=''2606040''>that,</span> <span m=''2607000''>what</span>
  <span m=''2607250''>you</span> <span m=''2607360''>can</span> <span m=''2607610''>make</span>
  <span m=''2607950''>is</span> <span m=''2608770''>make</span> <span m=''2609160''>the</span>
  <span m=''2609290''>cache,</span> <span m=''2609630''>instead</span> <span m=''2609730''>of</span>
  <span m=''2609880''>one</span> <span m=''2610180''>big</span> <span m=''2610500''>block,</span>
  <span m=''2610940''>two</span> <span m=''2611300''>small</span> <span m=''2611690''>blocks.</span>
  </p><p><span m=''2614436''>So</span> <span m=''2614850''>what</span> <span m=''2615090''>that</span>
  <span m=''2615280''>means</span> <span m=''2615750''>is</span> <span m=''2618380''>this</span>
  <span m=''2618700''>can</span> <span m=''2618900''>happen</span> <span m=''2619350''>to</span>
  <span m=''2620330''>this</span> <span m=''2620620''>one.</span> <span m=''2623670''>My</span>
  <span m=''2623870''>drawings</span> <span m=''2624380''>are</span> <span m=''2624640''>not</span>
  <span m=''2624850''>that</span> <span m=''2625010''>great,</span> <span m=''2625670''>but</span>
  <span m=''2625960''>I</span> <span m=''2626150''>hope</span> <span m=''2626360''>you</span>
  <span m=''2626470''>get</span> <span m=''2626620''>the</span> <span m=''2626700''>picture.</span>
  <span m=''2627000''>This</span> <span m=''2627180''>map</span> <span m=''2627360''>into</span>
  <span m=''2627540''>this</span> <span m=''2627770''>one,</span> <span m=''2628230''>so</span>
  <span m=''2628360''>what</span> <span m=''2628530''>that</span> <span m=''2628760''>means</span>
  <span m=''2628990''>is</span> <span m=''2629190''>each</span> <span m=''2630310''>reference</span>
  <span m=''2630750''>here,</span> <span m=''2632170''>so</span> <span m=''2632330''>maps</span>
  <span m=''2632680''>here,</span> <span m=''2633960''>and</span> <span m=''2635020''>these</span>
  <span m=''2635630''>two</span> <span m=''2635780''>basically</span> <span m=''2636230''>conflicts.</span>
  <span m=''2636940''>But</span> <span m=''2637540''>now with</span> <span m=''2637860''>that</span>
  <span m=''2638080''>[UNINTELLIGIBLE]</span> <span m=''2638690''>too,</span> <span
  m=''2638890''>I</span> <span m=''2638990''>can</span> <span m=''2639180''>put</span>
  <span m=''2639390''>this</span> <span m=''2639590''>one</span> <span m=''2639740''>here</span>
  <span m=''2639980''>or</span> <span m=''2640130''>here.</span> <span m=''2641610''>I</span>
  <span m=''2641680''>have</span> <span m=''2641950''>two</span> <span m=''2642110''>places</span>
  <span m=''2642880''>to</span> <span m=''2642960''>put</span> <span m=''2643150''>the</span>
  <span m=''2643220''>value,</span> <span m=''2643440''>basically,</span> <span m=''2644490''>and</span>
  <span m=''2644830''>that</span> <span m=''2645030''>[UNINTELLIGIBLE].</span> </p><p><span
  m=''2647480''>OK,</span> <span m=''2647780''>so</span> <span m=''2647920''>that</span>
  <span m=''2648160''>means</span> <span m=''2648390''>if</span> <span m=''2648560''>I</span>
  <span m=''2648640''>access</span> <span m=''2649190''>something</span> <span m=''2650280''>conflicting,</span>
  <span m=''2651260''>[UNINTELLIGIBLE],</span> <span m=''2653540''>you</span> <span
  m=''2653680''>cannot</span> <span m=''2654000''>just</span> <span m=''2654190''>two</span>
  <span m=''2654390''>things.</span> <span m=''2654960''>Still,</span> <span m=''2655245''>there</span>
  <span m=''2655530''>are</span> <span m=''2655810''>places</span> <span m=''2656200''>in</span>
  <span m=''2656280''>the</span> <span m=''2656830''>cache</span> <span m=''2657040''>for</span>
  <span m=''2657120''>them</span> <span m=''2657290''>to go.</span> <span m=''2657860''>And</span>
  <span m=''2658320''>one</span> <span m=''2658800''>way</span> <span m=''2658960''>to
  do</span> <span m=''2659210''>people</span> <span m=''2659460''>is</span> <span
  m=''2659530''>fully</span> <span m=''2659930''>associative</span> <span m=''2660360''>cache.</span>
  <span m=''2660510''>It</span> <span m=''2660800''>can</span> <span m=''2661090''>go</span>
  <span m=''2661200''>anywhere,</span> <span m=''2661920''>but</span> <span m=''2662060''>that''s</span>
  <span m=''2662230''>very</span> <span m=''2662390''>hard</span> <span m=''2662680''>to</span>
  <span m=''2662750''>do</span> <span m=''2662830''>in</span> <span m=''2662940''>hardware,</span>
  <span m=''2663550''>but</span> <span m=''2663730''>you</span> <span m=''2663830''>can</span>
  <span m=''2663990''>do</span> <span m=''2664100''>some</span> <span m=''2665220''>small</span>
  <span m=''2665520''>number</span> <span m=''2665780''>of</span> <span m=''2665890''>ways.</span>
  </p><p><span m=''2666560''>So</span> <span m=''2666750''>in here,</span> <span m=''2667010''>if</span>
  <span m=''2667320''>you</span> <span m=''2667420''>do</span> <span m=''2667720''>two</span>
  <span m=''2668690''>basic</span> <span m=''2669320''>associative</span> <span m=''2669880''>cache,</span>
  <span m=''2670320''>in</span> <span m=''2670480''>the</span> <span m=''2670570''>first</span>
  <span m=''2670870''>axis</span> <span m=''2671135''>in</span> <span m=''2671400''>here,</span>
  <span m=''2672980''>even</span> <span m=''2673200''>though</span> <span m=''2673530''>these</span>
  <span m=''2673780''>are</span> <span m=''2673880''>conflicted,</span> <span m=''2675610''>on
  can</span> <span m=''2675760''>go</span> <span m=''2675910''>to</span> <span m=''2676000''>one</span>
  <span m=''2676240''>[UNINTELLIGIBLE]</span> <span m=''2676430''>set,</span> <span
  m=''2676790''>another</span> <span m=''2677090''>one</span> <span m=''2677350''>can
  go</span> <span m=''2677480''>to</span> <span m=''2677610''>the</span> <span m=''2677760''>other</span>
  <span m=''2677900''>set.</span> <span m=''2681070''>OK,</span> <span m=''2681360''>so</span>
  <span m=''2681600''>two</span> <span m=''2681900''>associative</span> <span m=''2682290''>cache</span>
  <span m=''2682450''>[UNINTELLIGIBLE].</span> <span m=''2684640''>So</span> <span
  m=''2685030''>total</span> <span m=''2685270''>access</span> <span m=''2685580''>time,</span>
  <span m=''2685800''>again,</span> <span m=''2686100''>I</span> <span m=''2686170''>have</span>
  <span m=''2686360''>nice</span> <span m=''2687560''>locality</span> <span m=''2688100''>in
  here,</span> <span m=''2688780''>spatial</span> <span m=''2688980''>locality,</span>
  <span m=''2690550''>and</span> <span m=''2691410''>I</span> <span m=''2691480''>have</span>
  <span m=''2691870''>both</span> <span m=''2692120''>cold</span> <span m=''2692550''>and,</span>
  <span m=''2692850''>I</span> <span m=''2692950''>guess,</span> <span m=''2693570''>capacity</span>
  <span m=''2693940''>misses.</span> </p><p><span m=''2696490''>But</span> <span m=''2696820''>if</span>
  <span m=''2697010''>you</span> <span m=''2697080''>have</span> <span m=''2697220''>two</span>
  <span m=''2697440''>associative</span> <span m=''2697990''>cache,</span> <span m=''2698310''>what''s</span>
  <span m=''2698520''>the</span> <span m=''2698740''>next</span> <span m=''2698960''>problem?</span>
  <span m=''2699890''>How</span> <span m=''2700030''>about</span> <span m=''2700180''>if
  you have</span> <span m=''2700460''>three</span> <span m=''2700620''>different</span>
  <span m=''2700965''>things?</span> <span m=''2704280''>So</span> <span m=''2704890''>we</span>
  <span m=''2704940''>have</span> <span m=''2705080''>two</span> <span m=''2705260''>different</span>
  <span m=''2705570''>things</span> <span m=''2705790''>like</span> <span m=''2705940''>that.</span>
  <span m=''2706070''>OK,</span> <span m=''2706260''>now</span> <span m=''2706420''>that
  I</span> <span m=''2706600''>only</span> <span m=''2706800''>have</span> <span m=''2707000''>two</span>
  <span m=''2707150''>associated</span> <span m=''2707440''>[UNINTELLIGIBLE],</span>
  <span m=''2707730''>it</span> <span m=''2707850''>doesn''t</span> <span m=''2708080''>work</span>
  <span m=''2709320''>because,</span> <span m=''2709630''>in</span> <span m=''2709760''>a</span>
  <span m=''2709870''>[UNINTELLIGIBLE],</span> <span m=''2710300''>I will</span> <span
  m=''2710630''>replace</span> <span m=''2711020''>the</span> <span m=''2711080''>last</span>
  <span m=''2711400''>thing,</span> <span m=''2711620''>and</span> <span m=''2711710''>you</span>
  <span m=''2711800''>might</span> <span m=''2712440''>still</span> <span m=''2712900''>end
  up</span> <span m=''2713180''>with</span> <span m=''2713290''>nothing</span> <span
  m=''2713610''>in</span> <span m=''2713730''>here</span> <span m=''2714255''>because</span>
  <span m=''2714540''>you</span> <span m=''2714750''>are</span> <span m=''2714870''>replacing</span>
  <span m=''2715210''>nothing,</span> <span m=''2715650''>and</span> <span m=''2715730''>the</span>
  <span m=''2715830''>next</span> <span m=''2716020''>thing</span> <span m=''2716190''>replaced</span>
  <span m=''2716470''>the</span> <span m=''2716540''>other</span> <span m=''2716770''>thing.</span>
  </p><p><span m=''2717290''>And</span> <span m=''2717580''>basically</span> <span
  m=''2718870''>after</span> <span m=''2719200''>you</span> <span m=''2719280''>gave</span>
  <span m=''2719530''>B, C,</span> <span m=''2720130''>then</span> <span m=''2720240''>you</span>
  <span m=''2720310''>go</span> <span m=''2720450''>to</span> <span m=''2720560''>A.</span>
  <span m=''2720810''>A</span> <span m=''2720990''>Is</span> <span m=''2721100''>not</span>
  <span m=''2721320''>there.</span> <span m=''2721450''>When you</span> <span m=''2721580''>go</span>
  <span m=''2721790''>to</span> <span m=''2721870''>B,</span> <span m=''2722040''>B
  is</span> <span m=''2722350''>not there,</span> <span m=''2722660''>C is</span>
  <span m=''2722850''>not there.</span> <span m=''2723040''>You</span> <span m=''2723230''>kind</span>
  <span m=''2723450''>of</span> <span m=''2723600''>go</span> <span m=''2723800''>back</span>
  <span m=''2723980''>to</span> <span m=''2724060''>the</span> <span m=''2724150''>same</span>
  <span m=''2724400''>problem</span> <span m=''2724850''>in here,</span> <span m=''2725550''>and</span>
  <span m=''2725930''>then</span> <span m=''2726560''>basically</span> <span m=''2727040''>have
  to</span> <span m=''2727260''>access</span> <span m=''2727550''>everything</span>
  <span m=''2727940''>again.</span> <span m=''2733570''>There is</span> <span m=''2733830''>some</span>
  <span m=''2734000''>spatial</span> <span m=''2734310''>locality</span> <span m=''2734620''>but</span>
  <span m=''2735070''>cache</span> <span m=''2735240''>can''t</span> <span m=''2735400''>use
  it.</span> <span m=''2735750''>Basically,</span> <span m=''2736220''>you</span>
  <span m=''2736280''>have</span> <span m=''2736930''>conflict</span> <span m=''2737290''>misses.</span>
  </p><p><span m=''2739190''>OK,</span> <span m=''2739850''>so</span> <span m=''2739970''>you</span>
  <span m=''2740080''>see</span> <span m=''2740220''>that?</span> <span m=''2740640''>So</span>
  <span m=''2741360''>associative</span> <span m=''2741840''>is</span> <span m=''2742020''>good</span>
  <span m=''2742350''>because</span> <span m=''2742860''>normally</span> <span m=''2743690''>people</span>
  <span m=''2743920''>assume</span> <span m=''2744240''>you</span> <span m=''2744410''>don''t</span>
  <span m=''2745370''>need</span> <span m=''2745730''>that</span> <span m=''2745900''>much</span>
  <span m=''2746080''>associativity,</span> <span m=''2747460''>but</span> <span m=''2748290''>it''s</span>
  <span m=''2748500''>limited.</span> <span m=''2749590''>So</span> <span m=''2749880''>if</span>
  <span m=''2750040''>you</span> <span m=''2750110''>have</span> <span m=''2750190''>too</span>
  <span m=''2750320''>many</span> <span m=''2750470''>things,</span> <span m=''2750650''>you</span>
  <span m=''2750750''>might</span> <span m=''2750900''>run</span> <span m=''2751050''>into</span>
  <span m=''2751430''>this</span> <span m=''2751820''>problem</span> <span m=''2752160''>again.</span>
  </p><p><span m=''2754416''>AUDIENCE: [INAUDIBLE]</span> </p><p><span m=''2762320''>PROFESSOR:
  You mean</span> <span m=''2762814''>capacity?</span> </p><p><span m=''2763308''>AUDIENCE:
  Yeah,</span> <span m=''2763802''>[INAUDIBLE]</span> <span m=''2764296''>capacity.</span>
  </p><p><span m=''2764790''>PROFESSOR: Less.</span> </p><p><span m=''2765778''>AUDIENCE:
  [INAUDIBLE]</span> <span m=''2767754''>elements</span> <span m=''2768248''>in a
  cache</span> <span m=''2768742''>before you</span> <span m=''2769236''>pick</span>
  <span m=''2769730''>[INAUDIBLE]</span> <span m=''2770224''>because it</span> <span
  m=''2770718''>looks as though</span> <span m=''2771212''>the</span> <span m=''2771706''>matrix</span>
  <span m=''2772200''>is</span> <span m=''2773682''>is using</span> <span m=''2774176''>half</span>
  <span m=''2774670''>the cache</span> <span m=''2775164''>by itself.</span> </p><p><span
  m=''2775658''>PROFESSOR: Because it''s</span> <span m=''2776190''>associated,</span>
  <span m=''2777010''>you</span> <span m=''2777080''>mean?</span> <span m=''2777510''>You</span>
  <span m=''2777610''>have</span> <span m=''2777760''>multiple</span> <span m=''2777980''>there?</span>
  <span m=''2778480''>I</span> <span m=''2778640''>mean,</span> <span m=''2778840''>the</span>
  <span m=''2778930''>thing</span> <span m=''2779190''>is</span> <span m=''2779970''>since</span>
  <span m=''2780090''>it''s</span> <span m=''2780270''>associated,</span> <span m=''2780540''>no,</span>
  <span m=''2780750''>because</span> <span m=''2781030''>you</span> <span m=''2781170''>have</span>
  <span m=''2781380''>enough</span> <span m=''2781750''>room.</span> <span m=''2782050''>I</span>
  <span m=''2782090''>mean,</span> <span m=''2782220''>if</span> <span m=''2782330''>you''re</span>
  <span m=''2782480''>going</span> <span m=''2782700''>[UNINTELLIGIBLE]</span> <span
  m=''2783260''>everything,</span> <span m=''2784050''>you</span> <span m=''2784230''>have</span>
  <span m=''2784370''>two</span> <span m=''2784540''>places</span> <span m=''2784930''>to</span>
  <span m=''2785030''>put</span> <span m=''2785240''>the</span> <span m=''2785360''>name</span>
  <span m=''2785530''>because</span> <span m=''2785730''>it</span> <span m=''2785850''>maps.</span>
  <span m=''2788730''>That''s</span> <span m=''2788950''>a</span> <span m=''2789000''>good</span>
  <span m=''2789150''>question.</span> </p><p><span m=''2789950''>So</span> <span
  m=''2790230''>what</span> <span m=''2790440''>happens</span> <span m=''2790850''>is</span>
  <span m=''2791040''>now,</span> <span m=''2792300''>assume</span> <span m=''2793180''>this</span>
  <span m=''2793320''>many</span> <span m=''2793720''>things</span> <span m=''2795110''>fit</span>
  <span m=''2795430''>into</span> <span m=''2795490''>the</span> <span m=''2795600''>cache</span>
  <span m=''2795960''>before.</span> <span m=''2797310''>Now,</span> <span m=''2797880''>cache</span>
  <span m=''2798220''>has</span> <span m=''2798400''>two</span> <span m=''2798590''>banks,</span>
  <span m=''2799000''>and</span> <span m=''2799300''>in</span> <span m=''2799510''>each</span>
  <span m=''2799800''>bank,</span> <span m=''2800030''>only</span> <span m=''2800170''>this</span>
  <span m=''2800410''>many</span> <span m=''2800610''>things fit</span> <span m=''2801070''>in,</span>
  <span m=''2801270''>but the</span> <span m=''2801360''>next</span> <span m=''2801650''>thing</span>
  <span m=''2801820''>can</span> <span m=''2801980''>go to</span> <span m=''2802210''>the</span>
  <span m=''2802320''>other</span> <span m=''2802440''>bank.</span> <span m=''2803080''>So</span>
  <span m=''2803210''>if</span> <span m=''2803340''>you</span> <span m=''2803470''>go</span>
  <span m=''2803630''>through</span> <span m=''2803760''>[UNINTELLIGIBLE],</span>
  <span m=''2804220''>you</span> <span m=''2804340''>have</span> <span m=''2804480''>the</span>
  <span m=''2804550''>same</span> <span m=''2804790''>behavior</span> <span m=''2805320''>even</span>
  <span m=''2805620''>if</span> <span m=''2805740''>you</span> <span m=''2805840''>have</span>
  <span m=''2805960''>associativity.</span> <span m=''2807620''>OK,</span> <span m=''2807950''>you</span>
  <span m=''2808070''>can</span> <span m=''2808440''>go and--</span> <span m=''2808890''>because</span>
  <span m=''2809050''>if</span> <span m=''2809150''>the</span> <span m=''2809400''>cache</span>
  <span m=''2809740''>is</span> <span m=''2809860''>the</span> <span m=''2809940''>same</span>
  <span m=''2810210''>size,</span> <span m=''2811150''>the</span> <span m=''2811250''>size</span>
  <span m=''2811580''>is</span> <span m=''2811830''>what</span> <span m=''2812240''>matters</span>
  <span m=''2812740''>for if</span> <span m=''2812990''>you are</span> <span m=''2813050''>going</span>
  <span m=''2813250''>through</span> <span m=''2813450''>[UNINTELLIGIBLE]</span> <span
  m=''2813790''>axis.</span> </p><p><span m=''2814767''>AUDIENCE: So far,</span> <span
  m=''2815254''>[INAUDIBLE]</span> <span m=''2815741''>machines that</span> <span
  m=''2816228''>we''re working on,</span> <span m=''2817689''>do they</span> <span
  m=''2818176''>have</span> <span m=''2819150''>a fixed</span> <span m=''2819637''>kind
  of</span> <span m=''2820124''>cache,</span> <span m=''2820611''>or can we</span>
  <span m=''2821098''>decide like--</span> </p><p><span m=''2821585''>PROFESSOR: The</span>
  <span m=''2822080''>fixed kind</span> <span m=''2822510''>of cache.</span> <span
  m=''2822940''>It''s built</span> <span m=''2823120''>into the</span> <span m=''2823310''>hardware.</span>
  <span m=''2824800''>I will</span> <span m=''2825320''>show</span> <span m=''2825520''>the</span>
  <span m=''2825640''>table</span> <span m=''2826000''>to</span> <span m=''2826090''>say</span>
  <span m=''2826210''>what</span> <span m=''2826400''>type</span> <span m=''2826540''>of</span>
  <span m=''2826650''>associativity</span> <span m=''2827070''>is</span> <span m=''2827170''>in</span>
  <span m=''2827320''>there.</span> </p><p><span m=''2829346''>AUDIENCE: Is there</span>
  <span m=''2829842''>not</span> <span m=''2830338''>a way to</span> <span m=''2830834''>say</span>
  <span m=''2831330''>[INAUDIBLE]</span> <span m=''2832818''>three-way</span> <span
  m=''2833314''>associative?</span> <span m=''2834306''>Can you have</span> <span
  m=''2834802''>something on</span> <span m=''2835298''>top of it</span> <span m=''2835794''>so
  that it</span> <span m=''2836290''>looks like</span> <span m=''2836786''>it''s</span>
  <span m=''2837282''>two-way</span> <span m=''2837778''>associative</span> <span
  m=''2838274''>or something?</span> </p><p><span m=''2838770''>PROFESSOR: I</span>
  <span m=''2838900''>mean,</span> <span m=''2840050''>you</span> <span m=''2840300''>can</span>
  <span m=''2840600''>do</span> <span m=''2840830''>things</span> <span m=''2841110''>like</span>
  <span m=''2841340''>that</span> <span m=''2841730''>in</span> <span m=''2841870''>software,</span>
  <span m=''2842790''>but</span> <span m=''2842980''>they''re</span> <span m=''2843160''>very</span>
  <span m=''2843380''>expensive.</span> <span m=''2843810''>I mean,</span> <span m=''2844220''>think
  about</span> <span m=''2844480''>cache</span> <span m=''2844780''>is</span> <span
  m=''2844880''>trying</span> <span m=''2845170''>to</span> <span m=''2845920''>fool</span>
  <span m=''2846360''>the</span> <span m=''2846490''>cache</span> <span m=''2846850''>in</span>
  <span m=''2846960''>that</span> <span m=''2847150''>direction</span> <span m=''2848570''>cannot</span>
  <span m=''2849150''>be</span> <span m=''2849250''>that</span> <span m=''2849440''>easy</span>
  <span m=''2850070''>because</span> <span m=''2850260''>they</span> <span m=''2850370''>are</span>
  <span m=''2850480''>like</span> <span m=''2850710''>really</span> <span m=''2850950''>hard-baked</span>
  <span m=''2851500''>into</span> <span m=''2851650''>hardware.</span> <span m=''2852130''>that''s</span>
  <span m=''2852330''>a good</span> <span m=''2852470''>question,</span> <span m=''2852790''>but</span>
  <span m=''2853000''>there are</span> <span m=''2853730''>things</span> <span m=''2854000''>you</span>
  <span m=''2854130''>can</span> <span m=''2854350''>do,</span> <span m=''2854920''>not</span>
  <span m=''2855220''>exactly</span> <span m=''2855650''>modeling</span> <span m=''2856080''>something,</span>
  <span m=''2856750''>but</span> <span m=''2857170''>kind</span> <span m=''2857400''>of</span>
  <span m=''2857510''>putting</span> <span m=''2857830''>offsets</span> <span m=''2858320''>and</span>
  <span m=''2858440''>stuff</span> <span m=''2858690''>like</span> <span m=''2858890''>that</span>
  <span m=''2859040''>so</span> <span m=''2859130''>it</span> <span m=''2859600''>doesn''t</span>
  <span m=''2860630''>get</span> <span m=''2860790''>into</span> <span m=''2860940''>these</span>
  <span m=''2861080''>kind</span> <span m=''2861230''>of</span> <span m=''2861300''>conflicts.</span>
  </p><p><span m=''2866140''>So</span> <span m=''2866455''>yeah,</span> <span m=''2866770''>I
  will</span> <span m=''2866960''>answer</span> <span m=''2867170''>this thing.</span>
  <span m=''2867520''>Why</span> <span m=''2867670''>don''t</span> <span m=''2867860''>you</span>
  <span m=''2867910''>have</span> <span m=''2868080''>more?</span> <span m=''2868340''>Because</span>
  <span m=''2869730''>if</span> <span m=''2869880''>you</span> <span m=''2870880''>go</span>
  <span m=''2871020''>back</span> <span m=''2871180''>to</span> <span m=''2871270''>your</span>
  <span m=''2871310''>[UNINTELLIGIBLE]</span> <span m=''2871950''>lectures.</span>
  <span m=''2872530''>Perhaps</span> <span m=''2873010''>it</span> <span m=''2873170''>might</span>
  <span m=''2873350''>have</span> <span m=''2873460''>explanation</span> <span m=''2873980''>in
  it''s</span> <span m=''2874410''>hardware</span> <span m=''2874720''>why it''s much</span>
  <span m=''2874920''>harder</span> <span m=''2875050''>to</span> <span m=''2875260''>build.</span>
  </p><p><span m=''2876590''>And</span> <span m=''2878580''>if</span> <span m=''2878780''>you</span>
  <span m=''2878910''>have</span> <span m=''2879030''>the</span> <span m=''2879090''>linked</span>
  <span m=''2879420''>lists</span> <span m=''2879570''>now--</span> <span m=''2880730''>so</span>
  <span m=''2880890''>assume</span> <span m=''2881290''>I</span> <span m=''2881520''>have</span>
  <span m=''2883880''>linked</span> <span m=''2883960''>lists</span> <span m=''2884720''>we</span>
  <span m=''2884900''>are</span> <span m=''2884950''>going</span> <span m=''2885180''>through</span>
  <span m=''2885310''>in</span> <span m=''2885470''>here.</span> <span m=''2886674''>And</span>
  <span m=''2889510''>what''s</span> <span m=''2889820''>my</span> <span m=''2891620''>[UNINTELLIGIBLE]?</span>
  <span m=''2892450''>Basically,</span> <span m=''2893100''>depending</span> <span
  m=''2893570''>on</span> <span m=''2893950''>allocation</span> <span m=''2894410''>and</span>
  <span m=''2894520''>using</span> <span m=''2894880''>some</span> <span m=''2895220''>things,</span>
  <span m=''2895790''>so</span> <span m=''2895950''>best</span> <span m=''2896340''>case</span>
  <span m=''2896580''>is</span> <span m=''2896690''>everything</span> <span m=''2897080''>is</span>
  <span m=''2897200''>in</span> <span m=''2897330''>cache,</span> <span m=''2897820''>so
  I</span> <span m=''2897980''>have</span> <span m=''2898100''>a</span> <span m=''2898210''>small</span>
  <span m=''2898540''>list.</span> <span m=''2899400''>And</span> <span m=''2899520''>I</span>
  <span m=''2899590''>go</span> <span m=''2899800''>through</span> <span m=''2899980''>again</span>
  <span m=''2900270''>and</span> <span m=''2900390''>again,</span> <span m=''2900690''>round
  and</span> <span m=''2900960''>around</span> <span m=''2901230''>my</span> <span
  m=''2902760''>list,</span> <span m=''2903320''>everything''s</span> <span m=''2903800''>in</span>
  <span m=''2903920''>cache</span> <span m=''2904720''>and</span> <span m=''2905520''>[UNINTELLIGIBLE]</span>
  <span m=''2906280''>S.</span> <span m=''2906620''>That''s</span> <span m=''2906830''>really</span>
  <span m=''2907020''>great.</span> </p><p><span m=''2909350''>Next</span> <span m=''2909640''>best</span>
  <span m=''2909950''>is</span> <span m=''2910060''>everything</span> <span m=''2910430''>is</span>
  <span m=''2910550''>adjacent.</span> <span m=''2912130''>OK,</span> <span m=''2913010''>everything</span>
  <span m=''2913340''>might</span> <span m=''2913550''>not</span> <span m=''2913680''>be
  in</span> <span m=''2913860''>the</span> <span m=''2913950''>cache,</span> <span
  m=''2914210''>but</span> <span m=''2914370''>everything</span> <span m=''2914730''>at</span>
  <span m=''2914830''>least</span> <span m=''2915040''>in</span> <span m=''2915120''>adjacent</span>
  <span m=''2915540''>memory.</span> <span m=''2915760''>So</span> <span m=''2916120''>basically,</span>
  <span m=''2916970''>first</span> <span m=''2917160''>time I</span> <span m=''2917320''>allocate</span>
  <span m=''2918970''>my</span> <span m=''2919290''>malloc</span> <span m=''2919660''>did</span>
  <span m=''2919810''>a</span> <span m=''2919850''>nice</span> <span m=''2920120''>thing</span>
  <span m=''2920340''>for</span> <span m=''2920500''>me,</span> <span m=''2921110''>and</span>
  <span m=''2921260''>at</span> <span m=''2921400''>that</span> <span m=''2921620''>time,</span>
  <span m=''2921850''>I</span> <span m=''2922080''>basically</span> <span m=''2922650''>get</span>
  <span m=''2923760''>a</span> <span m=''2924260''>nice</span> <span m=''2925480''>basic</span>
  <span m=''2925980''>spatial</span> <span m=''2926340''>locality</span> <span m=''2927140''>since</span>
  <span m=''2927540''>my</span> <span m=''2927680''>size</span> <span m=''2928060''>is</span>
  <span m=''2928150''>16</span> <span m=''2928630''>in</span> <span m=''2928730''>here.</span>
  <span m=''2929510''>So</span> <span m=''2929640''>I</span> <span m=''2929700''>get</span>
  <span m=''2929890''>this</span> <span m=''2930060''>much.</span> </p><p><span m=''2931180''>And</span>
  <span m=''2931360''>the</span> <span m=''2931440''>worst</span> <span m=''2931710''>case</span>
  <span m=''2931970''>is</span> <span m=''2932150''>random.</span> <span m=''2933390''>Malloc</span>
  <span m=''2933860''>puts</span> <span m=''2933990''>it all</span> <span m=''2934320''>over</span>
  <span m=''2934410''>the place.</span> <span m=''2935320''>Question?</span> </p><p><span
  m=''2935660''>AUDIENCE: [INAUDIBLE]</span> <span m=''2937127''>cache,</span> <span
  m=''2939083''>does the</span> <span m=''2939572''>thing</span> <span m=''2940061''>behind
  it</span> <span m=''2940550''>[UNINTELLIGIBLE]</span> <span m=''2941039''>in front
  of it</span> <span m=''2941528''>[UNINTELLIGIBLE]</span> <span m=''2942017''>also
  going to?</span> <span m=''2942506''>Do those</span> <span m=''2942995''>both</span>
  <span m=''2943484''>have</span> <span m=''2943973''>a</span> <span m=''2944462''>spatial</span>
  <span m=''2944951''>locality?</span> </p><p><span m=''2946390''>PROFESSOR: What</span>
  <span m=''2946620''>happens</span> <span m=''2947035''>is</span> <span m=''2947450''>normally,</span>
  <span m=''2952920''>we assume</span> <span m=''2953380''>64</span> <span m=''2955920''>element</span>
  <span m=''2956290''>cache,</span> <span m=''2957060''>so</span> <span m=''2957220''>it''s</span>
  <span m=''2957490''>at</span> <span m=''2957730''>that</span> <span m=''2957990''>boundary,</span>
  <span m=''2959650''>so</span> <span m=''2959890''>basically</span> <span m=''2964430''>2</span>
  <span m=''2964730''>to the 8</span> <span m=''2965160''>boundaries</span> <span
  m=''2965960''>is</span> <span m=''2966180''>what</span> <span m=''2966440''>happens.</span>
  <span m=''2966640''>So</span> <span m=''2966760''>what</span> <span m=''2966940''>happens</span>
  <span m=''2967310''>is</span> <span m=''2967490''>cache</span> <span m=''2967890''>line</span>
  <span m=''2968620''>begins</span> <span m=''2969150''>at</span> <span m=''2970720''>0</span>
  <span m=''2971050''>address,</span> <span m=''2972670''>64</span> <span m=''2973830''>address</span>
  <span m=''2974190''>here.</span> <span m=''2974310''>So</span> <span m=''2974440''>if</span>
  <span m=''2974570''>you</span> <span m=''2974680''>get</span> <span m=''2974890''>63,</span>
  <span m=''2977360''>that</span> <span m=''2977520''>means</span> <span m=''2977720''>this</span>
  <span m=''2977910''>value</span> <span m=''2978130''>is</span> <span m=''2978240''>not</span>
  <span m=''2978400''>in</span> <span m=''2978470''>the</span> <span m=''2978570''>cache,</span>
  <span m=''2979750''>so</span> <span m=''2979850''>you</span> <span m=''2980570''>get</span>
  <span m=''2980780''>this</span> <span m=''2980960''>cache</span> <span m=''2981240''>line.</span>
  </p><p><span m=''2982120''>So</span> <span m=''2982250''>the</span> <span m=''2982330''>cache</span>
  <span m=''2982630''>line</span> <span m=''2983080''>doesn''t</span> <span m=''2983270''>shift.</span>
  <span m=''2983680''>It''s</span> <span m=''2984830''>fixed</span> <span m=''2985700''>chunks</span>
  <span m=''2986050''>in</span> <span m=''2986160''>here,</span> <span m=''2987190''>so</span>
  <span m=''2987630''>that if</span> <span m=''2987790''>you</span> <span m=''2987900''>get</span>
  <span m=''2988040''>address</span> <span m=''2988375''>0,</span> <span m=''2988710''>you</span>
  <span m=''2988840''>get</span> <span m=''2989040''>this</span> <span m=''2989260''>one,</span>
  <span m=''2989490''>and</span> <span m=''2989610''>all</span> <span m=''2989890''>these</span>
  <span m=''2990040''>things.</span> <span m=''2990630''>If</span> <span m=''2990770''>you</span>
  <span m=''2990860''>get</span> <span m=''2991020''>something</span> <span m=''2991230''>in</span>
  <span m=''2991330''>the</span> <span m=''2991420''>middle,</span> <span m=''2991680''>you''ll</span>
  <span m=''2991900''>get</span> <span m=''2992160''>the</span> <span m=''2992220''>left</span>
  <span m=''2992580''>and</span> <span m=''2992730''>right</span> <span m=''2992980''>[UNINTELLIGIBLE],</span>
  <span m=''2993340''>but</span> <span m=''2993500''>if</span> <span m=''2993590''>you</span>
  <span m=''2993690''>get</span> <span m=''2993870''>here,</span> <span m=''2993950''>you</span>
  <span m=''2994130''>only</span> <span m=''2994300''>get</span> <span m=''2994470''>the</span>
  <span m=''2994550''>right.</span> <span m=''2995790''>So</span> <span m=''2995990''>this</span>
  <span m=''2996250''>basically</span> <span m=''2996830''>0</span> <span m=''2997350''>and</span>
  <span m=''2997500''>64,</span> <span m=''2997930''>they are</span> <span m=''2998130''>boundaries</span>
  <span m=''2998550''>[INAUDIBLE].</span> <span m=''2998820''>If</span> <span m=''2999090''>you</span>
  <span m=''2999200''>like</span> <span m=''2999340''>65,</span> <span m=''3000220''>that''s</span>
  <span m=''3000320''>it.</span> </p><p><span m=''3000430''>But</span> <span m=''3001120''>that</span>
  <span m=''3001350''>said,</span> <span m=''3002020''>if</span> <span m=''3002140''>you''re</span>
  <span m=''3002310''>accessing</span> <span m=''3003130''>[UNINTELLIGIBLE],</span>
  <span m=''3003640''>that''s</span> <span m=''3003790''>this</span> <span m=''3003950''>thing</span>
  <span m=''3004080''>called</span> <span m=''3004250''>prefetcher</span> <span m=''3004580''>that</span>
  <span m=''3004910''>say</span> <span m=''3005620''>you are</span> <span m=''3005790''>going
  through</span> <span m=''3005950''>linear</span> <span m=''3006280''>pattern,</span>
  <span m=''3006770''>and</span> <span m=''3006870''>you</span> <span m=''3006990''>might</span>
  <span m=''3007280''>need</span> <span m=''3007540''>that</span> <span m=''3007730''>next,</span>
  <span m=''3008070''>and</span> <span m=''3008500''>it''ll</span> <span m=''3008590''>bring</span>
  <span m=''3008750''>this</span> <span m=''3008860''>up for you.</span> <span m=''3010120''>And</span>
  <span m=''3010630''>what</span> <span m=''3010770''>you</span> <span m=''3010900''>find,</span>
  <span m=''3011390''>I''ll</span> <span m=''3011550''>show</span> <span m=''3011770''>later,</span>
  <span m=''3012400''>that</span> <span m=''3012770''>in</span> <span m=''3012960''>fact,</span>
  <span m=''3014820''>the</span> <span m=''3015470''>machine</span> <span m=''3015840''>you''re</span>
  <span m=''3016000''>using</span> <span m=''3016320''>has a</span> <span m=''3016650''>really</span>
  <span m=''3016940''>powerful</span> <span m=''3017350''>prefetcher,</span> <span
  m=''3018920''>so</span> <span m=''3019110''>it</span> <span m=''3019210''>can</span>
  <span m=''3019390''>hide</span> <span m=''3019690''>a</span> <span m=''3019780''>lot</span>
  <span m=''3019880''>of</span> <span m=''3019970''>these things.</span> <span m=''3020270''>So</span>
  <span m=''3020500''>we''ll</span> <span m=''3020660''>get to</span> <span m=''3020850''>that.</span>
  </p><p><span m=''3025420''>So</span> <span m=''3025570''>this</span> <span m=''3025750''>is</span>
  <span m=''3025880''>my</span> <span m=''3026000''>total</span> <span m=''3026290''>access</span>
  <span m=''3026670''>time</span> <span m=''3026770''>in</span> <span m=''3026980''>here.</span>
  <span m=''3027940''>Random</span> <span m=''3028420''>case.</span> <span m=''3028820''>Random</span>
  <span m=''3029030''>case</span> <span m=''3029260''>is</span> <span m=''3029360''>basically,</span>
  <span m=''3030120''>every</span> <span m=''3030260''>time I</span> <span m=''3030400''>access</span>
  <span m=''3030710''>something,</span> <span m=''3031670''>it''s</span> <span m=''3031820''>not</span>
  <span m=''3031940''>in</span> <span m=''3032030''>the</span> <span m=''3032120''>cache.</span>
  </p><p><span m=''3038340''>And</span> <span m=''3039030''>then</span> <span m=''3039230''>if</span>
  <span m=''3039360''>you</span> <span m=''3039520''>have</span> <span m=''3040540''>a</span>
  <span m=''3040970''>bigger</span> <span m=''3041320''>struct</span> <span m=''3041580''>in</span>
  <span m=''3041840''>here--</span> <span m=''3042720''>but assume</span> <span m=''3042900''>I</span>
  <span m=''3043080''>have</span> <span m=''3043220''>this</span> <span m=''3043370''>big</span>
  <span m=''3043610''>struct</span> <span m=''3043865''>in</span> <span m=''3044120''>here,</span>
  <span m=''3044900''>but</span> <span m=''3045190''>I am</span> <span m=''3045440''>only</span>
  <span m=''3045690''>accessing</span> <span m=''3046110''>one</span> <span m=''3046320''>element</span>
  <span m=''3046700''>of</span> <span m=''3046920''>this</span> <span m=''3047380''>struct</span>
  <span m=''3047735''>in</span> <span m=''3048090''>here.</span> <span m=''3050830''>I</span>
  <span m=''3050970''>do</span> <span m=''3051110''>a</span> <span m=''3051250''>lot.</span>
  <span m=''3051400''>I</span> <span m=''3051510''>created</span> <span m=''3051940''>this</span>
  <span m=''3052080''>large</span> <span m=''3052405''>struct,</span> <span m=''3052730''>and</span>
  <span m=''3052850''>I am</span> <span m=''3053410''>[UNINTELLIGIBLE]</span> <span
  m=''3055910''>things</span> <span m=''3056160''>in</span> <span m=''3056230''>the</span>
  <span m=''3056310''>struct,</span> <span m=''3056970''>and</span> <span m=''3057200''>I</span>
  <span m=''3057550''>just</span> <span m=''3057790''>basically</span> <span m=''3058120''>looking</span>
  <span m=''3058400''>at</span> <span m=''3058510''>my</span> <span m=''3058640''>data.</span>
  <span m=''3060750''>Only one</span> <span m=''3061160''>element.</span> <span m=''3062310''>What''s</span>
  <span m=''3062550''>the</span> <span m=''3062610''>problem</span> <span m=''3062980''>here?</span>
  </p><p><span m=''3078420''>AUDIENCE: [INAUDIBLE]</span> </p><p><span m=''3082340''>PROFESSOR:
  Exactly,</span> <span m=''3082760''>so I</span> <span m=''3083230''>bring the</span>
  <span m=''3083700''>entire</span> <span m=''3084170''>cache line,</span> <span m=''3084840''>but</span>
  <span m=''3085000''>I''m</span> <span m=''3085180''>only</span> <span m=''3085290''>using</span>
  <span m=''3085640''>a</span> <span m=''3085670''>little</span> <span m=''3085990''>bit</span>
  <span m=''3086150''>of</span> <span m=''3086280''>it.</span> <span m=''3087220''>Because</span>
  <span m=''3087990''>I</span> <span m=''3088180''>bring</span> <span m=''3088340''>all</span>
  <span m=''3088590''>these</span> <span m=''3088830''>things</span> <span m=''3089380''>into</span>
  <span m=''3089400''>the</span> <span m=''3089520''>cache,</span> <span m=''3089940''>it</span>
  <span m=''3090120''>comes</span> <span m=''3090390''>with</span> <span m=''3091060''>axis</span>
  <span m=''3091400''>and</span> <span m=''3091490''>that,</span> <span m=''3091870''>but</span>
  <span m=''3092070''>I''m</span> <span m=''3092250''>only</span> <span m=''3092420''>using</span>
  <span m=''3092670''>data.</span> <span m=''3093260''>So</span> <span m=''3093410''>basically,</span>
  <span m=''3093960''>what</span> <span m=''3094180''>happens</span> <span m=''3094600''>is,</span>
  <span m=''3095050''>if</span> <span m=''3095180''>everything</span> <span m=''3095580''>in</span>
  <span m=''3095670''>the</span> <span m=''3095780''>cache,</span> <span m=''3096630''>I</span>
  <span m=''3096720''>have</span> <span m=''3096900''>access</span> <span m=''3097180''>time</span>
  <span m=''3097260''>S.</span> <span m=''3097840''>That''s</span> <span m=''3098070''>great.</span>
  <span m=''3098440''>That''s</span> <span m=''3098840''>not</span> <span m=''3099030''>a</span>
  <span m=''3099230''>problem,</span> <span m=''3100020''>[UNINTELLIGIBLE]</span>
  <span m=''3100990''>streaming.</span> </p><p><span m=''3104990''>Even</span> <span
  m=''3105290''>though</span> <span m=''3105450''>I''m</span> <span m=''3105790''>getting</span>
  <span m=''3106740''>spatial</span> <span m=''3107070''>locality,</span> <span m=''3107410''>I</span>
  <span m=''3107590''>only</span> <span m=''3107780''>get</span> <span m=''3107920''>half</span>
  <span m=''3108180''>of it</span> <span m=''3109040''>because</span> <span m=''3109410''>even</span>
  <span m=''3109650''>though</span> <span m=''3109740''>I''m</span> <span m=''3109910''>bringing</span>
  <span m=''3110190''>the</span> <span m=''3110270''>cache</span> <span m=''3110590''>line,</span>
  <span m=''3110810''>only</span> <span m=''3111250''>two</span> <span m=''3111550''>have</span>
  <span m=''3112030''>datas</span> <span m=''3112310''>because</span> <span m=''3112620''>this
  is</span> <span m=''3112720''>32</span> <span m=''3113570''>bytes</span> <span m=''3114010''>long.</span>
  <span m=''3114630''>It''s</span> <span m=''3114740''>in</span> <span m=''3114870''>my</span>
  <span m=''3115040''>cache.</span> <span m=''3117150''>Even</span> <span m=''3117300''>though</span>
  <span m=''3117520''>I am</span> <span m=''3117900''>bringing</span> <span m=''3120490''>all</span>
  <span m=''3120690''>this</span> <span m=''3120850''>data,</span> <span m=''3121130''>I</span>
  <span m=''3121210''>only</span> <span m=''3121450''>two of</span> <span m=''3121730''>them</span>
  <span m=''3121910''>in</span> <span m=''3122020''>the</span> <span m=''3122110''>cache</span>
  <span m=''3122400''>because</span> <span m=''3123050''>rest</span> <span m=''3123560''>of</span>
  <span m=''3123660''>this</span> <span m=''3123800''>other</span> <span m=''3124020''>data</span>
  <span m=''3124240''>is</span> <span m=''3124350''>kind</span> <span m=''3124520''>of</span>
  <span m=''3124600''>hanging</span> <span m=''3125350''>in</span> <span m=''3125530''>there</span>
  <span m=''3125750''>with me,</span> <span m=''3126440''>and</span> <span m=''3126650''>so</span>
  <span m=''3126730''>I</span> <span m=''3126800''>don''t</span> <span m=''3126990''>get</span>
  <span m=''3127150''>that.</span> <span m=''3127370''>And</span> <span m=''3127480''>random,</span>
  <span m=''3127850''>of course,</span> <span m=''3128280''>you</span> <span m=''3128350''>have</span>
  <span m=''3129480''>no</span> <span m=''3129730''>locality.</span> </p><p><span
  m=''3130610''>So</span> <span m=''3130750''>how</span> <span m=''3131160''>can</span>
  <span m=''3131430''>I</span> <span m=''3131590''>basically</span> <span m=''3132320''>make</span>
  <span m=''3132630''>this</span> <span m=''3132820''>better?</span> <span m=''3136010''>How</span>
  <span m=''3136230''>can</span> <span m=''3136400''>I</span> <span m=''3136450''>make</span>
  <span m=''3136680''>this</span> <span m=''3136850''>better?</span> <span m=''3137010''>OK,</span>
  <span m=''3137510''>I</span> <span m=''3137600''>just</span> <span m=''3137780''>showed</span>
  <span m=''3138020''>it</span> <span m=''3138060''>very</span> <span m=''3138230''>fast.</span>
  <span m=''3139520''>OK.</span> </p><p><span m=''3140263''>AUDIENCE: [INAUDIBLE]</span>
  </p><p><span m=''3143510''>PROFESSOR: So</span> <span m=''3143670''>instead,</span>
  <span m=''3144210''>if</span> <span m=''3144360''>I</span> <span m=''3144430''>ask</span>
  <span m=''3144710''>you,</span> <span m=''3145120''>I</span> <span m=''3145290''>have</span>
  <span m=''3145470''>this</span> <span m=''3146020''>large</span> <span m=''3146350''>data</span>
  <span m=''3146610''>structure,</span> <span m=''3147780''>but</span> <span m=''3148070''>most</span>
  <span m=''3148380''>of</span> <span m=''3148490''>time,</span> <span m=''3148730''>I''m</span>
  <span m=''3148890''>only</span> <span m=''3149100''>accessing</span> <span m=''3149510''>a</span>
  <span m=''3149560''>small</span> <span m=''3149910''>part</span> <span m=''3150170''>of</span>
  <span m=''3150300''>it,</span> <span m=''3152650''>this</span> <span m=''3152840''>is</span>
  <span m=''3152990''>kind</span> <span m=''3153270''>of</span> <span m=''3154600''>a
  little bit</span> <span m=''3155090''>of a hack.</span> <span m=''3156040''>I</span>
  <span m=''3156150''>mean,</span> <span m=''3156340''>this</span> <span m=''3156500''>is</span>
  <span m=''3156770''>kind</span> <span m=''3156980''>of</span> <span m=''3157070''>going</span>
  <span m=''3157320''>against,</span> <span m=''3157830''>I</span> <span m=''3157880''>guess</span>
  <span m=''3158160''>6005</span> <span m=''3159980''>kind</span> <span m=''3160170''>of</span>
  <span m=''3160370''>building,</span> <span m=''3161140''>but this</span> <span m=''3161640''>actually
  works.</span> <span m=''3162120''>What</span> <span m=''3162550''>you</span> <span
  m=''3162700''>can</span> <span m=''3162860''>do</span> <span m=''3163020''>is,</span>
  <span m=''3163190''>you</span> <span m=''3163310''>can</span> <span m=''3163480''>go</span>
  <span m=''3163670''>back</span> <span m=''3164370''>and</span> <span m=''3164610''>instead</span>
  <span m=''3164930''>of</span> <span m=''3165280''>doing</span> <span m=''3165700''>structs,</span>
  <span m=''3166440''>what</span> <span m=''3166590''>you</span> <span m=''3166750''>can</span>
  <span m=''3166910''>do</span> <span m=''3167030''>is</span> <span m=''3167130''>you</span>
  <span m=''3167240''>can do</span> <span m=''3167570''>arrays</span> <span m=''3168010''>of</span>
  <span m=''3168130''>each</span> <span m=''3168350''>data</span> <span m=''3168650''>item.</span>
  <span m=''3171040''>And</span> <span m=''3171270''>now</span> <span m=''3171520''>what</span>
  <span m=''3171700''>happens</span> <span m=''3172010''>is</span> <span m=''3172170''>that</span>
  <span m=''3172350''>I</span> <span m=''3172490''>am</span> <span m=''3172710''>basically</span>
  <span m=''3173070''>bringing</span> <span m=''3173500''>these,</span> <span m=''3173750''>and</span>
  <span m=''3173950''>then</span> <span m=''3174090''>the</span> <span m=''3174290''>data</span>
  <span m=''3174555''>I</span> <span m=''3174820''>am</span> <span m=''3174910''>accessing</span>
  <span m=''3175190''>is</span> <span m=''3175460''>basically</span> <span m=''3175890''>right</span>
  <span m=''3176050''>now</span> <span m=''3176210''>next</span> <span m=''3176470''>to</span>
  <span m=''3176520''>each</span> <span m=''3176690''>other.</span> </p><p><span m=''3179700''>So</span>
  <span m=''3179840''>you</span> <span m=''3179910''>might</span> <span m=''3180120''>have</span>
  <span m=''3180370''>this</span> <span m=''3180900''>very</span> <span m=''3181740''>large</span>
  <span m=''3182050''>data</span> <span m=''3182300''>structure</span> <span m=''3182660''>representing</span>
  <span m=''3183200''>something</span> <span m=''3183470''>you have</span> <span m=''3183580''>a
  lot</span> <span m=''3183860''>of,</span> <span m=''3183980''>then.</span> <span
  m=''3184880''>But</span> <span m=''3185180''>most</span> <span m=''3185470''>of</span>
  <span m=''3185520''>the</span> <span m=''3185580''>time,</span> <span m=''3185780''>you''re</span>
  <span m=''3185860''>only</span> <span m=''3186140''>using</span> <span m=''3186830''>few</span>
  <span m=''3187010''>of</span> <span m=''3187150''>them,</span> <span m=''3187350''>so</span>
  <span m=''3187480''>you</span> <span m=''3187720''>don''t</span> <span m=''3187870''>have</span>
  <span m=''3188030''>to</span> <span m=''3188100''>be</span> <span m=''3188220''>structs</span>
  <span m=''3188360''>of</span> <span m=''3188710''>arrays.</span> <span m=''3189050''>You</span>
  <span m=''3189150''>might</span> <span m=''3189380''>have</span> <span m=''3190530''>couple</span>
  <span m=''3190770''>of</span> <span m=''3190880''>different</span> <span m=''3191170''>data</span>
  <span m=''3191400''>structures.</span> </p><p><span m=''3191930''>One</span> <span
  m=''3192190''>is</span> <span m=''3192370''>the</span> <span m=''3192490''>one</span>
  <span m=''3192670''>that</span> <span m=''3192800''>you</span> <span m=''3192940''>access</span>
  <span m=''3193440''>regularly</span> <span m=''3194630''>hopefully</span> <span
  m=''3194720''>you</span> <span m=''3195180''>get</span> <span m=''3195370''>them</span>
  <span m=''3195480''>next</span> <span m=''3195660''>to</span> <span m=''3195710''>each</span>
  <span m=''3195850''>other.</span> <span m=''3196460''>And</span> <span m=''3196650''>the</span>
  <span m=''3196780''>nice</span> <span m=''3196950''>thing</span> <span m=''3197190''>about</span>
  <span m=''3197430''>arrays</span> <span m=''3197685''>is</span> <span m=''3197940''>it
  guarantees</span> <span m=''3198310''>things</span> <span m=''3198635''>are</span>
  <span m=''3198960''>next to</span> <span m=''3199010''>each</span> <span m=''3199160''>other.</span>
  <span m=''3199220''>Of course,</span> <span m=''3199390''>was</span> <span m=''3199600''>managing</span>
  <span m=''3200060''>it</span> <span m=''3200170''>is</span> <span m=''3200280''>harder.</span>
  </p><p><span m=''3201144''>AUDIENCE: [UNINTELLIGIBLE]</span> </p><p><span m=''3206358''>PROFESSOR:
  You can</span> <span m=''3206840''>do both.</span> <span m=''3207275''>So</span>
  <span m=''3207710''>that</span> <span m=''3207950''>means</span> <span m=''3208350''>instead</span>
  <span m=''3208590''>of</span> <span m=''3208800''>doing</span> <span m=''3208950''>the</span>
  <span m=''3209130''>structs,</span> <span m=''3209390''>you</span> <span m=''3209620''>use</span>
  <span m=''3209870''>arrays</span> <span m=''3210090''>of</span> <span m=''3210260''>each</span>
  <span m=''3210470''>field.</span> </p><p><span m=''3212440''>AUDIENCE: [INAUDIBLE]</span>
  </p><p><span m=''3213405''>PROFESSOR: Instead</span> <span m=''3213700''>of.</span>
  <span m=''3214495''>So</span> <span m=''3214760''>instead</span> <span m=''3215130''>of</span>
  <span m=''3215250''>doing</span> <span m=''3215480''>this</span> <span m=''3215680''>one,</span>
  <span m=''3216110''>you</span> <span m=''3216230''>just</span> <span m=''3216400''>do</span>
  <span m=''3216500''>this</span> <span m=''3216750''>one.</span> </p><p><span m=''3217249''>AUDIENCE:
  [INAUDIBLE]</span> <span m=''3218247''>instead of</span> <span m=''3218746''>being
  able to</span> <span m=''3219245''>pass</span> <span m=''3219744''>stuff over.</span>
  <span m=''3221740''>Now you</span> <span m=''3222239''>have to</span> <span m=''3222740''>kind
  of</span> <span m=''3223120''>be</span> <span m=''3223500''>able</span> <span m=''3223905''>to</span>
  <span m=''3224310''>know</span> <span m=''3224560''>[UNINTELLIGIBLE],</span> <span
  m=''3225013''>so</span> <span m=''3225920''>what</span> <span m=''3226080''>that</span>
  <span m=''3226240''>is</span> <span m=''3226510''>where</span> <span m=''3226780''>because</span>
  <span m=''3227211''>you cannot</span> <span m=''3227642''>just pass</span> <span
  m=''3228073''>the struct</span> <span m=''3228504''>[UNINTELLIGIBLE].</span> </p><p><span
  m=''3229370''>PROFESSOR: No,</span> <span m=''3229480''>you can''t</span> <span
  m=''3229745''>pass</span> <span m=''3230010''>the</span> <span m=''3230170''>struct.</span>
  <span m=''3230410''>You</span> <span m=''3230520''>basically</span> <span m=''3230900''>have</span>
  <span m=''3231040''>to</span> <span m=''3231190''>pad</span> <span m=''3231420''>the</span>
  <span m=''3231550''>index</span> <span m=''3231810''>in here</span> <span m=''3232330''>for</span>
  <span m=''3232420''>this</span> <span m=''3232500''>structure,</span> <span m=''3232910''>basically.</span>
  <span m=''3233500''>So</span> <span m=''3233630''>you</span> <span m=''3233720''>have</span>
  <span m=''3233820''>to</span> <span m=''3233920''>know</span> <span m=''3234080''>something</span>
  <span m=''3234460''>in</span> <span m=''3234530''>there.</span> </p><p><span m=''3234660''>So</span>
  <span m=''3234740''>this</span> <span m=''3234910''>is</span> <span m=''3235680''>a
  lot</span> <span m=''3236140''>messier,</span> <span m=''3237060''>but</span> <span
  m=''3237740''>it can</span> <span m=''3238040''>actually</span> <span m=''3238530''>give
  you a</span> <span m=''3238870''>performance</span> <span m=''3239390''>if</span>
  <span m=''3239530''>you</span> <span m=''3239670''>do</span> <span m=''3239810''>this</span>
  <span m=''3239980''>type</span> <span m=''3240160''>of</span> <span m=''3240290''>access,</span>
  <span m=''3240590''>so</span> <span m=''3240720''>it''s</span> <span m=''3240850''>not</span>
  <span m=''3240990''>something</span> <span m=''3241250''>you</span> <span m=''3241320''>want</span>
  <span m=''3241490''>everywhere.</span> <span m=''3241920''>That''s</span> <span
  m=''3242110''>why</span> <span m=''3242930''>you</span> <span m=''3243110''>still</span>
  <span m=''3243370''>want</span> <span m=''3243550''>to use</span> <span m=''3243710''>structures</span>
  <span m=''3244260''>and</span> <span m=''3244340''>nice</span> <span m=''3246130''>classes</span>
  <span m=''3246520''>and</span> <span m=''3246630''>stuff.</span> <span m=''3246830''>But
  this,</span> <span m=''3247790''>if</span> <span m=''3247960''>you''re</span> <span
  m=''3248100''>doing</span> <span m=''3248900''>very</span> <span m=''3249140''>large</span>
  <span m=''3250310''>data,</span> <span m=''3250930''>but</span> <span m=''3251180''>most</span>
  <span m=''3251330''>of</span> <span m=''3251480''>the</span> <span m=''3251580''>you''re</span>
  <span m=''3252090''>accessing</span> <span m=''3252380''>only</span> <span m=''3252440''>small</span>
  <span m=''3252740''>amount,</span> <span m=''3253380''>this</span> <span m=''3253610''>kind</span>
  <span m=''3253840''>of</span> <span m=''3253910''>representation</span> <span m=''3254400''>can</span>
  <span m=''3254826''>help.</span> </p><p><span m=''3257750''>So</span> <span m=''3257890''>I</span>
  <span m=''3257970''>want</span> <span m=''3258140''>to</span> <span m=''3258180''>get</span>
  <span m=''3258380''>a little</span> <span m=''3258570''>bit</span> <span m=''3258810''>into</span>
  <span m=''3258870''>matrix</span> <span m=''3259170''>multiplying.</span> <span
  m=''3260850''>So</span> <span m=''3261300''>what</span> <span m=''3261470''>we''re</span>
  <span m=''3261610''>looking</span> <span m=''3262010''>at</span> <span m=''3262530''>is</span>
  <span m=''3264250''>this</span> <span m=''3264610''>four</span> <span m=''3264780''>by</span>
  <span m=''3264920''>four</span> <span m=''3265080''>matrix,</span> <span m=''3265940''>and</span>
  <span m=''3266420''>you</span> <span m=''3266520''>can</span> <span m=''3266780''>represent</span>
  <span m=''3267280''>it</span> <span m=''3267650''>using</span> <span m=''3268810''>this</span>
  <span m=''3269040''>representation.</span> <span m=''3269730''>But</span> <span
  m=''3269930''>to</span> <span m=''3270390''>make</span> <span m=''3270690''>it</span>
  <span m=''3271410''>clear,</span> <span m=''3272040''>what</span> <span m=''3272260''>I''m</span>
  <span m=''3272390''>going</span> <span m=''3272490''>to</span> <span m=''3272590''>do</span>
  <span m=''3272680''>is</span> <span m=''3272810''>I''m just</span> <span m=''3272950''>going</span>
  <span m=''3273150''>to</span> <span m=''3273350''>allocate</span> <span m=''3273680''>this</span>
  <span m=''3273860''>entire</span> <span m=''3274210''>thing</span> <span m=''3274410''>as</span>
  <span m=''3274480''>a</span> <span m=''3274560''>single</span> <span m=''3274900''>array,</span>
  <span m=''3275210''>and</span> <span m=''3275480''>I''m</span> <span m=''3275650''>going</span>
  <span m=''3275860''>to</span> <span m=''3275930''>do</span> <span m=''3276210''>that</span>
  <span m=''3276430''>[UNINTELLIGIBLE]</span> <span m=''3276600''>calculation</span>
  <span m=''3277100''>myself</span> <span m=''3279050''>because</span> <span m=''3280860''>if</span>
  <span m=''3281140''>you</span> <span m=''3281330''>go</span> <span m=''3281615''>a
  little</span> <span m=''3281900''>bit</span> <span m=''3282030''>down,</span> <span
  m=''3282290''>you</span> <span m=''3282510''>realize</span> <span m=''3283080''>this</span>
  <span m=''3283280''>is</span> <span m=''3284070''>allocated</span> <span m=''3284430''>in
  a</span> <span m=''3284750''>little bit</span> <span m=''3285060''>of a</span> <span
  m=''3285210''>weird</span> <span m=''3285400''>way.</span> </p><p><span m=''3286910''>And</span>
  <span m=''3287920''>so</span> <span m=''3288670''>this</span> <span m=''3288960''>is</span>
  <span m=''3289120''>what</span> <span m=''3289310''>we</span> <span m=''3289460''>call</span>
  <span m=''3289910''>row-major</span> <span m=''3290760''>because</span> <span m=''3290990''>all</span>
  <span m=''3291440''>rows</span> <span m=''3291880''>are</span> <span m=''3292040''>next</span>
  <span m=''3292230''>to</span> <span m=''3292290''>each</span> <span m=''3292460''>other,</span>
  <span m=''3293030''>and</span> <span m=''3293200''>you</span> <span m=''3293300''>can</span>
  <span m=''3293460''>access</span> <span m=''3293980''>allocated</span> <span m=''3294670''>column-major.</span>
  <span m=''3295870''>Basically</span> <span m=''3296630''>that</span> <span m=''3296850''>means</span>
  <span m=''3297850''>now</span> <span m=''3298020''>A001,</span> <span m=''3299290''>instead</span>
  <span m=''3299630''>of</span> <span m=''3299710''>that,</span> <span m=''3299870''>1,
  0</span> <span m=''3300390''>is</span> <span m=''3300610''>next</span> <span m=''3300790''>to</span>
  <span m=''3301900''>0, 0,</span> <span m=''3302680''>1, 0,</span> <span m=''3303220''>2,
  0.</span> <span m=''3304180''>And</span> <span m=''3304390''>then</span> <span m=''3304570''>basically</span>
  <span m=''3305060''>saying</span> <span m=''3305440''>same</span> <span m=''3306380''>thing,</span>
  <span m=''3306620''>[UNINTELLIGIBLE]</span> <span m=''3306860''>instead</span> <span
  m=''3307060''>of</span> <span m=''3307150''>saying</span> <span m=''3307320''>4i</span>
  <span m=''3307730''>plus</span> <span m=''3308060''>j,</span> <span m=''3308420''>it''s
  just</span> <span m=''3308530''>4j</span> <span m=''3308820''>plus</span> <span
  m=''3309220''>i.</span> <span m=''3310230''>You</span> <span m=''3310380''>can</span>
  <span m=''3310540''>do</span> <span m=''3310630''>both.</span> <span m=''3312340''>So</span>
  <span m=''3312530''>this</span> <span m=''3312740''>is</span> <span m=''3312910''>my</span>
  <span m=''3314450''>nice</span> <span m=''3315170''>matrix</span> <span m=''3315520''>multiply</span>
  <span m=''3317680''>function,</span> <span m=''3318060''>because</span> <span m=''3318300''>the</span>
  <span m=''3318460''>reason</span> <span m=''3319010''>I</span> <span m=''3319070''>did
  it</span> <span m=''3319320''>this way,</span> <span m=''3319500''>it''s just</span>
  <span m=''3319780''>very</span> <span m=''3320020''>clear</span> <span m=''3320540''>how</span>
  <span m=''3320680''>many</span> <span m=''3320810''>axis</span> <span m=''3321240''>I''m</span>
  <span m=''3321320''>going</span> <span m=''3321540''>to</span> <span m=''3321610''>use.</span>
  </p><p><span m=''3323810''>So</span> <span m=''3323950''>if</span> <span m=''3324110''>you</span>
  <span m=''3324280''>look</span> <span m=''3324480''>at</span> <span m=''3326430''>C,</span>
  <span m=''3327390''>let''s</span> <span m=''3327870''>look at</span> <span m=''3328130''>only</span>
  <span m=''3328460''>the inner</span> <span m=''3328620''>loop.</span> <span m=''3328920''>Most</span>
  <span m=''3329220''>of</span> <span m=''3329280''>the</span> <span m=''3329460''>mapping</span>
  <span m=''3329830''>matters</span> <span m=''3330270''>in</span> <span m=''3330410''>the
  inner</span> <span m=''3330510''>loop.</span> <span m=''3330780''>I</span> <span
  m=''3330850''>go</span> <span m=''3331040''>for</span> <span m=''3331290''>k</span>
  <span m=''3332260''>in</span> <span m=''3333010''>0</span> <span m=''3333790''>to</span>
  <span m=''3334190''>size.</span> <span m=''3335820''>Only</span> <span m=''3336150''>first</span>
  <span m=''3336510''>axis</span> <span m=''3336900''>on</span> <span m=''3336970''>C</span>
  <span m=''3337480''>is</span> <span m=''3337640''>going</span> <span m=''3337770''>to</span>
  <span m=''3337900''>miss</span> <span m=''3339470''>because</span> <span m=''3340320''>it''s</span>
  <span m=''3340460''>going</span> <span m=''3340690''>up</span> <span m=''3340830''>[UNINTELLIGIBLE]</span>
  <span m=''3341060''>same</span> <span m=''3341340''>K,</span> <span m=''3341710''>da-da-da-da-da,</span>
  <span m=''3342240''>so</span> <span m=''3342430''>C is</span> <span m=''3342810''>very</span>
  <span m=''3342970''>nice</span> <span m=''3343220''>in here.</span> <span m=''3344050''>Only</span>
  <span m=''3344260''>get</span> <span m=''3344410''>one</span> <span m=''3344700''>miss</span>
  <span m=''3345020''>in here.</span> </p><p><span m=''3345330''>You have a</span>
  <span m=''3345440''>question?</span> <span m=''3346273''>OK.</span> <span m=''3347120''>A</span>
  <span m=''3348020''>has a</span> <span m=''3348280''>streaming</span> <span m=''3348790''>pattern</span>
  <span m=''3349360''>because</span> <span m=''3349750''>every</span> <span m=''3350070''>time</span>
  <span m=''3350310''>I</span> <span m=''3350430''>update</span> <span m=''3350860''>K,</span>
  <span m=''3351680''>I</span> <span m=''3351790''>go</span> <span m=''3351960''>to</span>
  <span m=''3352030''>the</span> <span m=''3352200''>next</span> <span m=''3352370''>element,</span>
  <span m=''3352860''>next element,</span> <span m=''3353300''>next</span> <span m=''3353360''>element,</span>
  <span m=''3353630''>next element.</span> <span m=''3355360''>[INAUDIBLE].</span>
  <span m=''3357090''>What</span> <span m=''3357330''>type</span> <span m=''3357510''>of</span>
  <span m=''3357630''>a</span> <span m=''3357680''>pattern</span> <span m=''3358050''>do
  I</span> <span m=''3358180''>have in</span> <span m=''3358490''>B?</span> </p><p><span
  m=''3359828''>AUDIENCE: Looks like</span> <span m=''3360274''>[INAUDIBLE].</span>
  </p><p><span m=''3361510''>PROFESSOR: Yeah,</span> <span m=''3361790''>exactly.</span>
  <span m=''3361970''>I have</span> <span m=''3362150''>jumping</span> <span m=''3362560''>on</span>
  <span m=''3362670''>memory.</span> <span m=''3363270''>I''m</span> <span m=''3363460''>jumping</span>
  <span m=''3363890''>one</span> <span m=''3364060''>to</span> <span m=''3364170''>another.</span>
  </p><p><span m=''3364510''>So</span> <span m=''3364680''>if</span> <span m=''3364830''>you</span>
  <span m=''3364980''>look</span> <span m=''3365140''>at</span> <span m=''3365310''>that,</span>
  <span m=''3365530''>I</span> <span m=''3365580''>am</span> <span m=''3366290''>going</span>
  <span m=''3366460''>through</span> <span m=''3366770''>A</span> <span m=''3366990''>like</span>
  <span m=''3367220''>that,</span> <span m=''3367400''>and</span> <span m=''3367590''>B,</span>
  <span m=''3368200''>and</span> <span m=''3368680''>going</span> <span m=''3368800''>through</span>
  <span m=''3369070''>C</span> <span m=''3369320''>element</span> <span m=''3369540''>at</span>
  <span m=''3369640''>a</span> <span m=''3369680''>time,</span> <span m=''3369920''>basically.</span>
  <span m=''3371730''>So</span> <span m=''3371860''>if</span> <span m=''3372010''>you</span>
  <span m=''3372120''>look</span> <span m=''3372310''>at</span> <span m=''3372830''>doing</span>
  <span m=''3373210''>this</span> <span m=''3373450''>in</span> <span m=''3373700''>order</span>
  <span m=''3374010''>to</span> <span m=''3374140''>calculate</span> <span m=''3374960''>one</span>
  <span m=''3375360''>element</span> <span m=''3375790''>of</span> <span m=''3375940''>A,</span>
  <span m=''3376880''>[INAUDIBLE]</span> <span m=''3377270''>calculating</span> <span
  m=''3377645''>these,</span> <span m=''3378410''>what</span> <span m=''3378630''>you</span>
  <span m=''3378710''>have</span> <span m=''3378800''>to</span> <span m=''3378890''>do</span>
  <span m=''3379050''>is</span> <span m=''3379210''>I am</span> <span m=''3379430''>getting</span>
  <span m=''3379760''>B</span> <span m=''3380010''>and</span> <span m=''3380180''>C</span>
  <span m=''3380350''>this</span> <span m=''3380590''>way.</span> <span m=''3381850''>I''m</span>
  <span m=''3382050''>going</span> <span m=''3382220''>through</span> <span m=''3382400''>row</span>
  <span m=''3382810''>here</span> <span m=''3383220''>and</span> <span m=''3383390''>column,</span>
  <span m=''3384100''>and</span> <span m=''3384330''>this row</span> <span m=''3384820''>[UNINTELLIGIBLE]</span>
  <span m=''3385500''>fit</span> <span m=''3385650''>into</span> <span m=''3385700''>the</span>
  <span m=''3385820''>cache</span> <span m=''3386140''>line</span> <span m=''3386390''>through</span>
  <span m=''3386580''>that</span> <span m=''3386905''>because</span> <span m=''3387230''>this</span>
  <span m=''3387400''>is</span> <span m=''3387510''>the</span> <span m=''3387590''>memory.</span>
  <span m=''3388230''>But</span> <span m=''3388630''>C</span> <span m=''3388850''>is</span>
  <span m=''3389070''>just</span> <span m=''3389290''>jumping</span> <span m=''3390060''>all
  over</span> <span m=''3390500''>the</span> <span m=''3390630''>memory,</span> <span
  m=''3390960''>and I</span> <span m=''3391350''>have</span> <span m=''3391850''>no</span>
  <span m=''3391970''>locality</span> <span m=''3392330''>in here.</span> </p><p><span
  m=''3394200''>So</span> <span m=''3394390''>what</span> <span m=''3394690''>can</span>
  <span m=''3394830''>we</span> <span m=''3394930''>do</span> <span m=''3395150''>here?</span>
  <span m=''3396490''>What''s</span> <span m=''3396730''>the</span> <span m=''3396800''>simplest</span>
  <span m=''3397400''>thing</span> <span m=''3397655''>in here?</span> <span m=''3398290''>How</span>
  <span m=''3398500''>do we</span> <span m=''3398630''>get</span> <span m=''3398800''>some</span>
  <span m=''3398970''>locality</span> <span m=''3399320''>into</span> <span m=''3399490''>the</span>
  <span m=''3399600''>C?</span> </p><p><span m=''3406166''>AUDIENCE: [INAUDIBLE]</span>
  </p><p><span m=''3408360''>PROFESSOR: So yeah,</span> <span m=''3408460''>you''re</span>
  <span m=''3408920''>coming,</span> <span m=''3409250''>you''re</span> <span m=''3409790''>getting</span>
  <span m=''3410170''>it.</span> <span m=''3411050''>That''s</span> <span m=''3411250''>the</span>
  <span m=''3411630''>next</span> <span m=''3411850''>thing</span> <span m=''3412350''>that''s</span>
  <span m=''3412570''>most</span> <span m=''3412710''>important.</span> <span m=''3413170''>That''s</span>
  <span m=''3413280''>the</span> <span m=''3413390''>more</span> <span m=''3413560''>advanced</span>
  <span m=''3413920''>thing you</span> <span m=''3414330''>can do.</span> <span m=''3414460''>We''ll</span>
  <span m=''3414570''>get</span> <span m=''3414790''>there.</span> <span m=''3415280''>What</span>
  <span m=''3415500''>was</span> <span m=''3415730''>a</span> <span m=''3415780''>simple</span>
  <span m=''3416090''>thing</span> <span m=''3416220''>you</span> <span m=''3416330''>can</span>
  <span m=''3416450''>do</span> <span m=''3416670''>for C?</span> </p><p><span m=''3418298''>AUDIENCE:
  [INAUDIBLE]</span> </p><p><span m=''3419130''>PROFESSOR: [UNINTELLIGIBLE]</span>
  <span m=''3422540''>So</span> <span m=''3422710''>here''s</span> <span m=''3422980''>the</span>
  <span m=''3423240''>[UNINTELLIGIBLE]</span> <span m=''3423630''>execution</span>
  <span m=''3424250''>time,</span> <span m=''3425070''>original,</span> <span m=''3426050''>and</span>
  <span m=''3426340''>voila,</span> <span m=''3426640''>when</span> <span m=''3426780''>you</span>
  <span m=''3426890''>transpose</span> <span m=''3427440''>that,</span> <span m=''3427930''>you</span>
  <span m=''3428050''>can</span> <span m=''3428200''>actually</span> <span m=''3428460''>get</span>
  <span m=''3428690''>a</span> <span m=''3428920''>huge</span> <span m=''3429490''>benefit
  in</span> <span m=''3429865''>here</span> <span m=''3430530''>because,</span> <span
  m=''3430830''>now,</span> <span m=''3431170''>I</span> <span m=''3431280''>get</span>
  <span m=''3432390''>spatial</span> <span m=''3432710''>locality</span> <span m=''3433020''>in</span>
  <span m=''3433150''>both</span> <span m=''3433350''>sides</span> <span m=''3433610''>in
  here.</span> <span m=''3434950''>And</span> <span m=''3435140''>so</span> <span
  m=''3435240''>now</span> <span m=''3435340''>when</span> <span m=''3435440''>you''re</span>
  <span m=''3435640''>transposed,</span> <span m=''3436220''>I am</span> <span m=''3436360''>going</span>
  <span m=''3436570''>through</span> <span m=''3436690''>like</span> <span m=''3436970''>this.</span>
  </p><p><span m=''3438630''>So</span> <span m=''3439060''>now</span> <span m=''3439230''>what</span>
  <span m=''3439410''>I</span> <span m=''3439520''>did</span> <span m=''3439750''>was</span>
  <span m=''3440100''>I</span> <span m=''3440270''>am</span> <span m=''3440670''>giving</span>
  <span m=''3440820''>this</span> <span m=''3440940''>CPI,</span> <span m=''3441960''>and</span>
  <span m=''3442310''>what</span> <span m=''3442500''>happens is</span> <span m=''3442900''>when</span>
  <span m=''3443030''>you</span> <span m=''3443130''>transpose,</span> <span m=''3443630''>I</span>
  <span m=''3443770''>have</span> <span m=''3444100''>a</span> <span m=''3444160''>5x</span>
  <span m=''3444680''>improvement</span> <span m=''3445250''>in</span> <span m=''3445450''>sync</span>
  <span m=''3445670''>CPI.</span> <span m=''3446020''>That</span> <span m=''3446210''>means</span>
  <span m=''3446680''>instructions</span> <span m=''3447360''>actually</span> <span
  m=''3447810''>not</span> <span m=''3448050''>waiting,</span> <span m=''3448390''>not</span>
  <span m=''3448570''>doing</span> <span m=''3448770''>nothing.</span> <span m=''3449460''>I</span>
  <span m=''3449630''>have</span> <span m=''3449770''>a</span> <span m=''3449820''>pretty</span>
  <span m=''3450150''>good</span> <span m=''3453420''>reduce</span> <span m=''3453660''>of</span>
  <span m=''3453880''>cache</span> <span m=''3454250''>misread.</span> <span m=''3454900''>because,</span>
  <span m=''3455200''>now,</span> <span m=''3455550''>I''m</span> <span m=''3455810''>actually</span>
  <span m=''3456080''>going</span> <span m=''3456340''>through</span> <span m=''3456490''>cache</span>
  <span m=''3456800''>very</span> <span m=''3456900''>nicely.</span> </p><p><span
  m=''3458640''>So</span> <span m=''3458810''>the</span> <span m=''3458900''>next</span>
  <span m=''3459210''>thing</span> <span m=''3459360''>we</span> <span m=''3459530''>can</span>
  <span m=''3459750''>do</span> <span m=''3459850''>is,</span> <span m=''3460550''>what</span>
  <span m=''3460750''>she</span> <span m=''3460890''>just</span> <span m=''3461090''>pointed</span>
  <span m=''3461400''>out,</span> <span m=''3461590''>blocking.</span> <span m=''3462420''>So</span>
  <span m=''3462630''>instead</span> <span m=''3462970''>of</span> <span m=''3463190''>matrix</span>
  <span m=''3463570''>multiply,</span> <span m=''3463990''>just</span> <span m=''3464230''>multiplying</span>
  <span m=''3464880''>this</span> <span m=''3465080''>matrix</span> <span m=''3465560''>at</span>
  <span m=''3465680''>a</span> <span m=''3465750''>time,</span> <span m=''3466000''>you</span>
  <span m=''3466140''>can</span> <span m=''3466290''>multiply</span> <span m=''3466740''>submatrices</span>
  <span m=''3468240''>and</span> <span m=''3468400''>calculate</span> <span m=''3468920''>small</span>
  <span m=''3469140''>submatrices.</span> <span m=''3470260''>And</span> <span m=''3470530''>if</span>
  <span m=''3470630''>you</span> <span m=''3470720''>do</span> <span m=''3470900''>that,</span>
  <span m=''3471080''>the</span> <span m=''3471170''>submatrix</span> <span m=''3471760''>can</span>
  <span m=''3472130''>nicely</span> <span m=''3472620''>fit</span> <span m=''3472860''>in</span>
  <span m=''3472950''>the</span> <span m=''3473040''>memory,</span> <span m=''3473320''>so</span>
  <span m=''3473420''>let</span> <span m=''3473550''>me</span> <span m=''3473690''>show</span>
  <span m=''3473870''>you</span> <span m=''3473970''>that.</span> <span m=''3474440''>This</span>
  <span m=''3474610''>is</span> <span m=''3474700''>the</span> <span m=''3474780''>blocking</span>
  <span m=''3475180''>code.</span> <span m=''3476510''>Let</span> <span m=''3476710''>me</span>
  <span m=''3477360''>show</span> <span m=''3477630''>you</span> <span m=''3477750''>what</span>
  <span m=''3477940''>that</span> <span m=''3478130''>means.</span> </p><p><span m=''3478780''>So</span>
  <span m=''3478960''>what</span> <span m=''3479150''>we are</span> <span m=''3479330''>doing</span>
  <span m=''3479670''>is</span> <span m=''3480080''>you</span> <span m=''3480260''>are</span>
  <span m=''3481120''>multiplying</span> <span m=''3481770''>this</span> <span m=''3481990''>matrix</span>
  <span m=''3482420''>by</span> <span m=''3482580''>this</span> <span m=''3482800''>matrix</span>
  <span m=''3483800''>in</span> <span m=''3483980''>there</span> <span m=''3484240''>and</span>
  <span m=''3484460''>getting</span> <span m=''3484710''>this</span> <span m=''3484880''>matrix.</span>
  <span m=''3486030''>So</span> <span m=''3486170''>what</span> <span m=''3486320''>that</span>
  <span m=''3486530''>means</span> <span m=''3486790''>is,</span> <span m=''3487040''>normally,</span>
  <span m=''3487610''>what</span> <span m=''3487820''>you</span> <span m=''3487940''>do</span>
  <span m=''3488140''>is,</span> <span m=''3489150''>to</span> <span m=''3489240''>get</span>
  <span m=''3489540''>one</span> <span m=''3489800''>element,</span> <span m=''3490020''>you</span>
  <span m=''3490160''>have</span> <span m=''3490350''>to</span> <span m=''3490430''>multiply</span>
  <span m=''3490580''>a row</span> <span m=''3490960''>and</span> <span m=''3491160''>a</span>
  <span m=''3491220''>column.</span> <span m=''3493490''>Normally,</span> <span m=''3493770''>we</span>
  <span m=''3494050''>are</span> <span m=''3494120''>calculating</span> <span m=''3494420''>a</span>
  <span m=''3494720''>row</span> <span m=''3495300''>of A</span> <span m=''3495580''>at
  a</span> <span m=''3495890''>time.</span> <span m=''3496200''>In</span> <span m=''3496380''>order</span>
  <span m=''3496520''>to</span> <span m=''3496580''>get</span> <span m=''3496730''>a
  row</span> <span m=''3496910''>of</span> <span m=''3497260''>A,</span> <span m=''3497490''>I</span>
  <span m=''3497580''>had</span> <span m=''3497730''>to</span> <span m=''3498710''>get</span>
  <span m=''3498850''>a</span> <span m=''3499830''>row of</span> <span m=''3500230''>B</span>
  <span m=''3500420''>[UNINTELLIGIBLE]</span> <span m=''3500860''>entire</span> <span
  m=''3501170''>C</span> <span m=''3501480''>has</span> <span m=''3501610''>to</span>
  <span m=''3501740''>participate</span> <span m=''3502240''>into</span> <span m=''3502460''>calculate</span>
  <span m=''3502890''>A.</span> <span m=''3504000''>So</span> <span m=''3504160''>by</span>
  <span m=''3504340''>the</span> <span m=''3504520''>time</span> <span m=''3504750''>I</span>
  <span m=''3504830''>have</span> <span m=''3505000''>calculated</span> <span m=''3505600''>1024</span>
  <span m=''3506480''>elements,</span> <span m=''3507270''>I</span> <span m=''3507470''>have</span>
  <span m=''3507680''>gone</span> <span m=''3508070''>through</span> <span m=''3508440''>this</span>
  <span m=''3508610''>many</span> <span m=''3509060''>axises</span> <span m=''3510045''>to</span>
  <span m=''3510360''>new</span> <span m=''3510590''>elements</span> <span m=''3511030''>basically</span>
  <span m=''3512020''>because</span> <span m=''3512150''>I am</span> <span m=''3512310''>getting</span>
  <span m=''3513180''>B</span> <span m=''3513570''>again</span> <span m=''3513820''>and</span>
  <span m=''3513920''>again,</span> <span m=''3514220''>but</span> <span m=''3514390''>I</span>
  <span m=''3514470''>had</span> <span m=''3514620''>to</span> <span m=''3514660''>go
  through</span> <span m=''3514870''>the</span> <span m=''3514970''>entire</span>
  <span m=''3515425''>C</span> <span m=''3515880''>in here.</span> </p><p><span m=''3516310''>So</span>
  <span m=''3517070''>if</span> <span m=''3517470''>this</span> <span m=''3517690''>much</span>
  <span m=''3517950''>data</span> <span m=''3518200''>is</span> <span m=''3518320''>bigger</span>
  <span m=''3518520''>than</span> <span m=''3518700''>the</span> <span m=''3518790''>cache,</span>
  <span m=''3520080''>I</span> <span m=''3520250''>have</span> <span m=''3520430''>no</span>
  <span m=''3520550''>locality</span> <span m=''3520810''>in here.</span> <span m=''3522830''>But</span>
  <span m=''3524720''>if,</span> <span m=''3525030''>instead</span> <span m=''3525140''>of</span>
  <span m=''3525420''>calculating</span> <span m=''3525890''>a</span> <span m=''3525980''>row,</span>
  <span m=''3526230''>if</span> <span m=''3526430''>I</span> <span m=''3526510''>calculate</span>
  <span m=''3526850''>a</span> <span m=''3527320''>32</span> <span m=''3527440''>by</span>
  <span m=''3527590''>32</span> <span m=''3528060''>block,</span> <span m=''3528990''>which</span>
  <span m=''3529180''>is</span> <span m=''3529330''>again</span> <span m=''3529820''>1024</span>
  <span m=''3530860''>elements</span> <span m=''3531310''>I am</span> <span m=''3531730''>calculating.</span>
  <span m=''3532570''>If</span> <span m=''3532680''>I</span> <span m=''3533020''>do
  that,</span> <span m=''3533620''>I</span> <span m=''3533740''>need</span> <span
  m=''3533890''>a</span> <span m=''3533970''>block</span> <span m=''3534310''>here</span>
  <span m=''3534660''>and</span> <span m=''3534830''>a</span> <span m=''3534930''>block</span>
  <span m=''3535150''>here,</span> <span m=''3535750''>and</span> <span m=''3535930''>I</span>
  <span m=''3536050''>only</span> <span m=''3536570''>type</span> <span m=''3537110''>this</span>
  <span m=''3537300''>much</span> <span m=''3537480''>data.</span> <span m=''3541200''>OK,</span>
  <span m=''3542510''>I''m</span> <span m=''3542650''>getting</span> <span m=''3542960''>the</span>
  <span m=''3543030''>same</span> <span m=''3543410''>amount</span> <span m=''3543730''>of</span>
  <span m=''3544020''>output,</span> <span m=''3544910''>but</span> <span m=''3545200''>because</span>
  <span m=''3545610''>of</span> <span m=''3545930''>reuse,</span> <span m=''3547050''>I</span>
  <span m=''3548080''>touch</span> <span m=''3548750''>a</span> <span m=''3549030''>lot</span>
  <span m=''3549380''>less</span> <span m=''3549570''>inputting</span> <span m=''3549870''>here.</span>
  </p><p><span m=''3551150''>And</span> <span m=''3551350''>just</span> <span m=''3551540''>by</span>
  <span m=''3551770''>doing</span> <span m=''3552040''>this</span> <span m=''3552210''>transformation,</span>
  <span m=''3552650''>I can</span> <span m=''3553000''>really</span> <span m=''3553490''>reduce</span>
  <span m=''3554220''>the</span> <span m=''3554310''>amount</span> <span m=''3554740''>of</span>
  <span m=''3555620''>data.</span> <span m=''3556540''>Basically,</span> <span m=''3556930''>I</span>
  <span m=''3557010''>can</span> <span m=''3557280''>create</span> <span m=''3557650''>a</span>
  <span m=''3557920''>smaller</span> <span m=''3558190''>working</span> <span m=''3558480''>set,</span>
  <span m=''3559140''>go</span> <span m=''3559330''>through</span> <span m=''3559520''>that</span>
  <span m=''3559720''>much</span> <span m=''3559960''>more,</span> <span m=''3560470''>and</span>
  <span m=''3561190''>reduce</span> <span m=''3561580''>the</span> <span m=''3561640''>amount</span>
  <span m=''3561870''>of</span> <span m=''3561950''>cache</span> <span m=''3562240''>misses</span>
  <span m=''3562500''>you</span> <span m=''3562620''>get.</span> <span m=''3563150''>So</span>
  <span m=''3563310''>by</span> <span m=''3563500''>doing</span> <span m=''3563800''>that,</span>
  <span m=''3564080''>I</span> <span m=''3564240''>basically</span> <span m=''3565020''>go</span>
  <span m=''3565210''>out</span> <span m=''3565520''>another</span> <span m=''3565710''>3x</span>
  <span m=''3566250''>improvement</span> <span m=''3566750''>in</span> <span m=''3566850''>my</span>
  <span m=''3566950''>CPI,</span> <span m=''3567780''>really</span> <span m=''3568220''>brought</span>
  <span m=''3568590''>down</span> <span m=''3568750''>my</span> <span m=''3568970''>L1</span>
  <span m=''3569320''>cache</span> <span m=''3569770''>misses,</span> <span m=''3569900''>and</span>
  <span m=''3570140''>basically</span> <span m=''3570780''>eliminated</span> <span
  m=''3571040''>L2</span> <span m=''3571250''>cache</span> <span m=''3571580''>misses.</span>
  <span m=''3574070''>OK,</span> <span m=''3574460''>so</span> <span m=''3574620''>I</span>
  <span m=''3574700''>got</span> <span m=''3574880''>a</span> <span m=''3574970''>really</span>
  <span m=''3575210''>good</span> <span m=''3575380''>speed up</span> <span m=''3575590''>in
  here.</span> </p><p><span m=''3578280''>So</span> <span m=''3578420''>you</span>
  <span m=''3578550''>can</span> <span m=''3578770''>block</span> <span m=''3578970''>multiple</span>
  <span m=''3579290''>levels,</span> <span m=''3580020''>L1,</span> <span m=''3580210''>L2,</span>
  <span m=''3580850''>L3,</span> <span m=''3581140''>because</span> <span m=''3581370''>every</span>
  <span m=''3581610''>time</span> <span m=''3581830''>you</span> <span m=''3581930''>figure</span>
  <span m=''3582230''>out the</span> <span m=''3582340''>workings</span> <span m=''3582680''>and
  size,</span> <span m=''3582870''>you</span> <span m=''3583210''>block</span> <span
  m=''3583750''>so</span> <span m=''3584040''>the</span> <span m=''3584170''>data</span>
  <span m=''3584490''>in</span> <span m=''3584810''>that</span> <span m=''3585020''>will</span>
  <span m=''3585170''>be</span> <span m=''3585330''>safe</span> <span m=''3585840''>in</span>
  <span m=''3586060''>the</span> <span m=''3586160''>cache</span> <span m=''3586505''>in
  here.</span> <span m=''3588550''>And</span> <span m=''3589220''>this is</span> <span
  m=''3589430''>kind</span> <span m=''3589600''>of</span> <span m=''3589640''>nasty</span>
  <span m=''3590010''>to</span> <span m=''3590120''>do</span> <span m=''3590240''>by</span>
  <span m=''3590270''>hand.</span> <span m=''3591160''>We''ll</span> <span m=''3591460''>see.</span>
  </p><p><span m=''3595400''>So</span> <span m=''3595560''>the</span> <span m=''3595630''>other</span>
  <span m=''3595770''>interesting</span> <span m=''3596210''>thing</span> <span m=''3596440''>is</span>
  <span m=''3596810''>call</span> <span m=''3597180''>stack</span> <span m=''3597340''>locality.</span>
  <span m=''3597840''>So if you</span> <span m=''3598080''>do</span> <span m=''3598210''>something</span>
  <span m=''3598480''>like</span> <span m=''3598970''>fib</span> <span m=''3600070''>in</span>
  <span m=''3600310''>here,</span> <span m=''3601400''>traditional</span> <span m=''3601940''>fib,</span>
  <span m=''3602800''>if</span> <span m=''3602910''>you</span> <span m=''3603090''>do</span>
  <span m=''3603240''>fib(4),</span> <span m=''3604220''>you</span> <span m=''3604380''>calculate</span>
  <span m=''3604690''>a</span> <span m=''3604790''>fib(4),</span> <span m=''3605370''>fib(3),</span>
  <span m=''3606100''>fib(2),</span> <span m=''3606850''>you kind</span> <span m=''3607050''>of</span>
  <span m=''3607260''>build</span> <span m=''3607720''>a stack,</span> <span m=''3607920''>go</span>
  <span m=''3608090''>up</span> <span m=''3608330''>back</span> <span m=''3608500''>again</span>
  <span m=''3609410''>in</span> <span m=''3609560''>here.</span> <span m=''3610830''>So</span>
  <span m=''3611390''>if</span> <span m=''3611600''>you</span> <span m=''3611750''>keep</span>
  <span m=''3612010''>doing</span> <span m=''3612260''>that,</span> <span m=''3612510''>the</span>
  <span m=''3612600''>nice</span> <span m=''3612890''>thing</span> <span m=''3613490''>is</span>
  <span m=''3613780''>you''re</span> <span m=''3614020''>going</span> <span m=''3614350''>up,</span>
  <span m=''3614680''>but</span> <span m=''3615170''>its--</span> <span m=''3617620''>Hopefully,</span>
  <span m=''3618310''>one</span> <span m=''3618600''>of</span> <span m=''3618670''>these</span>
  <span m=''3618850''>days,</span> <span m=''3618970''>I am</span> <span m=''3619090''>going</span>
  <span m=''3619350''>to</span> <span m=''3619500''>hit</span> <span m=''3619690''>the</span>
  <span m=''3619810''>wrong</span> <span m=''3620050''>button,</span> <span m=''3620390''>and--</span>
  </p><p><span m=''3628520''>What</span> <span m=''3628750''>kind</span> <span m=''3628940''>of</span>
  <span m=''3629010''>locality</span> <span m=''3629300''>do</span> <span m=''3629490''>we</span>
  <span m=''3629650''>have</span> <span m=''3629820''>if</span> <span m=''3629960''>we
  are</span> <span m=''3630400''>accessing</span> <span m=''3630790''>data</span>
  <span m=''3631110''>like this</span> <span m=''3631900''>in</span> <span m=''3632090''>my</span>
  <span m=''3632290''>call</span> <span m=''3632700''>stack?</span> <span m=''3638090''>What</span>
  <span m=''3638420''>kind of</span> <span m=''3638600''>locality</span> <span m=''3638670''>do</span>
  <span m=''3638870''>we</span> <span m=''3639150''>have?</span> <span m=''3643650''>I</span>
  <span m=''3643770''>mean,</span> <span m=''3643970''>I</span> <span m=''3644040''>access</span>
  <span m=''3644500''>here,</span> <span m=''3644870''>fib(4),</span> <span m=''3645660''>and</span>
  <span m=''3645830''>I</span> <span m=''3645890''>get</span> <span m=''3646150''>back</span>
  <span m=''3646340''>to</span> <span m=''3646430''>fib(4)</span> <span m=''3646840''>here.</span>
  <span m=''3651320''>So</span> <span m=''3651720''>within</span> <span m=''3652260''>each</span>
  <span m=''3652580''>frame,</span> <span m=''3653430''>I</span> <span m=''3653540''>am</span>
  <span m=''3653720''>accessing</span> <span m=''3654140''>data</span> <span m=''3654400''>next</span>
  <span m=''3654630''>to</span> <span m=''3654680''>each</span> <span m=''3654890''>other,</span>
  <span m=''3655110''>so</span> <span m=''3655310''>I</span> <span m=''3655400''>can</span>
  <span m=''3655600''>have</span> <span m=''3655780''>a</span> <span m=''3655800''>little</span>
  <span m=''3656000''>bit</span> <span m=''3656180''>of</span> <span m=''3656310''>a</span>
  <span m=''3660960''>spatial</span> <span m=''3661380''>locality</span> <span m=''3661810''>because,</span>
  <span m=''3662390''>each</span> <span m=''3662690''>frame,</span> <span m=''3663110''>all</span>
  <span m=''3663200''>the</span> <span m=''3663290''>data</span> <span m=''3663510''>is</span>
  <span m=''3663620''>next</span> <span m=''3663790''>to</span> <span m=''3663850''>each</span>
  <span m=''3664040''>other.</span> <span m=''3664640''>But</span> <span m=''3664900''>across</span>
  <span m=''3665310''>frames,</span> <span m=''3666580''>normally,</span> <span m=''3666940''>I
  will</span> <span m=''3667120''>have</span> <span m=''3667310''>some</span> <span
  m=''3667490''>temporal</span> <span m=''3667780''>because</span> <span m=''3668150''>I
  will</span> <span m=''3668220''>get</span> <span m=''3668440''>back</span> <span
  m=''3668600''>to</span> <span m=''3668670''>that</span> <span m=''3668790''>data</span>
  <span m=''3669210''>some time.</span> <span m=''3671110''>OK?</span> </p><p><span
  m=''3678790''>OK,</span> <span m=''3679400''>before</span> <span m=''3679680''>I</span>
  <span m=''3679820''>summarize,</span> <span m=''3679980''>this</span> <span m=''3680150''>one.</span>
  <span m=''3681460''>If</span> <span m=''3681690''>you are</span> <span m=''3681910''>reading</span>
  <span m=''3683480''>a lot</span> <span m=''3683800''>of</span> <span m=''3683960''>data,</span>
  <span m=''3685080''>processing</span> <span m=''3685350''>through</span> <span m=''3685830''>stage</span>
  <span m=''3686240''>one,</span> <span m=''3686930''>[UNINTELLIGIBLE]</span> <span
  m=''3687590''>and</span> <span m=''3687760''>producing</span> <span m=''3688360''>[UNINTELLIGIBLE],</span>
  <span m=''3689220''>that</span> <span m=''3689450''>means</span> <span m=''3689680''>you''re</span>
  <span m=''3689850''>reading</span> <span m=''3690140''>a</span> <span m=''3690190''>huge</span>
  <span m=''3690550''>amount</span> <span m=''3690770''>of</span> <span m=''3690860''>data</span>
  <span m=''3691120''>through</span> <span m=''3691340''>stage</span> <span m=''3691610''>one,</span>
  <span m=''3692000''>save,</span> <span m=''3694280''>save</span> <span m=''3694610''>data</span>
  <span m=''3694740''>again,</span> <span m=''3695040''>do</span> <span m=''3695140''>stage</span>
  <span m=''3695530''>two,</span> <span m=''3696730''>you</span> <span m=''3696840''>have</span>
  <span m=''3697120''>really</span> <span m=''3697320''>bad</span> <span m=''3697600''>cache</span>
  <span m=''3697820''>locality.</span> <span m=''3698780''>One</span> <span m=''3699020''>thing</span>
  <span m=''3699170''>you</span> <span m=''3699330''>can</span> <span m=''3699490''>do</span>
  <span m=''3699620''>is</span> <span m=''3699750''>read</span> <span m=''3700140''>a</span>
  <span m=''3700350''>small</span> <span m=''3700760''>chunk,</span> <span m=''3701000''>do</span>
  <span m=''3701070''>all</span> <span m=''3701390''>the</span> <span m=''3701530''>stages</span>
  <span m=''3701950''>on</span> <span m=''3702060''>that</span> <span m=''3702280''>small</span>
  <span m=''3702490''>chunk,</span> <span m=''3703150''>save it,</span> <span m=''3703870''>and</span>
  <span m=''3704020''>go</span> <span m=''3704160''>to</span> <span m=''3704280''>another</span>
  <span m=''3704540''>chunk.</span> </p><p><span m=''3704970''>So</span> <span m=''3705100''>instead</span>
  <span m=''3705300''>of</span> <span m=''3705420''>doing</span> <span m=''3705580''>the</span>
  <span m=''3705740''>entire</span> <span m=''3706040''>data,</span> <span m=''3706410''>doing</span>
  <span m=''3706560''>something</span> <span m=''3706890''>[UNINTELLIGIBLE]</span>
  <span m=''3707370''>producing,</span> <span m=''3708150''>you</span> <span m=''3708310''>can</span>
  <span m=''3708480''>do</span> <span m=''3708580''>this</span> <span m=''3708820''>chunk-ifying,</span>
  <span m=''3709870''>and</span> <span m=''3710110''>by</span> <span m=''3710270''>doing</span>
  <span m=''3710550''>that,</span> <span m=''3710710''>you</span> <span m=''3710910''>can</span>
  <span m=''3711110''>get</span> <span m=''3711290''>a</span> <span m=''3711510''>lot</span>
  <span m=''3711770''>of</span> <span m=''3711860''>locality.</span> <span m=''3712220''>So</span>
  <span m=''3712330''>once</span> <span m=''3712700''>you</span> <span m=''3712820''>bring</span>
  <span m=''3713160''>in</span> <span m=''3713290''>data,</span> <span m=''3714360''>you</span>
  <span m=''3714740''>like</span> <span m=''3714970''>to</span> <span m=''3715050''>do</span>
  <span m=''3715230''>as</span> <span m=''3715510''>many things</span> <span m=''3715910''>as</span>
  <span m=''3716100''>possible</span> <span m=''3716470''>to</span> <span m=''3716520''>that</span>
  <span m=''3716640''>data</span> <span m=''3717380''>before</span> <span m=''3717670''>it</span>
  <span m=''3717710''>gets</span> <span m=''3717950''>out of</span> <span m=''3718220''>the</span>
  <span m=''3718280''>cache.</span> <span m=''3719620''>That''s</span> <span m=''3719800''>the</span>
  <span m=''3719870''>entire</span> <span m=''3720200''>thing</span> <span m=''3720420''>about</span>
  <span m=''3720580''>locality,</span> <span m=''3720930''>and</span> <span m=''3721030''>you</span>
  <span m=''3721130''>can</span> <span m=''3721260''>restructure</span> <span m=''3721710''>code</span>
  <span m=''3721810''>through</span> <span m=''3722010''>that.</span> </p><p><span
  m=''3722810''>So</span> <span m=''3722940''>if</span> <span m=''3723100''>you</span>
  <span m=''3723200''>look</span> <span m=''3723370''>at</span> <span m=''3723550''>that,</span>
  <span m=''3724180''>what</span> <span m=''3724350''>we</span> <span m=''3724460''>have</span>
  <span m=''3724570''>done</span> <span m=''3724780''>today,</span> <span m=''3727190''>we</span>
  <span m=''3727330''>have</span> <span m=''3727680''>looked</span> <span m=''3727930''>at</span>
  <span m=''3728070''>things</span> <span m=''3728330''>like</span> <span m=''3728520''>associativity,</span>
  <span m=''3729570''>cache</span> <span m=''3729890''>lines,</span> <span m=''3730510''>cache</span>
  <span m=''3730940''>sets</span> <span m=''3731590''>in</span> <span m=''3732190''>here,</span>
  <span m=''3732890''>and</span> <span m=''3733690''>how</span> <span m=''3733960''>to</span>
  <span m=''3734150''>address</span> <span m=''3734680''>and</span> <span m=''3735150''>map
  to</span> <span m=''3735630''>a cache,</span> <span m=''3735930''>we kind</span>
  <span m=''3736140''>of</span> <span m=''3736200''>did</span> <span m=''3736500''>this</span>
  <span m=''3736580''>thing,</span> <span m=''3737450''>and</span> <span m=''3737930''>we</span>
  <span m=''3738040''>look</span> <span m=''3738250''>at</span> <span m=''3738500''>[UNINTELLIGIBLE]</span>
  <span m=''3738780''>streamings</span> <span m=''3739410''>versus</span> <span m=''3739850''>InCache</span>
  <span m=''3740980''>versus</span> <span m=''3741310''>no</span> <span m=''3741550''>locality</span>
  <span m=''3741930''>type</span> <span m=''3743322''>patterns.</span> <span m=''3744250''>And</span>
  <span m=''3745220''>then</span> <span m=''3745850''>when you</span> <span m=''3745910''>look
  at</span> <span m=''3746130''>data</span> <span m=''3746390''>structure</span> <span
  m=''3746720''>transformation,</span> <span m=''3747370''>we</span> <span m=''3747540''>look</span>
  <span m=''3747720''>at</span> <span m=''3748250''>how</span> <span m=''3748740''>to</span>
  <span m=''3748830''>basically</span> <span m=''3749690''>replace</span> <span m=''3750060''>structured</span>
  <span m=''3750520''>arrays</span> <span m=''3751210''>and</span> <span m=''3751390''>split</span>
  <span m=''3751590''>data</span> <span m=''3751820''>structures</span> <span m=''3752280''>to</span>
  <span m=''3752370''>make</span> <span m=''3752580''>sure</span> <span m=''3752810''>that</span>
  <span m=''3753060''>you</span> <span m=''3753170''>get</span> <span m=''3753380''>a
  lot</span> <span m=''3753550''>of</span> <span m=''3755130''>nice</span> <span m=''3756270''>locality</span>
  <span m=''3756760''>if you</span> <span m=''3757100''>access</span> <span m=''3757780''>a</span>
  <span m=''3757910''>certain</span> <span m=''3758300''>amount</span> <span m=''3758520''>of</span>
  <span m=''3758610''>data,</span> <span m=''3759390''>and</span> <span m=''3760230''>pack</span>
  <span m=''3760470''>data</span> <span m=''3760640''>to</span> <span m=''3760790''>get</span>
  <span m=''3761040''>smaller</span> <span m=''3761350''>cache</span> <span m=''3761520''>footprints</span>
  <span m=''3762060''>kind</span> <span m=''3762250''>of</span> <span m=''3762350''>things.</span>
  <span m=''3763200''>And</span> <span m=''3763400''>we</span> <span m=''3763540''>also</span>
  <span m=''3763790''>look</span> <span m=''3763980''>at</span> <span m=''3764390''>computer</span>
  <span m=''3764770''>transformations,</span> <span m=''3765380''>things</span> <span
  m=''3765590''>like</span> <span m=''3765760''>transpose</span> <span m=''3766690''>copying,</span>
  <span m=''3767230''>compute</span> <span m=''3767640''>copy,</span> <span m=''3767930''>outtype</span>
  <span m=''3768350''>things</span> <span m=''3768560''>you</span> <span m=''3768700''>can</span>
  <span m=''3768840''>do,</span> <span m=''3769370''>so</span> <span m=''3769550''>you</span>
  <span m=''3769670''>can</span> <span m=''3769840''>actually</span> <span m=''3770110''>get</span>
  <span m=''3770900''>nice</span> <span m=''3772230''>locality,</span> <span m=''3772890''>so
  you</span> <span m=''3772960''>can do</span> <span m=''3773040''>both</span> <span
  m=''3773280''>data</span> <span m=''3773470''>and</span> <span m=''3773750''>compute</span>
  <span m=''3773980''>transformations.</span> <span m=''3775510''>And</span> <span
  m=''3776390''>[UNINTELLIGIBLE]</span> <span m=''3777300''>axises</span> <span m=''3778010''>and</span>
  <span m=''3780730''>[? re-cast ?]</span> <span m=''3781360''>calculation</span>
  <span m=''3781735''>stages,</span> <span m=''3782110''>so</span> <span m=''3782250''>this</span>
  <span m=''3782400''>is</span> <span m=''3782530''>kind</span> <span m=''3782730''>of</span>
  <span m=''3783240''>summary.</span> </p><p><span m=''3784570''>Next</span> <span
  m=''3784760''>thing</span> <span m=''3784940''>I</span> <span m=''3784980''>want</span>
  <span m=''3785160''>go</span> <span m=''3785840''>is</span> <span m=''3786390''>look</span>
  <span m=''3786630''>at</span> <span m=''3786900''>what</span> <span m=''3787190''>machines</span>
  <span m=''3787560''>you</span> <span m=''3787660''>guys</span> <span m=''3787880''>are</span>
  <span m=''3787920''>using.</span> <span m=''3788790''>So</span> <span m=''3788940''>this</span>
  <span m=''3789140''>is</span> <span m=''3789260''>the</span> <span m=''3789340''>machines</span>
  <span m=''3789690''>we</span> <span m=''3790060''>used</span> <span m=''3790530''>last</span>
  <span m=''3790830''>year.</span> <span m=''3791810''>These</span> <span m=''3792050''>are</span>
  <span m=''3792270''>quad</span> <span m=''3792715''>cores,</span> <span m=''3793470''>and</span>
  <span m=''3793650''>it</span> <span m=''3793790''>had</span> <span m=''3794320''>L1</span>
  <span m=''3794580''>cache,</span> <span m=''3794990''>so</span> <span m=''3795110''>these</span>
  <span m=''3795390''>[UNINTELLIGIBLE].</span> <span m=''3796130''>So</span> <span
  m=''3796300''>this</span> <span m=''3796550''>has</span> <span m=''3798220''>32</span>
  <span m=''3798850''>kilobyte</span> <span m=''3799170''>L1</span> <span m=''3799580''>cache,</span>
  <span m=''3800290''>data</span> <span m=''3800580''>cache</span> <span m=''3800800''>[UNINTELLIGIBLE]</span>
  <span m=''3801520''>two</span> <span m=''3801700''>caches</span> <span m=''3802050''>in</span>
  <span m=''3802160''>here</span> <span m=''3802410''>for</span> <span m=''3802550''>data</span>
  <span m=''3802790''>and</span> <span m=''3802900''>instructions,</span> <span m=''3803860''>each</span>
  <span m=''3804140''>core,</span> <span m=''3804740''>and</span> <span m=''3805550''>then</span>
  <span m=''3805640''>the</span> <span m=''3805730''>cache</span> <span m=''3806170''>line</span>
  <span m=''3806430''>size</span> <span m=''3806650''>is</span> <span m=''3806750''>normally</span>
  <span m=''3807050''>64</span> <span m=''3807730''>bytes</span> <span m=''3807890''>[UNINTELLIGIBLE].</span>
  </p><p><span m=''3808930''>And</span> <span m=''3809030''>here,</span> <span m=''3809210''>latency</span>
  <span m=''3809770''>[UNINTELLIGIBLE],</span> <span m=''3811390''>you</span> <span
  m=''3811520''>get</span> <span m=''3811690''>three</span> <span m=''3811850''>cycles.</span>
  <span m=''3813780''>If</span> <span m=''3814050''>not,</span> <span m=''3816156''>you</span>
  <span m=''3816590''>get</span> <span m=''3816770''>14</span> <span m=''3817130''>cycles</span>
  <span m=''3818390''>to</span> <span m=''3818460''>go to</span> <span m=''3818850''>to</span>
  <span m=''3819250''>L2</span> <span m=''3819650''>in</span> <span m=''3819810''>here</span>
  <span m=''3821010''>if</span> <span m=''3821210''>data</span> <span m=''3821420''>doesn''t</span>
  <span m=''3821790''>meet</span> <span m=''3821900''>there.</span> <span m=''3822360''>And</span>
  <span m=''3822540''>associated</span> <span m=''3823080''>with</span> <span m=''3823190''>this</span>
  <span m=''3823430''>[UNINTELLIGIBLE PHRASE].</span> <span m=''3826330''>So</span>
  <span m=''3826440''>that</span> <span m=''3826600''>was</span> <span m=''3826760''>what</span>
  <span m=''3826910''>we</span> <span m=''3826980''>did</span> <span m=''3827140''>last</span>
  <span m=''3827420''>year.</span> </p><p><span m=''3828690''>This</span> <span m=''3829080''>year,</span>
  <span m=''3829600''>we</span> <span m=''3830040''>have a</span> <span m=''3830390''>bigger</span>
  <span m=''3830685''>machine</span> <span m=''3831370''>that</span> <span m=''3831630''>has</span>
  <span m=''3831970''>multiple</span> <span m=''3832390''>levels</span> <span m=''3832710''>of</span>
  <span m=''3832820''>caches.</span> <span m=''3833140''>So</span> <span m=''3834750''>each</span>
  <span m=''3835120''>core</span> <span m=''3835340''>has</span> <span m=''3835620''>L1</span>
  <span m=''3836280''>instruction</span> <span m=''3836780''>and</span> <span m=''3836930''>data</span>
  <span m=''3837100''>cache.</span> <span m=''3837490''>It''s</span> <span m=''3837740''>kind</span>
  <span m=''3837930''>of</span> <span m=''3838040''>the same,</span> <span m=''3838190''>32</span>
  <span m=''3838560''>kilobyte</span> <span m=''3838890''>cache,</span> <span m=''3839930''>four</span>
  <span m=''3840160''>nanosecond</span> <span m=''3841190''>latency</span> <span m=''3841510''>in</span>
  <span m=''3841710''>here.</span> <span m=''3842090''>Eight,</span> <span m=''3842450''>three</span>
  <span m=''3842530''>and</span> <span m=''3842710''>four</span> <span m=''3842920''>[UNINTELLIGIBLE],</span>
  <span m=''3843130''>they</span> <span m=''3843240''>kind</span> <span m=''3843420''>of</span>
  <span m=''3843930''>reduced</span> <span m=''3844000''>that,</span> <span m=''3844670''>but</span>
  <span m=''3844970''>they</span> <span m=''3845050''>added</span> <span m=''3846040''>a</span>
  <span m=''3846110''>256-kilobyte</span> <span m=''3847840''>L2</span> <span m=''3848390''>cache</span>
  <span m=''3849445''>in</span> <span m=''3849700''>here,</span> <span m=''3850370''>and</span>
  <span m=''3850680''>then</span> <span m=''3850900''>a</span> <span m=''3851410''>pretty</span>
  <span m=''3851950''>large</span> <span m=''3852390''>humongo</span> <span m=''3853120''>12-megabyte</span>
  <span m=''3853920''>L3</span> <span m=''3854190''>cache</span> <span m=''3854660''>in
  here.</span> </p><p><span m=''3856280''>The</span> <span m=''3856380''>interesting</span>
  <span m=''3856800''>thing</span> <span m=''3857000''>is</span> <span m=''3857120''>here,</span>
  <span m=''3857430''>this</span> <span m=''3857610''>pretty</span> <span m=''3858380''>fast</span>
  <span m=''3858850''>access</span> <span m=''3859180''>to</span> <span m=''3859270''>these</span>
  <span m=''3859540''>ones.</span> <span m=''3859910''>If</span> <span m=''3860310''>you</span>
  <span m=''3860800''>miss</span> <span m=''3861105''>in</span> <span m=''3861410''>here,</span>
  <span m=''3862290''>this</span> <span m=''3862500''>is</span> <span m=''3862680''>about</span>
  <span m=''3863750''>2</span> <span m=''3863920''>and</span> <span m=''3864100''>1/2</span>
  <span m=''3864280''>times</span> <span m=''3866860''>cost</span> <span m=''3867410''>from</span>
  <span m=''3867590''>going</span> <span m=''3867860''>from</span> <span m=''3868020''>here</span>
  <span m=''3868230''>to</span> <span m=''3868320''>here.</span> <span m=''3869190''>From</span>
  <span m=''3869430''>here</span> <span m=''3869700''>to</span> <span m=''3869790''>[UNINTELLIGIBLE],</span>
  <span m=''3870090''>about a</span> <span m=''3870130''>five</span> <span m=''3870570''>times</span>
  <span m=''3870880''>cost,</span> <span m=''3873310''>so</span> <span m=''3873780''>here</span>
  <span m=''3873960''>to here</span> <span m=''3874200''>is</span> <span m=''3874560''>a</span>
  <span m=''3874650''>five</span> <span m=''3874870''>times</span> <span m=''3875160''>cost.</span>
  </p><p><span m=''3875710''>The</span> <span m=''3876030''>interesting</span> <span
  m=''3876080''>thing</span> <span m=''3876400''>that</span> <span m=''3876730''>actually</span>
  <span m=''3876920''>surprises</span> <span m=''3877180''>a</span> <span m=''3877440''>lot</span>
  <span m=''3877670''>us was</span> <span m=''3878000''>here to</span> <span m=''3878420''>here,</span>
  <span m=''3878680''>it''s</span> <span m=''3878920''>cost</span> <span m=''3879210''>is</span>
  <span m=''3879460''>not</span> <span m=''3879640''>that</span> <span m=''3879810''>different.</span>
  <span m=''3880410''>[UNINTELLIGIBLE PHRASE]</span> <span m=''3882420''>So</span>
  <span m=''3882520''>actually</span> <span m=''3882740''>memory,</span> <span m=''3883080''>even</span>
  <span m=''3883400''>though</span> <span m=''3883480''>it''s</span> <span m=''3883630''>sitting</span>
  <span m=''3883890''>out</span> <span m=''3884230''>in there,</span> <span m=''3885030''>they</span>
  <span m=''3885180''>have</span> <span m=''3885340''>managed</span> <span m=''3885650''>to</span>
  <span m=''3885740''>get</span> <span m=''3885880''>it</span> <span m=''3886000''>pretty</span>
  <span m=''3887770''>cheap</span> <span m=''3888060''>access.</span> <span m=''3888520''>Normally,</span>
  <span m=''3889310''>my</span> <span m=''3889600''>intuition</span> <span m=''3889890''>say</span>
  <span m=''3890010''>this</span> <span m=''3890160''>should</span> <span m=''3890320''>be</span>
  <span m=''3890440''>much</span> <span m=''3890710''>higher</span> <span m=''3890970''>because</span>
  <span m=''3891190''>you''re</span> <span m=''3891330''>going</span> <span m=''3891580''>off-chip,</span>
  <span m=''3892600''>so</span> <span m=''3892720''>this</span> <span m=''3892930''>is</span>
  <span m=''3893160''>the</span> <span m=''3893310''>structure</span> <span m=''3893690''>here.</span>
  <span m=''3894200''>It''s</span> <span m=''3894570''>a lot</span> <span m=''3894820''>more</span>
  <span m=''3894940''>complicated.</span> </p><p><span m=''3896470''>So</span> <span
  m=''3896720''>here''s</span> <span m=''3897580''>something</span> <span m=''3897980''>I</span>
  <span m=''3898030''>produced</span> <span m=''3898420''>last</span> <span m=''3898720''>year.</span>
  <span m=''3898930''>So</span> <span m=''3899090''>what</span> <span m=''3899250''>I</span>
  <span m=''3899420''>did</span> <span m=''3899650''>was</span> <span m=''3899670''>I</span>
  <span m=''3899840''>ran</span> <span m=''3900070''>this</span> <span m=''3900230''>program.</span>
  <span m=''3902830''>And</span> <span m=''3903330''>in</span> <span m=''3903650''>these</span>
  <span m=''3903860''>machines,</span> <span m=''3904280''>there''s</span> <span m=''3904470''>a</span>
  <span m=''3904540''>way</span> <span m=''3904815''>to</span> <span m=''3905090''>turn</span>
  <span m=''3905420''>off</span> <span m=''3905680''>the</span> <span m=''3905800''>prefetch</span>
  <span m=''3906210''>of</span> <span m=''3906300''>the</span> <span m=''3906400''>previous</span>
  <span m=''3906850''>[UNINTELLIGIBLE].</span> <span m=''3908060''>So</span> <span
  m=''3908200''>when you''ve</span> <span m=''3908370''>turned</span> <span m=''3908620''>on</span>
  <span m=''3908710''>the</span> <span m=''3908800''>prefetch</span> <span m=''3909160''>and
  then</span> <span m=''3909470''>you</span> <span m=''3909540''>run,</span> <span
  m=''3909940''>what</span> <span m=''3910110''>you are</span> <span m=''3910260''>doing</span>
  <span m=''3910610''>is</span> <span m=''3910730''>I</span> <span m=''3910920''>am</span>
  <span m=''3911280''>accessing</span> <span m=''3911800''>data</span> <span m=''3912700''>with</span>
  <span m=''3912800''>a</span> <span m=''3912900''>working</span> <span m=''3913230''>set,</span>
  <span m=''3913580''>small</span> <span m=''3913820''>working</span> <span m=''3914110''>set,</span>
  <span m=''3914420''>little</span> <span m=''3914600''>bit</span> <span m=''3914740''>bigger</span>
  <span m=''3914880''>working</span> <span m=''3915210''>set.</span> <span m=''3915520''>So</span>
  <span m=''3915960''>this</span> <span m=''3916120''>is</span> <span m=''3916310''>basically</span>
  <span m=''3916730''>when</span> <span m=''3916920''>you</span> <span m=''3917010''>consider</span>
  <span m=''3917390''>working</span> <span m=''3917690''>set</span> <span m=''3917890''>size.</span>
  </p><p><span m=''3919360''>So</span> <span m=''3919530''>you</span> <span m=''3919690''>get</span>
  <span m=''3919860''>a</span> <span m=''3919910''>graph</span> <span m=''3920190''>like</span>
  <span m=''3920400''>this.</span> <span m=''3921890''>I</span> <span m=''3922010''>am</span>
  <span m=''3922140''>hitting</span> <span m=''3923115''>my</span> <span m=''3923450''>L1</span>
  <span m=''3923800''>cache,</span> <span m=''3926170''>and</span> <span m=''3926510''>if</span>
  <span m=''3926910''>it</span> <span m=''3926990''>is</span> <span m=''3927090''>more</span>
  <span m=''3927440''>than</span> <span m=''3927650''>that,</span> <span m=''3928030''>I</span>
  <span m=''3928120''>[UNINTELLIGIBLE]</span> <span m=''3929170''>L1</span> <span
  m=''3929330''>cache,</span> <span m=''3929520''>I</span> <span m=''3929580''>go
  to</span> <span m=''3929750''>my</span> <span m=''3929870''>L2</span> <span m=''3930150''>cache.</span>
  <span m=''3934440''>And</span> <span m=''3934820''>if</span> <span m=''3934960''>L2</span>
  <span m=''3935450''>misses,</span> <span m=''3935660''>I have</span> <span m=''3935770''>to
  go to</span> <span m=''3935980''>main</span> <span m=''3936040''>memory.</span>
  <span m=''3937900''>Very</span> <span m=''3938220''>traditional</span> <span m=''3938810''>kind</span>
  <span m=''3939000''>of</span> <span m=''3939070''>a</span> <span m=''3939490''>graph</span>
  <span m=''3939890''>in here.</span> </p><p><span m=''3943450''>Another</span> <span
  m=''3943720''>a little bit of an</span> <span m=''3944130''>interesting</span> <span
  m=''3944550''>thing,</span> <span m=''3944720''>which</span> <span m=''3944830''>is</span>
  <span m=''3946160''>instead</span> <span m=''3946460''>of</span> <span m=''3946740''>accessing</span>
  <span m=''3947040''>next</span> <span m=''3947380''>item,</span> <span m=''3947510''>I</span>
  <span m=''3947590''>kind</span> <span m=''3947850''>of</span> <span m=''3948020''>skipped</span>
  <span m=''3948420''>in here.</span> <span m=''3948730''>So</span> <span m=''3948870''>this</span>
  <span m=''3949110''>trying</span> <span m=''3949390''>to force</span> <span m=''3952770''>how</span>
  <span m=''3953030''>to</span> <span m=''3956070''>get</span> <span m=''3956650''>conflict</span>
  <span m=''3957080''>misses.</span> <span m=''3957590''>And</span> <span m=''3957800''>so</span>
  <span m=''3957990''>if you</span> <span m=''3959500''>line</span> <span m=''3959870''>up</span>
  <span m=''3959980''>things</span> <span m=''3960450''>like</span> <span m=''3960720''>this</span>
  <span m=''3960870''>exactly,</span> <span m=''3961910''>what</span> <span m=''3962110''>happens</span>
  <span m=''3962390''>is</span> <span m=''3962480''>you</span> <span m=''3962630''>get</span>
  <span m=''3963000''>these</span> <span m=''3963160''>conflict</span> <span m=''3963595''>misses,</span>
  <span m=''3964030''>and</span> <span m=''3964170''>you</span> <span m=''3964280''>get</span>
  <span m=''3964470''>this</span> <span m=''3964650''>number.</span> </p><p><span
  m=''3966400''>So I</span> <span m=''3966570''>have</span> <span m=''3966820''>interesting</span>
  <span m=''3967060''>story</span> <span m=''3967390''>to tell.</span> <span m=''3967760''>When</span>
  <span m=''3967930''>I was</span> <span m=''3968080''>a</span> <span m=''3968150''>graduate</span>
  <span m=''3968390''>student,</span> <span m=''3968860''>we were</span> <span m=''3969080''>running</span>
  <span m=''3969400''>this</span> <span m=''3969570''>bunch</span> <span m=''3969800''>of</span>
  <span m=''3969860''>benchmarks,</span> <span m=''3971290''>and</span> <span m=''3971940''>normally</span>
  <span m=''3972420''>when</span> <span m=''3972530''>you</span> <span m=''3972620''>run</span>
  <span m=''3972810''>a</span> <span m=''3972860''>benchmark,</span> <span m=''3973510''>you</span>
  <span m=''3973710''>try</span> <span m=''3974000''>it</span> <span m=''3974190''>for
  an</span> <span m=''3974450''>equal</span> <span m=''3975240''>[UNINTELLIGIBLE],</span>
  <span m=''3977930''>stuff</span> <span m=''3978170''>like</span> <span m=''3978350''>that.</span>
  <span m=''3978820''>And</span> <span m=''3979090''>we</span> <span m=''3979190''>got</span>
  <span m=''3979350''>this</span> <span m=''3979450''>graph</span> <span m=''3980940''>like</span>
  <span m=''3981160''>this.</span> <span m=''3981310''>I mean,</span> <span m=''3981580''>we</span>
  <span m=''3982280''>expect</span> <span m=''3982660''>a</span> <span m=''3982710''>graph</span>
  <span m=''3983690''>going</span> <span m=''3983930''>like</span> <span m=''3984190''>this.</span>
  <span m=''3986410''>OK,</span> <span m=''3986560''>that</span> <span m=''3986770''>how
  a</span> <span m=''3986910''>benchmark</span> <span m=''3987230''>[UNINTELLIGIBLE].</span>
  </p><p><span m=''3988450''>Then</span> <span m=''3988870''>at</span> <span m=''3989100''>one</span>
  <span m=''3989410''>point,</span> <span m=''3989730''>by</span> <span m=''3989940''>accident,</span>
  <span m=''3991110''>instead</span> <span m=''3991400''>of</span> <span m=''3991530''>typing</span>
  <span m=''3991910''>an</span> <span m=''3992080''>equal</span> <span m=''3992340''>64-something,</span>
  <span m=''3993310''>I</span> <span m=''3993700''>typed</span> <span m=''3993960''>an</span>
  <span m=''3994190''>equal</span> <span m=''3994720''>63,</span> <span m=''3996300''>and</span>
  <span m=''3996440''>suddenly,</span> <span m=''3996890''>I</span> <span m=''3996940''>got</span>
  <span m=''3997120''>a</span> <span m=''3997170''>performance</span> <span m=''3997650''>like</span>
  <span m=''3997850''>this.</span> <span m=''3999130''>Wait a</span> <span m=''3999385''>minute,</span>
  <span m=''4000480''>what''s</span> <span m=''4000700''>going</span> <span m=''4000980''>on?</span>
  <span m=''4001250''>So</span> <span m=''4001390''>in here,</span> <span m=''4001760''>what</span>
  <span m=''4001900''>I</span> <span m=''4001950''>got</span> <span m=''4002140''>was</span>
  <span m=''4002230''>not a</span> <span m=''4002490''>line.</span> <span m=''4003420''>I
  got</span> <span m=''4004420''>16,</span> <span m=''4004873''>32,</span> <span m=''4005780''>64,</span>
  <span m=''4006560''>128,</span> <span m=''4007170''>nice</span> <span m=''4007320''>graph</span>
  <span m=''4007700''>like</span> <span m=''4007880''>that.</span> </p><p><span m=''4009020''>And</span>
  <span m=''4009210''>then</span> <span m=''4009790''>I</span> <span m=''4009950''>just</span>
  <span m=''4010190''>did</span> <span m=''4010250''>63,</span> <span m=''4010605''>like</span>
  <span m=''4010960''>down to</span> <span m=''4011100''>here.</span> <span m=''4011540''>I''m
  like,</span> <span m=''4011700''>geeze,</span> <span m=''4012000''>that</span> <span
  m=''4012180''>can''t</span> <span m=''4012370''>be</span> <span m=''4012510''>right.</span>
  <span m=''4013390''>And</span> <span m=''4013590''>then</span> <span m=''4013720''>I</span>
  <span m=''4013780''>start</span> <span m=''4014150''>looking at</span> <span m=''4014280''>62,</span>
  <span m=''4014680''>which</span> <span m=''4015050''>is here.</span> <span m=''4015500''>61</span>
  <span m=''4016080''>is here.</span> </p><p><span m=''4016770''>So</span> <span m=''4017010''>I</span>
  <span m=''4017190''>realize</span> <span m=''4018650''>if</span> <span m=''4018760''>I</span>
  <span m=''4019025''>enumerate</span> <span m=''4019490''>all</span> <span m=''4019680''>those</span>
  <span m=''4019900''>things,</span> <span m=''4020130''>I</span> <span m=''4020470''>got</span>
  <span m=''4020640''>a</span> <span m=''4020720''>graph</span> <span m=''4020980''>like</span>
  <span m=''4021200''>this,</span> <span m=''4021390''>basically.</span> <span m=''4025380''>Kind</span>
  <span m=''4025610''>of</span> <span m=''4025730''>something</span> <span m=''4026010''>like</span>
  <span m=''4026200''>this.</span> <span m=''4027600''>And</span> <span m=''4027930''>the</span>
  <span m=''4028380''>thing</span> <span m=''4028620''>is,</span> <span m=''4028740''>if</span>
  <span m=''4028910''>I</span> <span m=''4028970''>had</span> <span m=''4029320''>never</span>
  <span m=''4029810''>tried</span> <span m=''4030110''>the</span> <span m=''4030240''>63,</span>
  <span m=''4031590''>I</span> <span m=''4031680''>would</span> <span m=''4031820''>have</span>
  <span m=''4032020''>basically</span> <span m=''4032400''>thought</span> <span m=''4032760''>my</span>
  <span m=''4032900''>performance</span> <span m=''4033240''>was</span> <span m=''4033580''>like</span>
  <span m=''4033780''>this,</span> <span m=''4034230''>so</span> <span m=''4034570''>far</span>
  <span m=''4034900''>worse.</span> <span m=''4036310''>Never</span> <span m=''4037050''>realized</span>
  <span m=''4037470''>because</span> <span m=''4037870''>it</span> <span m=''4038010''>was</span>
  <span m=''4038210''>all</span> <span m=''4038670''>having</span> <span m=''4038950''>conflicts</span>
  <span m=''4039480''>in</span> <span m=''4039570''>memory</span> <span m=''4040210''>because</span>
  <span m=''4040430''>I''m</span> <span m=''4040650''>[UNINTELLIGIBLE]</span> <span
  m=''4041220''>2</span> <span m=''4041420''>to the</span> <span m=''4041510''>power</span>
  <span m=''4041720''>numbers.</span> <span m=''4043120''>So</span> <span m=''4043370''>this</span>
  <span m=''4043540''>is</span> <span m=''4043670''>what</span> <span m=''4043830''>happens</span>
  <span m=''4044170''>if</span> <span m=''4044320''>you</span> <span m=''4044450''>just</span>
  <span m=''4044640''>look</span> <span m=''4044780''>at</span> <span m=''4044890''>2
  to the</span> <span m=''4044970''>power</span> <span m=''4045300''>numbers,</span>
  <span m=''4045610''>you''ll</span> <span m=''4045850''>think,</span> <span m=''4046130''>yeah,</span>
  <span m=''4046410''>this</span> <span m=''4046530''>is</span> <span m=''4046620''>the</span>
  <span m=''4046700''>performance</span> <span m=''4047150''>you''re</span> <span
  m=''4047280''>getting,</span> <span m=''4047940''>without</span> <span m=''4048150''>realizing</span>
  <span m=''4048630''>that,</span> <span m=''4048770''>in</span> <span m=''4048900''>fact,</span>
  <span m=''4049070''>you</span> <span m=''4049160''>can</span> <span m=''4049320''>get</span>
  <span m=''4049490''>this</span> <span m=''4049650''>far.</span> </p><p><span m=''4051290''>So</span>
  <span m=''4051470''>this</span> <span m=''4051640''>is</span> <span m=''4051830''>good.</span>
  <span m=''4052140''>So I</span> <span m=''4052310''>ran it</span> <span m=''4052650''>on</span>
  <span m=''4052790''>the</span> <span m=''4052930''>new</span> <span m=''4053070''>machine.</span>
  <span m=''4054200''>The</span> <span m=''4054310''>problem</span> <span m=''4054860''>with</span>
  <span m=''4054970''>our</span> <span m=''4055220''>new</span> <span m=''4055380''>machine</span>
  <span m=''4055790''>is</span> <span m=''4055940''>there''s</span> <span m=''4056190''>no
  way</span> <span m=''4056500''>to</span> <span m=''4056650''>turn</span> <span m=''4056940''>off</span>
  <span m=''4057100''>prefetching.</span> </p><p><span m=''4059510''>OK,</span> <span
  m=''4059740''>so</span> <span m=''4059910''>this</span> <span m=''4060130''>is</span>
  <span m=''4060310''>what</span> <span m=''4060460''>you''re</span> <span m=''4060590''>getting.</span>
  <span m=''4061520''>Everything,</span> <span m=''4062340''>because</span> <span
  m=''4062660''>I</span> <span m=''4062730''>am</span> <span m=''4062840''>accessing</span>
  <span m=''4063220''>this</span> <span m=''4063390''>nice</span> <span m=''4063810''>linear,</span>
  <span m=''4064320''>looks</span> <span m=''4064790''>same.</span> <span m=''4065640''>This</span>
  <span m=''4065820''>is</span> <span m=''4065910''>exactly</span> <span m=''4066300''>what</span>
  <span m=''4066450''>you</span> <span m=''4066560''>want</span> <span m=''4066860''>to</span>
  <span m=''4066930''>happen.</span> </p><p><span m=''4067550''>What</span> <span
  m=''4067830''>it''s</span> <span m=''4067990''>doing</span> <span m=''4068280''>is,</span>
  <span m=''4068460''>minute</span> <span m=''4068920''>you go</span> <span m=''4069220''>to</span>
  <span m=''4069470''>access,</span> <span m=''4069680''>it</span> <span m=''4069800''>realizes</span>
  <span m=''4070600''>you</span> <span m=''4070760''>accessing</span> <span m=''4071080''>linearly.</span>
  <span m=''4071800''>It</span> <span m=''4072090''>start</span> <span m=''4072490''>fetching,</span>
  <span m=''4072840''>fetching,</span> <span m=''4073190''>fetching</span> <span m=''4073490''>data</span>
  <span m=''4073630''>in</span> <span m=''4073800''>front</span> <span m=''4074050''>you,</span>
  <span m=''4074190''>it''s</span> <span m=''4074390''>going</span> <span m=''4074530''>to</span>
  <span m=''4074580''>catch</span> <span m=''4074780''>up.</span> <span m=''4075310''>It''s</span>
  <span m=''4075380''>not</span> <span m=''4075730''>feeding</span> <span m=''4076180''>you</span>
  <span m=''4076330''>data,</span> <span m=''4076660''>so</span> <span m=''4077150''>you''re</span>
  <span m=''4077390''>not</span> <span m=''4077460''>going to</span> <span m=''4077610''>have</span>
  <span m=''4077760''>any cache</span> <span m=''4077920''>missed</span> <span m=''4079270''>because</span>
  <span m=''4079530''>you''re</span> <span m=''4079700''>going</span> <span m=''4079890''>through</span>
  <span m=''4080080''>this</span> <span m=''4080380''>nice,</span> <span m=''4080760''>linear</span>
  <span m=''4080970''>pattern,</span> <span m=''4081240''>and</span> <span m=''4081610''>you</span>
  <span m=''4081730''>just</span> <span m=''4081940''>basic</span> <span m=''4082320''>end</span>
  <span m=''4082620''>up</span> <span m=''4082710''>with</span> <span m=''4083200''>this</span>
  <span m=''4084060''>beautiful</span> <span m=''4084570''>graph,</span> <span m=''4085220''>which</span>
  <span m=''4086780''>gives</span> <span m=''4087040''>the</span> <span m=''4087130''>feeling</span>
  <span m=''4087520''>your</span> <span m=''4087640''>working</span> <span m=''4088010''>set</span>
  <span m=''4088250''>could</span> <span m=''4088460''>be,</span> <span m=''4088710''>now,</span>
  <span m=''4089200''>gigabytes</span> <span m=''4089585''>long.</span> <span m=''4094130''>At</span>
  <span m=''4094270''>this</span> <span m=''4094420''>point,</span> <span m=''4094640''>I
  am</span> <span m=''4095040''>fitting</span> <span m=''4095420''>into</span> <span
  m=''4095720''>the</span> <span m=''4097300''>entire</span> <span m=''4098350''>L3</span>
  <span m=''4098770''>cache,</span> <span m=''4099479''>and</span> <span m=''4099620''>still</span>
  <span m=''4100029''>look</span> <span m=''4100270''>like</span> <span m=''4100660''>this</span>
  <span m=''4101260''>works</span> <span m=''4101510''>beautiful</span> <span m=''4101960''>because</span>
  <span m=''4102210''>this</span> <span m=''4102340''>is</span> <span m=''4102460''>what</span>
  <span m=''4102620''>you</span> <span m=''4102729''>want</span> <span m=''4103089''>for
  it</span> <span m=''4103450''>to</span> <span m=''4103540''>figure</span> <span
  m=''4103810''>out.</span> </p><p><span m=''4104210''>So</span> <span m=''4104370''>now</span>
  <span m=''4104529''>I''m</span> <span m=''4104689''>like,</span> <span m=''4104899''>geeze,</span>
  <span m=''4105319''>this is</span> <span m=''4105470''>great.</span> <span m=''4105740''>This</span>
  <span m=''4106010''>means</span> <span m=''4106390''>my</span> <span m=''4106510''>cache</span>
  <span m=''4106830''>works,</span> <span m=''4107130''>it''s</span> <span m=''4107359''>very
  nice,</span> <span m=''4107819''>but</span> <span m=''4108260''>I</span> <span m=''4108370''>want</span>
  <span m=''4108529''>to</span> <span m=''4108569''>show</span> <span m=''4108729''>you</span>
  <span m=''4108819''>guys</span> <span m=''4109000''>what''s</span> <span m=''4109189''>going</span>
  <span m=''4109399''>on,</span> <span m=''4109800''>so</span> <span m=''4109930''>that</span>
  <span m=''4110090''>doesn''t</span> <span m=''4110310''>help.</span> <span m=''4110850''>So</span>
  <span m=''4111340''>I</span> <span m=''4111439''>came</span> <span m=''4111689''>up</span>
  <span m=''4111800''>with</span> <span m=''4111920''>this</span> <span m=''4112069''>program.</span>
  </p><p><span m=''4113479''>So</span> <span m=''4113640''>this</span> <span m=''4114020''>program,</span>
  <span m=''4114160''>what</span> <span m=''4114300''>I</span> <span m=''4114430''>did</span>
  <span m=''4114710''>was</span> <span m=''4115390''>I</span> <span m=''4115580''>created</span>
  <span m=''4116029''>a</span> <span m=''4116270''>working</span> <span m=''4116630''>set,</span>
  <span m=''4117240''>but</span> <span m=''4117439''>I''m</span> <span m=''4117680''>accessing</span>
  <span m=''4118250''>randomly</span> <span m=''4118800''>within</span> <span m=''4119010''>that</span>
  <span m=''4119160''>working</span> <span m=''4119569''>set.</span> <span m=''4119689''>I</span>
  <span m=''4119779''>calculated</span> <span m=''4120350''>this</span> <span m=''4120540''>address.</span>
  <span m=''4120880''>This</span> <span m=''4121029''>is</span> <span m=''4121140''>my</span>
  <span m=''4121260''>poor</span> <span m=''4121540''>man''s</span> <span m=''4121830''>random</span>
  <span m=''4122899''>number</span> <span m=''4123170''>generator,</span> <span m=''4124060''>so</span>
  <span m=''4124330''>basically</span> <span m=''4124700''>I''m</span> <span m=''4124920''>adding</span>
  <span m=''4131109''>number</span> <span m=''4131450''>in here</span> <span m=''4131590''>and</span>
  <span m=''4131890''>multiplying</span> <span m=''4132319''>this,</span> <span m=''4135109''>and</span>
  <span m=''4135380''>then</span> <span m=''4135540''>the</span> <span m=''4135630''>masking</span>
  <span m=''4136229''>these</span> <span m=''4137529''>to</span> <span m=''4137700''>get</span>
  <span m=''4137910''>the</span> <span m=''4138040''>right</span> <span m=''4138140''>[UNINTELLIGIBLE]</span>
  <span m=''4139290''>so</span> <span m=''4139430''>I</span> <span m=''4139500''>get</span>
  <span m=''4139680''>within</span> <span m=''4139899''>that</span> <span m=''4140859''>set
  in</span> <span m=''4141189''>here.</span> <span m=''4141850''>And</span> <span
  m=''4142330''>then</span> <span m=''4142479''>I</span> <span m=''4142569''>just</span>
  <span m=''4142750''>access</span> <span m=''4143100''>data,</span> <span m=''4143410''>so</span>
  <span m=''4143580''>I''m</span> <span m=''4143779''>getting</span> <span m=''4144040''>[UNINTELLIGIBLE].</span>
  <span m=''4144490''>So</span> <span m=''4144590''>I</span> <span m=''4144670''>get</span>
  <span m=''4144870''>a</span> <span m=''4144930''>number</span> <span m=''4145260''>like</span>
  <span m=''4145479''>this,</span> <span m=''4145770''>and</span> <span m=''4145899''>this</span>
  <span m=''4146060''>jump</span> <span m=''4146300''>up</span> <span m=''4146470''>here,</span>
  <span m=''4146670''>and then</span> <span m=''4146870''>I</span> <span m=''4146899''>had</span>
  <span m=''4147050''>this</span> <span m=''4147200''>kind</span> <span m=''4147340''>of</span>
  <span m=''4147470''>behavior.</span> </p><p><span m=''4149620''>This</span> <span
  m=''4149830''>is</span> <span m=''4149950''>a lot</span> <span m=''4150140''>more</span>
  <span m=''4150250''>complicated.</span> <span m=''4150750''>I need to</span> <span
  m=''4150890''>figure out</span> <span m=''4150979''>what the hell</span> <span m=''4151180''>is</span>
  <span m=''4151399''>going</span> <span m=''4151640''>on in</span> <span m=''4151800''>here,</span>
  <span m=''4152479''>so</span> <span m=''4152640''>I</span> <span m=''4152779''>said,</span>
  <span m=''4152970''>OK,</span> <span m=''4153180''>let''s</span> <span m=''4153410''>now</span>
  <span m=''4153540''>look</span> <span m=''4153770''>at</span> <span m=''4153859''>performance</span>
  <span m=''4154350''>counters.</span> <span m=''4155729''>I</span> <span m=''4156010''>look</span>
  <span m=''4156180''>at</span> <span m=''4156290''>L1</span> <span m=''4156640''>cache</span>
  <span m=''4156960''>miss.</span> <span m=''4157340''>OK,</span> <span m=''4158109''>up</span>
  <span m=''4158300''>to</span> <span m=''4158410''>32K,</span> <span m=''4159109''>I</span>
  <span m=''4159189''>have</span> <span m=''4159880''>no</span> <span m=''4160040''>cache</span>
  <span m=''4160319''>misses.</span> <span m=''4160620''>Boom,</span> <span m=''4161100''>cache
  misses</span> <span m=''4161560''>jump up.</span> <span m=''4162694''>Perfect.</span>
  </p><p><span m=''4163189''>And</span> <span m=''4163370''>I</span> <span m=''4163420''>have</span>
  <span m=''4163859''>this</span> <span m=''4164399''>little bit</span> <span m=''4164609''>of
  a kink</span> <span m=''4164800''>in here,</span> <span m=''4165279''>this</span>
  <span m=''4165649''>beautiful</span> <span m=''4166380''>describes</span> <span
  m=''4167200''>because</span> <span m=''4167500''>I</span> <span m=''4167620''>have</span>
  <span m=''4167700''>32K</span> <span m=''4168930''>L1</span> <span m=''4169109''>cache,</span>
  <span m=''4169790''>and</span> <span m=''4170010''>until</span> <span m=''4170310''>then,</span>
  <span m=''4170580''>I</span> <span m=''4170670''>have</span> <span m=''4170859''>no</span>
  <span m=''4171160''>things,</span> <span m=''4171450''>and</span> <span m=''4171590''>then</span>
  <span m=''4171750''>when</span> <span m=''4171939''>the</span> <span m=''4172120''>cache</span>
  <span m=''4172450''>start</span> <span m=''4172569''>missing,</span> <span m=''4172880''>I''m</span>
  <span m=''4172990''>jumping</span> <span m=''4173300''>up.</span> <span m=''4174149''>Perfect.</span>
  <span m=''4174750''>I</span> <span m=''4174840''>got</span> <span m=''4175010''>that</span>
  <span m=''4175109''>description</span> <span m=''4175384''>here.</span> </p><p><span
  m=''4176550''>Then I look</span> <span m=''4176700''>at my</span> <span m=''4176859''>L2</span>
  <span m=''4177109''>cache</span> <span m=''4177319''>misses.</span> <span m=''4178779''>This</span>
  <span m=''4178979''>is,</span> <span m=''4179200''>I</span> <span m=''4179350''>think,</span>
  <span m=''4179490''>the</span> <span m=''4179960''>L2</span> <span m=''4180235''>cache</span>
  <span m=''4180510''>in</span> <span m=''4181010''>this</span> <span m=''4181180''>machine</span>
  <span m=''4181470''>might</span> <span m=''4181649''>have</span> <span m=''4181830''>a
  little</span> <span m=''4182000''>bit</span> <span m=''4182160''>more</span> <span
  m=''4182290''>complex</span> <span m=''4182670''>[UNINTELLIGIBLE]</span> <span m=''4183340''>telling</span>
  <span m=''4183649''>us</span> <span m=''4184300''>because</span> <span m=''4184470''>this</span>
  <span m=''4184660''>is</span> <span m=''4184810''>not</span> <span m=''4185069''>going</span>
  <span m=''4185359''>like</span> <span m=''4185630''>here</span> <span m=''4185779''>had</span>
  <span m=''4185920''>jumping</span> <span m=''4186350''>up.</span> <span m=''4187450''>That''s
  a</span> <span m=''4188200''>256K</span> <span m=''4189370''>[UNINTELLIGIBLE]</span>
  <span m=''4189760''>get.</span> </p><p><span m=''4190240''>Is this</span> <span
  m=''4190460''>256?</span> <span m=''4190880''>Yeah.</span> <span m=''4191720''>[INAUDIBLE]</span>
  <span m=''4192580''>250</span> <span m=''4193069''>is</span> <span m=''4193210''>[UNINTELLIGIBLE]</span>
  <span m=''4193760''>these</span> <span m=''4193939''>things.</span> <span m=''4194130''>OK,</span>
  <span m=''4194480''>so we</span> <span m=''4194600''>have</span> <span m=''4196270''>32</span>
  <span m=''4196770''>256</span> <span m=''4197590''>2L</span> <span m=''4197680''>megabytes</span>
  <span m=''4198160''>in here.</span> <span m=''4198920''>Even</span> <span m=''4199300''>if</span>
  <span m=''4199490''>you</span> <span m=''4199810''>have</span> <span m=''4199980''>256</span>
  <span m=''4200650''>in</span> <span m=''4200750''>here--</span> </p><p><span m=''4203034''>AUDIENCE:
  [INAUDIBLE]</span> </p><p><span m=''4206506''>PROFESSOR: Hm?</span> </p><p><span
  m=''4207002''>AUDIENCE: Should it</span> <span m=''4207498''>be</span> <span m=''4207994''>256
  or</span> <span m=''4209000''>32--</span> </p><p><span m=''4209386''>PROFESSOR:
  [UNINTELLIGIBLE]</span> <span m=''4210670''>because</span> <span m=''4210880''>everything''s</span>
  <span m=''4211410''>backed</span> <span m=''4211630''>up,</span> <span m=''4212110''>it''s</span>
  <span m=''4212200''>hierarchy</span> <span m=''4212380''>[UNINTELLIGIBLE],</span>
  <span m=''4212600''>so it''s</span> <span m=''4212760''>not</span> <span m=''4212920''>added</span>
  <span m=''4213140''>to,</span> <span m=''4213520''>it''s not</span> <span m=''4213650''>next</span>
  <span m=''4213880''>to</span> <span m=''4213940''>each</span> <span m=''4214090''>other,</span>
  <span m=''4215140''>because</span> <span m=''4215320''>at</span> <span m=''4215500''>this</span>
  <span m=''4215680''>point,</span> <span m=''4216110''>L1</span> <span m=''4216220''>is</span>
  <span m=''4216330''>now</span> <span m=''4216470''>useless.</span> <span m=''4216820''>It''ll</span>
  <span m=''4216930''>run</span> <span m=''4217150''>everything</span> <span m=''4217560''>is</span>
  <span m=''4217650''>just</span> <span m=''4217860''>going</span> <span m=''4218060''>to</span>
  <span m=''4218320''>L2,</span> <span m=''4219010''>so</span> <span m=''4219180''>L2</span>
  <span m=''4219440''>is</span> <span m=''4219580''>the</span> <span m=''4219660''>one</span>
  <span m=''4219780''>who</span> <span m=''4219950''>was</span> <span m=''4220510''>serving</span>
  <span m=''4220910''>it.</span> <span m=''4224800''>Come</span> <span m=''4224970''>on.</span>
  <span m=''4229920''>So</span> <span m=''4230070''>what</span> <span m=''4230260''>happens</span>
  <span m=''4230580''>in</span> <span m=''4230830''>here,</span> <span m=''4231170''>this</span>
  <span m=''4231380''>normally</span> <span m=''4231660''>should</span> <span m=''4231940''>start</span>
  <span m=''4232260''>jumping</span> <span m=''4232640''>here,</span> <span m=''4233010''>256,</span>
  <span m=''4233395''>but it</span> <span m=''4233680''>start</span> <span m=''4234040''>jumping</span>
  <span m=''4234360''>earlier,</span> <span m=''4235310''>so</span> <span m=''4236170''>there</span>
  <span m=''4236390''>might</span> <span m=''4236560''>be</span> <span m=''4236640''>some</span>
  <span m=''4236940''>other</span> <span m=''4237190''>interesting</span> <span m=''4237570''>thing</span>
  <span m=''4237730''>going</span> <span m=''4237980''>on</span> <span m=''4238170''>here.</span>
  <span m=''4240090''>It</span> <span m=''4240670''>might</span> <span m=''4240830''>be</span>
  <span m=''4240950''>interesting to</span> <span m=''4241305''>investigate.</span>
  </p><p><span m=''4242130''>So</span> <span m=''4242270''>this</span> <span m=''4242450''>is</span>
  <span m=''4242620''>OK,</span> <span m=''4242870''>so</span> <span m=''4242980''>still</span>
  <span m=''4243000''>I</span> <span m=''4243290''>am</span> <span m=''4243530''>pretty</span>
  <span m=''4243780''>close.</span> <span m=''4244290''>I</span> <span m=''4244530''>realized</span>
  <span m=''4244980''>this</span> <span m=''4245200''>jump</span> <span m=''4245900''>is</span>
  <span m=''4246100''>basically</span> <span m=''4246630''>because</span> <span m=''4246960''>of</span>
  <span m=''4248350''>L2</span> <span m=''4248740''>happen,</span> <span m=''4249020''>this</span>
  <span m=''4249190''>jump</span> <span m=''4249430''>in</span> <span m=''4249580''>here.</span>
  <span m=''4249860''>L2</span> <span m=''4250050''>start</span> <span m=''4250160''>missing.</span>
  <span m=''4251174''>Then</span> <span m=''4251576''>I look</span> <span m=''4251980''>at</span>
  <span m=''4252140''>L3.</span> <span m=''4253890''>It''s</span> <span m=''4254100''>here.</span>
  </p><p><span m=''4256540''>What''s</span> <span m=''4257040''>happening</span> <span
  m=''4257430''>here?</span> <span m=''4258940''>So</span> <span m=''4259130''>this</span>
  <span m=''4259280''>was</span> <span m=''4259420''>a</span> <span m=''4259480''>big</span>
  <span m=''4259720''>mystery</span> <span m=''4261290''>the</span> <span m=''4261470''>two</span>
  <span m=''4261650''>of</span> <span m=''4261780''>us</span> <span m=''4261930''>were</span>
  <span m=''4262640''>trying</span> <span m=''4262820''>to</span> <span m=''4262940''>debug</span>
  <span m=''4263520''>what</span> <span m=''4263730''>one</span> <span m=''4263970''>hour</span>
  <span m=''4264245''>ago.</span> <span m=''4266130''>Not</span> <span m=''4266350''>one</span>
  <span m=''4266520''>hour.</span> <span m=''4267440''>Class is</span> <span m=''4267940''>going.</span>
  <span m=''4268030''>Like two</span> <span m=''4268200''>hours</span> <span m=''4268630''>ago.</span>
  </p><p><span m=''4268710''>We was</span> <span m=''4268950''>trying to</span> <span
  m=''4269130''>figure out,</span> <span m=''4269405''>OK,</span> <span m=''4269680''>wait
  a</span> <span m=''4269820''>minute,</span> <span m=''4270010''>this</span> <span
  m=''4270140''>doesn''t</span> <span m=''4270350''>make</span> <span m=''4270540''>sense.</span>
  <span m=''4270750''>My</span> <span m=''4270910''>performance</span> <span m=''4271360''>is</span>
  <span m=''4271440''>here.</span> <span m=''4272000''>L3</span> <span m=''4273000''>should</span>
  <span m=''4273180''>be</span> <span m=''4273350''>just basically</span> <span m=''4273830''>a</span>
  <span m=''4273910''>nice</span> <span m=''4274170''>flattening</span> <span m=''4274470''>out
  here,</span> <span m=''4274770''>and</span> <span m=''4274950''>just</span> <span
  m=''4275110''>jumping.</span> <span m=''4276020''>It''s not</span> <span m=''4276180''>doing</span>
  <span m=''4276260''>that,</span> <span m=''4276470''>and we</span> <span m=''4276660''>are
  like</span> <span m=''4277090''>what''s</span> <span m=''4277450''>going</span>
  <span m=''4277730''>on</span> <span m=''4277920''>here.</span> </p><p><span m=''4278480''>So</span>
  <span m=''4278680''>then</span> <span m=''4279630''>we</span> <span m=''4279880''>were</span>
  <span m=''4280250''>scratching</span> <span m=''4280680''>our</span> <span m=''4280810''>heads,</span>
  <span m=''4281110''>and</span> <span m=''4281220''>we</span> <span m=''4281310''>start</span>
  <span m=''4281640''>looking.</span> <span m=''4281940''>I say,</span> <span m=''4282170''>ha,</span>
  <span m=''4282510''>there were</span> <span m=''4282720''>other</span> <span m=''4282970''>things</span>
  <span m=''4283210''>going</span> <span m=''4283460''>on.</span> <span m=''4283630''>We
  looked</span> <span m=''4284020''>at</span> <span m=''4284410''>this</span> <span
  m=''4284620''>thing</span> <span m=''4284790''>called</span> <span m=''4284980''>TLB.</span>
  <span m=''4286670''>Let</span> <span m=''4286810''>me</span> <span m=''4286940''>tell</span>
  <span m=''4287070''>you</span> <span m=''4287190''>what</span> <span m=''4287350''>TLB</span>
  <span m=''4287670''>is.</span> <span m=''4288110''>What</span> <span m=''4288280''>we</span>
  <span m=''4288400''>realize</span> <span m=''4288760''>is at</span> <span m=''4289030''>this</span>
  <span m=''4289260''>point,</span> <span m=''4289530''>we are</span> <span m=''4289790''>[?
  seeing ?]</span> <span m=''4289990''>TLB</span> <span m=''4290360''>misses.</span>
  </p><p><span m=''4292200''>How</span> <span m=''4292360''>many</span> <span m=''4292650''>people</span>
  <span m=''4292890''>know</span> <span m=''4293010''>what</span> <span m=''4293180''>a</span>
  <span m=''4293300''>TLB</span> <span m=''4293725''>is?</span> <span m=''4295900''>OK,</span>
  <span m=''4296100''>good,</span> <span m=''4296520''>so</span> <span m=''4297070''>let</span>
  <span m=''4297330''>me</span> <span m=''4297590''>spend</span> <span m=''4298090''>the</span>
  <span m=''4298560''>last</span> <span m=''4298810''>couple</span> <span m=''4299020''>of</span>
  <span m=''4299090''>minutes</span> <span m=''4299280''>explaining</span> <span m=''4299690''>what
  a</span> <span m=''4299860''>TLB</span> <span m=''4300220''>this,</span> <span m=''4300460''>and</span>
  <span m=''4300580''>that</span> <span m=''4300770''>kind</span> <span m=''4300960''>of</span>
  <span m=''4301030''>explain</span> <span m=''4301360''>what''s</span> <span m=''4301700''>going</span>
  <span m=''4301920''>on</span> <span m=''4302090''>in</span> <span m=''4302170''>this</span>
  <span m=''4302340''>graph.</span> <span m=''4303390''>So</span> <span m=''4304950''>TLB</span>
  <span m=''4305620''>means--</span> <span m=''4308080''>Normally,</span> <span m=''4308900''>data</span>
  <span m=''4309420''>is</span> <span m=''4309540''>stored</span> <span m=''4311390''>in</span>
  <span m=''4311920''>memory</span> <span m=''4313150''>using</span> <span m=''4313650''>real</span>
  <span m=''4313760''>addresses.</span> <span m=''4314910''>That</span> <span m=''4315130''>means</span>
  <span m=''4315340''>there''s</span> <span m=''4315490''>a</span> <span m=''4315550''>memory</span>
  <span m=''4315840''>size</span> <span m=''4316120''>in here,</span> <span m=''4316490''>there''s</span>
  <span m=''4316890''>an</span> <span m=''4316970''>address</span> <span m=''4317370''>format,</span>
  <span m=''4317750''>there''s</span> <span m=''4317910''>certain</span> <span m=''4318320''>[UNINTELLIGIBLE].</span>
  </p><p><span m=''4319140''>And</span> <span m=''4319410''>then</span> <span m=''4319900''>the</span>
  <span m=''4319990''>program</span> <span m=''4320500''>for</span> <span m=''4320750''>it
  use</span> <span m=''4321030''>virtual</span> <span m=''4321390''>memory.</span>
  <span m=''4322400''>That</span> <span m=''4322620''>means</span> <span m=''4322880''>programs</span>
  <span m=''4323410''>want</span> <span m=''4323700''>to</span> <span m=''4323960''>feel</span>
  <span m=''4324340''>like</span> <span m=''4324540''>they</span> <span m=''4324600''>have</span>
  <span m=''4324680''>a</span> <span m=''4324770''>lot</span> <span m=''4325080''>more</span>
  <span m=''4325210''>memory</span> <span m=''4325460''>than</span> <span m=''4325650''>actual,</span>
  <span m=''4326150''>physical</span> <span m=''4326520''>memory</span> <span m=''4326710''>available.</span>
  <span m=''4327540''>So</span> <span m=''4327680''>what</span> <span m=''4327800''>happens</span>
  <span m=''4328060''>is</span> <span m=''4328120''>you</span> <span m=''4328220''>have</span>
  <span m=''4328330''>virtual</span> <span m=''4328650''>memory</span> <span m=''4328940''>address,</span>
  <span m=''4329540''>but</span> <span m=''4330330''>somebody</span> <span m=''4330820''>has
  to</span> <span m=''4330900''>map</span> <span m=''4331180''>virtual</span> <span
  m=''4331410''>memory</span> <span m=''4331740''>to</span> <span m=''4331920''>physical</span>
  <span m=''4332140''>memory.</span> </p><p><span m=''4333260''>So</span> <span m=''4333440''>the
  way</span> <span m=''4333650''>it work</span> <span m=''4334120''>is</span> <span
  m=''4334240''>there''s</span> <span m=''4334470''>a thing</span> <span m=''4334590''>called</span>
  <span m=''4334840''>translation</span> <span m=''4336260''>lookaside</span> <span
  m=''4336870''>buffer,</span> <span m=''4337420''>TLB,</span> <span m=''4338600''>that</span>
  <span m=''4338950''>says</span> <span m=''4339560''>if</span> <span m=''4339720''>you</span>
  <span m=''4339890''>give</span> <span m=''4340120''>this</span> <span m=''4340340''>virtual</span>
  <span m=''4340690''>address,</span> <span m=''4341090''>here''s</span> <span m=''4341200''>the</span>
  <span m=''4341320''>right</span> <span m=''4341470''>physical</span> <span m=''4341660''>address.</span>
  <span m=''4342600''>So</span> <span m=''4342770''>of</span> <span m=''4342900''>course</span>
  <span m=''4343120''>you</span> <span m=''4343270''>can''t</span> <span m=''4343560''>do
  it</span> <span m=''4343770''>for</span> <span m=''4344330''>each</span> <span m=''4344620''>address</span>
  <span m=''4345020''>by</span> <span m=''4345140''>address.</span> <span m=''4345590''>What</span>
  <span m=''4345820''>you</span> <span m=''4346020''>have</span> <span m=''4346210''>is</span>
  <span m=''4346300''>you</span> <span m=''4346420''>have</span> <span m=''4346540''>4K</span>
  <span m=''4347400''>pages,</span> <span m=''4349110''>so</span> <span m=''4349380''>the</span>
  <span m=''4349500''>address</span> <span m=''4349950''>space</span> <span m=''4350310''>is</span>
  <span m=''4350880''>broken</span> <span m=''4351300''>down</span> <span m=''4351550''>into</span>
  <span m=''4351750''>4K</span> <span m=''4352340''>pages.</span> <span m=''4355410''>Each</span>
  <span m=''4355850''>page</span> <span m=''4356600''>will</span> <span m=''4356850''>have</span>
  <span m=''4357100''>an</span> <span m=''4357150''>entry</span> <span m=''4358100''>in</span>
  <span m=''4358280''>this</span> <span m=''4358520''>TLB,</span> <span m=''4360010''>saying</span>
  <span m=''4360800''>if</span> <span m=''4361000''>you</span> <span m=''4361280''>get</span>
  <span m=''4362140''>this</span> <span m=''4362470''>virtual</span> <span m=''4362790''>address,</span>
  <span m=''4363120''>here''s</span> <span m=''4363360''>the</span> <span m=''4363590''>right</span>
  <span m=''4363710''>physical</span> <span m=''4363980''>address.</span> </p><p><span
  m=''4366270''>So</span> <span m=''4366450''>normally</span> <span m=''4366800''>what</span>
  <span m=''4366960''>happens</span> <span m=''4367290''>is</span> <span m=''4367430''>when
  the</span> <span m=''4367640''>operating</span> <span m=''4368050''>system</span>
  <span m=''4368390''>they</span> <span m=''4368530''>created</span> <span m=''4368840''>this</span>
  <span m=''4369010''>large</span> <span m=''4369300''>table,</span> <span m=''4369940''>for</span>
  <span m=''4370260''>every</span> <span m=''4371480''>place</span> <span m=''4371900''>in</span>
  <span m=''4372030''>memory,</span> <span m=''4372320''>you</span> <span m=''4372660''>use</span>
  <span m=''4373030''>this</span> <span m=''4373180''>table,</span> <span m=''4373450''>and</span>
  <span m=''4373490''>it</span> <span m=''4373800''>loads</span> <span m=''4374130''>into</span>
  <span m=''4374340''>memory.</span> <span m=''4376040''>Then</span> <span m=''4376330''>the</span>
  <span m=''4376400''>hardware</span> <span m=''4377050''>will</span> <span m=''4377240''>fetch</span>
  <span m=''4377920''>and</span> <span m=''4378150''>cache</span> <span m=''4378570''>some</span>
  <span m=''4378870''>of</span> <span m=''4378980''>those</span> <span m=''4379220''>entries</span>
  <span m=''4379600''>in</span> <span m=''4379730''>this</span> <span m=''4379910''>TLB</span>
  <span m=''4382360''>cache</span> <span m=''4382680''>in there.</span> <span m=''4383820''>So</span>
  <span m=''4384160''>normally</span> <span m=''4384570''>what</span> <span m=''4384760''>happens</span>
  <span m=''4385190''>is</span> <span m=''4385540''>in</span> <span m=''4385855''>here,</span>
  <span m=''4386996''>it</span> <span m=''4387410''>caches</span> <span m=''4387940''>52L</span>
  <span m=''4388300''>entries.</span> <span m=''4389680''>It</span> <span m=''4389800''>can</span>
  <span m=''4390070''>keep</span> <span m=''4390330''>52L</span> <span m=''4390760''>entries</span>
  <span m=''4391350''>to</span> <span m=''4391450''>52L</span> <span m=''4391960''>pages,</span>
  <span m=''4392620''>saying</span> <span m=''4392820''>here''s the</span> <span m=''4392940''>mapping.</span>
  </p><p><span m=''4394560''>The</span> <span m=''4394690''>problem</span> <span m=''4395200''>with</span>
  <span m=''4395410''>52L</span> <span m=''4395990''>pages</span> <span m=''4396510''>is</span>
  <span m=''4396970''>in a</span> <span m=''4397220''>4K</span> <span m=''4397680''>byte</span>
  <span m=''4399240''>page</span> <span m=''4399490''>size,</span> <span m=''4399810''>52L</span>
  <span m=''4400240''>pages</span> <span m=''4400600''>can</span> <span m=''4400790''>only</span>
  <span m=''4401360''>hold</span> <span m=''4401615''>two</span> <span m=''4401870''>megabytes</span>
  <span m=''4402310''>of</span> <span m=''4402420''>data.</span> <span m=''4404730''>If
  you''re</span> <span m=''4404930''>accessing</span> <span m=''4405320''>more</span>
  <span m=''4405520''>than</span> <span m=''4405680''>two</span> <span m=''4405820''>megabytes</span>
  <span m=''4406610''>of</span> <span m=''4406940''>data,</span> <span m=''4407530''>you</span>
  <span m=''4407640''>have</span> <span m=''4407770''>to</span> <span m=''4407840''>go</span>
  <span m=''4408000''>more</span> <span m=''4408160''>than</span> <span m=''4408330''>52L</span>
  <span m=''4408800''>pages,</span> <span m=''4409200''>and</span> <span m=''4409350''>at</span>
  <span m=''4409460''>that</span> <span m=''4409680''>point,</span> <span m=''4409930''>that</span>
  <span m=''4410100''>mapping</span> <span m=''4410490''>is</span> <span m=''4410610''>not</span>
  <span m=''4410830''>in</span> <span m=''4411010''>the</span> <span m=''4411090''>TLB,</span>
  <span m=''4412820''>and</span> <span m=''4412990''>that</span> <span m=''4413180''>means</span>
  <span m=''4413420''>that</span> <span m=''4413600''>you</span> <span m=''4413690''>have</span>
  <span m=''4413770''>to</span> <span m=''4413850''>go</span> <span m=''4414010''>do
  a</span> <span m=''4414120''>mapping</span> <span m=''4414450''>translation.</span>
  <span m=''4415640''>The</span> <span m=''4415760''>problem</span> <span m=''4416300''>for</span>
  <span m=''4416420''>this</span> <span m=''4416730''>is</span> <span m=''4417230''>these</span>
  <span m=''4417480''>4K</span> <span m=''4417850''>pages</span> <span m=''4418490''>is
  a</span> <span m=''4418760''>very</span> <span m=''4419670''>ancient</span> <span
  m=''4420100''>artifact.</span> </p><p><span m=''4422440''>There''s</span> <span
  m=''4422950''>the</span> <span m=''4423060''>new</span> <span m=''4423360''>machines,</span>
  <span m=''4423850''>you</span> <span m=''4423980''>can</span> <span m=''4424190''>I</span>
  <span m=''4424340''>ask</span> <span m=''4424510''>for what</span> <span m=''4424820''>we
  call</span> <span m=''4425480''>large-pages</span> <span m=''4426020''>or</span>
  <span m=''4426150''>super,</span> <span m=''4426450''>but</span> <span m=''4426560''>you</span>
  <span m=''4426710''>can</span> <span m=''4426850''>ask</span> <span m=''4427030''>for</span>
  <span m=''4427430''>2-megabyte</span> <span m=''4427960''>or 4-megabyte</span> <span
  m=''4428670''>pages.</span> <span m=''4429620''>If</span> <span m=''4429790''>you</span>
  <span m=''4429910''>ask</span> <span m=''4430200''>for super-pages,</span> <span
  m=''4431360''>then</span> <span m=''4431550''>of</span> <span m=''4431680''>course,</span>
  <span m=''4432210''>52L</span> <span m=''4432580''>entry''s</span> <span m=''4433220''>good</span>
  <span m=''4433280''>enough.</span> <span m=''4434710''>It</span> <span m=''4434890''>can</span>
  <span m=''4435210''>hold</span> <span m=''4435420''>enough</span> <span m=''4435860''>things</span>
  <span m=''4437380''>not to</span> <span m=''4437630''>have</span> <span m=''4437830''>TLB</span>
  <span m=''4438150''>miss,</span> <span m=''4438440''>at least</span> <span m=''4438550''>while</span>
  <span m=''4438740''>you''re in</span> <span m=''4438940''>the</span> <span m=''4439130''>cache.</span>
  </p><p><span m=''4439480''>But</span> <span m=''4440060''>since</span> <span m=''4440310''>Linux,</span>
  <span m=''4440740''>without</span> <span m=''4441050''>doing</span> <span m=''4441220''>anything,</span>
  <span m=''4441570''>only</span> <span m=''4441780''>asks</span> <span m=''4441980''>for</span>
  <span m=''4442180''>4K</span> <span m=''4442520''>pages,</span> <span m=''4442680''>before</span>
  <span m=''4443060''>you</span> <span m=''4443170''>run</span> <span m=''4443350''>out</span>
  <span m=''4443550''>of</span> <span m=''4444200''>your</span> <span m=''4444710''>L3</span>
  <span m=''4445090''>cache,</span> <span m=''4445700''>you</span> <span m=''4445830''>run</span>
  <span m=''4445980''>out</span> <span m=''4446140''>of</span> <span m=''4446230''>the</span>
  <span m=''4446660''>TLB</span> <span m=''4447000''>table.</span> <span m=''4448140''>And</span>
  <span m=''4448510''>it</span> <span m=''4448660''>has to</span> <span m=''4448840''>start</span>
  <span m=''4450180''>fetching</span> <span m=''4450970''>and</span> <span m=''4451130''>[UNINTELLIGIBLE]</span>
  <span m=''4451650''>data</span> <span m=''4452030''>table,</span> <span m=''4452700''>that</span>
  <span m=''4452880''>means</span> <span m=''4453050''>you</span> <span m=''4453200''>had
  to</span> <span m=''4453350''>actually</span> <span m=''4453520''>fetch</span> <span
  m=''4453870''>the</span> <span m=''4453980''>table</span> <span m=''4454330''>entries,</span>
  <span m=''4455050''>and</span> <span m=''4455200''>so</span> <span m=''4455310''>you</span>
  <span m=''4455490''>have to do</span> <span m=''4455670''>more</span> <span m=''4455930''>fetchings.</span>
  <span m=''4456410''>So</span> <span m=''4456510''>that</span> <span m=''4456700''>is</span>
  <span m=''4456880''>why</span> <span m=''4457010''>this</span> <span m=''4457190''>is</span>
  <span m=''4457310''>even</span> <span m=''4457590''>running</span> <span m=''4457950''>higher,</span>
  <span m=''4458350''>because</span> <span m=''4458740''>it''s</span> <span m=''4458880''>trying</span>
  <span m=''4459040''>to</span> <span m=''4459110''>fetch</span> <span m=''4459370''>this</span>
  <span m=''4459760''>TLB</span> <span m=''4459980''>entry</span> <span m=''4460440''>and</span>
  <span m=''4460560''>stuff</span> <span m=''4460820''>like</span> <span m=''4461000''>that.</span>
  <span m=''4462370''>Question?</span> </p><p><span m=''4462830''>AUDIENCE: Is there</span>
  <span m=''4463317''>a way to</span> <span m=''4463804''>then</span> <span m=''4464291''>actually</span>
  <span m=''4464778''>fiddle with</span> <span m=''4465265''>the TLB</span> <span
  m=''4466726''>so that</span> <span m=''4467213''>you have to</span> <span m=''4467700''>fit
  your</span> <span m=''4468187''>pages</span> <span m=''4468674''>rather than--</span>
  </p><p><span m=''4469170''>PROFESSOR: So</span> <span m=''4469720''>in</span> <span
  m=''4470030''>allocation,</span> <span m=''4470640''>you</span> <span m=''4470800''>can</span>
  <span m=''4470950''>ask</span> <span m=''4471230''>for</span> <span m=''4471350''>super-pages</span>
  <span m=''4472030''>or</span> <span m=''4472450''>large-pages.</span> <span m=''4474400''>But</span>
  <span m=''4474640''>in</span> <span m=''4474760''>Linux,</span> <span m=''4475920''>normally</span>
  <span m=''4476195''>just</span> <span m=''4476470''>ask for</span> <span m=''4476690''>4K</span>
  <span m=''4477220''>pages,</span> <span m=''4478010''>so</span> <span m=''4478340''>that
  the</span> <span m=''4478520''>operating</span> <span m=''4478860''>systems</span>
  <span m=''4479260''>haven''t</span> <span m=''4479540''>kind</span> <span m=''4479730''>of</span>
  <span m=''4479820''>caught</span> <span m=''4480180''>up</span> <span m=''4480390''>to</span>
  <span m=''4480880''>the</span> <span m=''4481070''>current</span> <span m=''4481330''>hardware.</span>
  <span m=''4482050''>And</span> <span m=''4482210''>this</span> <span m=''4482390''>is</span>
  <span m=''4482540''>was</span> <span m=''4482570''>built</span> <span m=''4483000''>[UNINTELLIGIBLE]</span>
  <span m=''4483560''>doesn''t</span> <span m=''4483750''>make</span> <span m=''4483970''>sense</span>
  <span m=''4484410''>TLB</span> <span m=''4484730''>to</span> <span m=''4485005''>run</span>
  <span m=''4485280''>out</span> <span m=''4485590''>before</span> <span m=''4485860''>you
  run out</span> <span m=''4486220''>the</span> <span m=''4486300''>cache.</span>
  <span m=''4487110''>I</span> <span m=''4487180''>mean,</span> <span m=''4487300''>that''s</span>
  <span m=''4487490''>kind</span> <span m=''4487730''>of</span> <span m=''4488620''>mismatch</span>
  <span m=''4489320''>in</span> <span m=''4489410''>here.</span> <span m=''4489590''>But</span>
  <span m=''4490170''>it''s</span> <span m=''4490380''>built</span> <span m=''4490720''>assuming</span>
  <span m=''4491060''>you''ll</span> <span m=''4491230''>get</span> <span m=''4491490''>large-pages,</span>
  <span m=''4492170''>but</span> <span m=''4492320''>if</span> <span m=''4492400''>you</span>
  <span m=''4492480''>don''t,</span> <span m=''4493380''>you''re</span> <span m=''4493570''>going
  to run out</span> <span m=''4493670''>of the</span> <span m=''4494070''>TLB</span>
  <span m=''4494420''>in there.</span> </p><p><span m=''4494780''>So</span> <span
  m=''4494920''>this</span> <span m=''4495110''>is</span> <span m=''4495660''>why</span>
  <span m=''4496030''>sometimes</span> <span m=''4496400''>performance</span> <span
  m=''4497310''>engineering</span> <span m=''4498160''>is</span> <span m=''4498440''>interesting,</span>
  <span m=''4499050''>exciting,</span> <span m=''4499560''>and</span> <span m=''4499610''>frustrating,</span>
  <span m=''4500780''>because</span> <span m=''4501300''>you</span> <span m=''4501470''>assume</span>
  <span m=''4501900''>you</span> <span m=''4502030''>know</span> <span m=''4502150''>where
  the hell</span> <span m=''4502330''>this</span> <span m=''4502650''>is</span> <span
  m=''4502790''>going.</span> <span m=''4503210''>You</span> <span m=''4503360''>assume</span>
  <span m=''4503510''>this is</span> <span m=''4503750''>going</span> <span m=''4503940''>to</span>
  <span m=''4503980''>go</span> <span m=''4504170''>here</span> <span m=''4504390''>and</span>
  <span m=''4504530''>that,</span> <span m=''4504930''>and</span> <span m=''4505130''>suddenly,</span>
  <span m=''4505460''>this</span> <span m=''4505710''>miss</span> <span m=''4505980''>shows</span>
  <span m=''4506280''>up,</span> <span m=''4506820''>and</span> <span m=''4507030''>so</span>
  <span m=''4507140''>we</span> <span m=''4507360''>have</span> <span m=''4507510''>to</span>
  <span m=''4507670''>scratch</span> <span m=''4507860''>our</span> <span m=''4507890''>heads.</span>
  <span m=''4508240''>And</span> <span m=''4508370''>luckily,</span> <span m=''4509190''>we</span>
  <span m=''4509400''>found</span> <span m=''4510150''>what''s</span> <span m=''4510410''>going</span>
  <span m=''4510670''>on,</span> <span m=''4510790''>but</span> <span m=''4511135''>we</span>
  <span m=''4511480''>could</span> <span m=''4511700''>have</span> <span m=''4511820''>spent</span>
  <span m=''4512670''>hours or</span> <span m=''4512860''>days</span> <span m=''4513260''>trying</span>
  <span m=''4513580''>to</span> <span m=''4513640''>figure</span> <span m=''4513850''>out</span>
  <span m=''4513980''>what''s</span> <span m=''4514200''>going</span> <span m=''4514420''>on</span>
  <span m=''4514560''>here</span> <span m=''4515286''>because</span> <span m=''4515720''>this</span>
  <span m=''4516130''>is</span> <span m=''4516230''>one</span> <span m=''4516520''>[UNINTELLIGIBLE]</span>
  <span m=''4518480''>say</span> <span m=''4518740''>OK,</span> <span m=''4518930''>let''s
  try</span> <span m=''4518980''>TLB,</span> <span m=''4519140''>and it</span> <span
  m=''4519200''>worked.</span> </p><p><span m=''4519900''>That</span> <span m=''4520040''>was</span>
  <span m=''4520230''>really</span> <span m=''4520310''>good,</span> <span m=''4520530''>but</span>
  <span m=''4521850''>I</span> <span m=''4522130''>have,</span> <span m=''4522670''>many</span>
  <span m=''4522910''>cases,</span> <span m=''4523210''>spent</span> <span m=''4523640''>days</span>
  <span m=''4523870''>trying</span> <span m=''4524090''>to</span> <span m=''4524150''>figure</span>
  <span m=''4524470''>out</span> <span m=''4524730''>why</span> <span m=''4524960''>something</span>
  <span m=''4525260''>is</span> <span m=''4525390''>going</span> <span m=''4525670''>on</span>
  <span m=''4526750''>because</span> <span m=''4527450''>performance</span> <span
  m=''4528010''>is</span> <span m=''4528280''>kind</span> <span m=''4528590''>of</span>
  <span m=''4528710''>a</span> <span m=''4529090''>[UNINTELLIGIBLE]</span> <span m=''4529630''>of</span>
  <span m=''4529700''>everything.</span> <span m=''4530210''>There''s</span> <span
  m=''4530440''>no</span> <span m=''4530580''>nice</span> <span m=''4530890''>abstractions</span>
  <span m=''4531580''>and</span> <span m=''4531750''>stuff</span> <span m=''4532020''>like</span>
  <span m=''4532180''>that.</span> <span m=''4532300''>If</span> <span m=''4532400''>you</span>
  <span m=''4532500''>think</span> <span m=''4532770''>abstraction</span> <span m=''4533400''>wise,</span>
  <span m=''4534610''>somewhere</span> <span m=''4534990''>outside</span> <span m=''4535540''>the</span>
  <span m=''4535590''>abstraction,</span> <span m=''4536100''>that''s</span> <span
  m=''4536300''>going</span> <span m=''4536400''>to</span> <span m=''4536500''>kill</span>
  <span m=''4536670''>you.</span> </p><p><span m=''4537580''>So</span> <span m=''4537700''>that</span>
  <span m=''4537910''>is</span> <span m=''4538040''>why</span> <span m=''4538680''>it</span>
  <span m=''4538810''>can</span> <span m=''4538990''>be</span> <span m=''4539090''>interesting,</span>
  <span m=''4539290''>because</span> <span m=''4539330''>you have</span> <span m=''4539750''>to
  know</span> <span m=''4540890''>everything.</span> <span m=''4541870''>And</span>
  <span m=''4542420''>the</span> <span m=''4542480''>fun</span> <span m=''4542740''>thing</span>
  <span m=''4542980''>is,</span> <span m=''4543180''>once</span> <span m=''4543740''>you</span>
  <span m=''4543820''>understand</span> <span m=''4544220''>performance,</span> <span
  m=''4544720''>you</span> <span m=''4545030''>basically</span> <span m=''4545450''>understand</span>
  <span m=''4546860''>end-to-end,</span> <span m=''4547070''>soup to nuts,</span>
  <span m=''4547730''>what''s</span> <span m=''4547930''>going</span> <span m=''4548170''>on.</span>
  <span m=''4549160''>OK,</span> <span m=''4549530''>with</span> <span m=''4550000''>that</span>
  <span m=''4550200''>encouraging</span> <span m=''4550730''>thought,</span> <span
  m=''4551920''>let''s see</span> <span m=''4552260''>how</span> <span m=''4552390''>you</span>
  <span m=''4552520''>guys</span> <span m=''4552740''>do</span> <span m=''4552900''>in</span>
  <span m=''4553690''>the</span> <span m=''4553880''>next</span> <span m=''4554060''>part
  of</span> <span m=''4554340''>project</span> <span m=''4554840''>two.</span> </p>'
uid: bbfc1162-6d8a-809b-d3cb-82ee5fbb41db
---
